{"version":3,"sources":["webpack:///webpack/bootstrap 78f88c2069b3213b7977","webpack:///external \"lodash\"","webpack:///external \"jquery\"","webpack:///external \"angular\"","webpack:///./vendor/flot/jquery.flot.js","webpack:///external \"moment\"","webpack:///external \"app/core/utils/kbn\"","webpack:///external \"app/core/core\"","webpack:////Users/bg/workspace/grafana-data/plugins/lightstep-grafana-plugin/node_modules/tinycolor2/tinycolor.js","webpack:///external \"app/plugins/sdk\"","webpack:///(webpack)/buildin/module.js","webpack:///./module.js","webpack:///./graph.js","webpack:///./vendor/flot/jquery.flot.selection.js","webpack:///./vendor/flot/jquery.flot.time.js","webpack:///./vendor/flot/jquery.flot.stack.js","webpack:///./vendor/flot/jquery.flot.stackpercent.js","webpack:///./vendor/flot/jquery.flot.fillbelow.js","webpack:///./vendor/flot/jquery.flot.crosshair.js","webpack:///./vendor/flot/jquery.flot.dashes.js","webpack:///./jquery.flot.events.js","webpack:////Users/bg/workspace/grafana-data/plugins/lightstep-grafana-plugin/node_modules/tether-drop/dist/js/drop.js","webpack:////Users/bg/workspace/grafana-data/plugins/lightstep-grafana-plugin/node_modules/tether/dist/js/tether.js","webpack:///external \"app/core/utils/ticks\"","webpack:///./graph_tooltip.js","webpack:///./threshold_manager.js","webpack:///./event_manager.js","webpack:///./colors.js","webpack:///./histogram.js","webpack:///./legend.js","webpack:///./series_overrides_ctrl.js","webpack:///./thresholds_form.js","webpack:///external \"app/core/core_module\"","webpack:///./template.js","webpack:///external \"app/core/config\"","webpack:///./data_processor.js","webpack:///external \"app/core/time_series2\"","webpack:///./axes_editor.js"],"names":["$","color","make","r","g","b","a","o","add","c","d","i","length","charAt","normalize","scale","f","toString","join","clamp","min","value","max","parseInt","clone","extract","elem","css","toLowerCase","parent","nodeName","get","parse","str","res","m","exec","parseFloat","name","trim","lookupColors","aqua","azure","beige","black","blue","brown","cyan","darkblue","darkcyan","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkviolet","fuchsia","gold","green","indigo","khaki","lightblue","lightcyan","lightgreen","lightgrey","lightpink","lightyellow","lime","magenta","maroon","navy","olive","orange","pink","purple","violet","red","silver","white","yellow","jQuery","hasOwnProperty","Object","prototype","fn","detach","each","parentNode","removeChild","Canvas","cls","container","element","children","document","createElement","className","direction","position","left","top","appendTo","getContext","window","G_vmlCanvasManager","initElement","Error","context","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","pixelRatio","resize","width","height","textContainer","text","_textCache","_textSizeCache","flotTextSizeCache","style","restore","save","clear","clearRect","render","cache","layerKey","call","layer","getTextLayer","layerCache","hide","styleKey","styleCache","key","positions","active","rendered","append","splice","show","classes","bottom","right","insertAfter","addClass","getTextInfo","font","angle","textStyle","info","variant","weight","size","lineHeight","family","html","outerWidth","outerHeight","addText","x","y","halign","valign","push","Math","round","removeText","Plot","placeholder","data_","options_","plugins","series","options","colors","legend","noColumns","labelFormatter","labelBoxBorderColor","margin","backgroundColor","backgroundOpacity","sorted","xaxis","mode","tickColor","transform","inverseTransform","autoscaleMargin","ticks","tickFormatter","labelWidth","labelHeight","reserveSpace","tickLength","alignTicksWithAxis","tickDecimals","tickSize","minTickSize","yaxis","xaxes","yaxes","points","radius","lineWidth","fill","fillColor","symbol","lines","steps","bars","barWidth","align","horizontal","zero","shadowSize","highlightColor","grid","aboveData","borderColor","labelMargin","eventSectionHeight","axisMargin","borderWidth","minBorderMargin","markings","markingsColor","markingsLineWidth","clickable","hoverable","autoHighlight","mouseActiveRadius","interaction","redrawOverlayInterval","hooks","surface","overlay","eventHolder","ctx","octx","plotOffset","plotWidth","plotHeight","processOptions","processRawData","processDatapoints","processOffset","drawBackground","drawSeries","draw","bindEvents","drawOverlay","shutdown","plot","setData","setupGrid","getPlaceholder","getCanvas","getPlotOffset","offset","getData","getAxes","concat","_","axis","n","getXAxes","getYAxes","c2p","canvasToAxisCoords","p2c","axisToCanvasCoords","getOptions","highlight","unhighlight","triggerRedrawOverlay","pointOffset","point","axisNumber","destroy","removeData","empty","highlights","initPlugins","parseOptions","setupCanvases","executeHooks","hook","args","apply","p","init","extend","opts","axisOptions","axisCount","fontSize","fontSizeDefault","replace","fontDefaults","noTicks","x2axis","y2axis","coloredAreas","coloredAreasColor","getOrCreateAxis","parseData","fillInSeriesOptions","processData","s","data","obj","coord","allAxes","grep","pos","used","x1","undefined","y1","axes","number","neededColors","maxIndex","sc","colorPool","colorPoolSize","variation","colori","v","topSentry","Number","POSITIVE_INFINITY","bottomSentry","NEGATIVE_INFINITY","fakeInfinity","MAX_VALUE","j","k","ps","val","format","updateAxis","datamin","datamax","datapoints","required","autoscale","defaultValue","pointsize","insertSteps","nullify","isNaN","Infinity","xmin","ymin","xmax","ymax","delta","find","remove","unbind","existing","mousemove","onMouseMove","bind","onMouseLeave","click","onClick","redrawTimeout","clearTimeout","setTransformationHelpers","identity","t","it","abs","measureTickLabels","maxWidth","floor","legacyStyles","label","allocateAxisBoxFirstPhase","lw","lh","isXAxis","padding","eventSectionPadding","innermost","outermost","first","found","box","allocateAxisBoxSecondPhase","adjustLayoutForThingsStickingOut","minMargin","margins","ceil","showGrid","axisOpts","setRange","allocatedAxes","setupTickGeneration","setTicks","snapRangeToTicks","drawAxisLabels","insertLegend","wideFactor","widen","sqrt","dec","log","LN10","maxDec","magn","pow","norm","scaledDecimals","tickGenerator","start","floorInBase","NaN","prev","factor","formatted","decimal","indexOf","precision","substr","isFunction","otherAxis","niceTicks","extraDec","ts","test","toFixed","oticks","drawGrid","extractRange","ranges","from","to","tmp","translate","fillStyle","getColorOrGradient","fillRect","bw","bc","xrange","yrange","xequal","yequal","subPixel","beginPath","strokeStyle","moveTo","lineTo","stroke","xoff","yoff","strokeRect","tick","drawSeriesLines","drawSeriesBars","drawSeriesPoints","plotLine","xoffset","yoffset","axisx","axisy","prevx","prevy","x2","y2","plotLineArea","areaOpen","ypos","segmentStart","segmentEnd","x1old","x2old","lineJoin","sw","PI","sin","cos","getFillStyle","plotPoints","shadow","arc","closePath","w","drawBar","barLeft","barRight","fillStyleCallback","drawLeft","drawRight","drawTop","drawBottom","plotBars","filloptions","seriesColor","fragments","entries","rowStarted","lf","sort","reverse","ascending","entry","table","div","prependTo","findNearbyItem","mouseX","mouseY","seriesFilter","maxDistance","smallestDistance","item","foundPoint","mx","my","maxx","maxy","dx","dy","dist","datapoint","slice","dataIndex","seriesIndex","e","triggerClickHoverEvent","isSelecting","eventname","event","canvasX","pageX","canvasY","pageY","ctrlKey","metaKey","h","auto","trigger","setTimeout","hi","drawBarHighlight","drawPointHighlight","indexOfHighlight","pointRadius","spec","defaultColor","gradient","createLinearGradient","l","co","brightness","opacity","addColorStop","version","base","GraphCtrl","$scope","$injector","annotationsSrv","hiddenSeries","seriesList","dataList","annotations","alertState","annotationsPromise","dataWarning","subTabIndex","panelDefaults","datasource","renderer","logBase","values","buckets","linewidth","dashes","dashLength","spaceLength","pointradius","stack","percentage","current","total","avg","nullPointMode","steppedLine","tooltip","value_type","shared","timeFrom","timeShift","targets","aliasColors","seriesOverrides","alias","thresholds","defaults","panel","processor","events","on","onRender","onDataReceived","onDataError","onDataSnapshotLoad","onInitEditMode","onInitPanelActions","addEditorTab","alertingEnabled","actions","getAnnotations","dashboard","range","evt","publishAppEvent","snapshotData","err","getSeriesList","datapointsCount","reduce","title","tip","isOutsideRange","then","loading","result","applySeriesOverrides","unit","serie","shiftKey","toggleSeriesExclusiveMode","hidden","alreadyExclusive","every","override","without","refresh","scope","$new","templateHtml","modalClass","template","graphDirective","$rootScope","timeSrv","popoverSrv","contextSrv","restrict","link","ctrl","sortedSeries","legendSideLastValue","rootScope","$root","panelWidth","eventManager","thresholdManager","renderData","render_panel","sharedTooltipModeEnabled","id","otherPanelInFullscreenMode","getLegendHeight","panelHeight","rightSide","alignAsTable","legendSeries","filter","hideFromLegend","setElementHeight","console","shouldAbortRender","drawHook","formater","valueFormats","isNumber","decimals","updateLegendValues","$$phase","$digest","processOffsetHook","gridMargin","panelOptions","getMinTimeStepOfSeries","stats","timeStep","prepare","stackpercent","translateFillOption","labelMarginX","selection","crosshair","getFlotPairs","addXSeriesAxis","bucketSize","histMin","map","histMax","histogram","addXHistogramAxis","addXTableAxis","addTimeAxis","addFlotOptions","addFlotEvents","configureAxisOptions","sortBy","zindex","callPlot","incrementRenderCounter","renderError","error","inspector","message","renderingCompleted","shouldDelayDraw","isUndefined","valueOf","timezone","getTimezone","timeformat","time_format","index","defaultTicks","tickStep","ticks_num","configureAxisMode","pointIndex","tickIndex","flatten","parseNumber","secondY","applyLogScale","toNumber","minSetToZero","MIN_VALUE","logmin","isFinite","generateTicksForLogScaleYAxis","unshift","nextTick","maxNumTicks","numTicks","secPerTick","oneDay","oneYear","isEditor","updateTime","$apply","setTime","utc","isRangeSelection","$on","off","directive","second","savedhandlers","mouseUpHandler","updateSelection","getSelection","onMouseDown","which","body","focus","onselectstart","ondrag","setSelectionPos","onMouseUp","one","selectionIsSane","triggerSelectedEvent","c1","c2","noAxisInUse","anyUsed","p1","p2","clearSelection","preventEvent","setSelection","minSize","mousedown","shape","twelveHourClock","monthNames","formatDate","fmt","dayNames","strftime","leftPad","pad","escape","hours","getHours","isAM","hours12","getDay","getMonth","getDate","getMinutes","getSeconds","getFullYear","makeUtcWrapper","addProxyMethod","sourceObj","sourceMethod","targetObj","targetMethod","arguments","date","props","dateGenerator","Date","timezoneJS","setTimezone","timeUnitSize","baseSpec","specMonths","specQuarters","axisName","year","step","setSeconds","setMinutes","setHours","setMonth","setFullYear","setMilliseconds","minute","hour","day","setDate","month","quarter","carry","getTime","end","useQuarters","span","suffix","hourCode","rt","findMatchingSeries","allseries","stackData","other","otherps","otherpoints","newpoints","px","py","intery","qx","qy","withlines","withbottom","withsteps","keyOffset","accumulateOffset","fromgap","stackBases","processed","stackSums","getStackSums","num","percents","key_idx","value_idx","sum","_data","data_len","sums","newPoints","fillBelowTo","findBelowSeries","segmentIntersection","top_left_x","top_left_y","top_right_x","top_right_y","bottom_left_x","bottom_left_y","bottom_right_x","bottom_right_y","top_delta_x","top_delta_y","bottom_delta_x","bottom_delta_y","plotDifferenceArea","otherseries","openPolygon","closePolygon","validateInput","findNextStart","start_i","end_i","assert","equal","intersect","intersectionPoint","topTraversal","right_i","bottomTraversal","locked","setCrosshair","clearCrosshair","lockCrosshair","unlockCrosshair","onMouseOut","mouseout","adj","drawX","drawY","plotDashes","dashRemainder","dashOn","dashOnLength","dashOffLength","lineSegmentOffset","segmentLength","ax2","ax1","ay2","ay1","deltaX","deltaY","distance","remainder","xsign","ysign","dashOffset","angular","Drop","createAnnotationToolip","injector","content","innerHTML","invoke","$compile","manager","tmpScope","onEdit","editEvent","$destroy","drop","target","openOn","hoverCloseDelay","tetherOptions","constraints","pin","attachment","open","markerElementToAttachTo","createEditPopover","editorOpen","editorOpened","panelCtrl","close","editorClosed","DrawableEvent","object","drawFunc","clearFunc","moveFunc","_object","_drawFunc","_clearFunc","_moveFunc","_position","_width","_height","getObject","VisualEvent","drawableEvent","_parent","_options","_drawableEvent","_hidden","visual","getParent","isHidden","unhide","EventMarkers","_events","_types","_plot","eventsEnabled","getEvents","setTypes","types","setupEvents","that","parts","partition","regions","ve","_buildDiv","vre","_buildRegDiv","ao","bo","drawEvents","_insidePlot","updateEvents","_clearEvents","markerSize","markerShow","lineStyle","markerTooltip","yaxis2","eventTypeId","eventType","topOffset","line","marker","toUpperCase","mouseenter","editModel","mouseleave","hover","regionWidth","timeEnd","timeTo","region","xc","eventMarkers","hideEvents","showEvents","setEvents","defaultOptions","core","appEvents","GraphTooltip","getSeriesFn","self","$tooltip","findHoverIndexFromDataPoints","posX","last","initial","len","findHoverIndexFromData","lower","upper","middle","renderAndShow","absoluteTime","innerHtml","xMode","place_tt","getMultiSeriesPlotHoverInfo","hoverIndex","hoverDistance","pointTime","results","last_value","minDistance","minTime","hideEmpty","allIsNull","hideZero","allIsZero","time","emit","panelRelY","plotData","xAxes","allSeriesMode","group","hoverInfo","seriesHtml","tooltipFormat","isVisible","scrollTop","innerHeight","sharedCrosshairModeOnly","hasMsResolution","seriesHoverInfo","highlightClass","formatValue","ThresholdManager","needsCleanup","hasSecondYAxis","handleIndex","model","valueStr","stateClass","colorMode","handleElem","currentTarget","parents","isMoving","lastY","posTop","dragging","clientY","diff","stopped","graphValue","threshold","defaultHandleTopPos","handleTopPos","valueCanvasPos","getHandleHtml","toggleClass","editingThresholds","shouldDrawHandles","thresholdMargin","cleanUp","renderHandle","initDragging","gtLimit","ltLimit","limit","op","lineColor","AnnotationEvent","dashboardId","panelId","userId","isRegion","type","tags","EventManager","flotOptions","$__alerting","$__ok","$__no_data","$__editing","source","newState","iconColor","getRegions","addRegionMarking","eventSectionMargin","levels","keys","addAlphaToRGB","colorString","alpha","isValid","setAlpha","toRgbString","PALETTE_ROWS","PALETTE_COLUMNS","DEFAULT_ANNOTATION_COLOR","OK_COLOR","ALERTING_COLOR","NO_DATA_COLOR","REGION_FILL_ALPHA","sortColorsByHue","hexColors","hslColors","hexToHsl","sortedHSLColors","chunk","flattenDeep","zip","hslToHex","toHsl","toHexString","sortedColors","getSeriesValues","convertValuesToHistogram","bound","getBucketBound","histogam_series","count","module","$timeout","$container","firstRender","getSeriesIndexForElement","el","openColorSelector","toggleAxis","colorSelected","changeSeriesColor","toggleSeries","seriesInfo","scrollPosition","sortLegend","stat","sortDesc","getTableHeaderHtml","statName","cssClass","sideWidth","tableHeaderElem","header","seriesShown","seriesElements","maxHeight","topPadding","tbodyElem","jquery","controller","$element","overrideMenu","currentOverrides","addOverrideOption","propertyName","option","submenu","String","setOverride","subItem","addSeriesOverride","updateCurrentOverrides","fakeSeries","autoClose","onClose","removeOverride","getSeriesNames","ThresholdFormCtrl","alert","disabled","unbindDestroy","newColor","bindToController","controllerAs","DataProcessor","firstItem","autoDetectMode","getAutoDetectXAxisMode","setPanelDefaultsForNewXAxisMode","timeSeriesHandler","customHandler","seriesData","colorIndex","dataItem","nameField","validOptions","getXAxisValueOptions","onlyNumbers","fields","fieldParts","getPropertiesRecursive","forEach","isObject","field","pop","property","propertyParts","split","AxesEditorCtrl","$q","unitFormats","getUnitFormats","logScales","xAxisModes","xAxisStatOptions","getDataFieldNames","items","prop","when","axesEditorComponent","templateUrl"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA,+C;;;;;;ACAA,+C;;;;;;ACAA,+C;;;;;;;;ACAA;;;;;;AAOA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;AAqBA,CAAC,UAASA,CAAT,EAAW;AAACA,IAAEC,KAAF,GAAQ,EAAR;;AAAWD,IAAEC,KAAF,CAAQC,IAAR,GAAa,UAASC,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAeC,CAAf,EAAiB;AAAC,QAAIC,IAAE,EAAN;AAASA,MAAEJ,CAAF,GAAIA,KAAG,CAAP;AAASI,MAAEH,CAAF,GAAIA,KAAG,CAAP;AAASG,MAAEF,CAAF,GAAIA,KAAG,CAAP;AAASE,MAAED,CAAF,GAAIA,KAAG,IAAH,GAAQA,CAAR,GAAU,CAAd;;AAAgBC,MAAEC,GAAF,GAAM,UAASC,CAAT,EAAWC,CAAX,EAAa;AAAC,WAAI,IAAIC,IAAE,CAAV,EAAYA,IAAEF,EAAEG,MAAhB,EAAuB,EAAED,CAAzB;AAA2BJ,UAAEE,EAAEI,MAAF,CAASF,CAAT,CAAF,KAAgBD,CAAhB;AAA3B;;AAA6C,aAAOH,EAAEO,SAAF,EAAP;AAAqB,KAAtF;;AAAuFP,MAAEQ,KAAF,GAAQ,UAASN,CAAT,EAAWO,CAAX,EAAa;AAAC,WAAI,IAAIL,IAAE,CAAV,EAAYA,IAAEF,EAAEG,MAAhB,EAAuB,EAAED,CAAzB;AAA2BJ,UAAEE,EAAEI,MAAF,CAASF,CAAT,CAAF,KAAgBK,CAAhB;AAA3B;;AAA6C,aAAOT,EAAEO,SAAF,EAAP;AAAqB,KAAxF;;AAAyFP,MAAEU,QAAF,GAAW,YAAU;AAAC,UAAGV,EAAED,CAAF,IAAK,CAAR,EAAU;AAAC,eAAM,SAAO,CAACC,EAAEJ,CAAH,EAAKI,EAAEH,CAAP,EAASG,EAAEF,CAAX,EAAca,IAAd,CAAmB,GAAnB,CAAP,GAA+B,GAArC;AAAyC,OAApD,MAAwD;AAAC,eAAM,UAAQ,CAACX,EAAEJ,CAAH,EAAKI,EAAEH,CAAP,EAASG,EAAEF,CAAX,EAAaE,EAAED,CAAf,EAAkBY,IAAlB,CAAuB,GAAvB,CAAR,GAAoC,GAA1C;AAA8C;AAAC,KAA9H;;AAA+HX,MAAEO,SAAF,GAAY,YAAU;AAAC,eAASK,KAAT,CAAeC,GAAf,EAAmBC,KAAnB,EAAyBC,GAAzB,EAA6B;AAAC,eAAOD,QAAMD,GAAN,GAAUA,GAAV,GAAcC,QAAMC,GAAN,GAAUA,GAAV,GAAcD,KAAnC;AAAyC;;AAAAd,QAAEJ,CAAF,GAAIgB,MAAM,CAAN,EAAQI,SAAShB,EAAEJ,CAAX,CAAR,EAAsB,GAAtB,CAAJ;AAA+BI,QAAEH,CAAF,GAAIe,MAAM,CAAN,EAAQI,SAAShB,EAAEH,CAAX,CAAR,EAAsB,GAAtB,CAAJ;AAA+BG,QAAEF,CAAF,GAAIc,MAAM,CAAN,EAAQI,SAAShB,EAAEF,CAAX,CAAR,EAAsB,GAAtB,CAAJ;AAA+BE,QAAED,CAAF,GAAIa,MAAM,CAAN,EAAQZ,EAAED,CAAV,EAAY,CAAZ,CAAJ;AAAmB,aAAOC,CAAP;AAAS,KAAvN;;AAAwNA,MAAEiB,KAAF,GAAQ,YAAU;AAAC,aAAOxB,EAAEC,KAAF,CAAQC,IAAR,CAAaK,EAAEJ,CAAf,EAAiBI,EAAEF,CAAnB,EAAqBE,EAAEH,CAAvB,EAAyBG,EAAED,CAA3B,CAAP;AAAqC,KAAxD;;AAAyD,WAAOC,EAAEO,SAAF,EAAP;AAAqB,GAAxqB;;AAAyqBd,IAAEC,KAAF,CAAQwB,OAAR,GAAgB,UAASC,IAAT,EAAcC,GAAd,EAAkB;AAAC,QAAIlB,CAAJ;;AAAM,OAAE;AAACA,UAAEiB,KAAKC,GAAL,CAASA,GAAT,EAAcC,WAAd,EAAF;AAA8B,UAAGnB,KAAG,EAAH,IAAOA,KAAG,aAAb,EAA2B;AAAMiB,aAAKA,KAAKG,MAAL,EAAL;AAAmB,KAArF,QAA2FH,KAAKd,MAAL,IAAa,CAACZ,EAAE8B,QAAF,CAAWJ,KAAKK,GAAL,CAAS,CAAT,CAAX,EAAuB,MAAvB,CAAzG;;AAAyI,QAAGtB,KAAG,kBAAN,EAAyBA,IAAE,aAAF;AAAgB,WAAOT,EAAEC,KAAF,CAAQ+B,KAAR,CAAcvB,CAAd,CAAP;AAAwB,GAAnP;;AAAoPT,IAAEC,KAAF,CAAQ+B,KAAR,GAAc,UAASC,GAAT,EAAa;AAAC,QAAIC,GAAJ;AAAA,QAAQC,IAAEnC,EAAEC,KAAF,CAAQC,IAAlB;AAAuB,QAAGgC,MAAI,kEAAkEE,IAAlE,CAAuEH,GAAvE,CAAP,EAAmF,OAAOE,EAAEZ,SAASW,IAAI,CAAJ,CAAT,EAAgB,EAAhB,CAAF,EAAsBX,SAASW,IAAI,CAAJ,CAAT,EAAgB,EAAhB,CAAtB,EAA0CX,SAASW,IAAI,CAAJ,CAAT,EAAgB,EAAhB,CAA1C,CAAP;AAAsE,QAAGA,MAAI,+FAA+FE,IAA/F,CAAoGH,GAApG,CAAP,EAAgH,OAAOE,EAAEZ,SAASW,IAAI,CAAJ,CAAT,EAAgB,EAAhB,CAAF,EAAsBX,SAASW,IAAI,CAAJ,CAAT,EAAgB,EAAhB,CAAtB,EAA0CX,SAASW,IAAI,CAAJ,CAAT,EAAgB,EAAhB,CAA1C,EAA8DG,WAAWH,IAAI,CAAJ,CAAX,CAA9D,CAAP;AAAyF,QAAGA,MAAI,mGAAmGE,IAAnG,CAAwGH,GAAxG,CAAP,EAAoH,OAAOE,EAAEE,WAAWH,IAAI,CAAJ,CAAX,IAAmB,IAArB,EAA0BG,WAAWH,IAAI,CAAJ,CAAX,IAAmB,IAA7C,EAAkDG,WAAWH,IAAI,CAAJ,CAAX,IAAmB,IAArE,CAAP;AAAkF,QAAGA,MAAI,gIAAgIE,IAAhI,CAAqIH,GAArI,CAAP,EAAiJ,OAAOE,EAAEE,WAAWH,IAAI,CAAJ,CAAX,IAAmB,IAArB,EAA0BG,WAAWH,IAAI,CAAJ,CAAX,IAAmB,IAA7C,EAAkDG,WAAWH,IAAI,CAAJ,CAAX,IAAmB,IAArE,EAA0EG,WAAWH,IAAI,CAAJ,CAAX,CAA1E,CAAP;AAAqG,QAAGA,MAAI,oDAAoDE,IAApD,CAAyDH,GAAzD,CAAP,EAAqE,OAAOE,EAAEZ,SAASW,IAAI,CAAJ,CAAT,EAAgB,EAAhB,CAAF,EAAsBX,SAASW,IAAI,CAAJ,CAAT,EAAgB,EAAhB,CAAtB,EAA0CX,SAASW,IAAI,CAAJ,CAAT,EAAgB,EAAhB,CAA1C,CAAP;AAAsE,QAAGA,MAAI,2CAA2CE,IAA3C,CAAgDH,GAAhD,CAAP,EAA4D,OAAOE,EAAEZ,SAASW,IAAI,CAAJ,IAAOA,IAAI,CAAJ,CAAhB,EAAuB,EAAvB,CAAF,EAA6BX,SAASW,IAAI,CAAJ,IAAOA,IAAI,CAAJ,CAAhB,EAAuB,EAAvB,CAA7B,EAAwDX,SAASW,IAAI,CAAJ,IAAOA,IAAI,CAAJ,CAAhB,EAAuB,EAAvB,CAAxD,CAAP;AAA2F,QAAII,OAAKtC,EAAEuC,IAAF,CAAON,GAAP,EAAYL,WAAZ,EAAT;AAAmC,QAAGU,QAAM,aAAT,EAAuB,OAAOH,EAAE,GAAF,EAAM,GAAN,EAAU,GAAV,EAAc,CAAd,CAAP,CAAvB,KAAmD;AAACD,YAAIM,aAAaF,IAAb,KAAoB,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CAAxB;AAAgC,aAAOH,EAAED,IAAI,CAAJ,CAAF,EAASA,IAAI,CAAJ,CAAT,EAAgBA,IAAI,CAAJ,CAAhB,CAAP;AAA+B;AAAC,GAA1wC;;AAA2wC,MAAIM,eAAa;AAACC,UAAK,CAAC,CAAD,EAAG,GAAH,EAAO,GAAP,CAAN;AAAkBC,WAAM,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAAxB;AAAsCC,WAAM,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAA5C;AAA0DC,WAAM,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CAAhE;AAAwEC,UAAK,CAAC,CAAD,EAAG,CAAH,EAAK,GAAL,CAA7E;AAAuFC,WAAM,CAAC,GAAD,EAAK,EAAL,EAAQ,EAAR,CAA7F;AAAyGC,UAAK,CAAC,CAAD,EAAG,GAAH,EAAO,GAAP,CAA9G;AAA0HC,cAAS,CAAC,CAAD,EAAG,CAAH,EAAK,GAAL,CAAnI;AAA6IC,cAAS,CAAC,CAAD,EAAG,GAAH,EAAO,GAAP,CAAtJ;AAAkKC,cAAS,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAA3K;AAAyLC,eAAU,CAAC,CAAD,EAAG,GAAH,EAAO,CAAP,CAAnM;AAA6MC,eAAU,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAAvN;AAAqOC,iBAAY,CAAC,GAAD,EAAK,CAAL,EAAO,GAAP,CAAjP;AAA6PC,oBAAe,CAAC,EAAD,EAAI,GAAJ,EAAQ,EAAR,CAA5Q;AAAwRC,gBAAW,CAAC,GAAD,EAAK,GAAL,EAAS,CAAT,CAAnS;AAA+SC,gBAAW,CAAC,GAAD,EAAK,EAAL,EAAQ,GAAR,CAA1T;AAAuUC,aAAQ,CAAC,GAAD,EAAK,CAAL,EAAO,CAAP,CAA/U;AAAyVC,gBAAW,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAApW;AAAkXC,gBAAW,CAAC,GAAD,EAAK,CAAL,EAAO,GAAP,CAA7X;AAAyYC,aAAQ,CAAC,GAAD,EAAK,CAAL,EAAO,GAAP,CAAjZ;AAA6ZC,UAAK,CAAC,GAAD,EAAK,GAAL,EAAS,CAAT,CAAla;AAA8aC,WAAM,CAAC,CAAD,EAAG,GAAH,EAAO,CAAP,CAApb;AAA8bC,YAAO,CAAC,EAAD,EAAI,CAAJ,EAAM,GAAN,CAArc;AAAgdC,WAAM,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAAtd;AAAoeC,eAAU,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAA9e;AAA4fC,eAAU,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAAtgB;AAAohBC,gBAAW,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAA/hB;AAA6iBC,eAAU,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAAvjB;AAAqkBC,eAAU,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAA/kB;AAA6lBC,iBAAY,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAAzmB;AAAunBC,UAAK,CAAC,CAAD,EAAG,GAAH,EAAO,CAAP,CAA5nB;AAAsoBC,aAAQ,CAAC,GAAD,EAAK,CAAL,EAAO,GAAP,CAA9oB;AAA0pBC,YAAO,CAAC,GAAD,EAAK,CAAL,EAAO,CAAP,CAAjqB;AAA2qBC,UAAK,CAAC,CAAD,EAAG,CAAH,EAAK,GAAL,CAAhrB;AAA0rBC,WAAM,CAAC,GAAD,EAAK,GAAL,EAAS,CAAT,CAAhsB;AAA4sBC,YAAO,CAAC,GAAD,EAAK,GAAL,EAAS,CAAT,CAAntB;AAA+tBC,UAAK,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAApuB;AAAkvBC,YAAO,CAAC,GAAD,EAAK,CAAL,EAAO,GAAP,CAAzvB;AAAqwBC,YAAO,CAAC,GAAD,EAAK,CAAL,EAAO,GAAP,CAA5wB;AAAwxBC,SAAI,CAAC,GAAD,EAAK,CAAL,EAAO,CAAP,CAA5xB;AAAsyBC,YAAO,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAA7yB;AAA2zBC,WAAM,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAAj0B;AAA+0BC,YAAO,CAAC,GAAD,EAAK,GAAL,EAAS,CAAT;AAAt1B,GAAjB;AAAo3B,CAApjG,EAAsjGC,MAAtjG,E,CAEA;;;AACA,CAAC,UAASpF,CAAT,EAAY;AAEZ;AAEA,MAAIqF,iBAAiBC,OAAOC,SAAP,CAAiBF,cAAtC,CAJY,CAMT;AACA;AACA;AAEA;;AAEA,MAAI,CAACrF,EAAEwF,EAAF,CAAKC,MAAV,EAAkB;AACdzF,MAAEwF,EAAF,CAAKC,MAAL,GAAc,YAAW;AACrB,aAAO,KAAKC,IAAL,CAAU,YAAW;AACxB,YAAI,KAAKC,UAAT,EAAqB;AACjB,eAAKA,UAAL,CAAgBC,WAAhB,CAA6B,IAA7B;AACH;AACJ,OAJM,CAAP;AAKH,KAND;AAOH,GApBQ,CAsBZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,WAASC,MAAT,CAAgBC,GAAhB,EAAqBC,SAArB,EAAgC;AAE/B,QAAIC,UAAUD,UAAUE,QAAV,CAAmB,MAAMH,GAAzB,EAA8B,CAA9B,CAAd;;AAEA,QAAIE,WAAW,IAAf,EAAqB;AAEpBA,gBAAUE,SAASC,aAAT,CAAuB,QAAvB,CAAV;AACAH,cAAQI,SAAR,GAAoBN,GAApB;AAEA9F,QAAEgG,OAAF,EAAWrE,GAAX,CAAe;AAAE0E,mBAAW,KAAb;AAAoBC,kBAAU,UAA9B;AAA0CC,cAAM,CAAhD;AAAmDC,aAAK;AAAxD,OAAf,EACEC,QADF,CACWV,SADX,EALoB,CAQpB;;AAEA,UAAI,CAACC,QAAQU,UAAb,EAAyB;AACxB,YAAIC,OAAOC,kBAAX,EAA+B;AAC9BZ,oBAAUW,OAAOC,kBAAP,CAA0BC,WAA1B,CAAsCb,OAAtC,CAAV;AACA,SAFD,MAEO;AACN,gBAAM,IAAIc,KAAJ,CAAU,uMAAV,CAAN;AACA;AACD;AACD;;AAED,SAAKd,OAAL,GAAeA,OAAf;AAEA,QAAIe,UAAU,KAAKA,OAAL,GAAef,QAAQU,UAAR,CAAmB,IAAnB,CAA7B,CAzB+B,CA2B/B;AACA;AACA;AAEA;AACA;AACA;;AAEA,QAAIM,mBAAmBL,OAAOK,gBAAP,IAA2B,CAAlD;AAAA,QACCC,oBACCF,QAAQG,4BAAR,IACAH,QAAQI,yBADR,IAEAJ,QAAQK,wBAFR,IAGAL,QAAQM,uBAHR,IAIAN,QAAQO,sBAJR,IAIkC,CANpC;AAQA,SAAKC,UAAL,GAAkBP,mBAAmBC,iBAArC,CA3C+B,CA6C/B;;AAEA,SAAKO,MAAL,CAAYzB,UAAU0B,KAAV,EAAZ,EAA+B1B,UAAU2B,MAAV,EAA/B,EA/C+B,CAiD/B;;AAEA,SAAKC,aAAL,GAAqB,IAArB;AACA,SAAKC,IAAL,GAAY,EAAZ,CApD+B,CAsD/B;AACA;;AAEA,SAAKC,UAAL,GAAkB,EAAlB;AACA,SAAKC,cAAL,GAAsBnB,OAAOoB,iBAAP,GAA2BpB,OAAOoB,iBAAP,IAA4B,EAA7E;AACA,GA3FW,CA6FZ;AACA;AACA;AACA;;;AAEAlC,SAAON,SAAP,CAAiBiC,MAAjB,GAA0B,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAEjD,QAAID,SAAS,CAAT,IAAcC,UAAU,CAA5B,EAA+B;AAC9B,YAAM,IAAIZ,KAAJ,CAAU,0CAA0CW,KAA1C,GAAkD,aAAlD,GAAkEC,MAA5E,CAAN;AACA;;AAED,QAAI1B,UAAU,KAAKA,OAAnB;AAAA,QACCe,UAAU,KAAKA,OADhB;AAAA,QAECQ,aAAa,KAAKA,UAFnB,CANiD,CAUjD;AACA;AACA;AACA;AAEA;;AAEA,QAAI,KAAKE,KAAL,IAAcA,KAAlB,EAAyB;AACxBzB,cAAQyB,KAAR,GAAgBA,QAAQF,UAAxB;AACAvB,cAAQgC,KAAR,CAAcP,KAAd,GAAsBA,QAAQ,IAA9B;AACA,WAAKA,KAAL,GAAaA,KAAb;AACA;;AAED,QAAI,KAAKC,MAAL,IAAeA,MAAnB,EAA2B;AAC1B1B,cAAQ0B,MAAR,GAAiBA,SAASH,UAA1B;AACAvB,cAAQgC,KAAR,CAAcN,MAAd,GAAuBA,SAAS,IAAhC;AACA,WAAKA,MAAL,GAAcA,MAAd;AACA,KA3BgD,CA6BjD;AACA;AACA;;;AAEAX,YAAQkB,OAAR;AACAlB,YAAQmB,IAAR,GAlCiD,CAoCjD;AACA;AACA;;AAEAnB,YAAQhG,KAAR,CAAcwG,UAAd,EAA0BA,UAA1B;AACA,GAzCD,CAlGY,CA6IZ;;;AAEA1B,SAAON,SAAP,CAAiB4C,KAAjB,GAAyB,YAAW;AACnC,SAAKpB,OAAL,CAAaqB,SAAb,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,KAAKX,KAAlC,EAAyC,KAAKC,MAA9C;AACA,GAFD,CA/IY,CAmJZ;;;AAEA7B,SAAON,SAAP,CAAiB8C,MAAjB,GAA0B,YAAW;AAEpC,QAAIC,QAAQ,KAAKT,UAAjB,CAFoC,CAIpC;AACA;;AAEA,SAAK,IAAIU,QAAT,IAAqBD,KAArB,EAA4B;AAC3B,UAAIjD,eAAemD,IAAf,CAAoBF,KAApB,EAA2BC,QAA3B,CAAJ,EAA0C;AAEzC,YAAIE,QAAQ,KAAKC,YAAL,CAAkBH,QAAlB,CAAZ;AAAA,YACCI,aAAaL,MAAMC,QAAN,CADd;AAGAE,cAAMG,IAAN;;AAEA,aAAK,IAAIC,QAAT,IAAqBF,UAArB,EAAiC;AAChC,cAAItD,eAAemD,IAAf,CAAoBG,UAApB,EAAgCE,QAAhC,CAAJ,EAA+C;AAC9C,gBAAIC,aAAaH,WAAWE,QAAX,CAAjB;;AACA,iBAAK,IAAIE,GAAT,IAAgBD,UAAhB,EAA4B;AAC3B,kBAAIzD,eAAemD,IAAf,CAAoBM,UAApB,EAAgCC,GAAhC,CAAJ,EAA0C;AAEzC,oBAAIC,YAAYF,WAAWC,GAAX,EAAgBC,SAAhC;;AAEA,qBAAK,IAAIrI,IAAI,CAAR,EAAW2F,QAAhB,EAA0BA,WAAW0C,UAAUrI,CAAV,CAArC,EAAmDA,GAAnD,EAAwD;AACvD,sBAAI2F,SAAS2C,MAAb,EAAqB;AACpB,wBAAI,CAAC3C,SAAS4C,QAAd,EAAwB;AACvBT,4BAAMU,MAAN,CAAa7C,SAASN,OAAtB;AACAM,+BAAS4C,QAAT,GAAoB,IAApB;AACA;AACD,mBALD,MAKO;AACNF,8BAAUI,MAAV,CAAiBzI,GAAjB,EAAsB,CAAtB;;AACA,wBAAI2F,SAAS4C,QAAb,EAAuB;AACtB5C,+BAASN,OAAT,CAAiBP,MAAjB;AACA;AACD;AACD;;AAED,oBAAIuD,UAAUpI,MAAV,IAAoB,CAAxB,EAA2B;AAC1B,yBAAOkI,WAAWC,GAAX,CAAP;AACA;AACD;AACD;AACD;AACD;;AAEDN,cAAMY,IAAN;AACA;AACD;AACD,GAhDD,CArJY,CAuMZ;AACA;AACA;AACA;AACA;;;AAEAxD,SAAON,SAAP,CAAiBmD,YAAjB,GAAgC,UAASY,OAAT,EAAkB;AAEjD,QAAIb,QAAQ,KAAKb,IAAL,CAAU0B,OAAV,CAAZ,CAFiD,CAIjD;;AAEA,QAAIb,SAAS,IAAb,EAAmB;AAElB;AAEA,UAAI,KAAKd,aAAL,IAAsB,IAA1B,EAAgC;AAC/B,aAAKA,aAAL,GAAqB3H,EAAE,8CAAF,EACnB2B,GADmB,CACf;AACJ2E,oBAAU,UADN;AAEJE,eAAK,CAFD;AAGJD,gBAAM,CAHF;AAIJgD,kBAAQ,CAJJ;AAKJC,iBAAO,CALH;AAMJ,uBAAa,SANT;AAOJvJ,iBAAO;AAPH,SADe,EAUnBwJ,WAVmB,CAUP,KAAKzD,OAVE,CAArB;AAWA;;AAEDyC,cAAQ,KAAKb,IAAL,CAAU0B,OAAV,IAAqBtJ,EAAE,aAAF,EAC3B0J,QAD2B,CAClBJ,OADkB,EAE3B3H,GAF2B,CAEvB;AACJ2E,kBAAU,UADN;AAEJE,aAAK,CAFD;AAGJD,cAAM,CAHF;AAIJgD,gBAAQ,CAJJ;AAKJC,eAAO;AALH,OAFuB,EAS3B/C,QAT2B,CASlB,KAAKkB,aATa,CAA7B;AAUA;;AAED,WAAOc,KAAP;AACA,GArCD,CA7MY,CAoPZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA5C,SAAON,SAAP,CAAiBoE,WAAjB,GAA+B,UAASlB,KAAT,EAAgBb,IAAhB,EAAsBgC,IAAtB,EAA4BC,KAA5B,EAAmCpC,KAAnC,EAA0C;AAExE,QAAIqC,SAAJ,EAAenB,UAAf,EAA2BG,UAA3B,EAAuCiB,IAAvC,CAFwE,CAIxE;;AAEAnC,WAAO,KAAKA,IAAZ,CANwE,CAQxE;;AAEA,QAAI,QAAOgC,IAAP,MAAgB,QAApB,EAA8B;AAC7BE,kBAAYF,KAAK5B,KAAL,GAAa,GAAb,GAAmB4B,KAAKI,OAAxB,GAAkC,GAAlC,GAAwCJ,KAAKK,MAA7C,GAAsD,GAAtD,GAA4DL,KAAKM,IAAjE,GAAwE,KAAxE,GAAgFN,KAAKO,UAArF,GAAkG,KAAlG,GAA0GP,KAAKQ,MAA3H;AACA,KAFD,MAEO;AACNN,kBAAYF,IAAZ;AACA,KAduE,CAgBxE;;;AAEAjB,iBAAa,KAAKd,UAAL,CAAgBY,KAAhB,CAAb;;AAEA,QAAIE,cAAc,IAAlB,EAAwB;AACvBA,mBAAa,KAAKd,UAAL,CAAgBY,KAAhB,IAAyB,EAAtC;AACA;;AAEDK,iBAAaH,WAAWmB,SAAX,CAAb;;AAEA,QAAIhB,cAAc,IAAlB,EAAwB;AACvBA,mBAAaH,WAAWmB,SAAX,IAAwB,EAArC;AACA;;AAEDC,WAAOjB,WAAWlB,IAAX,CAAP,CA9BwE,CAgCxE;;AAEA,QAAImC,QAAQ,IAAZ,EAAkB;AAEjB,UAAI/D,UAAUhG,EAAE,aAAF,EAAiBqK,IAAjB,CAAsBzC,IAAtB,EACZjG,GADY,CACR;AACJ2E,kBAAU,UADN;AAEJ,qBAAamB,KAFT;AAGJjB,aAAK,CAAC;AAHF,OADQ,EAMZC,QANY,CAMH,KAAKiC,YAAL,CAAkBD,KAAlB,CANG,CAAd;;AAQA,UAAI,QAAOmB,IAAP,MAAgB,QAApB,EAA8B;AAC7B5D,gBAAQrE,GAAR,CAAY;AACXiI,gBAAME,SADK;AAEX7J,iBAAO2J,KAAK3J;AAFD,SAAZ;AAIA,OALD,MAKO,IAAI,OAAO2J,IAAP,KAAgB,QAApB,EAA8B;AACpC5D,gBAAQ0D,QAAR,CAAiBE,IAAjB;AACA;;AAEEG,aAAOjB,WAAWlB,IAAX,IAAmB;AAAE5B,iBAASA,OAAX;AAAoBgD,mBAAW;AAA/B,OAA1B;AAEA,UAAIkB,OAAO,KAAKpC,cAAL,CAAoBF,IAApB,CAAX;;AACH,UAAIsC,IAAJ,EAAU;AACLH,aAAKtC,KAAL,GAAayC,KAAKzC,KAAlB;AACAsC,aAAKrC,MAAL,GAAcwC,KAAKxC,MAAnB;AACJ,OAHD,MAGO;AACFqC,aAAKtC,KAAL,GAAazB,QAAQsE,UAAR,CAAmB,IAAnB,CAAb;AACAP,aAAKrC,MAAL,GAAc1B,QAAQuE,WAAR,CAAoB,IAApB,CAAd;AACA,aAAKzC,cAAL,CAAoBF,IAApB,IAA4B;AAAEH,iBAAOsC,KAAKtC,KAAd;AAAqBC,kBAAQqC,KAAKrC;AAAlC,SAA5B;AACJ;;AACD1B,cAAQP,MAAR;AACA;;AAED,WAAOsE,IAAP;AACA,GApED,CA5RY,CAkWZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAlE,SAAON,SAAP,CAAiBiF,OAAjB,GAA2B,UAAS/B,KAAT,EAAgBgC,CAAhB,EAAmBC,CAAnB,EAAsB9C,IAAtB,EAA4BgC,IAA5B,EAAkCC,KAAlC,EAAyCpC,KAAzC,EAAgDkD,MAAhD,EAAwDC,MAAxD,EAAgE;AAE1F,QAAIb,OAAO,KAAKJ,WAAL,CAAiBlB,KAAjB,EAAwBb,IAAxB,EAA8BgC,IAA9B,EAAoCC,KAApC,EAA2CpC,KAA3C,CAAX;AAAA,QACCuB,YAAYe,KAAKf,SADlB,CAF0F,CAK1F;;AAEA,QAAI2B,UAAU,QAAd,EAAwB;AACvBF,WAAKV,KAAKtC,KAAL,GAAa,CAAlB;AACA,KAFD,MAEO,IAAIkD,UAAU,OAAd,EAAuB;AAC7BF,WAAKV,KAAKtC,KAAV;AACA;;AAED,QAAImD,UAAU,QAAd,EAAwB;AACvBF,WAAKX,KAAKrC,MAAL,GAAc,CAAnB;AACA,KAFD,MAEO,IAAIkD,UAAU,QAAd,EAAwB;AAC9BF,WAAKX,KAAKrC,MAAV;AACA,KAjByF,CAmB1F;AACA;;;AAEA,SAAK,IAAI/G,IAAI,CAAR,EAAW2F,QAAhB,EAA0BA,WAAW0C,UAAUrI,CAAV,CAArC,EAAmDA,GAAnD,EAAwD;AACvD,UAAI2F,SAASmE,CAAT,IAAcA,CAAd,IAAmBnE,SAASoE,CAAT,IAAcA,CAArC,EAAwC;AACvCpE,iBAAS2C,MAAT,GAAkB,IAAlB;AACA;AACA;AACD,KA3ByF,CA6B1F;AAEA;AACA;;;AAEA3C,eAAW;AACV2C,cAAQ,IADE;AAEVC,gBAAU,KAFA;AAGVlD,eAASgD,UAAUpI,MAAV,GAAmBmJ,KAAK/D,OAAL,CAAaxE,KAAb,EAAnB,GAA0CuI,KAAK/D,OAH9C;AAIVyE,SAAGA,CAJO;AAKVC,SAAGA;AALO,KAAX;AAQA1B,cAAU6B,IAAV,CAAevE,QAAf,EA1C0F,CA4C1F;;AAEAA,aAASN,OAAT,CAAiBrE,GAAjB,CAAqB;AACpB6E,WAAKsE,KAAKC,KAAL,CAAWL,CAAX,CADe;AAEpBnE,YAAMuE,KAAKC,KAAL,CAAWN,CAAX,CAFc;AAGpB,oBAAcE,MAHM,CAGC;;AAHD,KAArB;AAKA,GAnDD,CAtXY,CA2aZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA9E,SAAON,SAAP,CAAiByF,UAAjB,GAA8B,UAASvC,KAAT,EAAgBgC,CAAhB,EAAmBC,CAAnB,EAAsB9C,IAAtB,EAA4BgC,IAA5B,EAAkCC,KAAlC,EAAyC;AACtE,QAAIjC,QAAQ,IAAZ,EAAkB;AACjB,UAAIe,aAAa,KAAKd,UAAL,CAAgBY,KAAhB,CAAjB;;AACA,UAAIE,cAAc,IAAlB,EAAwB;AACvB,aAAK,IAAIE,QAAT,IAAqBF,UAArB,EAAiC;AAChC,cAAItD,eAAemD,IAAf,CAAoBG,UAApB,EAAgCE,QAAhC,CAAJ,EAA+C;AAC9C,gBAAIC,aAAaH,WAAWE,QAAX,CAAjB;;AACA,iBAAK,IAAIE,GAAT,IAAgBD,UAAhB,EAA4B;AAC3B,kBAAIzD,eAAemD,IAAf,CAAoBM,UAApB,EAAgCC,GAAhC,CAAJ,EAA0C;AACzC,oBAAIC,YAAYF,WAAWC,GAAX,EAAgBC,SAAhC;;AACA,qBAAK,IAAIrI,IAAI,CAAR,EAAW2F,QAAhB,EAA0BA,WAAW0C,UAAUrI,CAAV,CAArC,EAAmDA,GAAnD,EAAwD;AACvD2F,2BAAS2C,MAAT,GAAkB,KAAlB;AACA;AACD;AACD;AACD;AACD;AACD;AACD,KAjBD,MAiBO;AACN,UAAID,YAAY,KAAKW,WAAL,CAAiBlB,KAAjB,EAAwBb,IAAxB,EAA8BgC,IAA9B,EAAoCC,KAApC,EAA2Cb,SAA3D;;AACA,WAAK,IAAIrI,IAAI,CAAR,EAAW2F,QAAhB,EAA0BA,WAAW0C,UAAUrI,CAAV,CAArC,EAAmDA,GAAnD,EAAwD;AACvD,YAAI2F,SAASmE,CAAT,IAAcA,CAAd,IAAmBnE,SAASoE,CAAT,IAAcA,CAArC,EAAwC;AACvCpE,mBAAS2C,MAAT,GAAkB,KAAlB;AACA;AACD;AACD;AACD,GA1BD,CA/bY,CA2dZ;AACA;;;AAEG,WAASgC,IAAT,CAAcC,WAAd,EAA2BC,KAA3B,EAAkCC,QAAlC,EAA4CC,OAA5C,EAAqD;AACjD;AACA;AACA;AACA;AAEA,QAAIC,SAAS,EAAb;AAAA,QACIC,UAAU;AACN;AACAC,cAAQ,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,EAA6C,SAA7C,CAFF;AAGNC,cAAQ;AACJpC,cAAM,IADF;AAEJqC,mBAAW,CAFP;AAEU;AACdC,wBAAgB,IAHZ;AAGkB;AACtBC,6BAAqB,MAJjB;AAIyB;AAC7B7F,mBAAW,IALP;AAKa;AACjBO,kBAAU,IANN;AAMY;AAChBuF,gBAAQ,CAPJ;AAOO;AACXC,yBAAiB,IARb;AAQmB;AACvBC,2BAAmB,IATf;AASqB;AACzBC,gBAAQ,IAVJ,CAUY;;AAVZ,OAHF;AAeNC,aAAO;AACH5C,cAAM,IADH;AACS;AACZ/C,kBAAU,QAFP;AAEiB;AACpB4F,cAAM,IAHH;AAGS;AACZtC,cAAM,IAJH;AAIS;AACZ3J,eAAO,IALJ;AAKU;AACbkM,mBAAW,IANR;AAMc;AACjBC,mBAAW,IAPR;AAOc;AACjBC,0BAAkB,IARf;AAQqB;AACxBjL,aAAK,IATF;AASQ;AACXE,aAAK,IAVF;AAUQ;AACXgL,yBAAiB,IAXd;AAWoB;AACvBC,eAAO,IAZJ;AAYU;AACbC,uBAAe,IAbZ;AAakB;AACrBC,oBAAY,IAdT;AAce;AAClBC,qBAAa,IAfV;AAgBHC,sBAAc,IAhBX;AAgBiB;AACpBC,oBAAY,IAjBT;AAiBe;AAClBC,4BAAoB,IAlBjB;AAkBuB;AAC1BC,sBAAc,IAnBX;AAmBiB;AACpBC,kBAAU,IApBP;AAoBa;AAChBC,qBAAa,IArBV,CAqBe;;AArBf,OAfD;AAsCNC,aAAO;AACHX,yBAAiB,IADd;AAEHhG,kBAAU,MAFP,CAEc;;AAFd,OAtCD;AA0CN4G,aAAO,EA1CD;AA2CNC,aAAO,EA3CD;AA4CN7B,cAAQ;AACJ8B,gBAAQ;AACJ/D,gBAAM,KADF;AAEJgE,kBAAQ,CAFJ;AAGJC,qBAAW,CAHP;AAGU;AACdC,gBAAM,IAJF;AAKJC,qBAAW,SALP;AAMJC,kBAAQ,QANJ,CAMa;;AANb,SADJ;AASJC,eAAO;AACH;AACA;AACAJ,qBAAW,CAHR;AAGW;AACdC,gBAAM,KAJH;AAKHC,qBAAW,IALR;AAMHG,iBAAO,KANJ,CAOH;AACA;;AARG,SATH;AAmBJC,cAAM;AACFvE,gBAAM,KADJ;AAEFiE,qBAAW,CAFT;AAEY;AACdO,oBAAU,CAHR;AAGW;AACbN,gBAAM,IAJJ;AAKFC,qBAAW,IALT;AAMFM,iBAAO,MANL;AAMa;AACfC,sBAAY,KAPV;AAQFC,gBAAM;AARJ,SAnBF;AA6BJC,oBAAY,CA7BR;AA8BJC,wBAAgB;AA9BZ,OA5CF;AA4ENC,YAAM;AACF9E,cAAM,IADJ;AAEF+E,mBAAW,KAFT;AAGFnO,eAAO,SAHL;AAGgB;AAClB6L,yBAAiB,IAJf;AAIqB;AACvBuC,qBAAa,IALX;AAKiB;AACnBlC,mBAAW,IANT;AAMe;AACjBN,gBAAQ,CAPN;AAOS;AACXyC,qBAAa,CARX;AAQc;AAChBC,4BAAoB,CATlB;AASqB;AACvBC,oBAAY,CAVV;AAUa;AACfC,qBAAa,CAXX;AAWc;AAChBC,yBAAiB,IAZf;AAYqB;AACvBC,kBAAU,IAbR;AAac;AAChBC,uBAAe,SAdb;AAeFC,2BAAmB,CAfjB;AAgBF;AACAC,mBAAW,KAjBT;AAkBFC,mBAAW,KAlBT;AAmBFC,uBAAe,IAnBb;AAmBmB;AACrBC,2BAAmB,EApBjB,CAoBoB;;AApBpB,OA5EA;AAkGNC,mBAAa;AACTC,+BAAuB,OAAK,EADnB,CACsB;;AADtB,OAlGP;AAqGNC,aAAO;AArGD,KADd;AAAA,QAwGAC,UAAU,IAxGV;AAAA,QAwGoB;AACpBC,cAAU,IAzGV;AAAA,QAyGoB;AACpBC,kBAAc,IA1Gd;AAAA,QA0GoB;AACpBC,UAAM,IA3GN;AAAA,QA2GYC,OAAO,IA3GnB;AAAA,QA4GAvC,QAAQ,EA5GR;AAAA,QA4GYC,QAAQ,EA5GpB;AAAA,QA6GAuC,aAAa;AAAEnJ,YAAM,CAAR;AAAWiD,aAAO,CAAlB;AAAqBhD,WAAK,CAA1B;AAA6B+C,cAAQ;AAArC,KA7Gb;AAAA,QA8GAoG,YAAY,CA9GZ;AAAA,QA8GeC,aAAa,CA9G5B;AAAA,QA+GAR,QAAQ;AACJS,sBAAgB,EADZ;AAEJC,sBAAgB,EAFZ;AAGJC,yBAAmB,EAHf;AAIJC,qBAAe,EAJX;AAKJC,sBAAgB,EALZ;AAMJC,kBAAY,EANR;AAOJC,YAAM,EAPF;AAQJC,kBAAY,EARR;AASJC,mBAAa,EATT;AAUJC,gBAAU;AAVN,KA/GR;AAAA,QA2HAC,OAAO,IA3HP,CANiD,CAmIjD;;AACAA,SAAKC,OAAL,GAAeA,OAAf;AACAD,SAAKE,SAAL,GAAiBA,SAAjB;AACAF,SAAKJ,IAAL,GAAYA,IAAZ;;AACAI,SAAKG,cAAL,GAAsB,YAAW;AAAE,aAAOxF,WAAP;AAAqB,KAAxD;;AACAqF,SAAKI,SAAL,GAAiB,YAAW;AAAE,aAAOtB,QAAQrJ,OAAf;AAAyB,KAAvD;;AACAuK,SAAKK,aAAL,GAAqB,YAAW;AAAE,aAAOlB,UAAP;AAAoB,KAAtD;;AACAa,SAAK9I,KAAL,GAAa,YAAY;AAAE,aAAOkI,SAAP;AAAmB,KAA9C;;AACAY,SAAK7I,MAAL,GAAc,YAAY;AAAE,aAAOkI,UAAP;AAAoB,KAAhD;;AACAW,SAAKM,MAAL,GAAc,YAAY;AACtB,UAAItQ,IAAIgP,YAAYsB,MAAZ,EAAR;AACAtQ,QAAEgG,IAAF,IAAUmJ,WAAWnJ,IAArB;AACAhG,QAAEiG,GAAF,IAASkJ,WAAWlJ,GAApB;AACA,aAAOjG,CAAP;AACH,KALD;;AAMAgQ,SAAKO,OAAL,GAAe,YAAY;AAAE,aAAOxF,MAAP;AAAgB,KAA7C;;AACAiF,SAAKQ,OAAL,GAAe,YAAY;AACvB,UAAI7O,MAAM,EAAV;AAAA,UAAcvB,CAAd;AACAX,QAAE0F,IAAF,CAAOwH,MAAM8D,MAAN,CAAa7D,KAAb,CAAP,EAA4B,UAAU8D,CAAV,EAAaC,IAAb,EAAmB;AAC3C,YAAIA,IAAJ,EACIhP,IAAIgP,KAAK7K,SAAL,IAAkB6K,KAAKC,CAAL,IAAU,CAAV,GAAcD,KAAKC,CAAnB,GAAuB,EAAzC,IAA+C,MAAnD,IAA6DD,IAA7D;AACP,OAHD;AAIA,aAAOhP,GAAP;AACH,KAPD;;AAQAqO,SAAKa,QAAL,GAAgB,YAAY;AAAE,aAAOlE,KAAP;AAAe,KAA7C;;AACAqD,SAAKc,QAAL,GAAgB,YAAY;AAAE,aAAOlE,KAAP;AAAe,KAA7C;;AACAoD,SAAKe,GAAL,GAAWC,kBAAX;AACAhB,SAAKiB,GAAL,GAAWC,kBAAX;;AACAlB,SAAKmB,UAAL,GAAkB,YAAY;AAAE,aAAOnG,OAAP;AAAiB,KAAjD;;AACAgF,SAAKoB,SAAL,GAAiBA,SAAjB;AACApB,SAAKqB,WAAL,GAAmBA,WAAnB;AACArB,SAAKsB,oBAAL,GAA4BA,oBAA5B;;AACAtB,SAAKuB,WAAL,GAAmB,UAASC,KAAT,EAAgB;AAC/B,aAAO;AACHxL,cAAMhF,SAAS2L,MAAM8E,WAAWD,KAAX,EAAkB,GAAlB,IAAyB,CAA/B,EAAkCP,GAAlC,CAAsC,CAACO,MAAMtH,CAA7C,IAAkDiF,WAAWnJ,IAAtE,EAA4E,EAA5E,CADH;AAEHC,aAAKjF,SAAS4L,MAAM6E,WAAWD,KAAX,EAAkB,GAAlB,IAAyB,CAA/B,EAAkCP,GAAlC,CAAsC,CAACO,MAAMrH,CAA7C,IAAkDgF,WAAWlJ,GAAtE,EAA2E,EAA3E;AAFF,OAAP;AAIH,KALD;;AAMA+J,SAAKD,QAAL,GAAgBA,QAAhB;;AACAC,SAAK0B,OAAL,GAAe,YAAY;AACvB3B;AACApF,kBAAYgH,UAAZ,CAAuB,MAAvB,EAA+BC,KAA/B;AAEA7G,eAAS,EAAT;AACAC,gBAAU,IAAV;AACA8D,gBAAU,IAAV;AACAC,gBAAU,IAAV;AACAC,oBAAc,IAAd;AACAC,YAAM,IAAN;AACAC,aAAO,IAAP;AACAvC,cAAQ,EAAR;AACAC,cAAQ,EAAR;AACAiC,cAAQ,IAAR;AACAgD,mBAAa,EAAb;AACA7B,aAAO,IAAP;AACH,KAhBD;;AAiBAA,SAAK/I,MAAL,GAAc,YAAY;AACzB,UAAIC,QAAQyD,YAAYzD,KAAZ,EAAZ;AAAA,UACCC,SAASwD,YAAYxD,MAAZ,EADV;AAEG2H,cAAQ7H,MAAR,CAAeC,KAAf,EAAsBC,MAAtB;AACA4H,cAAQ9H,MAAR,CAAeC,KAAf,EAAsBC,MAAtB;AACH,KALD,CA3LiD,CAkMjD;;;AACA6I,SAAKnB,KAAL,GAAaA,KAAb,CAnMiD,CAqMjD;;AACAiD,gBAAY9B,IAAZ;AACA+B,iBAAalH,QAAb;AACAmH;AACA/B,YAAQrF,KAAR;AACAsF;AACAN;AACAC;;AAGA,aAASoC,YAAT,CAAsBC,IAAtB,EAA4BC,IAA5B,EAAkC;AAC9BA,aAAO,CAACnC,IAAD,EAAOS,MAAP,CAAc0B,IAAd,CAAP;;AACA,WAAK,IAAI/R,IAAI,CAAb,EAAgBA,IAAI8R,KAAK7R,MAAzB,EAAiC,EAAED,CAAnC;AACI8R,aAAK9R,CAAL,EAAQgS,KAAR,CAAc,IAAd,EAAoBD,IAApB;AADJ;AAEH;;AAED,aAASL,WAAT,GAAuB;AAEnB;AAEA,UAAI/I,UAAU;AACVzD,gBAAQA;AADE,OAAd;;AAIA,WAAK,IAAIlF,IAAI,CAAb,EAAgBA,IAAI0K,QAAQzK,MAA5B,EAAoC,EAAED,CAAtC,EAAyC;AACrC,YAAIiS,IAAIvH,QAAQ1K,CAAR,CAAR;AACAiS,UAAEC,IAAF,CAAOtC,IAAP,EAAajH,OAAb;AACA,YAAIsJ,EAAErH,OAAN,EACIvL,EAAE8S,MAAF,CAAS,IAAT,EAAevH,OAAf,EAAwBqH,EAAErH,OAA1B;AACP;AACJ;;AAED,aAAS+G,YAAT,CAAsBS,IAAtB,EAA4B;AAExB/S,QAAE8S,MAAF,CAAS,IAAT,EAAevH,OAAf,EAAwBwH,IAAxB,EAFwB,CAIxB;AACA;AACA;AACA;;AAEA,UAAIA,QAAQA,KAAKvH,MAAjB,EAAyB;AACxBD,gBAAQC,MAAR,GAAiBuH,KAAKvH,MAAtB;AACA;;AAED,UAAID,QAAQU,KAAR,CAAchM,KAAd,IAAuB,IAA3B,EACIsL,QAAQU,KAAR,CAAchM,KAAd,GAAsBD,EAAEC,KAAF,CAAQ+B,KAAR,CAAcuJ,QAAQ4C,IAAR,CAAalO,KAA3B,EAAkCc,KAAlC,CAAwC,GAAxC,EAA6C,IAA7C,EAAmDE,QAAnD,EAAtB;AACJ,UAAIsK,QAAQ0B,KAAR,CAAchN,KAAd,IAAuB,IAA3B,EACIsL,QAAQ0B,KAAR,CAAchN,KAAd,GAAsBD,EAAEC,KAAF,CAAQ+B,KAAR,CAAcuJ,QAAQ4C,IAAR,CAAalO,KAA3B,EAAkCc,KAAlC,CAAwC,GAAxC,EAA6C,IAA7C,EAAmDE,QAAnD,EAAtB;AAEJ,UAAIsK,QAAQU,KAAR,CAAcE,SAAd,IAA2B,IAA/B,EAAqC;AACjCZ,gBAAQU,KAAR,CAAcE,SAAd,GAA0BZ,QAAQ4C,IAAR,CAAahC,SAAb,IAA0BZ,QAAQU,KAAR,CAAchM,KAAlE;AACJ,UAAIsL,QAAQ0B,KAAR,CAAcd,SAAd,IAA2B,IAA/B,EAAqC;AACjCZ,gBAAQ0B,KAAR,CAAcd,SAAd,GAA0BZ,QAAQ4C,IAAR,CAAahC,SAAb,IAA0BZ,QAAQ0B,KAAR,CAAchN,KAAlE;AAEJ,UAAIsL,QAAQ4C,IAAR,CAAaE,WAAb,IAA4B,IAAhC,EACI9C,QAAQ4C,IAAR,CAAaE,WAAb,GAA2B9C,QAAQ4C,IAAR,CAAalO,KAAxC;AACJ,UAAIsL,QAAQ4C,IAAR,CAAahC,SAAb,IAA0B,IAA9B,EACIZ,QAAQ4C,IAAR,CAAahC,SAAb,GAAyBnM,EAAEC,KAAF,CAAQ+B,KAAR,CAAcuJ,QAAQ4C,IAAR,CAAalO,KAA3B,EAAkCc,KAAlC,CAAwC,GAAxC,EAA6C,IAA7C,EAAmDE,QAAnD,EAAzB,CA1BoB,CA4BxB;AACA;AAEA;AACA;;AAEA,UAAIN,CAAJ;AAAA,UAAOqS,WAAP;AAAA,UAAoBC,SAApB;AAAA,UACIC,WAAWhI,YAAYvJ,GAAZ,CAAgB,WAAhB,CADf;AAAA,UAEIwR,kBAAkBD,WAAW,CAACA,SAASE,OAAT,CAAiB,IAAjB,EAAuB,EAAvB,CAAZ,GAAyC,EAF/D;AAAA,UAGIC,eAAe;AACXrL,eAAOkD,YAAYvJ,GAAZ,CAAgB,YAAhB,CADI;AAEXuI,cAAMY,KAAKC,KAAL,CAAW,MAAMoI,eAAjB,CAFK;AAGXnJ,iBAASkB,YAAYvJ,GAAZ,CAAgB,cAAhB,CAHE;AAIXsI,gBAAQiB,YAAYvJ,GAAZ,CAAgB,aAAhB,CAJG;AAKXyI,gBAAQc,YAAYvJ,GAAZ,CAAgB,aAAhB;AALG,OAHnB;AAWAsR,kBAAY1H,QAAQ2B,KAAR,CAActM,MAAd,IAAwB,CAApC;;AACA,WAAKD,IAAI,CAAT,EAAYA,IAAIsS,SAAhB,EAA2B,EAAEtS,CAA7B,EAAgC;AAE5BqS,sBAAczH,QAAQ2B,KAAR,CAAcvM,CAAd,CAAd;;AACA,YAAIqS,eAAe,CAACA,YAAY7G,SAAhC,EAA2C;AACvC6G,sBAAY7G,SAAZ,GAAwB6G,YAAY/S,KAApC;AACH;;AAED+S,sBAAchT,EAAE8S,MAAF,CAAS,IAAT,EAAe,EAAf,EAAmBvH,QAAQU,KAA3B,EAAkC+G,WAAlC,CAAd;AACAzH,gBAAQ2B,KAAR,CAAcvM,CAAd,IAAmBqS,WAAnB;;AAEA,YAAIA,YAAYpJ,IAAhB,EAAsB;AAClBoJ,sBAAYpJ,IAAZ,GAAmB5J,EAAE8S,MAAF,CAAS,EAAT,EAAaO,YAAb,EAA2BL,YAAYpJ,IAAvC,CAAnB;;AACA,cAAI,CAACoJ,YAAYpJ,IAAZ,CAAiB3J,KAAtB,EAA6B;AACzB+S,wBAAYpJ,IAAZ,CAAiB3J,KAAjB,GAAyB+S,YAAY/S,KAArC;AACH;;AACD,cAAI,CAAC+S,YAAYpJ,IAAZ,CAAiBO,UAAtB,EAAkC;AAC9B6I,wBAAYpJ,IAAZ,CAAiBO,UAAjB,GAA8BW,KAAKC,KAAL,CAAWiI,YAAYpJ,IAAZ,CAAiBM,IAAjB,GAAwB,IAAnC,CAA9B;AACH;AACJ;AACJ;;AAED+I,kBAAY1H,QAAQ4B,KAAR,CAAcvM,MAAd,IAAwB,CAApC;;AACA,WAAKD,IAAI,CAAT,EAAYA,IAAIsS,SAAhB,EAA2B,EAAEtS,CAA7B,EAAgC;AAE5BqS,sBAAczH,QAAQ4B,KAAR,CAAcxM,CAAd,CAAd;;AACA,YAAIqS,eAAe,CAACA,YAAY7G,SAAhC,EAA2C;AACvC6G,sBAAY7G,SAAZ,GAAwB6G,YAAY/S,KAApC;AACH;;AAED+S,sBAAchT,EAAE8S,MAAF,CAAS,IAAT,EAAe,EAAf,EAAmBvH,QAAQ0B,KAA3B,EAAkC+F,WAAlC,CAAd;AACAzH,gBAAQ4B,KAAR,CAAcxM,CAAd,IAAmBqS,WAAnB;;AAEA,YAAIA,YAAYpJ,IAAhB,EAAsB;AAClBoJ,sBAAYpJ,IAAZ,GAAmB5J,EAAE8S,MAAF,CAAS,EAAT,EAAaO,YAAb,EAA2BL,YAAYpJ,IAAvC,CAAnB;;AACA,cAAI,CAACoJ,YAAYpJ,IAAZ,CAAiB3J,KAAtB,EAA6B;AACzB+S,wBAAYpJ,IAAZ,CAAiB3J,KAAjB,GAAyB+S,YAAY/S,KAArC;AACH;;AACD,cAAI,CAAC+S,YAAYpJ,IAAZ,CAAiBO,UAAtB,EAAkC;AAC9B6I,wBAAYpJ,IAAZ,CAAiBO,UAAjB,GAA8BW,KAAKC,KAAL,CAAWiI,YAAYpJ,IAAZ,CAAiBM,IAAjB,GAAwB,IAAnC,CAA9B;AACH;AACJ;AACJ,OAvFuB,CAyFxB;;;AACA,UAAIqB,QAAQU,KAAR,CAAcqH,OAAd,IAAyB/H,QAAQU,KAAR,CAAcM,KAAd,IAAuB,IAApD,EACIhB,QAAQU,KAAR,CAAcM,KAAd,GAAsBhB,QAAQU,KAAR,CAAcqH,OAApC;AACJ,UAAI/H,QAAQ0B,KAAR,CAAcqG,OAAd,IAAyB/H,QAAQ0B,KAAR,CAAcV,KAAd,IAAuB,IAApD,EACIhB,QAAQ0B,KAAR,CAAcV,KAAd,GAAsBhB,QAAQ0B,KAAR,CAAcqG,OAApC;;AACJ,UAAI/H,QAAQgI,MAAZ,EAAoB;AAChBhI,gBAAQ2B,KAAR,CAAc,CAAd,IAAmBlN,EAAE8S,MAAF,CAAS,IAAT,EAAe,EAAf,EAAmBvH,QAAQU,KAA3B,EAAkCV,QAAQgI,MAA1C,CAAnB;AACAhI,gBAAQ2B,KAAR,CAAc,CAAd,EAAiB5G,QAAjB,GAA4B,KAA5B,CAFgB,CAGhB;;AACA,YAAIiF,QAAQgI,MAAR,CAAenS,GAAf,IAAsB,IAA1B,EAAgC;AAC5BmK,kBAAQ2B,KAAR,CAAc,CAAd,EAAiB9L,GAAjB,GAAuB,IAAvB;AACH;;AACD,YAAImK,QAAQgI,MAAR,CAAejS,GAAf,IAAsB,IAA1B,EAAgC;AAC5BiK,kBAAQ2B,KAAR,CAAc,CAAd,EAAiB5L,GAAjB,GAAuB,IAAvB;AACH;AACJ;;AACD,UAAIiK,QAAQiI,MAAZ,EAAoB;AAChBjI,gBAAQ4B,KAAR,CAAc,CAAd,IAAmBnN,EAAE8S,MAAF,CAAS,IAAT,EAAe,EAAf,EAAmBvH,QAAQ0B,KAA3B,EAAkC1B,QAAQiI,MAA1C,CAAnB;AACAjI,gBAAQ4B,KAAR,CAAc,CAAd,EAAiB7G,QAAjB,GAA4B,OAA5B,CAFgB,CAGhB;;AACA,YAAIiF,QAAQiI,MAAR,CAAepS,GAAf,IAAsB,IAA1B,EAAgC;AAC5BmK,kBAAQ4B,KAAR,CAAc,CAAd,EAAiB/L,GAAjB,GAAuB,IAAvB;AACH;;AACD,YAAImK,QAAQiI,MAAR,CAAelS,GAAf,IAAsB,IAA1B,EAAgC;AAC5BiK,kBAAQ4B,KAAR,CAAc,CAAd,EAAiB7L,GAAjB,GAAuB,IAAvB;AACH;AACJ;;AACD,UAAIiK,QAAQ4C,IAAR,CAAasF,YAAjB,EACIlI,QAAQ4C,IAAR,CAAaQ,QAAb,GAAwBpD,QAAQ4C,IAAR,CAAasF,YAArC;AACJ,UAAIlI,QAAQ4C,IAAR,CAAauF,iBAAjB,EACInI,QAAQ4C,IAAR,CAAaS,aAAb,GAA6BrD,QAAQ4C,IAAR,CAAauF,iBAA1C;AACJ,UAAInI,QAAQmC,KAAZ,EACI1N,EAAE8S,MAAF,CAAS,IAAT,EAAevH,QAAQD,MAAR,CAAeoC,KAA9B,EAAqCnC,QAAQmC,KAA7C;AACJ,UAAInC,QAAQ6B,MAAZ,EACIpN,EAAE8S,MAAF,CAAS,IAAT,EAAevH,QAAQD,MAAR,CAAe8B,MAA9B,EAAsC7B,QAAQ6B,MAA9C;AACJ,UAAI7B,QAAQqC,IAAZ,EACI5N,EAAE8S,MAAF,CAAS,IAAT,EAAevH,QAAQD,MAAR,CAAesC,IAA9B,EAAoCrC,QAAQqC,IAA5C;AACJ,UAAIrC,QAAQ0C,UAAR,IAAsB,IAA1B,EACI1C,QAAQD,MAAR,CAAe2C,UAAf,GAA4B1C,QAAQ0C,UAApC;AACJ,UAAI1C,QAAQ2C,cAAR,IAA0B,IAA9B,EACI3C,QAAQD,MAAR,CAAe4C,cAAf,GAAgC3C,QAAQ2C,cAAxC,CAjIoB,CAmIxB;;AACA,WAAKvN,IAAI,CAAT,EAAYA,IAAI4K,QAAQ2B,KAAR,CAActM,MAA9B,EAAsC,EAAED,CAAxC;AACIgT,wBAAgBzG,KAAhB,EAAuBvM,IAAI,CAA3B,EAA8B4K,OAA9B,GAAwCA,QAAQ2B,KAAR,CAAcvM,CAAd,CAAxC;AADJ;;AAEA,WAAKA,IAAI,CAAT,EAAYA,IAAI4K,QAAQ4B,KAAR,CAAcvM,MAA9B,EAAsC,EAAED,CAAxC;AACIgT,wBAAgBxG,KAAhB,EAAuBxM,IAAI,CAA3B,EAA8B4K,OAA9B,GAAwCA,QAAQ4B,KAAR,CAAcxM,CAAd,CAAxC;AADJ,OAtIwB,CAyIxB;;;AACA,WAAK,IAAIwQ,CAAT,IAAc/B,KAAd;AACI,YAAI7D,QAAQ6D,KAAR,CAAc+B,CAAd,KAAoB5F,QAAQ6D,KAAR,CAAc+B,CAAd,EAAiBvQ,MAAzC,EACIwO,MAAM+B,CAAN,IAAW/B,MAAM+B,CAAN,EAASH,MAAT,CAAgBzF,QAAQ6D,KAAR,CAAc+B,CAAd,CAAhB,CAAX;AAFR;;AAIAqB,mBAAapD,MAAMS,cAAnB,EAAmC,CAACtE,OAAD,CAAnC;AACH;;AAED,aAASiF,OAAT,CAAiB9P,CAAjB,EAAoB;AAChB4K,eAASsI,UAAUlT,CAAV,CAAT;AACAmT;AACAC;AACH;;AAED,aAASF,SAAT,CAAmBlT,CAAnB,EAAsB;AAClB,UAAIwB,MAAM,EAAV;;AACA,WAAK,IAAIvB,IAAI,CAAb,EAAgBA,IAAID,EAAEE,MAAtB,EAA8B,EAAED,CAAhC,EAAmC;AAC/B,YAAIoT,IAAI/T,EAAE8S,MAAF,CAAS,IAAT,EAAe,EAAf,EAAmBvH,QAAQD,MAA3B,CAAR;;AAEA,YAAI5K,EAAEC,CAAF,EAAKqT,IAAL,IAAa,IAAjB,EAAuB;AACnBD,YAAEC,IAAF,GAAStT,EAAEC,CAAF,EAAKqT,IAAd,CADmB,CACC;;AACpB,iBAAOtT,EAAEC,CAAF,EAAKqT,IAAZ;AAEAhU,YAAE8S,MAAF,CAAS,IAAT,EAAeiB,CAAf,EAAkBrT,EAAEC,CAAF,CAAlB;AAEAD,YAAEC,CAAF,EAAKqT,IAAL,GAAYD,EAAEC,IAAd;AACH,SAPD,MASID,EAAEC,IAAF,GAAStT,EAAEC,CAAF,CAAT;;AACJuB,YAAI2I,IAAJ,CAASkJ,CAAT;AACH;;AAED,aAAO7R,GAAP;AACH;;AAED,aAAS8P,UAAT,CAAoBiC,GAApB,EAAyBC,KAAzB,EAAgC;AAC5B,UAAI5T,IAAI2T,IAAIC,QAAQ,MAAZ,CAAR;AACA,UAAI,QAAO5T,CAAP,KAAY,QAAhB,EAA0B;AACtBA,YAAIA,EAAE6Q,CAAN;AACJ,UAAI,OAAO7Q,CAAP,IAAY,QAAhB,EACIA,IAAI,CAAJ,CALwB,CAKjB;;AACX,aAAOA,CAAP;AACH;;AAED,aAAS6T,OAAT,GAAmB;AACf;AACA,aAAOnU,EAAEoU,IAAF,CAAOlH,MAAM8D,MAAN,CAAa7D,KAAb,CAAP,EAA4B,UAAU7M,CAAV,EAAa;AAAE,eAAOA,CAAP;AAAW,OAAtD,CAAP;AACH;;AAED,aAASiR,kBAAT,CAA4B8C,GAA5B,EAAiC;AAC7B;AACA,UAAInS,MAAM,EAAV;AAAA,UAAcvB,CAAd;AAAA,UAAiBuQ,IAAjB;;AACA,WAAKvQ,IAAI,CAAT,EAAYA,IAAIuM,MAAMtM,MAAtB,EAA8B,EAAED,CAAhC,EAAmC;AAC/BuQ,eAAOhE,MAAMvM,CAAN,CAAP;AACA,YAAIuQ,QAAQA,KAAKoD,IAAjB,EACIpS,IAAI,MAAMgP,KAAKC,CAAf,IAAoBD,KAAKI,GAAL,CAAS+C,IAAI9N,IAAb,CAApB;AACP;;AAED,WAAK5F,IAAI,CAAT,EAAYA,IAAIwM,MAAMvM,MAAtB,EAA8B,EAAED,CAAhC,EAAmC;AAC/BuQ,eAAO/D,MAAMxM,CAAN,CAAP;AACA,YAAIuQ,QAAQA,KAAKoD,IAAjB,EACIpS,IAAI,MAAMgP,KAAKC,CAAf,IAAoBD,KAAKI,GAAL,CAAS+C,IAAI7N,GAAb,CAApB;AACP;;AAED,UAAItE,IAAIqS,EAAJ,KAAWC,SAAf,EACItS,IAAIuI,CAAJ,GAAQvI,IAAIqS,EAAZ;AACJ,UAAIrS,IAAIuS,EAAJ,KAAWD,SAAf,EACItS,IAAIwI,CAAJ,GAAQxI,IAAIuS,EAAZ;AAEJ,aAAOvS,GAAP;AACH;;AAED,aAASuP,kBAAT,CAA4B4C,GAA5B,EAAiC;AAC7B;AACA,UAAInS,MAAM,EAAV;AAAA,UAAcvB,CAAd;AAAA,UAAiBuQ,IAAjB;AAAA,UAAuBnI,GAAvB;;AAEA,WAAKpI,IAAI,CAAT,EAAYA,IAAIuM,MAAMtM,MAAtB,EAA8B,EAAED,CAAhC,EAAmC;AAC/BuQ,eAAOhE,MAAMvM,CAAN,CAAP;;AACA,YAAIuQ,QAAQA,KAAKoD,IAAjB,EAAuB;AACnBvL,gBAAM,MAAMmI,KAAKC,CAAjB;AACA,cAAIkD,IAAItL,GAAJ,KAAY,IAAZ,IAAoBmI,KAAKC,CAAL,IAAU,CAAlC,EACIpI,MAAM,GAAN;;AAEJ,cAAIsL,IAAItL,GAAJ,KAAY,IAAhB,EAAsB;AAClB7G,gBAAIqE,IAAJ,GAAW2K,KAAKM,GAAL,CAAS6C,IAAItL,GAAJ,CAAT,CAAX;AACA;AACH;AACJ;AACJ;;AAED,WAAKpI,IAAI,CAAT,EAAYA,IAAIwM,MAAMvM,MAAtB,EAA8B,EAAED,CAAhC,EAAmC;AAC/BuQ,eAAO/D,MAAMxM,CAAN,CAAP;;AACA,YAAIuQ,QAAQA,KAAKoD,IAAjB,EAAuB;AACnBvL,gBAAM,MAAMmI,KAAKC,CAAjB;AACA,cAAIkD,IAAItL,GAAJ,KAAY,IAAZ,IAAoBmI,KAAKC,CAAL,IAAU,CAAlC,EACIpI,MAAM,GAAN;;AAEJ,cAAIsL,IAAItL,GAAJ,KAAY,IAAhB,EAAsB;AAClB7G,gBAAIsE,GAAJ,GAAU0K,KAAKM,GAAL,CAAS6C,IAAItL,GAAJ,CAAT,CAAV;AACA;AACH;AACJ;AACJ;;AAED,aAAO7G,GAAP;AACH;;AAED,aAASyR,eAAT,CAAyBe,IAAzB,EAA+BC,MAA/B,EAAuC;AACnC,UAAI,CAACD,KAAKC,SAAS,CAAd,CAAL,EACID,KAAKC,SAAS,CAAd,IAAmB;AACfxD,WAAGwD,MADY;AACJ;AACXtO,mBAAWqO,QAAQxH,KAAR,GAAgB,GAAhB,GAAsB,GAFlB;AAGf3B,iBAASvL,EAAE8S,MAAF,CAAS,IAAT,EAAe,EAAf,EAAmB4B,QAAQxH,KAAR,GAAgB3B,QAAQU,KAAxB,GAAgCV,QAAQ0B,KAA3D;AAHM,OAAnB;AAMJ,aAAOyH,KAAKC,SAAS,CAAd,CAAP;AACH;;AAED,aAASd,mBAAT,GAA+B;AAE3B,UAAIe,eAAetJ,OAAO1K,MAA1B;AAAA,UAAkCiU,WAAW,CAAC,CAA9C;AAAA,UAAiDlU,CAAjD,CAF2B,CAI3B;AACA;;AAEA,WAAKA,IAAI,CAAT,EAAYA,IAAI2K,OAAO1K,MAAvB,EAA+B,EAAED,CAAjC,EAAoC;AAChC,YAAImU,KAAKxJ,OAAO3K,CAAP,EAAUV,KAAnB;;AACA,YAAI6U,MAAM,IAAV,EAAgB;AACZF;;AACA,cAAI,OAAOE,EAAP,IAAa,QAAb,IAAyBA,KAAKD,QAAlC,EAA4C;AACxCA,uBAAWC,EAAX;AACH;AACJ;AACJ,OAf0B,CAiB3B;AACA;;;AAEA,UAAIF,gBAAgBC,QAApB,EAA8B;AAC1BD,uBAAeC,WAAW,CAA1B;AACH,OAtB0B,CAwB3B;AACA;;;AAEA,UAAIpU,CAAJ;AAAA,UAAO+K,SAAS,EAAhB;AAAA,UAAoBuJ,YAAYxJ,QAAQC,MAAxC;AAAA,UACIwJ,gBAAgBD,UAAUnU,MAD9B;AAAA,UACsCqU,YAAY,CADlD;;AAGA,WAAKtU,IAAI,CAAT,EAAYA,IAAIiU,YAAhB,EAA8BjU,GAA9B,EAAmC;AAE/BF,YAAIT,EAAEC,KAAF,CAAQ+B,KAAR,CAAc+S,UAAUpU,IAAIqU,aAAd,KAAgC,MAA9C,CAAJ,CAF+B,CAI/B;AACA;AACA;AACA;AAEA;AACA;;AAEA,YAAIrU,IAAIqU,aAAJ,IAAqB,CAArB,IAA0BrU,CAA9B,EAAiC;AAC7B,cAAIsU,aAAa,CAAjB,EAAoB;AAChB,gBAAIA,YAAY,GAAhB,EAAqB;AACjBA,0BAAY,CAACA,SAAD,GAAa,GAAzB;AACH,aAFD,MAEOA,YAAY,CAAZ;AACV,WAJD,MAIOA,YAAY,CAACA,SAAb;AACV;;AAEDzJ,eAAO7K,CAAP,IAAYF,EAAEM,KAAF,CAAQ,KAAR,EAAe,IAAIkU,SAAnB,CAAZ;AACH,OAnD0B,CAqD3B;;;AAEA,UAAIC,SAAS,CAAb;AAAA,UAAgBnB,CAAhB;;AACA,WAAKpT,IAAI,CAAT,EAAYA,IAAI2K,OAAO1K,MAAvB,EAA+B,EAAED,CAAjC,EAAoC;AAChCoT,YAAIzI,OAAO3K,CAAP,CAAJ,CADgC,CAGhC;;AACA,YAAIoT,EAAE9T,KAAF,IAAW,IAAf,EAAqB;AACjB8T,YAAE9T,KAAF,GAAUuL,OAAO0J,MAAP,EAAejU,QAAf,EAAV;AACA,YAAEiU,MAAF;AACH,SAHD,MAIK,IAAI,OAAOnB,EAAE9T,KAAT,IAAkB,QAAtB,EACD8T,EAAE9T,KAAF,GAAUuL,OAAOuI,EAAE9T,KAAT,EAAgBgB,QAAhB,EAAV,CAT4B,CAWhC;;;AACA,YAAI8S,EAAErG,KAAF,CAAQrE,IAAR,IAAgB,IAApB,EAA0B;AACtB,cAAI8L,CAAJ;AAAA,cAAO9L,OAAO,IAAd;;AACA,eAAK8L,CAAL,IAAUpB,CAAV;AACI,gBAAIA,EAAEoB,CAAF,KAAQpB,EAAEoB,CAAF,EAAK9L,IAAjB,EAAuB;AACnBA,qBAAO,KAAP;AACA;AACH;AAJL;;AAKA,cAAIA,IAAJ,EACI0K,EAAErG,KAAF,CAAQrE,IAAR,GAAe,IAAf;AACP,SArB+B,CAuBhC;AACA;;;AAEA,YAAI0K,EAAErG,KAAF,CAAQM,IAAR,IAAgB,IAApB,EAA0B;AACtB+F,YAAErG,KAAF,CAAQM,IAAR,GAAe,CAAC,CAAC+F,EAAErG,KAAF,CAAQH,IAAzB;AACH,SA5B+B,CA8BhC;;;AACAwG,UAAE9H,KAAF,GAAU0H,gBAAgBzG,KAAhB,EAAuB8E,WAAW+B,CAAX,EAAc,GAAd,CAAvB,CAAV;AACAA,UAAE9G,KAAF,GAAU0G,gBAAgBxG,KAAhB,EAAuB6E,WAAW+B,CAAX,EAAc,GAAd,CAAvB,CAAV;AACH;AACJ;;AAED,aAASD,WAAT,GAAuB;AACnB,UAAIsB,YAAYC,OAAOC,iBAAvB;AAAA,UACIC,eAAeF,OAAOG,iBAD1B;AAAA,UAEIC,eAAeJ,OAAOK,SAF1B;AAAA,UAGI/U,CAHJ;AAAA,UAGOgV,CAHP;AAAA,UAGUC,CAHV;AAAA,UAGazT,CAHb;AAAA,UAGgBvB,MAHhB;AAAA,UAIImT,CAJJ;AAAA,UAIO3G,MAJP;AAAA,UAIeyI,EAJf;AAAA,UAImBpL,CAJnB;AAAA,UAIsBC,CAJtB;AAAA,UAIyBwG,IAJzB;AAAA,UAI+B4E,GAJ/B;AAAA,UAIoC9U,CAJpC;AAAA,UAIuC4R,CAJvC;AAAA,UAKIoB,IALJ;AAAA,UAKU+B,MALV;;AAOA,eAASC,UAAT,CAAoB9E,IAApB,EAA0B9P,GAA1B,EAA+BE,GAA/B,EAAoC;AAChC,YAAIF,MAAM8P,KAAK+E,OAAX,IAAsB7U,OAAO,CAACqU,YAAlC,EACIvE,KAAK+E,OAAL,GAAe7U,GAAf;AACJ,YAAIE,MAAM4P,KAAKgF,OAAX,IAAsB5U,OAAOmU,YAAjC,EACIvE,KAAKgF,OAAL,GAAe5U,GAAf;AACP;;AAEDtB,QAAE0F,IAAF,CAAOyO,SAAP,EAAkB,UAAUlD,CAAV,EAAaC,IAAb,EAAmB;AACjC;AACAA,aAAK+E,OAAL,GAAeb,SAAf;AACAlE,aAAKgF,OAAL,GAAeX,YAAf;AACArE,aAAKoD,IAAL,GAAY,KAAZ;AACH,OALD;;AAOA,WAAK3T,IAAI,CAAT,EAAYA,IAAI2K,OAAO1K,MAAvB,EAA+B,EAAED,CAAjC,EAAoC;AAChCoT,YAAIzI,OAAO3K,CAAP,CAAJ;AACAoT,UAAEoC,UAAF,GAAe;AAAE/I,kBAAQ;AAAV,SAAf;AAEAoF,qBAAapD,MAAMU,cAAnB,EAAmC,CAAEiE,CAAF,EAAKA,EAAEC,IAAP,EAAaD,EAAEoC,UAAf,CAAnC;AACH,OA3BkB,CA6BnB;;;AACA,WAAKxV,IAAI,CAAT,EAAYA,IAAI2K,OAAO1K,MAAvB,EAA+B,EAAED,CAAjC,EAAoC;AAChCoT,YAAIzI,OAAO3K,CAAP,CAAJ;AAEAqT,eAAOD,EAAEC,IAAT;AACA+B,iBAAShC,EAAEoC,UAAF,CAAaJ,MAAtB;;AAEA,YAAI,CAACA,MAAL,EAAa;AACTA,mBAAS,EAAT,CADS,CAET;;AACAA,iBAAOlL,IAAP,CAAY;AAAEJ,eAAG,IAAL;AAAWkK,oBAAQ,IAAnB;AAAyByB,sBAAU;AAAnC,WAAZ;AACAL,iBAAOlL,IAAP,CAAY;AAAEH,eAAG,IAAL;AAAWiK,oBAAQ,IAAnB;AAAyByB,sBAAU;AAAnC,WAAZ;;AAEA,cAAIrC,EAAEnG,IAAF,CAAOvE,IAAP,IAAgB0K,EAAErG,KAAF,CAAQrE,IAAR,IAAgB0K,EAAErG,KAAF,CAAQH,IAA5C,EAAmD;AAC/C,gBAAI8I,YAAY,CAAC,EAAGtC,EAAEnG,IAAF,CAAOvE,IAAP,IAAe0K,EAAEnG,IAAF,CAAOI,IAAvB,IAAiC+F,EAAErG,KAAF,CAAQrE,IAAR,IAAgB0K,EAAErG,KAAF,CAAQM,IAA3D,CAAjB;AACA+H,mBAAOlL,IAAP,CAAY;AAAEH,iBAAG,IAAL;AAAWiK,sBAAQ,IAAnB;AAAyByB,wBAAU,KAAnC;AAA0CE,4BAAc,CAAxD;AAA2DD,yBAAWA;AAAtE,aAAZ;;AACA,gBAAItC,EAAEnG,IAAF,CAAOG,UAAX,EAAuB;AACnB,qBAAOgI,OAAOA,OAAOnV,MAAP,GAAgB,CAAvB,EAA0B8J,CAAjC;AACAqL,qBAAOA,OAAOnV,MAAP,GAAgB,CAAvB,EAA0B6J,CAA1B,GAA8B,IAA9B;AACH;AACJ;;AAEDsJ,YAAEoC,UAAF,CAAaJ,MAAb,GAAsBA,MAAtB;AACH;;AAED,YAAIhC,EAAEoC,UAAF,CAAaI,SAAb,IAA0B,IAA9B,EACI,SAzB4B,CAyBlB;;AAEdxC,UAAEoC,UAAF,CAAaI,SAAb,GAAyBR,OAAOnV,MAAhC;AAEAiV,aAAK9B,EAAEoC,UAAF,CAAaI,SAAlB;AACAnJ,iBAAS2G,EAAEoC,UAAF,CAAa/I,MAAtB;AAEA,YAAIoJ,cAAczC,EAAErG,KAAF,CAAQrE,IAAR,IAAgB0K,EAAErG,KAAF,CAAQC,KAA1C;AACAoG,UAAE9H,KAAF,CAAQqI,IAAR,GAAeP,EAAE9G,KAAF,CAAQqH,IAAR,GAAe,IAA9B;;AAEA,aAAKqB,IAAIC,IAAI,CAAb,EAAgBD,IAAI3B,KAAKpT,MAAzB,EAAiC,EAAE+U,CAAF,EAAKC,KAAKC,EAA3C,EAA+C;AAC3CjD,cAAIoB,KAAK2B,CAAL,CAAJ;AAEA,cAAIc,UAAU7D,KAAK,IAAnB;;AACA,cAAI,CAAC6D,OAAL,EAAc;AACV,iBAAKtU,IAAI,CAAT,EAAYA,IAAI0T,EAAhB,EAAoB,EAAE1T,CAAtB,EAAyB;AACrB2T,oBAAMlD,EAAEzQ,CAAF,CAAN;AACAnB,kBAAI+U,OAAO5T,CAAP,CAAJ;;AAEA,kBAAInB,CAAJ,EAAO;AACH,oBAAIA,EAAE2T,MAAF,IAAYmB,OAAO,IAAvB,EAA6B;AACzBA,wBAAM,CAACA,GAAP,CADyB,CACb;;AACZ,sBAAIY,MAAMZ,GAAN,CAAJ,EACIA,MAAM,IAAN,CADJ,KAEK,IAAIA,OAAOa,QAAX,EACDb,MAAML,YAAN,CADC,KAEA,IAAIK,OAAO,CAACa,QAAZ,EACDb,MAAM,CAACL,YAAP;AACP;;AAED,oBAAIK,OAAO,IAAX,EAAiB;AACb,sBAAI9U,EAAEoV,QAAN,EACIK,UAAU,IAAV;AAEJ,sBAAIzV,EAAEsV,YAAF,IAAkB,IAAtB,EACIR,MAAM9U,EAAEsV,YAAR;AACP;AACJ;;AAEDlJ,qBAAOwI,IAAIzT,CAAX,IAAgB2T,GAAhB;AACH;AACJ;;AAED,cAAIW,OAAJ,EAAa;AACT,iBAAKtU,IAAI,CAAT,EAAYA,IAAI0T,EAAhB,EAAoB,EAAE1T,CAAtB,EAAyB;AACrB2T,oBAAM1I,OAAOwI,IAAIzT,CAAX,CAAN;;AACA,kBAAI2T,OAAO,IAAX,EAAiB;AACb9U,oBAAI+U,OAAO5T,CAAP,CAAJ,CADa,CAEb;;AACA,oBAAInB,EAAEqV,SAAF,KAAgB,KAApB,EAA2B;AACvB,sBAAIrV,EAAEyJ,CAAN,EAAS;AACLuL,+BAAWjC,EAAE9H,KAAb,EAAoB6J,GAApB,EAAyBA,GAAzB;AACH;;AACD,sBAAI9U,EAAE0J,CAAN,EAAS;AACLsL,+BAAWjC,EAAE9G,KAAb,EAAoB6I,GAApB,EAAyBA,GAAzB;AACH;AACJ;AACJ;;AACD1I,qBAAOwI,IAAIzT,CAAX,IAAgB,IAAhB;AACH;AACJ;;AAED,cAAIqU,eAAeZ,IAAI,CAAnB,KAAyB,CAACa,OAAD,IAAYrJ,OAAOwI,IAAIC,EAAX,KAAkB,IAAvD,CAAJ,EAAkE;AAC9D;AACA,iBAAK1T,IAAI,CAAT,EAAYA,IAAI0T,EAAhB,EAAoB,EAAE1T,CAAtB;AACIiL,qBAAOwI,IAAIC,EAAJ,GAAS1T,CAAhB,IAAqBiL,OAAOwI,IAAIzT,CAAX,CAArB;AADJ,aAF8D,CAK9D;;;AACAiL,mBAAOwI,IAAI,CAAX,IAAgBxI,OAAOwI,IAAIC,EAAJ,GAAS,CAAhB,KAAsB,CAAtC,CAN8D,CAQ9D;;AACA,gBAAGY,OAAH,EACCrJ,OAAOwI,CAAP,IAAYhD,EAAE,CAAF,CAAZ,CAV6D,CAY9D;;AACAgD,iBAAKC,EAAL;AACH;AACJ;AACJ,OArIkB,CAuInB;;;AACA,WAAKlV,IAAI,CAAT,EAAYA,IAAI2K,OAAO1K,MAAvB,EAA+B,EAAED,CAAjC,EAAoC;AAChCoT,YAAIzI,OAAO3K,CAAP,CAAJ;AACAyM,iBAAS2G,EAAEoC,UAAF,CAAa/I,MAAtB;AACAyI,aAAK9B,EAAEoC,UAAF,CAAaI,SAAlB,CAHgC,CAKhC;;AACA,YAAIxC,EAAE3H,SAAF,KAAgB,YAApB,EAAkC;AAChC,eAAKuJ,IAAI,CAAT,EAAYA,IAAIvI,OAAOxM,MAAvB,EAA+B+U,KAAKE,EAApC,EAAwC;AACtC,gBAAIzI,OAAOuI,CAAP,KAAa,IAAjB,EACI;AAEFG,kBAAM1I,OAAOuI,IAAI,CAAX,CAAN;AACAvI,mBAAOuI,IAAI,CAAX,IAAgB,CAACG,GAAjB;AACH;AACF;;AAEDtD,qBAAapD,MAAMW,iBAAnB,EAAsC,CAAEgE,CAAF,EAAKA,EAAEoC,UAAP,CAAtC;AACH,OAzJkB,CA2JnB;;;AACA,WAAKxV,IAAI,CAAT,EAAYA,IAAI2K,OAAO1K,MAAvB,EAA+B,EAAED,CAAjC,EAAoC;AAChCoT,YAAIzI,OAAO3K,CAAP,CAAJ;AACAyM,iBAAS2G,EAAEoC,UAAF,CAAa/I,MAAtB;AACAyI,aAAK9B,EAAEoC,UAAF,CAAaI,SAAlB;AACAR,iBAAShC,EAAEoC,UAAF,CAAaJ,MAAtB;AAEA,YAAIa,OAAOxB,SAAX;AAAA,YAAsByB,OAAOzB,SAA7B;AAAA,YACI0B,OAAOvB,YADX;AAAA,YACyBwB,OAAOxB,YADhC;;AAGA,aAAKI,IAAI,CAAT,EAAYA,IAAIvI,OAAOxM,MAAvB,EAA+B+U,KAAKE,EAApC,EAAwC;AACpC,cAAIzI,OAAOuI,CAAP,KAAa,IAAjB,EACI;;AAEJ,eAAKxT,IAAI,CAAT,EAAYA,IAAI0T,EAAhB,EAAoB,EAAE1T,CAAtB,EAAyB;AACrB2T,kBAAM1I,OAAOuI,IAAIxT,CAAX,CAAN;AACAnB,gBAAI+U,OAAO5T,CAAP,CAAJ;AACA,gBAAI,CAACnB,CAAD,IAAMA,EAAEqV,SAAF,KAAgB,KAAtB,IAA+BP,OAAOL,YAAtC,IAAsDK,OAAO,CAACL,YAAlE,EACI;;AAEJ,gBAAIzU,EAAEyJ,CAAN,EAAS;AACL,kBAAIqL,MAAMc,IAAV,EACIA,OAAOd,GAAP;AACJ,kBAAIA,MAAMgB,IAAV,EACIA,OAAOhB,GAAP;AACP;;AACD,gBAAI9U,EAAE0J,CAAN,EAAS;AACL,kBAAIoL,MAAMe,IAAV,EACIA,OAAOf,GAAP;AACJ,kBAAIA,MAAMiB,IAAV,EACIA,OAAOjB,GAAP;AACP;AACJ;AACJ;;AAED,YAAI/B,EAAEnG,IAAF,CAAOvE,IAAX,EAAiB;AACb;AACA,cAAI2N,KAAJ;;AAEA,kBAAQjD,EAAEnG,IAAF,CAAOE,KAAf;AACI,iBAAK,MAAL;AACIkJ,sBAAQ,CAAR;AACA;;AACJ,iBAAK,OAAL;AACIA,sBAAQ,CAACjD,EAAEnG,IAAF,CAAOC,QAAhB;AACA;;AACJ;AACImJ,sBAAQ,CAACjD,EAAEnG,IAAF,CAAOC,QAAR,GAAmB,CAA3B;AARR;;AAWA,cAAIkG,EAAEnG,IAAF,CAAOG,UAAX,EAAuB;AACnB8I,oBAAQG,KAAR;AACAD,oBAAQC,QAAQjD,EAAEnG,IAAF,CAAOC,QAAvB;AACH,WAHD,MAIK;AACD+I,oBAAQI,KAAR;AACAF,oBAAQE,QAAQjD,EAAEnG,IAAF,CAAOC,QAAvB;AACH;AACJ;;AAEDmI,mBAAWjC,EAAE9H,KAAb,EAAoB2K,IAApB,EAA0BE,IAA1B;AACAd,mBAAWjC,EAAE9G,KAAb,EAAoB4J,IAApB,EAA0BE,IAA1B;AACH;;AAED/W,QAAE0F,IAAF,CAAOyO,SAAP,EAAkB,UAAUlD,CAAV,EAAaC,IAAb,EAAmB;AACjC,YAAIA,KAAK+E,OAAL,IAAgBb,SAApB,EACIlE,KAAK+E,OAAL,GAAe,IAAf;AACJ,YAAI/E,KAAKgF,OAAL,IAAgBX,YAApB,EACIrE,KAAKgF,OAAL,GAAe,IAAf;AACP,OALD;AAMH;;AAED,aAAS3D,aAAT,GAAyB;AACrB;AACA;AAEArH,kBAAY+L,IAAZ,CAAiB,iBAAjB,EAAoCC,MAApC;AAEA,UAAIhM,YAAYvJ,GAAZ,CAAgB,UAAhB,KAA+B,QAAnC,EACIuJ,YAAYvJ,GAAZ,CAAgB,UAAhB,EAA4B,UAA5B,EAPiB,CAOwB;;AAE7C0N,gBAAU,IAAIxJ,MAAJ,CAAW,WAAX,EAAwBqF,WAAxB,CAAV;AACAoE,gBAAU,IAAIzJ,MAAJ,CAAW,cAAX,EAA2BqF,WAA3B,CAAV,CAVqB,CAU8B;;AAEnDsE,YAAMH,QAAQtI,OAAd;AACA0I,aAAOH,QAAQvI,OAAf,CAbqB,CAerB;;AACAwI,oBAAcvP,EAAEsP,QAAQtJ,OAAV,EAAmBmR,MAAnB,EAAd,CAhBqB,CAkBrB;;AAEA,UAAIC,WAAWlM,YAAY8I,IAAZ,CAAiB,MAAjB,CAAf;;AAEA,UAAIoD,QAAJ,EAAc;AACVA,iBAAS9G,QAAT;AACAhB,gBAAQnH,KAAR;AACH,OAzBoB,CA2BrB;;;AACA+C,kBAAY8I,IAAZ,CAAiB,MAAjB,EAAyBzD,IAAzB;AACH;;AAED,aAASH,UAAT,GAAsB;AAClB;AACA,UAAI7E,QAAQ4C,IAAR,CAAaY,SAAjB,EAA4B;AACxBQ,oBAAY8H,SAAZ,CAAsBC,WAAtB,EADwB,CAGxB;AACA;AACA;AACA;AACA;;AAEA/H,oBAAYgI,IAAZ,CAAiB,YAAjB,EAA+BC,YAA/B;AACH;;AAED,UAAIjM,QAAQ4C,IAAR,CAAaW,SAAjB,EACIS,YAAYkI,KAAZ,CAAkBC,OAAlB;AAEJlF,mBAAapD,MAAMgB,UAAnB,EAA+B,CAACb,WAAD,CAA/B;AACH;;AAED,aAASe,QAAT,GAAoB;AAChB,UAAIqH,aAAJ,EACIC,aAAaD,aAAb;AAEJpI,kBAAY4H,MAAZ,CAAmB,WAAnB,EAAgCG,WAAhC;AACA/H,kBAAY4H,MAAZ,CAAmB,YAAnB,EAAiCK,YAAjC;AACAjI,kBAAY4H,MAAZ,CAAmB,OAAnB,EAA4BO,OAA5B;AAEAlF,mBAAapD,MAAMkB,QAAnB,EAA6B,CAACf,WAAD,CAA7B;AACH;;AAED,aAASsI,wBAAT,CAAkC3G,IAAlC,EAAwC;AACpC;AACA;AAEA,eAAS4G,QAAT,CAAkBrN,CAAlB,EAAqB;AAAE,eAAOA,CAAP;AAAW;;AAElC,UAAIsJ,CAAJ;AAAA,UAAO5R,CAAP;AAAA,UAAU4V,IAAI7G,KAAK3F,OAAL,CAAaa,SAAb,IAA0B0L,QAAxC;AAAA,UACIE,KAAK9G,KAAK3F,OAAL,CAAac,gBADtB,CANoC,CASpC;AACA;;AACA,UAAI6E,KAAK7K,SAAL,IAAkB,GAAtB,EAA2B;AACvB0N,YAAI7C,KAAKnQ,KAAL,GAAa4O,YAAY7E,KAAKmN,GAAL,CAASF,EAAE7G,KAAK5P,GAAP,IAAcyW,EAAE7G,KAAK9P,GAAP,CAAvB,CAA7B;AACAe,YAAI2I,KAAK1J,GAAL,CAAS2W,EAAE7G,KAAK5P,GAAP,CAAT,EAAsByW,EAAE7G,KAAK9P,GAAP,CAAtB,CAAJ;AACH,OAHD,MAIK;AACD2S,YAAI7C,KAAKnQ,KAAL,GAAa6O,aAAa9E,KAAKmN,GAAL,CAASF,EAAE7G,KAAK5P,GAAP,IAAcyW,EAAE7G,KAAK9P,GAAP,CAAvB,CAA9B;AACA2S,YAAI,CAACA,CAAL;AACA5R,YAAI2I,KAAKxJ,GAAL,CAASyW,EAAE7G,KAAK5P,GAAP,CAAT,EAAsByW,EAAE7G,KAAK9P,GAAP,CAAtB,CAAJ;AACH,OAnBmC,CAqBpC;;;AACA,UAAI2W,KAAKD,QAAT,EAAmB;AACf5G,aAAKM,GAAL,GAAW,UAAUoB,CAAV,EAAa;AAAE,iBAAO,CAACA,IAAIzQ,CAAL,IAAU4R,CAAjB;AAAqB,SAA/C,CADJ,KAGI7C,KAAKM,GAAL,GAAW,UAAUoB,CAAV,EAAa;AAAE,eAAO,CAACmF,EAAEnF,CAAF,IAAOzQ,CAAR,IAAa4R,CAApB;AAAwB,OAAlD,CAzBgC,CA0BpC;;AACA,UAAI,CAACiE,EAAL,EACI9G,KAAKI,GAAL,GAAW,UAAU7Q,CAAV,EAAa;AAAE,eAAO0B,IAAI1B,IAAIsT,CAAf;AAAmB,OAA7C,CADJ,KAGI7C,KAAKI,GAAL,GAAW,UAAU7Q,CAAV,EAAa;AAAE,eAAOuX,GAAG7V,IAAI1B,IAAIsT,CAAX,CAAP;AAAuB,OAAjD;AACP;;AAED,aAASmE,iBAAT,CAA2BhH,IAA3B,EAAiC;AAE7B,UAAI6B,OAAO7B,KAAK3F,OAAhB;AAAA,UACIgB,QAAQ2E,KAAK3E,KAAL,IAAc,EAD1B;AAAA,UAEIE,aAAasG,KAAKtG,UAAL,IAAmB,CAFpC;AAAA,UAGIC,cAAcqG,KAAKrG,WAAL,IAAoB,CAHtC;AAAA,UAIIyL,WAAW1L,eAAeyE,KAAK7K,SAAL,IAAkB,GAAlB,GAAwByE,KAAKsN,KAAL,CAAW/I,QAAQ5H,KAAR,IAAiB8E,MAAM3L,MAAN,IAAgB,CAAjC,CAAX,CAAxB,GAA0E,IAAzF,CAJf;AAAA,UAKIyX,eAAenH,KAAK7K,SAAL,GAAiB,OAAjB,GAA2B6K,KAAK7K,SAAhC,GAA4C6K,KAAKC,CAAjD,GAAqD,MALxE;AAAA,UAMI1I,QAAQ,UAAUyI,KAAK7K,SAAf,GAA2B,aAA3B,GAA2C6K,KAAK7K,SAAhD,GAA4D6K,KAAKC,CAAjE,GAAqE,QAArE,GAAgFkH,YAN5F;AAAA,UAOIzO,OAAOmJ,KAAKnJ,IAAL,IAAa,2BAPxB;;AASA,WAAK,IAAIjJ,IAAI,CAAb,EAAgBA,IAAI4L,MAAM3L,MAA1B,EAAkC,EAAED,CAApC,EAAuC;AAEnC,YAAIoX,IAAIxL,MAAM5L,CAAN,CAAR;AAEA,YAAI,CAACoX,EAAEO,KAAP,EACI;AAEJ,YAAIvO,OAAOsF,QAAQ1F,WAAR,CAAoBlB,KAApB,EAA2BsP,EAAEO,KAA7B,EAAoC1O,IAApC,EAA0C,IAA1C,EAAgDuO,QAAhD,CAAX,CAPmC,CASnC;;AACA1L,qBAAa3B,KAAKxJ,GAAL,CAASmL,UAAT,EAAqB1C,KAAKtC,KAAL,GAAa,CAAlC,CAAb;AACAiF,sBAAc5B,KAAKxJ,GAAL,CAASoL,WAAT,EAAsB3C,KAAKrC,MAA3B,CAAd;AACH;;AAEDwJ,WAAKzE,UAAL,GAAkBsG,KAAKtG,UAAL,IAAmBA,UAArC;AACAyE,WAAKxE,WAAL,GAAmBqG,KAAKrG,WAAL,IAAoBA,WAAvC;AACH;;AAED,aAAS6L,yBAAT,CAAmCrH,IAAnC,EAAyC;AACrC;AACA;AACA;AACA;AACA;AAEA,UAAIsH,KAAKtH,KAAKzE,UAAd;AAAA,UACIgM,KAAKvH,KAAKxE,WADd;AAAA,UAEI2H,MAAMnD,KAAK3F,OAAL,CAAajF,QAFvB;AAAA,UAGIoS,UAAUxH,KAAK7K,SAAL,KAAmB,GAHjC;AAAA,UAIIuG,aAAasE,KAAK3F,OAAL,CAAaqB,UAJ9B;AAAA,UAKI4B,aAAajD,QAAQ4C,IAAR,CAAaK,UAL9B;AAAA,UAMImK,UAAUpN,QAAQ4C,IAAR,CAAaG,WAN3B;AAAA,UAOIsK,sBAAsBrN,QAAQ4C,IAAR,CAAaI,kBAPvC;AAAA,UAQIsK,YAAY,IARhB;AAAA,UASIC,YAAY,IAThB;AAAA,UAUIC,QAAQ,IAVZ;AAAA,UAWIC,QAAQ,KAXZ,CAPqC,CAoBrC;;AAEAhZ,QAAE0F,IAAF,CAAOgT,UAAUxL,KAAV,GAAkBC,KAAzB,EAAgC,UAASxM,CAAT,EAAYL,CAAZ,EAAe;AAC3C,YAAIA,MAAMA,EAAE+I,IAAF,IAAU/I,EAAEqM,YAAlB,CAAJ,EAAqC;AACjC,cAAIrM,MAAM4Q,IAAV,EAAgB;AACZ8H,oBAAQ,IAAR;AACH,WAFD,MAEO,IAAI1Y,EAAEiL,OAAF,CAAUjF,QAAV,KAAuB+N,GAA3B,EAAgC;AACnC,gBAAI2E,KAAJ,EAAW;AACPF,0BAAY,KAAZ;AACH,aAFD,MAEO;AACHD,0BAAY,KAAZ;AACH;AACJ;;AACD,cAAI,CAACG,KAAL,EAAY;AACRD,oBAAQ,KAAR;AACH;AACJ;AACJ,OAfD,EAtBqC,CAuCrC;;AAEA,UAAID,SAAJ,EAAe;AACXtK,qBAAa,CAAb;AACH,OA3CoC,CA6CrC;;;AAEA,UAAI5B,cAAc,IAAlB,EAAwB;AACpBA,qBAAamM,QAAQ,MAAR,GAAiB,CAA9B;AACH;;AAED,UAAI,CAACrC,MAAM,CAAC9J,UAAP,CAAL,EACI+L,WAAW,CAAC/L,UAAZ;;AAEJ,UAAI8L,OAAJ,EAAa;AACT;AACAD,cAAME,OAAN;AACAF,cAAMG,mBAAN;;AAEA,YAAIvE,OAAO,QAAX,EAAqB;AACjB3E,qBAAWnG,MAAX,IAAqBkP,KAAKjK,UAA1B;AACA0C,eAAK+H,GAAL,GAAW;AAAEzS,iBAAK6I,QAAQ3H,MAAR,GAAiBgI,WAAWnG,MAAnC;AAA2C7B,oBAAQ+Q;AAAnD,WAAX;AACH,SAHD,MAIK;AACDvH,eAAK+H,GAAL,GAAW;AAAEzS,iBAAKkJ,WAAWlJ,GAAX,GAAiBgI,UAAxB;AAAoC9G,oBAAQ+Q;AAA5C,WAAX;AACA/I,qBAAWlJ,GAAX,IAAkBiS,KAAKjK,UAAvB;AACH;AACJ,OAbD,MAcK;AACDgK,cAAMG,OAAN;;AAEA,YAAItE,OAAO,MAAX,EAAmB;AACfnD,eAAK+H,GAAL,GAAW;AAAE1S,kBAAMmJ,WAAWnJ,IAAX,GAAkBiI,UAA1B;AAAsC/G,mBAAO+Q;AAA7C,WAAX;AACA9I,qBAAWnJ,IAAX,IAAmBiS,KAAKhK,UAAxB;AACH,SAHD,MAIK;AACDkB,qBAAWlG,KAAX,IAAoBgP,KAAKhK,UAAzB;AACA0C,eAAK+H,GAAL,GAAW;AAAE1S,kBAAM8I,QAAQ5H,KAAR,GAAgBiI,WAAWlG,KAAnC;AAA0C/B,mBAAO+Q;AAAjD,WAAX;AACH;AACJ,OA/EoC,CAiFpC;;;AACDtH,WAAK5K,QAAL,GAAgB+N,GAAhB;AACAnD,WAAKtE,UAAL,GAAkBA,UAAlB;AACAsE,WAAK+H,GAAL,CAASN,OAAT,GAAmBA,OAAnB;AACAzH,WAAK+H,GAAL,CAASL,mBAAT,GAA+BA,mBAA/B;AACA1H,WAAK2H,SAAL,GAAiBA,SAAjB;AACH;;AAED,aAASK,0BAAT,CAAoChI,IAApC,EAA0C;AACtC;AACA;AACA,UAAIA,KAAK7K,SAAL,IAAkB,GAAtB,EAA2B;AACvB6K,aAAK+H,GAAL,CAAS1S,IAAT,GAAgBmJ,WAAWnJ,IAAX,GAAkB2K,KAAKzE,UAAL,GAAkB,CAApD;AACAyE,aAAK+H,GAAL,CAASxR,KAAT,GAAiB4H,QAAQ5H,KAAR,GAAgBiI,WAAWnJ,IAA3B,GAAkCmJ,WAAWlG,KAA7C,GAAqD0H,KAAKzE,UAA3E;AACH,OAHD,MAIK;AACDyE,aAAK+H,GAAL,CAASzS,GAAT,GAAekJ,WAAWlJ,GAAX,GAAiB0K,KAAKxE,WAAL,GAAmB,CAAnD;AACAwE,aAAK+H,GAAL,CAASvR,MAAT,GAAkB2H,QAAQ3H,MAAR,GAAiBgI,WAAWnG,MAA5B,GAAqCmG,WAAWlJ,GAAhD,GAAsD0K,KAAKxE,WAA7E;AACH;AACJ;;AAED,aAASyM,gCAAT,GAA4C;AACxC;AACA;AAEA,UAAIC,YAAY7N,QAAQ4C,IAAR,CAAaO,eAA7B;AAAA,UACIwC,IADJ;AAAA,UACUvQ,CADV,CAJwC,CAOxC;AACA;AACA;;AACA,UAAIyY,aAAa,IAAjB,EAAuB;AACnBA,oBAAY,CAAZ;;AACA,aAAKzY,IAAI,CAAT,EAAYA,IAAI2K,OAAO1K,MAAvB,EAA+B,EAAED,CAAjC;AACIyY,sBAAYtO,KAAKxJ,GAAL,CAAS8X,SAAT,EAAoB,KAAK9N,OAAO3K,CAAP,EAAUyM,MAAV,CAAiBC,MAAjB,GAA0B/B,OAAO3K,CAAP,EAAUyM,MAAV,CAAiBE,SAAjB,GAA2B,CAA1D,CAApB,CAAZ;AADJ;AAEH;;AAED,UAAI+L,UAAU;AACV9S,cAAM6S,SADI;AAEV5P,eAAO4P,SAFG;AAGV5S,aAAK4S,SAHK;AAIV7P,gBAAQ6P;AAJE,OAAd,CAhBwC,CAuBxC;AACA;AACA;;AACApZ,QAAE0F,IAAF,CAAOyO,SAAP,EAAkB,UAAUlD,CAAV,EAAaC,IAAb,EAAmB;AACjC,YAAIA,KAAKvE,YAAL,IAAqBuE,KAAK3E,KAA1B,IAAmC2E,KAAK3E,KAAL,CAAW3L,MAAlD,EAA0D;AACtD,cAAIsQ,KAAK7K,SAAL,KAAmB,GAAvB,EAA4B;AACxBgT,oBAAQ9S,IAAR,GAAeuE,KAAKxJ,GAAL,CAAS+X,QAAQ9S,IAAjB,EAAuB2K,KAAKzE,UAAL,GAAkB,CAAzC,CAAf;AACA4M,oBAAQ7P,KAAR,GAAgBsB,KAAKxJ,GAAL,CAAS+X,QAAQ7P,KAAjB,EAAwB0H,KAAKzE,UAAL,GAAkB,CAA1C,CAAhB;AACH,WAHD,MAGO;AACH4M,oBAAQ9P,MAAR,GAAiBuB,KAAKxJ,GAAL,CAAS+X,QAAQ9P,MAAjB,EAAyB2H,KAAKxE,WAAL,GAAmB,CAA5C,CAAjB;AACA2M,oBAAQ7S,GAAR,GAAcsE,KAAKxJ,GAAL,CAAS+X,QAAQ7S,GAAjB,EAAsB0K,KAAKxE,WAAL,GAAmB,CAAzC,CAAd;AACH;AACJ;AACJ,OAVD;AAYAgD,iBAAWnJ,IAAX,GAAkBuE,KAAKwO,IAAL,CAAUxO,KAAKxJ,GAAL,CAAS+X,QAAQ9S,IAAjB,EAAuBmJ,WAAWnJ,IAAlC,CAAV,CAAlB;AACAmJ,iBAAWlG,KAAX,GAAmBsB,KAAKwO,IAAL,CAAUxO,KAAKxJ,GAAL,CAAS+X,QAAQ7P,KAAjB,EAAwBkG,WAAWlG,KAAnC,CAAV,CAAnB;AACAkG,iBAAWlJ,GAAX,GAAiBsE,KAAKwO,IAAL,CAAUxO,KAAKxJ,GAAL,CAAS+X,QAAQ7S,GAAjB,EAAsBkJ,WAAWlJ,GAAjC,CAAV,CAAjB;AACAkJ,iBAAWnG,MAAX,GAAoBuB,KAAKwO,IAAL,CAAUxO,KAAKxJ,GAAL,CAAS+X,QAAQ9P,MAAjB,EAAyBmG,WAAWnG,MAApC,CAAV,CAApB;AACH;;AAED,aAASkH,SAAT,GAAqB;AACjB,UAAI9P,CAAJ;AAAA,UAAO+T,OAAOP,SAAd;AAAA,UAAyBoF,WAAWhO,QAAQ4C,IAAR,CAAa9E,IAAjD,CADiB,CAGjB;;AAEA,WAAK,IAAI/I,CAAT,IAAcoP,UAAd,EAA0B;AACtB,YAAI7D,SAASN,QAAQ4C,IAAR,CAAatC,MAAb,IAAuB,CAApC;AACA6D,mBAAWpP,CAAX,IAAgB,OAAOuL,MAAP,IAAiB,QAAjB,GAA4BA,MAA5B,GAAqCA,OAAOvL,CAAP,KAAa,CAAlE;AACH;;AAEDkS,mBAAapD,MAAMY,aAAnB,EAAkC,CAACN,UAAD,CAAlC,EAViB,CAYjB;;AAEA,WAAK,IAAIpP,CAAT,IAAcoP,UAAd,EAA0B;AACtB,YAAG,QAAOnE,QAAQ4C,IAAR,CAAaM,WAApB,KAAoC,QAAvC,EAAiD;AAC7CiB,qBAAWpP,CAAX,KAAiBiZ,WAAWhO,QAAQ4C,IAAR,CAAaM,WAAb,CAAyBnO,CAAzB,CAAX,GAAyC,CAA1D;AACH,SAFD,MAGK;AACDoP,qBAAWpP,CAAX,KAAiBiZ,WAAWhO,QAAQ4C,IAAR,CAAaM,WAAxB,GAAsC,CAAvD;AACH;AACJ;;AAEDzO,QAAE0F,IAAF,CAAOgP,IAAP,EAAa,UAAUzD,CAAV,EAAaC,IAAb,EAAmB;AAC5B,YAAIsI,WAAWtI,KAAK3F,OAApB;AACA2F,aAAK7H,IAAL,GAAYmQ,SAASnQ,IAAT,IAAiB,IAAjB,GAAwB6H,KAAKoD,IAA7B,GAAoCkF,SAASnQ,IAAzD;AACA6H,aAAKvE,YAAL,GAAoB6M,SAAS7M,YAAT,IAAyB,IAAzB,GAAgCuE,KAAK7H,IAArC,GAA4CmQ,SAAS7M,YAAzE;AACA8M,iBAASvI,IAAT;AACH,OALD;;AAOA,UAAIqI,QAAJ,EAAc;AAEV,YAAIG,gBAAgB1Z,EAAEoU,IAAF,CAAOM,IAAP,EAAa,UAAUxD,IAAV,EAAgB;AAC7C,iBAAOA,KAAK7H,IAAL,IAAa6H,KAAKvE,YAAzB;AACH,SAFmB,CAApB;AAIA3M,UAAE0F,IAAF,CAAOgU,aAAP,EAAsB,UAAUzI,CAAV,EAAaC,IAAb,EAAmB;AACrC;AACAyI,8BAAoBzI,IAApB;AACA0I,mBAAS1I,IAAT;AACA2I,2BAAiB3I,IAAjB,EAAuBA,KAAK3E,KAA5B,EAJqC,CAKrC;;AACA2L,4BAAkBhH,IAAlB;AACH,SAPD,EANU,CAeV;AACA;AACA;;AACA,aAAKvQ,IAAI+Y,cAAc9Y,MAAd,GAAuB,CAAhC,EAAmCD,KAAK,CAAxC,EAA2C,EAAEA,CAA7C;AACI4X,oCAA0BmB,cAAc/Y,CAAd,CAA1B;AADJ,SAlBU,CAqBV;AACA;;;AACAwY;AAEAnZ,UAAE0F,IAAF,CAAOgU,aAAP,EAAsB,UAAUzI,CAAV,EAAaC,IAAb,EAAmB;AACrCgI,qCAA2BhI,IAA3B;AACH,SAFD;AAGH;;AAEDvB,kBAAYN,QAAQ5H,KAAR,GAAgBiI,WAAWnJ,IAA3B,GAAkCmJ,WAAWlG,KAAzD;AACAoG,mBAAaP,QAAQ3H,MAAR,GAAiBgI,WAAWnG,MAA5B,GAAqCmG,WAAWlJ,GAA7D,CA7DiB,CA+DjB;;AACAxG,QAAE0F,IAAF,CAAOgP,IAAP,EAAa,UAAUzD,CAAV,EAAaC,IAAb,EAAmB;AAC5B2G,iCAAyB3G,IAAzB;AACH,OAFD;;AAIA,UAAIqI,QAAJ,EAAc;AACVO;AACH;;AAEDC;AACH;;AAED,aAASN,QAAT,CAAkBvI,IAAlB,EAAwB;AACpB,UAAI6B,OAAO7B,KAAK3F,OAAhB;AAAA,UACInK,MAAM,EAAE2R,KAAK3R,GAAL,IAAY,IAAZ,GAAmB2R,KAAK3R,GAAxB,GAA8B8P,KAAK+E,OAArC,CADV;AAAA,UAEI3U,MAAM,EAAEyR,KAAKzR,GAAL,IAAY,IAAZ,GAAmByR,KAAKzR,GAAxB,GAA8B4P,KAAKgF,OAArC,CAFV;AAAA,UAGIc,QAAQ1V,MAAMF,GAHlB;;AAKA,UAAI4V,SAAS,GAAb,EAAkB;AACd;AACA;AACA,YAAIgD,aAAa,IAAjB;AACA,YAAIC,QAAQnP,KAAKmN,GAAL,CAAS3W,OAAO,CAAP,GAAW,CAAX,GAAeA,MAAM0Y,UAA9B,CAAZ;;AAEA,YAAIjH,KAAK3R,GAAL,IAAY,IAAhB,EAAsB;AACpBA,iBAAO6Y,KAAP;AACD,SARa,CASd;AACA;;;AACA,YAAIlH,KAAKzR,GAAL,IAAY,IAAZ,IAAoByR,KAAK3R,GAAL,IAAY,IAApC,EAA0C;AACxCE,iBAAO2Y,KAAP;AACD;AACJ,OAdD,MAeK;AACD;AACA,YAAIpO,SAASkH,KAAKzG,eAAlB;;AACA,YAAIT,UAAU,IAAd,EAAoB;AAChB,cAAIkH,KAAK3R,GAAL,IAAY,IAAhB,EAAsB;AAClBA,mBAAO4V,QAAQnL,MAAf,CADkB,CAElB;AACA;;AACA,gBAAIzK,MAAM,CAAN,IAAW8P,KAAK+E,OAAL,IAAgB,IAA3B,IAAmC/E,KAAK+E,OAAL,IAAgB,CAAvD,EACI7U,MAAM,CAAN;AACP;;AACD,cAAI2R,KAAKzR,GAAL,IAAY,IAAhB,EAAsB;AAClBA,mBAAO0V,QAAQnL,MAAf;AACA,gBAAIvK,MAAM,CAAN,IAAW4P,KAAKgF,OAAL,IAAgB,IAA3B,IAAmChF,KAAKgF,OAAL,IAAgB,CAAvD,EACI5U,MAAM,CAAN;AACP;AACJ;AACJ;;AACD4P,WAAK9P,GAAL,GAAWA,GAAX;AACA8P,WAAK5P,GAAL,GAAWA,GAAX;AACH;;AAED,aAASqY,mBAAT,CAA6BzI,IAA7B,EAAmC;AAC/B,UAAI6B,OAAO7B,KAAK3F,OAAhB,CAD+B,CAG/B;;AACA,UAAI+H,OAAJ;AACA,UAAI,OAAOP,KAAKxG,KAAZ,IAAqB,QAArB,IAAiCwG,KAAKxG,KAAL,GAAa,CAAlD,EACI+G,UAAUP,KAAKxG,KAAf,CADJ,KAGI;AACA;AACA+G,kBAAU,MAAMxI,KAAKoP,IAAL,CAAUhJ,KAAK7K,SAAL,IAAkB,GAAlB,GAAwBgJ,QAAQ5H,KAAhC,GAAwC4H,QAAQ3H,MAA1D,CAAhB;AAEJ,UAAIsP,QAAQ,CAAC9F,KAAK5P,GAAL,GAAW4P,KAAK9P,GAAjB,IAAwBkS,OAApC;AAAA,UACI6G,MAAM,CAACrP,KAAKsN,KAAL,CAAWtN,KAAKsP,GAAL,CAASpD,KAAT,IAAkBlM,KAAKuP,IAAlC,CADX;AAAA,UAEIC,SAASvH,KAAKjG,YAFlB;;AAIA,UAAIwN,UAAU,IAAV,IAAkBH,MAAMG,MAA5B,EAAoC;AAChCH,cAAMG,MAAN;AACH;;AAED,UAAIC,OAAOzP,KAAK0P,GAAL,CAAS,EAAT,EAAa,CAACL,GAAd,CAAX;AAAA,UACIM,OAAOzD,QAAQuD,IADnB;AAAA,UACyB;AACrBrQ,UAFJ;;AAIA,UAAIuQ,OAAO,GAAX,EAAgB;AACZvQ,eAAO,CAAP;AACH,OAFD,MAEO,IAAIuQ,OAAO,CAAX,EAAc;AACjBvQ,eAAO,CAAP,CADiB,CAEjB;;AACA,YAAIuQ,OAAO,IAAP,KAAgBH,UAAU,IAAV,IAAkBH,MAAM,CAAN,IAAWG,MAA7C,CAAJ,EAA0D;AACtDpQ,iBAAO,GAAP;AACA,YAAEiQ,GAAF;AACH;AACJ,OAPM,MAOA,IAAIM,OAAO,GAAX,EAAgB;AACnBvQ,eAAO,CAAP;AACH,OAFM,MAEA;AACHA,eAAO,EAAP;AACH;;AAEDA,cAAQqQ,IAAR;;AAEA,UAAIxH,KAAK/F,WAAL,IAAoB,IAApB,IAA4B9C,OAAO6I,KAAK/F,WAA5C,EAAyD;AACrD9C,eAAO6I,KAAK/F,WAAZ;AACH;;AAEDkE,WAAK8F,KAAL,GAAaA,KAAb;AACA9F,WAAKpE,YAAL,GAAoBhC,KAAKxJ,GAAL,CAAS,CAAT,EAAYgZ,UAAU,IAAV,GAAiBA,MAAjB,GAA0BH,GAAtC,CAApB;AACAjJ,WAAKnE,QAAL,GAAgBgG,KAAKhG,QAAL,IAAiB7C,IAAjC,CA/C+B,CAgD/B;;AACAgH,WAAKwJ,cAAL,GAAsBxJ,KAAKpE,YAAL,GAAoBhC,KAAKsN,KAAL,CAAWtN,KAAKsP,GAAL,CAASlJ,KAAKnE,QAAd,IAA0BjC,KAAKuP,IAA1C,CAA1C,CAjD+B,CAmD/B;AACA;;AAEA,UAAItH,KAAK7G,IAAL,IAAa,MAAb,IAAuB,CAACgF,KAAKyJ,aAAjC,EAAgD;AAC5C,cAAM,IAAI7T,KAAJ,CAAU,0CAAV,CAAN;AACH,OAxD8B,CA0D/B;AACA;;;AAEA,UAAI,CAACoK,KAAKyJ,aAAV,EAAyB;AAErBzJ,aAAKyJ,aAAL,GAAqB,UAAUzJ,IAAV,EAAgB;AAEjC,cAAI3E,QAAQ,EAAZ;AAAA,cACIqO,QAAQC,YAAY3J,KAAK9P,GAAjB,EAAsB8P,KAAKnE,QAA3B,CADZ;AAAA,cAEIpM,IAAI,CAFR;AAAA,cAGIwU,IAAIE,OAAOyF,GAHf;AAAA,cAIIC,IAJJ;;AAMA,aAAG;AACCA,mBAAO5F,CAAP;AACAA,gBAAIyF,QAAQja,IAAIuQ,KAAKnE,QAArB;AACAR,kBAAM1B,IAAN,CAAWsK,CAAX;AACA,cAAExU,CAAF;AACH,WALD,QAKSwU,IAAIjE,KAAK5P,GAAT,IAAgB6T,KAAK4F,IAL9B;;AAMA,iBAAOxO,KAAP;AACH,SAfD;;AAiBZ2E,aAAK1E,aAAL,GAAqB,UAAUnL,KAAV,EAAiB6P,IAAjB,EAAuB;AAE3C,cAAI8J,SAAS9J,KAAKpE,YAAL,GAAoBhC,KAAK0P,GAAL,CAAS,EAAT,EAAatJ,KAAKpE,YAAlB,CAApB,GAAsD,CAAnE;AACA,cAAImO,YAAY,KAAKnQ,KAAKC,KAAL,CAAW1J,QAAQ2Z,MAAnB,IAA6BA,MAAlD,CAH2C,CAK3C;AACA;;AAEA,cAAI9J,KAAKpE,YAAL,IAAqB,IAAzB,EAA+B;AAC9B,gBAAIoO,UAAUD,UAAUE,OAAV,CAAkB,GAAlB,CAAd;AACA,gBAAIC,YAAYF,WAAW,CAAC,CAAZ,GAAgB,CAAhB,GAAoBD,UAAUra,MAAV,GAAmBsa,OAAnB,GAA6B,CAAjE;;AACA,gBAAIE,YAAYlK,KAAKpE,YAArB,EAAmC;AAClC,qBAAO,CAACsO,YAAYH,SAAZ,GAAwBA,YAAY,GAArC,IAA4C,CAAC,KAAKD,MAAN,EAAcK,MAAd,CAAqB,CAArB,EAAwBnK,KAAKpE,YAAL,GAAoBsO,SAA5C,CAAnD;AACA;AACD;;AAEc,iBAAOH,SAAP;AACH,SAjBb;AAkBS;;AAED,UAAIjb,EAAEsb,UAAF,CAAavI,KAAKvG,aAAlB,CAAJ,EACI0E,KAAK1E,aAAL,GAAqB,UAAU2I,CAAV,EAAajE,IAAb,EAAmB;AAAE,eAAO,KAAK6B,KAAKvG,aAAL,CAAmB2I,CAAnB,EAAsBjE,IAAtB,CAAZ;AAA0C,OAApF;;AAEJ,UAAI6B,KAAKlG,kBAAL,IAA2B,IAA/B,EAAqC;AACjC,YAAI0O,YAAY,CAACrK,KAAK7K,SAAL,IAAkB,GAAlB,GAAwB6G,KAAxB,GAAgCC,KAAjC,EAAwC4F,KAAKlG,kBAAL,GAA0B,CAAlE,CAAhB;;AACA,YAAI0O,aAAaA,UAAUjH,IAAvB,IAA+BiH,aAAarK,IAAhD,EAAsD;AAClD;AACA,cAAIsK,YAAYtK,KAAKyJ,aAAL,CAAmBzJ,IAAnB,CAAhB;;AACA,cAAIsK,UAAU5a,MAAV,GAAmB,CAAvB,EAA0B;AACtB,gBAAImS,KAAK3R,GAAL,IAAY,IAAhB,EACI8P,KAAK9P,GAAL,GAAW0J,KAAK1J,GAAL,CAAS8P,KAAK9P,GAAd,EAAmBoa,UAAU,CAAV,CAAnB,CAAX;AACJ,gBAAIzI,KAAKzR,GAAL,IAAY,IAAZ,IAAoBka,UAAU5a,MAAV,GAAmB,CAA3C,EACIsQ,KAAK5P,GAAL,GAAWwJ,KAAKxJ,GAAL,CAAS4P,KAAK5P,GAAd,EAAmBka,UAAUA,UAAU5a,MAAV,GAAmB,CAA7B,CAAnB,CAAX;AACP;;AAEDsQ,eAAKyJ,aAAL,GAAqB,UAAUzJ,IAAV,EAAgB;AACjC;AACA,gBAAI3E,QAAQ,EAAZ;AAAA,gBAAgB4I,CAAhB;AAAA,gBAAmBxU,CAAnB;;AACA,iBAAKA,IAAI,CAAT,EAAYA,IAAI4a,UAAUhP,KAAV,CAAgB3L,MAAhC,EAAwC,EAAED,CAA1C,EAA6C;AACzCwU,kBAAI,CAACoG,UAAUhP,KAAV,CAAgB5L,CAAhB,EAAmBwU,CAAnB,GAAuBoG,UAAUna,GAAlC,KAA0Cma,UAAUja,GAAV,GAAgBia,UAAUna,GAApE,CAAJ;AACA+T,kBAAIjE,KAAK9P,GAAL,GAAW+T,KAAKjE,KAAK5P,GAAL,GAAW4P,KAAK9P,GAArB,CAAf;AACAmL,oBAAM1B,IAAN,CAAWsK,CAAX;AACH;;AACD,mBAAO5I,KAAP;AACH,WATD,CAVkD,CAqBlD;AACA;;;AACA,cAAI,CAAC2E,KAAKhF,IAAN,IAAc6G,KAAKjG,YAAL,IAAqB,IAAvC,EAA6C;AACzC,gBAAI2O,WAAW3Q,KAAKxJ,GAAL,CAAS,CAAT,EAAY,CAACwJ,KAAKsN,KAAL,CAAWtN,KAAKsP,GAAL,CAASlJ,KAAK8F,KAAd,IAAuBlM,KAAKuP,IAAvC,CAAD,GAAgD,CAA5D,CAAf;AAAA,gBACIqB,KAAKxK,KAAKyJ,aAAL,CAAmBzJ,IAAnB,CADT,CADyC,CAIzC;AACA;AACA;;AACA,gBAAI,EAAEwK,GAAG9a,MAAH,GAAY,CAAZ,IAAiB,SAAS+a,IAAT,CAAc,CAACD,GAAG,CAAH,IAAQA,GAAG,CAAH,CAAT,EAAgBE,OAAhB,CAAwBH,QAAxB,CAAd,CAAnB,CAAJ,EACIvK,KAAKpE,YAAL,GAAoB2O,QAApB;AACP;AACJ;AACJ;AACJ;;AAED,aAAS7B,QAAT,CAAkB1I,IAAlB,EAAwB;AACpB,UAAI2K,SAAS3K,KAAK3F,OAAL,CAAagB,KAA1B;AAAA,UAAiCA,QAAQ,EAAzC;AACA,UAAIsP,UAAU,IAAV,IAAmB,OAAOA,MAAP,IAAiB,QAAjB,IAA6BA,SAAS,CAA7D,EACItP,QAAQ2E,KAAKyJ,aAAL,CAAmBzJ,IAAnB,CAAR,CADJ,KAEK,IAAI2K,MAAJ,EAAY;AACb,YAAI7b,EAAEsb,UAAF,CAAaO,MAAb,CAAJ,EACI;AACAtP,kBAAQsP,OAAO3K,IAAP,CAAR,CAFJ,KAII3E,QAAQsP,MAAR;AACP,OAVmB,CAYpB;;AACA,UAAIlb,CAAJ,EAAOwU,CAAP;AACAjE,WAAK3E,KAAL,GAAa,EAAb;;AACA,WAAK5L,IAAI,CAAT,EAAYA,IAAI4L,MAAM3L,MAAtB,EAA8B,EAAED,CAAhC,EAAmC;AAC/B,YAAI2X,QAAQ,IAAZ;AACA,YAAIP,IAAIxL,MAAM5L,CAAN,CAAR;;AACA,YAAI,QAAOoX,CAAP,KAAY,QAAhB,EAA0B;AACtB5C,cAAI,CAAC4C,EAAE,CAAF,CAAL;AACA,cAAIA,EAAEnX,MAAF,GAAW,CAAf,EACI0X,QAAQP,EAAE,CAAF,CAAR;AACP,SAJD,MAMI5C,IAAI,CAAC4C,CAAL;;AACJ,YAAIO,SAAS,IAAb,EACIA,QAAQpH,KAAK1E,aAAL,CAAmB2I,CAAnB,EAAsBjE,IAAtB,CAAR;AACJ,YAAI,CAACwF,MAAMvB,CAAN,CAAL,EACIjE,KAAK3E,KAAL,CAAW1B,IAAX,CAAgB;AAAEsK,aAAGA,CAAL;AAAQmD,iBAAOA;AAAf,SAAhB;AACP;AACJ;;AAED,aAASuB,gBAAT,CAA0B3I,IAA1B,EAAgC3E,KAAhC,EAAuC;AACnC,UAAI2E,KAAK3F,OAAL,CAAae,eAAb,IAAgCC,MAAM3L,MAAN,GAAe,CAAnD,EAAsD;AAClD;AACA,YAAIsQ,KAAK3F,OAAL,CAAanK,GAAb,IAAoB,IAAxB,EACI8P,KAAK9P,GAAL,GAAW0J,KAAK1J,GAAL,CAAS8P,KAAK9P,GAAd,EAAmBmL,MAAM,CAAN,EAAS4I,CAA5B,CAAX;AACJ,YAAIjE,KAAK3F,OAAL,CAAajK,GAAb,IAAoB,IAApB,IAA4BiL,MAAM3L,MAAN,GAAe,CAA/C,EACIsQ,KAAK5P,GAAL,GAAWwJ,KAAKxJ,GAAL,CAAS4P,KAAK5P,GAAd,EAAmBiL,MAAMA,MAAM3L,MAAN,GAAe,CAArB,EAAwBuU,CAA3C,CAAX;AACP;AACJ;;AAED,aAAShF,IAAT,GAAgB;AAEZd,cAAQlH,KAAR;AAEAqK,mBAAapD,MAAMa,cAAnB,EAAmC,CAACT,GAAD,CAAnC;AAEA,UAAIrB,OAAO5C,QAAQ4C,IAAnB,CANY,CAQZ;;AACA,UAAIA,KAAK9E,IAAL,IAAa8E,KAAKrC,eAAtB,EACImE;;AAEJ,UAAI9B,KAAK9E,IAAL,IAAa,CAAC8E,KAAKC,SAAvB,EAAkC;AAC9B0N;AACH;;AAED,WAAK,IAAInb,IAAI,CAAb,EAAgBA,IAAI2K,OAAO1K,MAA3B,EAAmC,EAAED,CAArC,EAAwC;AACpC6R,qBAAapD,MAAMc,UAAnB,EAA+B,CAACV,GAAD,EAAMlE,OAAO3K,CAAP,CAAN,CAA/B;AACAuP,mBAAW5E,OAAO3K,CAAP,CAAX;AACH;;AAED6R,mBAAapD,MAAMe,IAAnB,EAAyB,CAACX,GAAD,CAAzB;;AAEA,UAAIrB,KAAK9E,IAAL,IAAa8E,KAAKC,SAAtB,EAAiC;AAC7B0N;AACH;;AAEDzM,cAAQhH,MAAR,GA3BY,CA6BZ;AACA;;AAEAwJ;AACH;;AAED,aAASkK,YAAT,CAAsBC,MAAtB,EAA8B9H,KAA9B,EAAqC;AACjC,UAAIhD,IAAJ;AAAA,UAAU+K,IAAV;AAAA,UAAgBC,EAAhB;AAAA,UAAoBnT,GAApB;AAAA,UAAyB2L,OAAOP,SAAhC;;AAEA,WAAK,IAAIxT,IAAI,CAAb,EAAgBA,IAAI+T,KAAK9T,MAAzB,EAAiC,EAAED,CAAnC,EAAsC;AAClCuQ,eAAOwD,KAAK/T,CAAL,CAAP;;AACA,YAAIuQ,KAAK7K,SAAL,IAAkB6N,KAAtB,EAA6B;AACzBnL,gBAAMmL,QAAQhD,KAAKC,CAAb,GAAiB,MAAvB;AACA,cAAI,CAAC6K,OAAOjT,GAAP,CAAD,IAAgBmI,KAAKC,CAAL,IAAU,CAA9B,EACIpI,MAAMmL,QAAQ,MAAd,CAHqB,CAGC;;AAC1B,cAAI8H,OAAOjT,GAAP,CAAJ,EAAiB;AACbkT,mBAAOD,OAAOjT,GAAP,EAAYkT,IAAnB;AACAC,iBAAKF,OAAOjT,GAAP,EAAYmT,EAAjB;AACA;AACH;AACJ;AACJ,OAfgC,CAiBjC;;;AACA,UAAI,CAACF,OAAOjT,GAAP,CAAL,EAAkB;AACdmI,eAAOgD,SAAS,GAAT,GAAehH,MAAM,CAAN,CAAf,GAA0BC,MAAM,CAAN,CAAjC;AACA8O,eAAOD,OAAO9H,QAAQ,GAAf,CAAP;AACAgI,aAAKF,OAAO9H,QAAQ,GAAf,CAAL;AACH,OAtBgC,CAwBjC;;;AACA,UAAI+H,QAAQ,IAAR,IAAgBC,MAAM,IAAtB,IAA8BD,OAAOC,EAAzC,EAA6C;AACzC,YAAIC,MAAMF,IAAV;AACAA,eAAOC,EAAP;AACAA,aAAKC,GAAL;AACH;;AAED,aAAO;AAAEF,cAAMA,IAAR;AAAcC,YAAIA,EAAlB;AAAsBhL,cAAMA;AAA5B,OAAP;AACH;;AAED,aAASjB,cAAT,GAA0B;AACtBT,UAAItH,IAAJ;AACAsH,UAAI4M,SAAJ,CAAc1M,WAAWnJ,IAAzB,EAA+BmJ,WAAWlJ,GAA1C;AAEAgJ,UAAI6M,SAAJ,GAAgBC,mBAAmB/Q,QAAQ4C,IAAR,CAAarC,eAAhC,EAAiD8D,UAAjD,EAA6D,CAA7D,EAAgE,wBAAhE,CAAhB;AACAJ,UAAI+M,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB5M,SAAnB,EAA8BC,UAA9B;AACAJ,UAAIvH,OAAJ;AACH;;AAED,aAAS6T,QAAT,GAAoB;AAChB,UAAInb,CAAJ,EAAO+T,IAAP,EAAa8H,EAAb,EAAiBC,EAAjB;AAEAjN,UAAItH,IAAJ;AACAsH,UAAI4M,SAAJ,CAAc1M,WAAWnJ,IAAzB,EAA+BmJ,WAAWlJ,GAA1C,EAJgB,CAMhB;;AACA,UAAImI,WAAWpD,QAAQ4C,IAAR,CAAaQ,QAA5B;;AACA,UAAIA,QAAJ,EAAc;AACV,YAAI3O,EAAEsb,UAAF,CAAa3M,QAAb,CAAJ,EAA4B;AACxB+F,iBAAOnE,KAAKQ,OAAL,EAAP,CADwB,CAExB;AACA;;AACA2D,eAAKkC,IAAL,GAAYlC,KAAKzI,KAAL,CAAW7K,GAAvB;AACAsT,eAAKoC,IAAL,GAAYpC,KAAKzI,KAAL,CAAW3K,GAAvB;AACAoT,eAAKmC,IAAL,GAAYnC,KAAKzH,KAAL,CAAW7L,GAAvB;AACAsT,eAAKqC,IAAL,GAAYrC,KAAKzH,KAAL,CAAW3L,GAAvB;AAEAqN,qBAAWA,SAAS+F,IAAT,CAAX;AACH;;AAED,aAAK/T,IAAI,CAAT,EAAYA,IAAIgO,SAAS/N,MAAzB,EAAiC,EAAED,CAAnC,EAAsC;AAClC,cAAIwB,IAAIwM,SAAShO,CAAT,CAAR;AAAA,cACI+b,SAASX,aAAa5Z,CAAb,EAAgB,GAAhB,CADb;AAAA,cAEIwa,SAASZ,aAAa5Z,CAAb,EAAgB,GAAhB,CAFb,CADkC,CAKlC;;AACA,cAAIua,OAAOT,IAAP,IAAe,IAAnB,EACIS,OAAOT,IAAP,GAAcS,OAAOxL,IAAP,CAAY9P,GAA1B;AACJ,cAAIsb,OAAOR,EAAP,IAAa,IAAjB,EACIQ,OAAOR,EAAP,GAAYQ,OAAOxL,IAAP,CAAY5P,GAAxB;AACJ,cAAIqb,OAAOV,IAAP,IAAe,IAAnB,EACIU,OAAOV,IAAP,GAAcU,OAAOzL,IAAP,CAAY9P,GAA1B;AACJ,cAAIub,OAAOT,EAAP,IAAa,IAAjB,EACIS,OAAOT,EAAP,GAAYS,OAAOzL,IAAP,CAAY5P,GAAxB,CAb8B,CAelC;;AACA,cAAIob,OAAOR,EAAP,GAAYQ,OAAOxL,IAAP,CAAY9P,GAAxB,IAA+Bsb,OAAOT,IAAP,GAAcS,OAAOxL,IAAP,CAAY5P,GAAzD,IACAqb,OAAOT,EAAP,GAAYS,OAAOzL,IAAP,CAAY9P,GADxB,IAC+Bub,OAAOV,IAAP,GAAcU,OAAOzL,IAAP,CAAY5P,GAD7D,EAEI;AAEJob,iBAAOT,IAAP,GAAcnR,KAAKxJ,GAAL,CAASob,OAAOT,IAAhB,EAAsBS,OAAOxL,IAAP,CAAY9P,GAAlC,CAAd;AACAsb,iBAAOR,EAAP,GAAYpR,KAAK1J,GAAL,CAASsb,OAAOR,EAAhB,EAAoBQ,OAAOxL,IAAP,CAAY5P,GAAhC,CAAZ;AACAqb,iBAAOV,IAAP,GAAcnR,KAAKxJ,GAAL,CAASqb,OAAOV,IAAhB,EAAsBU,OAAOzL,IAAP,CAAY9P,GAAlC,CAAd;AACAub,iBAAOT,EAAP,GAAYpR,KAAK1J,GAAL,CAASub,OAAOT,EAAhB,EAAoBS,OAAOzL,IAAP,CAAY5P,GAAhC,CAAZ;AAEA,cAAIsb,SAASF,OAAOT,IAAP,KAAgBS,OAAOR,EAApC;AAAA,cACIW,SAASF,OAAOV,IAAP,KAAgBU,OAAOT,EADpC;;AAGA,cAAIU,UAAUC,MAAd,EAAsB;AAClB;AACH,WA9BiC,CAgClC;;;AACAH,iBAAOT,IAAP,GAAcnR,KAAKsN,KAAL,CAAWsE,OAAOxL,IAAP,CAAYM,GAAZ,CAAgBkL,OAAOT,IAAvB,CAAX,CAAd;AACAS,iBAAOR,EAAP,GAAYpR,KAAKsN,KAAL,CAAWsE,OAAOxL,IAAP,CAAYM,GAAZ,CAAgBkL,OAAOR,EAAvB,CAAX,CAAZ;AACAS,iBAAOV,IAAP,GAAcnR,KAAKsN,KAAL,CAAWuE,OAAOzL,IAAP,CAAYM,GAAZ,CAAgBmL,OAAOV,IAAvB,CAAX,CAAd;AACAU,iBAAOT,EAAP,GAAYpR,KAAKsN,KAAL,CAAWuE,OAAOzL,IAAP,CAAYM,GAAZ,CAAgBmL,OAAOT,EAAvB,CAAX,CAAZ;;AAEA,cAAIU,UAAUC,MAAd,EAAsB;AAClB,gBAAIvP,YAAYnL,EAAEmL,SAAF,IAAe/B,QAAQ4C,IAAR,CAAaU,iBAA5C;AAAA,gBACIiO,WAAWxP,YAAY,CAAZ,GAAgB,GAAhB,GAAsB,CADrC;AAEAkC,gBAAIuN,SAAJ;AACAvN,gBAAIwN,WAAJ,GAAkB7a,EAAElC,KAAF,IAAWsL,QAAQ4C,IAAR,CAAaS,aAA1C;AACAY,gBAAIlC,SAAJ,GAAgBA,SAAhB;;AACA,gBAAIsP,MAAJ,EAAY;AACRpN,kBAAIyN,MAAJ,CAAWP,OAAOR,EAAP,GAAYY,QAAvB,EAAiCH,OAAOV,IAAxC;AACAzM,kBAAI0N,MAAJ,CAAWR,OAAOR,EAAP,GAAYY,QAAvB,EAAiCH,OAAOT,EAAxC;AACH,aAHD,MAGO;AACH1M,kBAAIyN,MAAJ,CAAWP,OAAOT,IAAlB,EAAwBU,OAAOT,EAAP,GAAYY,QAApC;AACAtN,kBAAI0N,MAAJ,CAAWR,OAAOR,EAAlB,EAAsBS,OAAOT,EAAP,GAAYY,QAAlC;AACH;;AACDtN,gBAAI2N,MAAJ;AACH,WAdD,MAcO;AACH3N,gBAAI6M,SAAJ,GAAgBla,EAAElC,KAAF,IAAWsL,QAAQ4C,IAAR,CAAaS,aAAxC;AACAY,gBAAI+M,QAAJ,CAAaG,OAAOT,IAApB,EAA0BU,OAAOT,EAAjC,EACaQ,OAAOR,EAAP,GAAYQ,OAAOT,IADhC,EAEaU,OAAOV,IAAP,GAAcU,OAAOT,EAFlC;AAGH;AACJ;AACJ,OAhFe,CAkFhB;;;AACAxH,aAAOP,SAAP;AACAqI,WAAKjR,QAAQ4C,IAAR,CAAaM,WAAlB;;AAEA,WAAK,IAAIkH,IAAI,CAAb,EAAgBA,IAAIjB,KAAK9T,MAAzB,EAAiC,EAAE+U,CAAnC,EAAsC;AAClC,YAAIzE,OAAOwD,KAAKiB,CAAL,CAAX;AAAA,YAAoBsD,MAAM/H,KAAK+H,GAA/B;AAAA,YACIlB,IAAI7G,KAAKtE,UADb;AAAA,YACyBnC,CADzB;AAAA,YAC4BC,CAD5B;AAAA,YAC+B0S,IAD/B;AAAA,YACqCC,IADrC;AAEA,YAAI,CAACnM,KAAK7H,IAAN,IAAc6H,KAAK3E,KAAL,CAAW3L,MAAX,IAAqB,CAAvC,EACI;AAEJ4O,YAAIlC,SAAJ,GAAgB,CAAhB,CANkC,CAQlC;;AACA,YAAI4D,KAAK7K,SAAL,IAAkB,GAAtB,EAA2B;AACvBoE,cAAI,CAAJ;AACA,cAAIsN,KAAK,MAAT,EACIrN,IAAKwG,KAAK5K,QAAL,IAAiB,KAAjB,GAAyB,CAAzB,GAA6BsJ,UAAlC,CADJ,KAGIlF,IAAIuO,IAAIzS,GAAJ,GAAUkJ,WAAWlJ,GAArB,IAA4B0K,KAAK5K,QAAL,IAAiB,KAAjB,GAAyB2S,IAAIvR,MAA7B,GAAsC,CAAlE,CAAJ;AACP,SAND,MAOK;AACDgD,cAAI,CAAJ;AACA,cAAIqN,KAAK,MAAT,EACItN,IAAKyG,KAAK5K,QAAL,IAAiB,MAAjB,GAA0B,CAA1B,GAA8BqJ,SAAnC,CADJ,KAGIlF,IAAIwO,IAAI1S,IAAJ,GAAWmJ,WAAWnJ,IAAtB,IAA8B2K,KAAK5K,QAAL,IAAiB,MAAjB,GAA0B2S,IAAIxR,KAA9B,GAAsC,CAApE,CAAJ;AACP,SAtBiC,CAwBlC;;;AACA,YAAI,CAACyJ,KAAK2H,SAAV,EAAqB;AACjBrJ,cAAIwN,WAAJ,GAAkB9L,KAAK3F,OAAL,CAAatL,KAA/B;AACAuP,cAAIuN,SAAJ;AACAK,iBAAOC,OAAO,CAAd;AACA,cAAInM,KAAK7K,SAAL,IAAkB,GAAtB,EACI+W,OAAOzN,YAAY,CAAnB,CADJ,KAGI0N,OAAOzN,aAAa,CAApB;;AAEJ,cAAIJ,IAAIlC,SAAJ,IAAiB,CAArB,EAAwB;AACpB,gBAAI4D,KAAK7K,SAAL,IAAkB,GAAtB,EAA2B;AACvBqE,kBAAII,KAAKsN,KAAL,CAAW1N,CAAX,IAAgB,GAApB;AACH,aAFD,MAEO;AACHD,kBAAIK,KAAKsN,KAAL,CAAW3N,CAAX,IAAgB,GAApB;AACH;AACJ;;AAED+E,cAAIyN,MAAJ,CAAWxS,CAAX,EAAcC,CAAd;AACA8E,cAAI0N,MAAJ,CAAWzS,IAAI2S,IAAf,EAAqB1S,IAAI2S,IAAzB;AACA7N,cAAI2N,MAAJ;AACH,SA7CiC,CA+ClC;;;AAEA3N,YAAIwN,WAAJ,GAAkB9L,KAAK3F,OAAL,CAAaY,SAA/B;AAEAqD,YAAIuN,SAAJ;;AACA,aAAKpc,IAAI,CAAT,EAAYA,IAAIuQ,KAAK3E,KAAL,CAAW3L,MAA3B,EAAmC,EAAED,CAArC,EAAwC;AACpC,cAAIwU,IAAIjE,KAAK3E,KAAL,CAAW5L,CAAX,EAAcwU,CAAtB;AAEAiI,iBAAOC,OAAO,CAAd;AAEA,cAAI3G,MAAMvB,CAAN,KAAYA,IAAIjE,KAAK9P,GAArB,IAA4B+T,IAAIjE,KAAK5P,GAArC,CACA;AADA,aAEIyW,KAAK,MAAL,KACK,QAAOyE,EAAP,KAAa,QAAb,IAAyBA,GAAGtL,KAAK5K,QAAR,IAAoB,CAA9C,IAAoDkW,KAAK,CAD7D,MAEIrH,KAAKjE,KAAK9P,GAAV,IAAiB+T,KAAKjE,KAAK5P,GAF/B,CAFR,EAKI;;AAEJ,cAAI4P,KAAK7K,SAAL,IAAkB,GAAtB,EAA2B;AACvBoE,gBAAIyG,KAAKM,GAAL,CAAS2D,CAAT,CAAJ;AACAkI,mBAAOtF,KAAK,MAAL,GAAc,CAACnI,UAAf,GAA4BmI,CAAnC;AAEA,gBAAI7G,KAAK5K,QAAL,IAAiB,KAArB,EACI+W,OAAO,CAACA,IAAR;AACP,WAND,MAOK;AACD3S,gBAAIwG,KAAKM,GAAL,CAAS2D,CAAT,CAAJ;AACAiI,mBAAOrF,KAAK,MAAL,GAAc,CAACpI,SAAf,GAA2BoI,CAAlC;AAEA,gBAAI7G,KAAK5K,QAAL,IAAiB,MAArB,EACI8W,OAAO,CAACA,IAAR;AACP;;AAED,cAAI5N,IAAIlC,SAAJ,IAAiB,CAArB,EAAwB;AACpB,gBAAI4D,KAAK7K,SAAL,IAAkB,GAAtB,EACIoE,IAAIK,KAAKsN,KAAL,CAAW3N,CAAX,IAAgB,GAApB,CADJ,KAGIC,IAAII,KAAKsN,KAAL,CAAW1N,CAAX,IAAgB,GAApB;AACP;;AAED8E,cAAIyN,MAAJ,CAAWxS,CAAX,EAAcC,CAAd;AACA8E,cAAI0N,MAAJ,CAAWzS,IAAI2S,IAAf,EAAqB1S,IAAI2S,IAAzB;AACH;;AAED7N,YAAI2N,MAAJ;AACH,OAjLe,CAoLhB;;;AACA,UAAIX,EAAJ,EAAQ;AACJ;AACA;AACAC,aAAKlR,QAAQ4C,IAAR,CAAaE,WAAlB;;AACA,YAAG,QAAOmO,EAAP,KAAa,QAAb,IAAyB,QAAOC,EAAP,KAAa,QAAzC,EAAmD;AAC/C,cAAI,QAAOD,EAAP,MAAc,QAAlB,EAA4B;AACxBA,iBAAK;AAAChW,mBAAKgW,EAAN;AAAUhT,qBAAOgT,EAAjB;AAAqBjT,sBAAQiT,EAA7B;AAAiCjW,oBAAMiW;AAAvC,aAAL;AACH;;AACD,cAAI,QAAOC,EAAP,MAAc,QAAlB,EAA4B;AACxBA,iBAAK;AAACjW,mBAAKiW,EAAN;AAAUjT,qBAAOiT,EAAjB;AAAqBlT,sBAAQkT,EAA7B;AAAiClW,oBAAMkW;AAAvC,aAAL;AACH;;AAED,cAAID,GAAGhW,GAAH,GAAS,CAAb,EAAgB;AACZgJ,gBAAIwN,WAAJ,GAAkBP,GAAGjW,GAArB;AACAgJ,gBAAIlC,SAAJ,GAAgBkP,GAAGhW,GAAnB;AACAgJ,gBAAIuN,SAAJ;AACAvN,gBAAIyN,MAAJ,CAAW,IAAIT,GAAGjW,IAAlB,EAAwB,IAAIiW,GAAGhW,GAAH,GAAO,CAAnC;AACAgJ,gBAAI0N,MAAJ,CAAWvN,SAAX,EAAsB,IAAI6M,GAAGhW,GAAH,GAAO,CAAjC;AACAgJ,gBAAI2N,MAAJ;AACH;;AAED,cAAIX,GAAGhT,KAAH,GAAW,CAAf,EAAkB;AACdgG,gBAAIwN,WAAJ,GAAkBP,GAAGjT,KAArB;AACAgG,gBAAIlC,SAAJ,GAAgBkP,GAAGhT,KAAnB;AACAgG,gBAAIuN,SAAJ;AACAvN,gBAAIyN,MAAJ,CAAWtN,YAAY6M,GAAGhT,KAAH,GAAW,CAAlC,EAAqC,IAAIgT,GAAGhW,GAA5C;AACAgJ,gBAAI0N,MAAJ,CAAWvN,YAAY6M,GAAGhT,KAAH,GAAW,CAAlC,EAAqCoG,UAArC;AACAJ,gBAAI2N,MAAJ;AACH;;AAED,cAAIX,GAAGjT,MAAH,GAAY,CAAhB,EAAmB;AACfiG,gBAAIwN,WAAJ,GAAkBP,GAAGlT,MAArB;AACAiG,gBAAIlC,SAAJ,GAAgBkP,GAAGjT,MAAnB;AACAiG,gBAAIuN,SAAJ;AACAvN,gBAAIyN,MAAJ,CAAWtN,YAAY6M,GAAGhT,KAA1B,EAAiCoG,aAAa4M,GAAGjT,MAAH,GAAY,CAA1D;AACAiG,gBAAI0N,MAAJ,CAAW,CAAX,EAActN,aAAa4M,GAAGjT,MAAH,GAAY,CAAvC;AACAiG,gBAAI2N,MAAJ;AACH;;AAED,cAAIX,GAAGjW,IAAH,GAAU,CAAd,EAAiB;AACbiJ,gBAAIwN,WAAJ,GAAkBP,GAAGlW,IAArB;AACAiJ,gBAAIlC,SAAJ,GAAgBkP,GAAGjW,IAAnB;AACAiJ,gBAAIuN,SAAJ;AACAvN,gBAAIyN,MAAJ,CAAW,IAAIT,GAAGjW,IAAH,GAAQ,CAAvB,EAA0BqJ,aAAa4M,GAAGjT,MAA1C;AACAiG,gBAAI0N,MAAJ,CAAW,IAAGV,GAAGjW,IAAH,GAAQ,CAAtB,EAAyB,CAAzB;AACAiJ,gBAAI2N,MAAJ;AACH;AACJ,SA3CD,MA4CK;AACD3N,cAAIlC,SAAJ,GAAgBkP,EAAhB;AACAhN,cAAIwN,WAAJ,GAAkBzR,QAAQ4C,IAAR,CAAaE,WAA/B;AACAmB,cAAI8N,UAAJ,CAAe,CAACd,EAAD,GAAI,CAAnB,EAAsB,CAACA,EAAD,GAAI,CAA1B,EAA6B7M,YAAY6M,EAAzC,EAA6C5M,aAAa4M,EAA1D;AACH;AACJ;;AAEDhN,UAAIvH,OAAJ;AACH;;AAED,aAAS6R,cAAT,GAA0B;AAEtB9Z,QAAE0F,IAAF,CAAOyO,SAAP,EAAkB,UAAUlD,CAAV,EAAaC,IAAb,EAAmB;AACjC,YAAI+H,MAAM/H,KAAK+H,GAAf;AAAA,YACIZ,eAAenH,KAAK7K,SAAL,GAAiB,OAAjB,GAA2B6K,KAAK7K,SAAhC,GAA4C6K,KAAKC,CAAjD,GAAqD,MADxE;AAAA,YAEI1I,QAAQ,UAAUyI,KAAK7K,SAAf,GAA2B,aAA3B,GAA2C6K,KAAK7K,SAAhD,GAA4D6K,KAAKC,CAAjE,GAAqE,QAArE,GAAgFkH,YAF5F;AAAA,YAGIzO,OAAOsH,KAAK3F,OAAL,CAAa3B,IAAb,IAAqB,2BAHhC;AAAA,YAII2T,IAJJ;AAAA,YAIU9S,CAJV;AAAA,YAIaC,CAJb;AAAA,YAIgBC,MAJhB;AAAA,YAIwBC,MAJxB,CADiC,CAOjC;AACA;AACA;;AAEAyE,gBAAQrE,UAAR,CAAmBvC,KAAnB;AAEA,YAAI,CAACyI,KAAK7H,IAAN,IAAc6H,KAAK3E,KAAL,CAAW3L,MAAX,IAAqB,CAAvC,EACI;;AAEJ,aAAK,IAAID,IAAI,CAAb,EAAgBA,IAAIuQ,KAAK3E,KAAL,CAAW3L,MAA/B,EAAuC,EAAED,CAAzC,EAA4C;AAExC4c,iBAAOrM,KAAK3E,KAAL,CAAW5L,CAAX,CAAP;AACA,cAAI,CAAC4c,KAAKjF,KAAN,IAAeiF,KAAKpI,CAAL,GAASjE,KAAK9P,GAA7B,IAAoCmc,KAAKpI,CAAL,GAASjE,KAAK5P,GAAtD,EACI;;AAEJ,cAAI4P,KAAK7K,SAAL,IAAkB,GAAtB,EAA2B;AACvBsE,qBAAS,QAAT;AACAF,gBAAIiF,WAAWnJ,IAAX,GAAkB2K,KAAKM,GAAL,CAAS+L,KAAKpI,CAAd,CAAtB;;AACA,gBAAIjE,KAAK5K,QAAL,IAAiB,QAArB,EAA+B;AAC3BoE,kBAAIuO,IAAIzS,GAAJ,GAAUyS,IAAIN,OAAd,GAAwBM,IAAIL,mBAAhC;AACH,aAFD,MAEO;AACHlO,kBAAIuO,IAAIzS,GAAJ,GAAUyS,IAAIvR,MAAd,GAAuBuR,IAAIN,OAA/B;AACA/N,uBAAS,QAAT;AACH;AACJ,WATD,MASO;AACHA,qBAAS,QAAT;AACAF,gBAAIgF,WAAWlJ,GAAX,GAAiB0K,KAAKM,GAAL,CAAS+L,KAAKpI,CAAd,CAArB;;AACA,gBAAIjE,KAAK5K,QAAL,IAAiB,MAArB,EAA6B;AACzBmE,kBAAIwO,IAAI1S,IAAJ,GAAW0S,IAAIxR,KAAf,GAAuBwR,IAAIN,OAA/B;AACAhO,uBAAS,OAAT;AACH,aAHD,MAGO;AACHF,kBAAIwO,IAAI1S,IAAJ,GAAW0S,IAAIN,OAAnB;AACH;AACJ;;AAEDtJ,kBAAQ7E,OAAR,CAAgB/B,KAAhB,EAAuBgC,CAAvB,EAA0BC,CAA1B,EAA6B6S,KAAKjF,KAAlC,EAAyC1O,IAAzC,EAA+C,IAA/C,EAAqD,IAArD,EAA2De,MAA3D,EAAmEC,MAAnE;AACH;AACJ,OA5CD;AA6CH;;AAED,aAASsF,UAAT,CAAoB5E,MAApB,EAA4B;AACxB,UAAIA,OAAOoC,KAAP,CAAarE,IAAjB,EACImU,gBAAgBlS,MAAhB;AACJ,UAAIA,OAAOsC,IAAP,CAAYvE,IAAhB,EACIoU,eAAenS,MAAf;AACJ,UAAIA,OAAO8B,MAAP,CAAc/D,IAAlB,EACIqU,iBAAiBpS,MAAjB;AACP;;AAED,aAASkS,eAAT,CAAyBlS,MAAzB,EAAiC;AAC7B,eAASqS,QAAT,CAAkBxH,UAAlB,EAA8ByH,OAA9B,EAAuCC,OAAvC,EAAgDC,KAAhD,EAAuDC,KAAvD,EAA8D;AAC1D,YAAI3Q,SAAS+I,WAAW/I,MAAxB;AAAA,YACIyI,KAAKM,WAAWI,SADpB;AAAA,YAEIyH,QAAQ,IAFZ;AAAA,YAEkBC,QAAQ,IAF1B;AAIAzO,YAAIuN,SAAJ;;AACA,aAAK,IAAIpc,IAAIkV,EAAb,EAAiBlV,IAAIyM,OAAOxM,MAA5B,EAAoCD,KAAKkV,EAAzC,EAA6C;AACzC,cAAItB,KAAKnH,OAAOzM,IAAIkV,EAAX,CAAT;AAAA,cAAyBpB,KAAKrH,OAAOzM,IAAIkV,EAAJ,GAAS,CAAhB,CAA9B;AAAA,cACIqI,KAAK9Q,OAAOzM,CAAP,CADT;AAAA,cACoBwd,KAAK/Q,OAAOzM,IAAI,CAAX,CADzB;AAGA,cAAI4T,MAAM,IAAN,IAAc2J,MAAM,IAAxB,EACI,SALqC,CAOzC;;AACA,cAAIzJ,MAAM0J,EAAN,IAAY1J,KAAKsJ,MAAM3c,GAA3B,EAAgC;AAC5B,gBAAI+c,KAAKJ,MAAM3c,GAAf,EACI,SAFwB,CAEZ;AAChB;;AACAmT,iBAAK,CAACwJ,MAAM3c,GAAN,GAAYqT,EAAb,KAAoB0J,KAAK1J,EAAzB,KAAgCyJ,KAAK3J,EAArC,IAA2CA,EAAhD;AACAE,iBAAKsJ,MAAM3c,GAAX;AACH,WAND,MAOK,IAAI+c,MAAM1J,EAAN,IAAY0J,KAAKJ,MAAM3c,GAA3B,EAAgC;AACjC,gBAAIqT,KAAKsJ,MAAM3c,GAAf,EACI;AACJ8c,iBAAK,CAACH,MAAM3c,GAAN,GAAYqT,EAAb,KAAoB0J,KAAK1J,EAAzB,KAAgCyJ,KAAK3J,EAArC,IAA2CA,EAAhD;AACA4J,iBAAKJ,MAAM3c,GAAX;AACH,WApBwC,CAsBzC;;;AACA,cAAIqT,MAAM0J,EAAN,IAAY1J,KAAKsJ,MAAMzc,GAA3B,EAAgC;AAC5B,gBAAI6c,KAAKJ,MAAMzc,GAAf,EACI;AACJiT,iBAAK,CAACwJ,MAAMzc,GAAN,GAAYmT,EAAb,KAAoB0J,KAAK1J,EAAzB,KAAgCyJ,KAAK3J,EAArC,IAA2CA,EAAhD;AACAE,iBAAKsJ,MAAMzc,GAAX;AACH,WALD,MAMK,IAAI6c,MAAM1J,EAAN,IAAY0J,KAAKJ,MAAMzc,GAA3B,EAAgC;AACjC,gBAAImT,KAAKsJ,MAAMzc,GAAf,EACI;AACJ4c,iBAAK,CAACH,MAAMzc,GAAN,GAAYmT,EAAb,KAAoB0J,KAAK1J,EAAzB,KAAgCyJ,KAAK3J,EAArC,IAA2CA,EAAhD;AACA4J,iBAAKJ,MAAMzc,GAAX;AACH,WAlCwC,CAoCzC;;;AACA,cAAIiT,MAAM2J,EAAN,IAAY3J,KAAKuJ,MAAM1c,GAA3B,EAAgC;AAC5B,gBAAI8c,KAAKJ,MAAM1c,GAAf,EACI;AACJqT,iBAAK,CAACqJ,MAAM1c,GAAN,GAAYmT,EAAb,KAAoB2J,KAAK3J,EAAzB,KAAgC4J,KAAK1J,EAArC,IAA2CA,EAAhD;AACAF,iBAAKuJ,MAAM1c,GAAX;AACH,WALD,MAMK,IAAI8c,MAAM3J,EAAN,IAAY2J,KAAKJ,MAAM1c,GAA3B,EAAgC;AACjC,gBAAImT,KAAKuJ,MAAM1c,GAAf,EACI;AACJ+c,iBAAK,CAACL,MAAM1c,GAAN,GAAYmT,EAAb,KAAoB2J,KAAK3J,EAAzB,KAAgC4J,KAAK1J,EAArC,IAA2CA,EAAhD;AACAyJ,iBAAKJ,MAAM1c,GAAX;AACH,WAhDwC,CAkDzC;;;AACA,cAAImT,MAAM2J,EAAN,IAAY3J,KAAKuJ,MAAMxc,GAA3B,EAAgC;AAC5B,gBAAI4c,KAAKJ,MAAMxc,GAAf,EACI;AACJmT,iBAAK,CAACqJ,MAAMxc,GAAN,GAAYiT,EAAb,KAAoB2J,KAAK3J,EAAzB,KAAgC4J,KAAK1J,EAArC,IAA2CA,EAAhD;AACAF,iBAAKuJ,MAAMxc,GAAX;AACH,WALD,MAMK,IAAI4c,MAAM3J,EAAN,IAAY2J,KAAKJ,MAAMxc,GAA3B,EAAgC;AACjC,gBAAIiT,KAAKuJ,MAAMxc,GAAf,EACI;AACJ6c,iBAAK,CAACL,MAAMxc,GAAN,GAAYiT,EAAb,KAAoB2J,KAAK3J,EAAzB,KAAgC4J,KAAK1J,EAArC,IAA2CA,EAAhD;AACAyJ,iBAAKJ,MAAMxc,GAAX;AACH;;AAED,cAAIiT,MAAMyJ,KAAN,IAAevJ,MAAMwJ,KAAzB,EACIzO,IAAIyN,MAAJ,CAAWa,MAAMtM,GAAN,CAAU+C,EAAV,IAAgBqJ,OAA3B,EAAoCG,MAAMvM,GAAN,CAAUiD,EAAV,IAAgBoJ,OAApD;AAEJG,kBAAQE,EAAR;AACAD,kBAAQE,EAAR;AACA3O,cAAI0N,MAAJ,CAAWY,MAAMtM,GAAN,CAAU0M,EAAV,IAAgBN,OAA3B,EAAoCG,MAAMvM,GAAN,CAAU2M,EAAV,IAAgBN,OAApD;AACH;;AACDrO,YAAI2N,MAAJ;AACH;;AAED,eAASiB,YAAT,CAAsBjI,UAAtB,EAAkC2H,KAAlC,EAAyCC,KAAzC,EAAgD;AAC5C,YAAI3Q,SAAS+I,WAAW/I,MAAxB;AAAA,YACIyI,KAAKM,WAAWI,SADpB;AAAA,YAEIhN,SAASuB,KAAK1J,GAAL,CAAS0J,KAAKxJ,GAAL,CAAS,CAAT,EAAYyc,MAAM3c,GAAlB,CAAT,EAAiC2c,MAAMzc,GAAvC,CAFb;AAAA,YAGIX,IAAI,CAHR;AAAA,YAGW6F,GAHX;AAAA,YAGgB6X,WAAW,KAH3B;AAAA,YAIIC,OAAO,CAJX;AAAA,YAIcC,eAAe,CAJ7B;AAAA,YAIgCC,aAAa,CAJ7C,CAD4C,CAO5C;AACA;AACA;;AACA,eAAO,IAAP,EAAa;AACT,cAAI3I,KAAK,CAAL,IAAUlV,IAAIyM,OAAOxM,MAAP,GAAgBiV,EAAlC,EACI;AAEJlV,eAAKkV,EAAL,CAJS,CAIA;;AAET,cAAItB,KAAKnH,OAAOzM,IAAIkV,EAAX,CAAT;AAAA,cACIpB,KAAKrH,OAAOzM,IAAIkV,EAAJ,GAASyI,IAAhB,CADT;AAAA,cAEIJ,KAAK9Q,OAAOzM,CAAP,CAFT;AAAA,cAEoBwd,KAAK/Q,OAAOzM,IAAI2d,IAAX,CAFzB;;AAIA,cAAID,QAAJ,EAAc;AACV,gBAAIxI,KAAK,CAAL,IAAUtB,MAAM,IAAhB,IAAwB2J,MAAM,IAAlC,EAAwC;AACpC;AACAM,2BAAa7d,CAAb;AACAkV,mBAAK,CAACA,EAAN;AACAyI,qBAAO,CAAP;AACA;AACH;;AAED,gBAAIzI,KAAK,CAAL,IAAUlV,KAAK4d,eAAe1I,EAAlC,EAAsC;AAClC;AACArG,kBAAIjC,IAAJ;AACA8Q,yBAAW,KAAX;AACAxI,mBAAK,CAACA,EAAN;AACAyI,qBAAO,CAAP;AACA3d,kBAAI4d,eAAeC,aAAa3I,EAAhC;AACA;AACH;AACJ;;AAED,cAAItB,MAAM,IAAN,IAAc2J,MAAM,IAAxB,EACI,SA/BK,CAiCT;AAEA;;AACA,cAAI3J,MAAM2J,EAAN,IAAY3J,KAAKuJ,MAAM1c,GAA3B,EAAgC;AAC5B,gBAAI8c,KAAKJ,MAAM1c,GAAf,EACI;AACJqT,iBAAK,CAACqJ,MAAM1c,GAAN,GAAYmT,EAAb,KAAoB2J,KAAK3J,EAAzB,KAAgC4J,KAAK1J,EAArC,IAA2CA,EAAhD;AACAF,iBAAKuJ,MAAM1c,GAAX;AACH,WALD,MAMK,IAAI8c,MAAM3J,EAAN,IAAY2J,KAAKJ,MAAM1c,GAA3B,EAAgC;AACjC,gBAAImT,KAAKuJ,MAAM1c,GAAf,EACI;AACJ+c,iBAAK,CAACL,MAAM1c,GAAN,GAAYmT,EAAb,KAAoB2J,KAAK3J,EAAzB,KAAgC4J,KAAK1J,EAArC,IAA2CA,EAAhD;AACAyJ,iBAAKJ,MAAM1c,GAAX;AACH,WA/CQ,CAiDT;;;AACA,cAAImT,MAAM2J,EAAN,IAAY3J,KAAKuJ,MAAMxc,GAA3B,EAAgC;AAC5B,gBAAI4c,KAAKJ,MAAMxc,GAAf,EACI;AACJmT,iBAAK,CAACqJ,MAAMxc,GAAN,GAAYiT,EAAb,KAAoB2J,KAAK3J,EAAzB,KAAgC4J,KAAK1J,EAArC,IAA2CA,EAAhD;AACAF,iBAAKuJ,MAAMxc,GAAX;AACH,WALD,MAMK,IAAI4c,MAAM3J,EAAN,IAAY2J,KAAKJ,MAAMxc,GAA3B,EAAgC;AACjC,gBAAIiT,KAAKuJ,MAAMxc,GAAf,EACI;AACJ6c,iBAAK,CAACL,MAAMxc,GAAN,GAAYiT,EAAb,KAAoB2J,KAAK3J,EAAzB,KAAgC4J,KAAK1J,EAArC,IAA2CA,EAAhD;AACAyJ,iBAAKJ,MAAMxc,GAAX;AACH;;AAED,cAAI,CAAC+c,QAAL,EAAe;AACX;AACA7O,gBAAIuN,SAAJ;AACAvN,gBAAIyN,MAAJ,CAAWa,MAAMtM,GAAN,CAAU+C,EAAV,CAAX,EAA0BwJ,MAAMvM,GAAN,CAAUjI,MAAV,CAA1B;AACA8U,uBAAW,IAAX;AACH,WApEQ,CAsET;;;AACA,cAAI5J,MAAMsJ,MAAMzc,GAAZ,IAAmB6c,MAAMJ,MAAMzc,GAAnC,EAAwC;AACpCkO,gBAAI0N,MAAJ,CAAWY,MAAMtM,GAAN,CAAU+C,EAAV,CAAX,EAA0BwJ,MAAMvM,GAAN,CAAUuM,MAAMzc,GAAhB,CAA1B;AACAkO,gBAAI0N,MAAJ,CAAWY,MAAMtM,GAAN,CAAU0M,EAAV,CAAX,EAA0BH,MAAMvM,GAAN,CAAUuM,MAAMzc,GAAhB,CAA1B;AACA;AACH,WAJD,MAKK,IAAImT,MAAMsJ,MAAM3c,GAAZ,IAAmB+c,MAAMJ,MAAM3c,GAAnC,EAAwC;AACzCoO,gBAAI0N,MAAJ,CAAWY,MAAMtM,GAAN,CAAU+C,EAAV,CAAX,EAA0BwJ,MAAMvM,GAAN,CAAUuM,MAAM3c,GAAhB,CAA1B;AACAoO,gBAAI0N,MAAJ,CAAWY,MAAMtM,GAAN,CAAU0M,EAAV,CAAX,EAA0BH,MAAMvM,GAAN,CAAUuM,MAAM3c,GAAhB,CAA1B;AACA;AACH,WAhFQ,CAkFT;AACA;AACA;AACA;;;AACA,cAAIqd,QAAQlK,EAAZ;AAAA,cAAgBmK,QAAQR,EAAxB,CAtFS,CAwFT;AACA;AAEA;;AACA,cAAIzJ,MAAM0J,EAAN,IAAY1J,KAAKsJ,MAAM3c,GAAvB,IAA8B+c,MAAMJ,MAAM3c,GAA9C,EAAmD;AAC/CmT,iBAAK,CAACwJ,MAAM3c,GAAN,GAAYqT,EAAb,KAAoB0J,KAAK1J,EAAzB,KAAgCyJ,KAAK3J,EAArC,IAA2CA,EAAhD;AACAE,iBAAKsJ,MAAM3c,GAAX;AACH,WAHD,MAIK,IAAI+c,MAAM1J,EAAN,IAAY0J,KAAKJ,MAAM3c,GAAvB,IAA8BqT,MAAMsJ,MAAM3c,GAA9C,EAAmD;AACpD8c,iBAAK,CAACH,MAAM3c,GAAN,GAAYqT,EAAb,KAAoB0J,KAAK1J,EAAzB,KAAgCyJ,KAAK3J,EAArC,IAA2CA,EAAhD;AACA4J,iBAAKJ,MAAM3c,GAAX;AACH,WAnGQ,CAqGT;;;AACA,cAAIqT,MAAM0J,EAAN,IAAY1J,KAAKsJ,MAAMzc,GAAvB,IAA8B6c,MAAMJ,MAAMzc,GAA9C,EAAmD;AAC/CiT,iBAAK,CAACwJ,MAAMzc,GAAN,GAAYmT,EAAb,KAAoB0J,KAAK1J,EAAzB,KAAgCyJ,KAAK3J,EAArC,IAA2CA,EAAhD;AACAE,iBAAKsJ,MAAMzc,GAAX;AACH,WAHD,MAIK,IAAI6c,MAAM1J,EAAN,IAAY0J,KAAKJ,MAAMzc,GAAvB,IAA8BmT,MAAMsJ,MAAMzc,GAA9C,EAAmD;AACpD4c,iBAAK,CAACH,MAAMzc,GAAN,GAAYmT,EAAb,KAAoB0J,KAAK1J,EAAzB,KAAgCyJ,KAAK3J,EAArC,IAA2CA,EAAhD;AACA4J,iBAAKJ,MAAMzc,GAAX;AACH,WA7GQ,CA+GT;AACA;;;AACA,cAAIiT,MAAMkK,KAAV,EAAiB;AACbjP,gBAAI0N,MAAJ,CAAWY,MAAMtM,GAAN,CAAUiN,KAAV,CAAX,EAA6BV,MAAMvM,GAAN,CAAUiD,EAAV,CAA7B,EADa,CAEb;AACH,WApHQ,CAsHT;AACA;AACA;;;AACAjF,cAAI0N,MAAJ,CAAWY,MAAMtM,GAAN,CAAU+C,EAAV,CAAX,EAA0BwJ,MAAMvM,GAAN,CAAUiD,EAAV,CAA1B;AACAjF,cAAI0N,MAAJ,CAAWY,MAAMtM,GAAN,CAAU0M,EAAV,CAAX,EAA0BH,MAAMvM,GAAN,CAAU2M,EAAV,CAA1B,EA1HS,CA4HT;;AACA,cAAID,MAAMQ,KAAV,EAAiB;AACblP,gBAAI0N,MAAJ,CAAWY,MAAMtM,GAAN,CAAU0M,EAAV,CAAX,EAA0BH,MAAMvM,GAAN,CAAU2M,EAAV,CAA1B;AACA3O,gBAAI0N,MAAJ,CAAWY,MAAMtM,GAAN,CAAUkN,KAAV,CAAX,EAA6BX,MAAMvM,GAAN,CAAU2M,EAAV,CAA7B;AACH;AACJ;AACJ;;AAED3O,UAAItH,IAAJ;AACAsH,UAAI4M,SAAJ,CAAc1M,WAAWnJ,IAAzB,EAA+BmJ,WAAWlJ,GAA1C;AACAgJ,UAAImP,QAAJ,GAAe,OAAf;AAEA,UAAInG,KAAKlN,OAAOoC,KAAP,CAAaJ,SAAtB;AAAA,UACIsR,KAAKtT,OAAO2C,UADhB,CAnO6B,CAqO7B;;AACA,UAAIuK,KAAK,CAAL,IAAUoG,KAAK,CAAnB,EAAsB;AAClB;AACApP,YAAIlC,SAAJ,GAAgBsR,EAAhB;AACApP,YAAIwN,WAAJ,GAAkB,iBAAlB,CAHkB,CAIlB;;AACA,YAAInT,QAAQiB,KAAK+T,EAAL,GAAQ,EAApB;AACAlB,iBAASrS,OAAO6K,UAAhB,EAA4BrL,KAAKgU,GAAL,CAASjV,KAAT,KAAmB2O,KAAG,CAAH,GAAOoG,KAAG,CAA7B,CAA5B,EAA6D9T,KAAKiU,GAAL,CAASlV,KAAT,KAAmB2O,KAAG,CAAH,GAAOoG,KAAG,CAA7B,CAA7D,EAA8FtT,OAAOW,KAArG,EAA4GX,OAAO2B,KAAnH;AACAuC,YAAIlC,SAAJ,GAAgBsR,KAAG,CAAnB;AACAjB,iBAASrS,OAAO6K,UAAhB,EAA4BrL,KAAKgU,GAAL,CAASjV,KAAT,KAAmB2O,KAAG,CAAH,GAAOoG,KAAG,CAA7B,CAA5B,EAA6D9T,KAAKiU,GAAL,CAASlV,KAAT,KAAmB2O,KAAG,CAAH,GAAOoG,KAAG,CAA7B,CAA7D,EAA8FtT,OAAOW,KAArG,EAA4GX,OAAO2B,KAAnH;AACH;;AAEDuC,UAAIlC,SAAJ,GAAgBkL,EAAhB;AACAhJ,UAAIwN,WAAJ,GAAkB1R,OAAOrL,KAAzB;AACA,UAAIoc,YAAY2C,aAAa1T,OAAOoC,KAApB,EAA2BpC,OAAOrL,KAAlC,EAAyC,CAAzC,EAA4C2P,UAA5C,CAAhB;;AACA,UAAIyM,SAAJ,EAAe;AACX7M,YAAI6M,SAAJ,GAAgBA,SAAhB;AACA+B,qBAAa9S,OAAO6K,UAApB,EAAgC7K,OAAOW,KAAvC,EAA8CX,OAAO2B,KAArD;AACH;;AAED,UAAIuL,KAAK,CAAT,EACImF,SAASrS,OAAO6K,UAAhB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC7K,OAAOW,KAAzC,EAAgDX,OAAO2B,KAAvD;AACJuC,UAAIvH,OAAJ;AACH;;AAED,aAASyV,gBAAT,CAA0BpS,MAA1B,EAAkC;AAC9B,eAAS2T,UAAT,CAAoB9I,UAApB,EAAgC9I,MAAhC,EAAwCgP,SAAxC,EAAmDxL,MAAnD,EAA2DqO,MAA3D,EAAmEpB,KAAnE,EAA0EC,KAA1E,EAAiFtQ,MAAjF,EAAyF;AACrF,YAAIL,SAAS+I,WAAW/I,MAAxB;AAAA,YAAgCyI,KAAKM,WAAWI,SAAhD;;AAEA,aAAK,IAAI5V,IAAI,CAAb,EAAgBA,IAAIyM,OAAOxM,MAA3B,EAAmCD,KAAKkV,EAAxC,EAA4C;AACxC,cAAIpL,IAAI2C,OAAOzM,CAAP,CAAR;AAAA,cAAmB+J,IAAI0C,OAAOzM,IAAI,CAAX,CAAvB;AACA,cAAI8J,KAAK,IAAL,IAAaA,IAAIqT,MAAM1c,GAAvB,IAA8BqJ,IAAIqT,MAAMxc,GAAxC,IAA+CoJ,IAAIqT,MAAM3c,GAAzD,IAAgEsJ,IAAIqT,MAAMzc,GAA9E,EACI;AAEJkO,cAAIuN,SAAJ;AACAtS,cAAIqT,MAAMtM,GAAN,CAAU/G,CAAV,CAAJ;AACAC,cAAIqT,MAAMvM,GAAN,CAAU9G,CAAV,IAAemG,MAAnB;AACA,cAAIpD,UAAU,QAAd,EACI+B,IAAI2P,GAAJ,CAAQ1U,CAAR,EAAWC,CAAX,EAAc2C,MAAd,EAAsB,CAAtB,EAAyB6R,SAASpU,KAAK+T,EAAd,GAAmB/T,KAAK+T,EAAL,GAAU,CAAtD,EAAyD,KAAzD,EADJ,KAGIpR,OAAO+B,GAAP,EAAY/E,CAAZ,EAAeC,CAAf,EAAkB2C,MAAlB,EAA0B6R,MAA1B;AACJ1P,cAAI4P,SAAJ;;AAEA,cAAI/C,SAAJ,EAAe;AACX7M,gBAAI6M,SAAJ,GAAgBA,SAAhB;AACA7M,gBAAIjC,IAAJ;AACH;;AACDiC,cAAI2N,MAAJ;AACH;AACJ;;AAED3N,UAAItH,IAAJ;AACAsH,UAAI4M,SAAJ,CAAc1M,WAAWnJ,IAAzB,EAA+BmJ,WAAWlJ,GAA1C;AAEA,UAAIgS,KAAKlN,OAAO8B,MAAP,CAAcE,SAAvB;AAAA,UACIsR,KAAKtT,OAAO2C,UADhB;AAAA,UAEIZ,SAAS/B,OAAO8B,MAAP,CAAcC,MAF3B;AAAA,UAGII,SAASnC,OAAO8B,MAAP,CAAcK,MAH3B,CA7B8B,CAkC9B;AACA;AACA;AACA;;AAEA,UAAI+K,MAAM,CAAV,EACIA,KAAK,MAAL;;AAEJ,UAAIA,KAAK,CAAL,IAAUoG,KAAK,CAAnB,EAAsB;AAClB;AACA,YAAIS,IAAIT,KAAK,CAAb;AACApP,YAAIlC,SAAJ,GAAgB+R,CAAhB;AACA7P,YAAIwN,WAAJ,GAAkB,iBAAlB;AACAiC,mBAAW3T,OAAO6K,UAAlB,EAA8B9I,MAA9B,EAAsC,IAAtC,EAA4CgS,IAAIA,IAAE,CAAlD,EAAqD,IAArD,EACW/T,OAAOW,KADlB,EACyBX,OAAO2B,KADhC,EACuCQ,MADvC;AAGA+B,YAAIwN,WAAJ,GAAkB,iBAAlB;AACAiC,mBAAW3T,OAAO6K,UAAlB,EAA8B9I,MAA9B,EAAsC,IAAtC,EAA4CgS,IAAE,CAA9C,EAAiD,IAAjD,EACW/T,OAAOW,KADlB,EACyBX,OAAO2B,KADhC,EACuCQ,MADvC;AAEH;;AAED+B,UAAIlC,SAAJ,GAAgBkL,EAAhB;AACAhJ,UAAIwN,WAAJ,GAAkB1R,OAAOrL,KAAzB;AACAgf,iBAAW3T,OAAO6K,UAAlB,EAA8B9I,MAA9B,EACW2R,aAAa1T,OAAO8B,MAApB,EAA4B9B,OAAOrL,KAAnC,CADX,EACsD,CADtD,EACyD,KADzD,EAEWqL,OAAOW,KAFlB,EAEyBX,OAAO2B,KAFhC,EAEuCQ,MAFvC;AAGA+B,UAAIvH,OAAJ;AACH;;AAED,aAASqX,OAAT,CAAiB7U,CAAjB,EAAoBC,CAApB,EAAuBrK,CAAvB,EAA0Bkf,OAA1B,EAAmCC,QAAnC,EAA6CC,iBAA7C,EAAgE3B,KAAhE,EAAuEC,KAAvE,EAA8Etd,CAA9E,EAAiFsN,UAAjF,EAA6FT,SAA7F,EAAwG;AACpG,UAAI/G,IAAJ,EAAUiD,KAAV,EAAiBD,MAAjB,EAAyB/C,GAAzB,EACIkZ,QADJ,EACcC,SADd,EACyBC,OADzB,EACkCC,UADlC,EAEI1D,GAFJ,CADoG,CAKpG;AACA;AACA;;AACA,UAAIpO,UAAJ,EAAgB;AACZ8R,qBAAaF,YAAYC,UAAU,IAAnC;AACAF,mBAAW,KAAX;AACAnZ,eAAOlG,CAAP;AACAmJ,gBAAQiB,CAAR;AACAjE,cAAMkE,IAAI6U,OAAV;AACAhW,iBAASmB,IAAI8U,QAAb,CANY,CAQZ;;AACA,YAAIhW,QAAQjD,IAAZ,EAAkB;AACd4V,gBAAM3S,KAAN;AACAA,kBAAQjD,IAAR;AACAA,iBAAO4V,GAAP;AACAuD,qBAAW,IAAX;AACAC,sBAAY,KAAZ;AACH;AACJ,OAhBD,MAiBK;AACDD,mBAAWC,YAAYC,UAAU,IAAjC;AACAC,qBAAa,KAAb;AACAtZ,eAAOkE,IAAI8U,OAAX;AACA/V,gBAAQiB,IAAI+U,QAAZ;AACAjW,iBAASlJ,CAAT;AACAmG,cAAMkE,CAAN,CANC,CAQD;;AACA,YAAIlE,MAAM+C,MAAV,EAAkB;AACd4S,gBAAM3V,GAAN;AACAA,gBAAM+C,MAAN;AACAA,mBAAS4S,GAAT;AACA0D,uBAAa,IAAb;AACAD,oBAAU,KAAV;AACH;AACJ,OAzCmG,CA2CpG;;;AACA,UAAIpW,QAAQsU,MAAM1c,GAAd,IAAqBmF,OAAOuX,MAAMxc,GAAlC,IACAkF,MAAMuX,MAAM3c,GADZ,IACmBmI,SAASwU,MAAMzc,GADtC,EAEI;;AAEJ,UAAIiF,OAAOuX,MAAM1c,GAAjB,EAAsB;AAClBmF,eAAOuX,MAAM1c,GAAb;AACAse,mBAAW,KAAX;AACH;;AAED,UAAIlW,QAAQsU,MAAMxc,GAAlB,EAAuB;AACnBkI,gBAAQsU,MAAMxc,GAAd;AACAqe,oBAAY,KAAZ;AACH;;AAED,UAAIpW,SAASwU,MAAM3c,GAAnB,EAAwB;AACpBmI,iBAASwU,MAAM3c,GAAf;AACAye,qBAAa,KAAb;AACH;;AAED,UAAIrZ,MAAMuX,MAAMzc,GAAhB,EAAqB;AACjBkF,cAAMuX,MAAMzc,GAAZ;AACAse,kBAAU,KAAV;AACH;;AAEDrZ,aAAOuX,MAAMtM,GAAN,CAAUjL,IAAV,CAAP;AACAgD,eAASwU,MAAMvM,GAAN,CAAUjI,MAAV,CAAT;AACAC,cAAQsU,MAAMtM,GAAN,CAAUhI,KAAV,CAAR;AACAhD,YAAMuX,MAAMvM,GAAN,CAAUhL,GAAV,CAAN,CAvEoG,CAyEpG;;AACA,UAAIiZ,iBAAJ,EAAuB;AACnBhf,UAAE4b,SAAF,GAAcoD,kBAAkBlW,MAAlB,EAA0B/C,GAA1B,CAAd;AACA/F,UAAE8b,QAAF,CAAWhW,IAAX,EAAiBC,GAAjB,EAAsBgD,QAAQjD,IAA9B,EAAoCgD,SAAS/C,GAA7C;AACH,OA7EmG,CA+EpG;;;AACA,UAAI8G,YAAY,CAAZ,KAAkBoS,YAAYC,SAAZ,IAAyBC,OAAzB,IAAoCC,UAAtD,CAAJ,EAAuE;AACnEpf,UAAEsc,SAAF,GADmE,CAGnE;;AACAtc,UAAEwc,MAAF,CAAS1W,IAAT,EAAegD,MAAf;AACA,YAAImW,QAAJ,EACIjf,EAAEyc,MAAF,CAAS3W,IAAT,EAAeC,GAAf,EADJ,KAGI/F,EAAEwc,MAAF,CAAS1W,IAAT,EAAeC,GAAf;AACJ,YAAIoZ,OAAJ,EACInf,EAAEyc,MAAF,CAAS1T,KAAT,EAAgBhD,GAAhB,EADJ,KAGI/F,EAAEwc,MAAF,CAASzT,KAAT,EAAgBhD,GAAhB;AACJ,YAAImZ,SAAJ,EACIlf,EAAEyc,MAAF,CAAS1T,KAAT,EAAgBD,MAAhB,EADJ,KAGI9I,EAAEwc,MAAF,CAASzT,KAAT,EAAgBD,MAAhB;AACJ,YAAIsW,UAAJ,EACIpf,EAAEyc,MAAF,CAAS3W,IAAT,EAAegD,MAAf,EADJ,KAGI9I,EAAEwc,MAAF,CAAS1W,IAAT,EAAegD,MAAf;AACJ9I,UAAE0c,MAAF;AACH;AACJ;;AAED,aAASM,cAAT,CAAwBnS,MAAxB,EAAgC;AAC5B,eAASwU,QAAT,CAAkB3J,UAAlB,EAA8BoJ,OAA9B,EAAuCC,QAAvC,EAAiDC,iBAAjD,EAAoE3B,KAApE,EAA2EC,KAA3E,EAAkF;AAC9E,YAAI3Q,SAAS+I,WAAW/I,MAAxB;AAAA,YAAgCyI,KAAKM,WAAWI,SAAhD;;AAEA,aAAK,IAAI5V,IAAI,CAAb,EAAgBA,IAAIyM,OAAOxM,MAA3B,EAAmCD,KAAKkV,EAAxC,EAA4C;AACxC,cAAIzI,OAAOzM,CAAP,KAAa,IAAjB,EACI;AACJ2e,kBAAQlS,OAAOzM,CAAP,CAAR,EAAmByM,OAAOzM,IAAI,CAAX,CAAnB,EAAkCyM,OAAOzM,IAAI,CAAX,CAAlC,EAAiD4e,OAAjD,EAA0DC,QAA1D,EAAoEC,iBAApE,EAAuF3B,KAAvF,EAA8FC,KAA9F,EAAqGvO,GAArG,EAA0GlE,OAAOsC,IAAP,CAAYG,UAAtH,EAAkIzC,OAAOsC,IAAP,CAAYN,SAA9I;AACH;AACJ;;AAEDkC,UAAItH,IAAJ;AACAsH,UAAI4M,SAAJ,CAAc1M,WAAWnJ,IAAzB,EAA+BmJ,WAAWlJ,GAA1C,EAZ4B,CAc5B;;AACAgJ,UAAIlC,SAAJ,GAAgBhC,OAAOsC,IAAP,CAAYN,SAA5B;AACAkC,UAAIwN,WAAJ,GAAkB1R,OAAOrL,KAAzB;AAEA,UAAIsf,OAAJ;;AAEA,cAAQjU,OAAOsC,IAAP,CAAYE,KAApB;AACI,aAAK,MAAL;AACIyR,oBAAU,CAAV;AACA;;AACJ,aAAK,OAAL;AACIA,oBAAU,CAACjU,OAAOsC,IAAP,CAAYC,QAAvB;AACA;;AACJ;AACI0R,oBAAU,CAACjU,OAAOsC,IAAP,CAAYC,QAAb,GAAwB,CAAlC;AARR;;AAWA,UAAI4R,oBAAoBnU,OAAOsC,IAAP,CAAYL,IAAZ,GAAmB,UAAUhE,MAAV,EAAkB/C,GAAlB,EAAuB;AAAE,eAAOwY,aAAa1T,OAAOsC,IAApB,EAA0BtC,OAAOrL,KAAjC,EAAwCsJ,MAAxC,EAAgD/C,GAAhD,CAAP;AAA8D,OAA1G,GAA6G,IAArI;AACAsZ,eAASxU,OAAO6K,UAAhB,EAA4BoJ,OAA5B,EAAqCA,UAAUjU,OAAOsC,IAAP,CAAYC,QAA3D,EAAqE4R,iBAArE,EAAwFnU,OAAOW,KAA/F,EAAsGX,OAAO2B,KAA7G;AACAuC,UAAIvH,OAAJ;AACH;;AAED,aAAS+W,YAAT,CAAsBe,WAAtB,EAAmCC,WAAnC,EAAgDzW,MAAhD,EAAwD/C,GAAxD,EAA6D;AACzD,UAAI+G,OAAOwS,YAAYxS,IAAvB;AACA,UAAI,CAACA,IAAL,EACI,OAAO,IAAP;AAEJ,UAAIwS,YAAYvS,SAAhB,EACI,OAAO8O,mBAAmByD,YAAYvS,SAA/B,EAA0CjE,MAA1C,EAAkD/C,GAAlD,EAAuDwZ,WAAvD,CAAP;AAEJ,UAAIvf,IAAIT,EAAEC,KAAF,CAAQ+B,KAAR,CAAcge,WAAd,CAAR;AACAvf,QAAEH,CAAF,GAAM,OAAOiN,IAAP,IAAe,QAAf,GAA0BA,IAA1B,GAAiC,GAAvC;AACA9M,QAAEK,SAAF;AACA,aAAOL,EAAEQ,QAAF,EAAP;AACH;;AAED,aAAS8Y,YAAT,GAAwB;AAEpB,UAAIxO,QAAQE,MAAR,CAAe1F,SAAf,IAA4B,IAAhC,EAAsC;AAClC/F,UAAEuL,QAAQE,MAAR,CAAe1F,SAAjB,EAA4BsE,IAA5B,CAAiC,EAAjC;AACH,OAFD,MAEO;AACHa,oBAAY+L,IAAZ,CAAiB,SAAjB,EAA4BC,MAA5B;AACH;;AAED,UAAI,CAAC3L,QAAQE,MAAR,CAAepC,IAApB,EAA0B;AACtB;AACH;;AAED,UAAI4W,YAAY,EAAhB;AAAA,UAAoBC,UAAU,EAA9B;AAAA,UAAkCC,aAAa,KAA/C;AAAA,UACIC,KAAK7U,QAAQE,MAAR,CAAeE,cADxB;AAAA,UACwCoI,CADxC;AAAA,UAC2CuE,KAD3C,CAZoB,CAepB;;AAEA,WAAK,IAAI3X,IAAI,CAAb,EAAgBA,IAAI2K,OAAO1K,MAA3B,EAAmC,EAAED,CAArC,EAAwC;AACpCoT,YAAIzI,OAAO3K,CAAP,CAAJ;;AACA,YAAIoT,EAAEuE,KAAN,EAAa;AACTA,kBAAQ8H,KAAKA,GAAGrM,EAAEuE,KAAL,EAAYvE,CAAZ,CAAL,GAAsBA,EAAEuE,KAAhC;;AACA,cAAIA,KAAJ,EAAW;AACP4H,oBAAQrV,IAAR,CAAa;AACTyN,qBAAOA,KADE;AAETrY,qBAAO8T,EAAE9T;AAFA,aAAb;AAIH;AACJ;AACJ,OA5BmB,CA8BpB;;;AAEA,UAAIsL,QAAQE,MAAR,CAAeO,MAAnB,EAA2B;AACvB,YAAIhM,EAAEsb,UAAF,CAAa/P,QAAQE,MAAR,CAAeO,MAA5B,CAAJ,EAAyC;AACrCkU,kBAAQG,IAAR,CAAa9U,QAAQE,MAAR,CAAeO,MAA5B;AACH,SAFD,MAEO,IAAIT,QAAQE,MAAR,CAAeO,MAAf,IAAyB,SAA7B,EAAwC;AAC9CkU,kBAAQI,OAAR;AACA,SAFM,MAEA;AACH,cAAIC,YAAYhV,QAAQE,MAAR,CAAeO,MAAf,IAAyB,YAAzC;AACAkU,kBAAQG,IAAR,CAAa,UAAS/f,CAAT,EAAYD,CAAZ,EAAe;AACxB,mBAAOC,EAAEgY,KAAF,IAAWjY,EAAEiY,KAAb,GAAqB,CAArB,GACFhY,EAAEgY,KAAF,GAAUjY,EAAEiY,KAAb,IAAuBiI,SAAvB,GAAmC,CAAnC,GAAuC,CAAC,CADrC,CACyC;AADhD;AAGH,WAJD;AAKH;AACJ,OA7CmB,CA+CpB;;;AAEA,WAAK,IAAI5f,IAAI,CAAb,EAAgBA,IAAIuf,QAAQtf,MAA5B,EAAoC,EAAED,CAAtC,EAAyC;AAErC,YAAI6f,QAAQN,QAAQvf,CAAR,CAAZ;;AAEA,YAAIA,IAAI4K,QAAQE,MAAR,CAAeC,SAAnB,IAAgC,CAApC,EAAuC;AACnC,cAAIyU,UAAJ,EACIF,UAAUpV,IAAV,CAAe,OAAf;AACJoV,oBAAUpV,IAAV,CAAe,MAAf;AACAsV,uBAAa,IAAb;AACH;;AAEDF,kBAAUpV,IAAV,CACI,6DAA6DU,QAAQE,MAAR,CAAeG,mBAA5E,GAAkG,gEAAlG,GAAqK4U,MAAMvgB,KAA3K,GAAmL,qCAAnL,GACA,0BADA,GAC6BugB,MAAMlI,KADnC,GAC2C,OAF/C;AAIH;;AAED,UAAI6H,UAAJ,EACIF,UAAUpV,IAAV,CAAe,OAAf;AAEJ,UAAIoV,UAAUrf,MAAV,IAAoB,CAAxB,EACI;AAEJ,UAAI6f,QAAQ,2CAA2ClV,QAAQ4C,IAAR,CAAalO,KAAxD,GAAgE,IAAhE,GAAuEggB,UAAU/e,IAAV,CAAe,EAAf,CAAvE,GAA4F,UAAxG;AACA,UAAIqK,QAAQE,MAAR,CAAe1F,SAAf,IAA4B,IAAhC,EACI/F,EAAEuL,QAAQE,MAAR,CAAe1F,SAAjB,EAA4BsE,IAA5B,CAAiCoW,KAAjC,EADJ,KAEK;AACD,YAAIpM,MAAM,EAAV;AAAA,YACIzB,IAAIrH,QAAQE,MAAR,CAAenF,QADvB;AAAA,YAEInE,IAAIoJ,QAAQE,MAAR,CAAeI,MAFvB;AAGA,YAAI1J,EAAE,CAAF,KAAQ,IAAZ,EACIA,IAAI,CAACA,CAAD,EAAIA,CAAJ,CAAJ;AACJ,YAAIyQ,EAAE/R,MAAF,CAAS,CAAT,KAAe,GAAnB,EACIwT,OAAO,UAAUlS,EAAE,CAAF,IAAOuN,WAAWlJ,GAA5B,IAAmC,KAA1C,CADJ,KAEK,IAAIoM,EAAE/R,MAAF,CAAS,CAAT,KAAe,GAAnB,EACDwT,OAAO,aAAalS,EAAE,CAAF,IAAOuN,WAAWnG,MAA/B,IAAyC,KAAhD;AACJ,YAAIqJ,EAAE/R,MAAF,CAAS,CAAT,KAAe,GAAnB,EACIwT,OAAO,YAAYlS,EAAE,CAAF,IAAOuN,WAAWlG,KAA9B,IAAuC,KAA9C,CADJ,KAEK,IAAIoJ,EAAE/R,MAAF,CAAS,CAAT,KAAe,GAAnB,EACDwT,OAAO,WAAWlS,EAAE,CAAF,IAAOuN,WAAWnJ,IAA7B,IAAqC,KAA5C;AACJ,YAAIkF,SAASzL,EAAE,yBAAyBygB,MAAMrN,OAAN,CAAc,SAAd,EAAyB,8BAA8BiB,GAA9B,GAAmC,GAA5D,CAAzB,GAA4F,QAA9F,EAAwG5N,QAAxG,CAAiHyE,WAAjH,CAAb;;AACA,YAAIK,QAAQE,MAAR,CAAeM,iBAAf,IAAoC,GAAxC,EAA6C;AACzC;AACA;AACA;AACA,cAAItL,IAAI8K,QAAQE,MAAR,CAAeK,eAAvB;;AACA,cAAIrL,KAAK,IAAT,EAAe;AACXA,gBAAI8K,QAAQ4C,IAAR,CAAarC,eAAjB;AACA,gBAAIrL,KAAK,OAAOA,CAAP,IAAY,QAArB,EACIA,IAAIT,EAAEC,KAAF,CAAQ+B,KAAR,CAAcvB,CAAd,CAAJ,CADJ,KAGIA,IAAIT,EAAEC,KAAF,CAAQwB,OAAR,CAAgBgK,MAAhB,EAAwB,kBAAxB,CAAJ;AACJhL,cAAEH,CAAF,GAAM,CAAN;AACAG,gBAAIA,EAAEQ,QAAF,EAAJ;AACH;;AACD,cAAIyf,MAAMjV,OAAOxF,QAAP,EAAV;AACAjG,YAAE,yCAAyC0gB,IAAIjZ,KAAJ,EAAzC,GAAuD,YAAvD,GAAsEiZ,IAAIhZ,MAAJ,EAAtE,GAAqF,KAArF,GAA6F2M,GAA7F,GAAkG,mBAAlG,GAAwH5T,CAAxH,GAA4H,YAA9H,EAA4IkgB,SAA5I,CAAsJlV,MAAtJ,EAA8J9J,GAA9J,CAAkK,SAAlK,EAA6K4J,QAAQE,MAAR,CAAeM,iBAA5L;AACH;AACJ;AACJ,KA1xEgD,CA6xEjD;;;AAEA,QAAIqG,aAAa,EAAjB;AAAA,QACIuF,gBAAgB,IADpB,CA/xEiD,CAkyEjD;;AACA,aAASiJ,cAAT,CAAwBC,MAAxB,EAAgCC,MAAhC,EAAwCC,YAAxC,EAAsD;AAClD,UAAIC,cAAczV,QAAQ4C,IAAR,CAAac,iBAA/B;AAAA,UACIgS,mBAAmBD,cAAcA,WAAd,GAA4B,CADnD;AAAA,UAEIE,OAAO,IAFX;AAAA,UAEiBC,aAAa,KAF9B;AAAA,UAEqCxgB,CAFrC;AAAA,UAEwCgV,CAFxC;AAAA,UAE2CE,EAF3C;;AAIA,WAAKlV,IAAI2K,OAAO1K,MAAP,GAAgB,CAAzB,EAA4BD,KAAK,CAAjC,EAAoC,EAAEA,CAAtC,EAAyC;AACrC,YAAI,CAACogB,aAAazV,OAAO3K,CAAP,CAAb,CAAL,EACI;AAEJ,YAAIoT,IAAIzI,OAAO3K,CAAP,CAAR;AAAA,YACImd,QAAQ/J,EAAE9H,KADd;AAAA,YAEI8R,QAAQhK,EAAE9G,KAFd;AAAA,YAGIG,SAAS2G,EAAEoC,UAAF,CAAa/I,MAH1B;AAAA,YAIIgU,KAAKtD,MAAMxM,GAAN,CAAUuP,MAAV,CAJT;AAAA,YAI4B;AACxBQ,aAAKtD,MAAMzM,GAAN,CAAUwP,MAAV,CALT;AAAA,YAMIQ,OAAON,cAAclD,MAAM/c,KAN/B;AAAA,YAOIwgB,OAAOP,cAAcjD,MAAMhd,KAP/B;AASA8U,aAAK9B,EAAEoC,UAAF,CAAaI,SAAlB,CAbqC,CAcrC;AACA;;AACA,YAAIuH,MAAMvS,OAAN,CAAcc,gBAAlB,EACIiV,OAAOjM,OAAOK,SAAd;AACJ,YAAIqI,MAAMxS,OAAN,CAAcc,gBAAlB,EACIkV,OAAOlM,OAAOK,SAAd;;AAEJ,YAAI3B,EAAErG,KAAF,CAAQrE,IAAR,IAAgB0K,EAAE3G,MAAF,CAAS/D,IAA7B,EAAmC;AAC/B,eAAKsM,IAAI,CAAT,EAAYA,IAAIvI,OAAOxM,MAAvB,EAA+B+U,KAAKE,EAApC,EAAwC;AACpC,gBAAIpL,IAAI2C,OAAOuI,CAAP,CAAR;AAAA,gBAAmBjL,IAAI0C,OAAOuI,IAAI,CAAX,CAAvB;AACA,gBAAIlL,KAAK,IAAT,EACI,SAHgC,CAKpC;AACA;;AACA,gBAAIA,IAAI2W,EAAJ,GAASE,IAAT,IAAiB7W,IAAI2W,EAAJ,GAAS,CAACE,IAA3B,IACA5W,IAAI2W,EAAJ,GAASE,IADT,IACiB7W,IAAI2W,EAAJ,GAAS,CAACE,IAD/B,EAEI,SATgC,CAWpC;AACA;;AACA,gBAAIC,KAAK1W,KAAKmN,GAAL,CAAS6F,MAAMtM,GAAN,CAAU/G,CAAV,IAAeoW,MAAxB,CAAT;AAAA,gBACIY,KAAK3W,KAAKmN,GAAL,CAAS8F,MAAMvM,GAAN,CAAU9G,CAAV,IAAeoW,MAAxB,CADT;AAAA,gBAEIY,OAAOF,KAAKA,EAAL,GAAUC,KAAKA,EAF1B,CAboC,CAeN;AAE9B;AACA;;AACA,gBAAIC,OAAOT,gBAAX,EAA6B;AACzBA,iCAAmBS,IAAnB;AACAR,qBAAO,CAACvgB,CAAD,EAAIgV,IAAIE,EAAR,CAAP;AACH;AACJ;AACJ;;AAED,YAAI9B,EAAEnG,IAAF,CAAOvE,IAAP,IAAe,CAAC6X,IAApB,EAA0B;AAAE;AAExB,cAAI3B,OAAJ,EAAaC,QAAb;;AAEA,kBAAQzL,EAAEnG,IAAF,CAAOE,KAAf;AACI,iBAAK,MAAL;AACIyR,wBAAU,CAAV;AACA;;AACJ,iBAAK,OAAL;AACIA,wBAAU,CAACxL,EAAEnG,IAAF,CAAOC,QAAlB;AACA;;AACJ;AACI0R,wBAAU,CAACxL,EAAEnG,IAAF,CAAOC,QAAR,GAAmB,CAA7B;AARR;;AAWA2R,qBAAWD,UAAUxL,EAAEnG,IAAF,CAAOC,QAA5B;;AAEA,eAAK8H,IAAI,CAAT,EAAYA,IAAIvI,OAAOxM,MAAvB,EAA+B+U,KAAKE,EAApC,EAAwC;AACpC,gBAAIpL,IAAI2C,OAAOuI,CAAP,CAAR;AAAA,gBAAmBjL,IAAI0C,OAAOuI,IAAI,CAAX,CAAvB;AAAA,gBAAsCtV,IAAI+M,OAAOuI,IAAI,CAAX,CAA1C;AACA,gBAAIlL,KAAK,IAAT,EACI,SAHgC,CAKpC;;AACA,gBAAIa,OAAO3K,CAAP,EAAUiN,IAAV,CAAeG,UAAf,GACCqT,MAAMtW,KAAKxJ,GAAL,CAASjB,CAAT,EAAYoK,CAAZ,CAAN,IAAwB2W,MAAMtW,KAAK1J,GAAL,CAASf,CAAT,EAAYoK,CAAZ,CAA9B,IACA4W,MAAM3W,IAAI6U,OADV,IACqB8B,MAAM3W,IAAI8U,QAFhC,GAGC4B,MAAM3W,IAAI8U,OAAV,IAAqB6B,MAAM3W,IAAI+U,QAA/B,IACA6B,MAAMvW,KAAK1J,GAAL,CAASf,CAAT,EAAYqK,CAAZ,CADN,IACwB2W,MAAMvW,KAAKxJ,GAAL,CAASjB,CAAT,EAAYqK,CAAZ,CAJnC,EAKQwW,OAAO,CAACvgB,CAAD,EAAIgV,IAAIE,EAAR,CAAP;AACX;AACJ;AACJ;;AAED,UAAIqL,IAAJ,EAAU;AACNvgB,YAAIugB,KAAK,CAAL,CAAJ;AACAvL,YAAIuL,KAAK,CAAL,CAAJ;AACArL,aAAKvK,OAAO3K,CAAP,EAAUwV,UAAV,CAAqBI,SAA1B;AAEA,eAAO;AAAEoL,qBAAWrW,OAAO3K,CAAP,EAAUwV,UAAV,CAAqB/I,MAArB,CAA4BwU,KAA5B,CAAkCjM,IAAIE,EAAtC,EAA0C,CAACF,IAAI,CAAL,IAAUE,EAApD,CAAb;AACEgM,qBAAWlM,CADb;AAEErK,kBAAQA,OAAO3K,CAAP,CAFV;AAGEmhB,uBAAanhB;AAHf,SAAP;AAIH;;AAED,aAAO,IAAP;AACH;;AAED,aAAS2W,WAAT,CAAqByK,CAArB,EAAwB;AACpB,UAAIxW,QAAQ4C,IAAR,CAAaY,SAAjB,EACIiT,uBAAuB,WAAvB,EAAoCD,CAApC,EACuB,UAAUhO,CAAV,EAAa;AAAE,eAAOA,EAAE,WAAF,KAAkB,KAAzB;AAAiC,OADvE;AAEP;;AAED,aAASyD,YAAT,CAAsBuK,CAAtB,EAAyB;AACrB,UAAIxW,QAAQ4C,IAAR,CAAaY,SAAjB,EACIiT,uBAAuB,WAAvB,EAAoCD,CAApC,EACuB,UAAUhO,CAAV,EAAa;AAAE,eAAO,KAAP;AAAe,OADrD;AAEP;;AAED,aAAS2D,OAAT,CAAiBqK,CAAjB,EAAoB;AAClB,UAAIxR,KAAK0R,WAAT,EAAsB;AACpB;AACD;;AAEDD,6BAAuB,WAAvB,EAAoCD,CAApC,EAAuC,UAAUhO,CAAV,EAAa;AAAE,eAAOA,EAAE,WAAF,KAAkB,KAAzB;AAAiC,OAAvF;AACD,KAz5EgD,CA25EjD;AACA;;;AACA,aAASiO,sBAAT,CAAgCE,SAAhC,EAA2CC,KAA3C,EAAkDpB,YAAlD,EAAgE;AAC5D,UAAIlQ,SAAStB,YAAYsB,MAAZ,EAAb;AAAA,UACIuR,UAAUD,MAAME,KAAN,GAAcxR,OAAOtK,IAArB,GAA4BmJ,WAAWnJ,IADrD;AAAA,UAEI+b,UAAUH,MAAMI,KAAN,GAAc1R,OAAOrK,GAArB,GAA2BkJ,WAAWlJ,GAFpD;AAAA,UAGA6N,MAAM9C,mBAAmB;AAAEhL,cAAM6b,OAAR;AAAiB5b,aAAK8b;AAAtB,OAAnB,CAHN;AAKAjO,UAAIgO,KAAJ,GAAYF,MAAME,KAAlB;AACAhO,UAAIkO,KAAJ,GAAYJ,MAAMI,KAAlB,CAP4D,CAS5D;;AACAlO,UAAImO,OAAJ,GAAcL,MAAMK,OAApB;AACAnO,UAAIoO,OAAJ,GAAcN,MAAMM,OAApB;AAEA,UAAIvB,OAAON,eAAewB,OAAf,EAAwBE,OAAxB,EAAiCvB,YAAjC,CAAX;;AAEA,UAAIG,IAAJ,EAAU;AACN;AACAA,aAAKmB,KAAL,GAAa9gB,SAAS2f,KAAK5V,MAAL,CAAYW,KAAZ,CAAkBuF,GAAlB,CAAsB0P,KAAKS,SAAL,CAAe,CAAf,CAAtB,IAA2C9Q,OAAOtK,IAAlD,GAAyDmJ,WAAWnJ,IAA7E,EAAmF,EAAnF,CAAb;AACA2a,aAAKqB,KAAL,GAAahhB,SAAS2f,KAAK5V,MAAL,CAAY2B,KAAZ,CAAkBuE,GAAlB,CAAsB0P,KAAKS,SAAL,CAAe,CAAf,CAAtB,IAA2C9Q,OAAOrK,GAAlD,GAAwDkJ,WAAWlJ,GAA5E,EAAiF,EAAjF,CAAb;AACH;;AAED,UAAI+E,QAAQ4C,IAAR,CAAaa,aAAjB,EAAgC;AAC5B;AACA,aAAK,IAAIrO,IAAI,CAAb,EAAgBA,IAAIyR,WAAWxR,MAA/B,EAAuC,EAAED,CAAzC,EAA4C;AACxC,cAAI+hB,IAAItQ,WAAWzR,CAAX,CAAR;AACA,cAAI+hB,EAAEC,IAAF,IAAUT,SAAV,IACA,EAAEhB,QAAQwB,EAAEpX,MAAF,IAAY4V,KAAK5V,MAAzB,IACAoX,EAAE3Q,KAAF,CAAQ,CAAR,KAAcmP,KAAKS,SAAL,CAAe,CAAf,CADd,IAEAe,EAAE3Q,KAAF,CAAQ,CAAR,KAAcmP,KAAKS,SAAL,CAAe,CAAf,CAFhB,CADJ,EAII/P,YAAY8Q,EAAEpX,MAAd,EAAsBoX,EAAE3Q,KAAxB;AACP;;AAED,YAAImP,IAAJ,EACIvP,UAAUuP,KAAK5V,MAAf,EAAuB4V,KAAKS,SAA5B,EAAuCO,SAAvC;AACP;;AAEDhX,kBAAY0X,OAAZ,CAAoBV,SAApB,EAA+B,CAAE7N,GAAF,EAAO6M,IAAP,CAA/B;AACH;;AAED,aAASrP,oBAAT,GAAgC;AAC5B,UAAIkG,IAAIxM,QAAQ2D,WAAR,CAAoBC,qBAA5B;;AACA,UAAI4I,KAAK,CAAC,CAAV,EAAa;AAAO;AAChB1H;AACA;AACH;;AAED,UAAI,CAACsH,aAAL,EACIA,gBAAgBkL,WAAWxS,WAAX,EAAwB0H,CAAxB,CAAhB;AACP;;AAED,aAAS1H,WAAT,GAAuB;AACnBsH,sBAAgB,IAAhB,CADmB,CAGnB;;AACAlI,WAAKvH,IAAL;AACAoH,cAAQnH,KAAR;AACAsH,WAAK2M,SAAL,CAAe1M,WAAWnJ,IAA1B,EAAgCmJ,WAAWlJ,GAA3C;AAEA,UAAI7F,CAAJ,EAAOmiB,EAAP;;AACA,WAAKniB,IAAI,CAAT,EAAYA,IAAIyR,WAAWxR,MAA3B,EAAmC,EAAED,CAArC,EAAwC;AACpCmiB,aAAK1Q,WAAWzR,CAAX,CAAL;AAEA,YAAImiB,GAAGxX,MAAH,CAAUsC,IAAV,CAAevE,IAAnB,EACI0Z,iBAAiBD,GAAGxX,MAApB,EAA4BwX,GAAG/Q,KAA/B,EADJ,KAGIiR,mBAAmBF,GAAGxX,MAAtB,EAA8BwX,GAAG/Q,KAAjC;AACP;;AACDtC,WAAKxH,OAAL;AAEAuK,mBAAapD,MAAMiB,WAAnB,EAAgC,CAACZ,IAAD,CAAhC;AACH;;AAED,aAASkC,SAAT,CAAmBoC,CAAnB,EAAsBhC,KAAtB,EAA6B4Q,IAA7B,EAAmC;AAC/B,UAAI,OAAO5O,CAAP,IAAY,QAAhB,EACIA,IAAIzI,OAAOyI,CAAP,CAAJ;;AAEJ,UAAI,OAAOhC,KAAP,IAAgB,QAApB,EAA8B;AAC1B,YAAI8D,KAAK9B,EAAEoC,UAAF,CAAaI,SAAtB;AACAxE,gBAAQgC,EAAEoC,UAAF,CAAa/I,MAAb,CAAoBwU,KAApB,CAA0B/L,KAAK9D,KAA/B,EAAsC8D,MAAM9D,QAAQ,CAAd,CAAtC,CAAR;AACH;;AAED,UAAIpR,IAAIsiB,iBAAiBlP,CAAjB,EAAoBhC,KAApB,CAAR;;AACA,UAAIpR,KAAK,CAAC,CAAV,EAAa;AACTyR,mBAAWvH,IAAX,CAAgB;AAAES,kBAAQyI,CAAV;AAAahC,iBAAOA,KAApB;AAA2B4Q,gBAAMA;AAAjC,SAAhB;AAEA9Q;AACH,OAJD,MAKK,IAAI,CAAC8Q,IAAL,EACDvQ,WAAWzR,CAAX,EAAcgiB,IAAd,GAAqB,KAArB;AACP;;AAED,aAAS/Q,WAAT,CAAqBmC,CAArB,EAAwBhC,KAAxB,EAA+B;AAC3B,UAAIgC,KAAK,IAAL,IAAahC,SAAS,IAA1B,EAAgC;AAC5BK,qBAAa,EAAb;AACAP;AACA;AACH;;AAED,UAAI,OAAOkC,CAAP,IAAY,QAAhB,EACIA,IAAIzI,OAAOyI,CAAP,CAAJ;;AAEJ,UAAI,OAAOhC,KAAP,IAAgB,QAApB,EAA8B;AAC1B,YAAI8D,KAAK9B,EAAEoC,UAAF,CAAaI,SAAtB;AACAxE,gBAAQgC,EAAEoC,UAAF,CAAa/I,MAAb,CAAoBwU,KAApB,CAA0B/L,KAAK9D,KAA/B,EAAsC8D,MAAM9D,QAAQ,CAAd,CAAtC,CAAR;AACH;;AAED,UAAIpR,IAAIsiB,iBAAiBlP,CAAjB,EAAoBhC,KAApB,CAAR;;AACA,UAAIpR,KAAK,CAAC,CAAV,EAAa;AACTyR,mBAAWhJ,MAAX,CAAkBzI,CAAlB,EAAqB,CAArB;AAEAkR;AACH;AACJ;;AAED,aAASoR,gBAAT,CAA0BlP,CAA1B,EAA6BnB,CAA7B,EAAgC;AAC5B,WAAK,IAAIjS,IAAI,CAAb,EAAgBA,IAAIyR,WAAWxR,MAA/B,EAAuC,EAAED,CAAzC,EAA4C;AACxC,YAAI+hB,IAAItQ,WAAWzR,CAAX,CAAR;AACA,YAAI+hB,EAAEpX,MAAF,IAAYyI,CAAZ,IAAiB2O,EAAE3Q,KAAF,CAAQ,CAAR,KAAca,EAAE,CAAF,CAA/B,IACG8P,EAAE3Q,KAAF,CAAQ,CAAR,KAAca,EAAE,CAAF,CADrB,EAEI,OAAOjS,CAAP;AACP;;AACD,aAAO,CAAC,CAAR;AACH;;AAED,aAASqiB,kBAAT,CAA4B1X,MAA5B,EAAoCyG,KAApC,EAA2C;AACvC,UAAItH,IAAIsH,MAAM,CAAN,CAAR;AAAA,UAAkBrH,IAAIqH,MAAM,CAAN,CAAtB;AAAA,UACI+L,QAAQxS,OAAOW,KADnB;AAAA,UAC0B8R,QAAQzS,OAAO2B,KADzC;AAAA,UAEIiB,iBAAkB,OAAO5C,OAAO4C,cAAd,KAAiC,QAAlC,GAA8C5C,OAAO4C,cAArD,GAAsElO,EAAEC,KAAF,CAAQ+B,KAAR,CAAcsJ,OAAOrL,KAArB,EAA4Bc,KAA5B,CAAkC,GAAlC,EAAuC,GAAvC,EAA4CE,QAA5C,EAF3F;AAIA,UAAIwJ,IAAIqT,MAAM1c,GAAV,IAAiBqJ,IAAIqT,MAAMxc,GAA3B,IAAkCoJ,IAAIqT,MAAM3c,GAA5C,IAAmDsJ,IAAIqT,MAAMzc,GAAjE,EACI;AAEJ,UAAI4hB,cAAc5X,OAAO8B,MAAP,CAAcC,MAAd,GAAuB/B,OAAO8B,MAAP,CAAcE,SAAd,GAA0B,CAAnE;AACAmC,WAAKnC,SAAL,GAAiB4V,WAAjB;AACAzT,WAAKuN,WAAL,GAAmB9O,cAAnB;AACA,UAAIb,SAAS,MAAM6V,WAAnB;AACAzY,UAAIqT,MAAMtM,GAAN,CAAU/G,CAAV,CAAJ;AACAC,UAAIqT,MAAMvM,GAAN,CAAU9G,CAAV,CAAJ;AAEA+E,WAAKsN,SAAL;AACA,UAAIzR,OAAO8B,MAAP,CAAcK,MAAd,IAAwB,QAA5B,EACIgC,KAAK0P,GAAL,CAAS1U,CAAT,EAAYC,CAAZ,EAAe2C,MAAf,EAAuB,CAAvB,EAA0B,IAAIvC,KAAK+T,EAAnC,EAAuC,KAAvC,EADJ,KAGIvT,OAAO8B,MAAP,CAAcK,MAAd,CAAqBgC,IAArB,EAA2BhF,CAA3B,EAA8BC,CAA9B,EAAiC2C,MAAjC,EAAyC,KAAzC;AACJoC,WAAK2P,SAAL;AACA3P,WAAK0N,MAAL;AACH;;AAED,aAAS4F,gBAAT,CAA0BzX,MAA1B,EAAkCyG,KAAlC,EAAyC;AACrC,UAAI7D,iBAAkB,OAAO5C,OAAO4C,cAAd,KAAiC,QAAlC,GAA8C5C,OAAO4C,cAArD,GAAsElO,EAAEC,KAAF,CAAQ+B,KAAR,CAAcsJ,OAAOrL,KAArB,EAA4Bc,KAA5B,CAAkC,GAAlC,EAAuC,GAAvC,EAA4CE,QAA5C,EAA3F;AAAA,UACIob,YAAYnO,cADhB;AAAA,UAEIqR,OAFJ;;AAIA,cAAQjU,OAAOsC,IAAP,CAAYE,KAApB;AACI,aAAK,MAAL;AACIyR,oBAAU,CAAV;AACA;;AACJ,aAAK,OAAL;AACIA,oBAAU,CAACjU,OAAOsC,IAAP,CAAYC,QAAvB;AACA;;AACJ;AACI0R,oBAAU,CAACjU,OAAOsC,IAAP,CAAYC,QAAb,GAAwB,CAAlC;AARR;;AAWA4B,WAAKnC,SAAL,GAAiBhC,OAAOsC,IAAP,CAAYN,SAA7B;AACAmC,WAAKuN,WAAL,GAAmB9O,cAAnB;AAEAoR,cAAQvN,MAAM,CAAN,CAAR,EAAkBA,MAAM,CAAN,CAAlB,EAA4BA,MAAM,CAAN,KAAY,CAAxC,EAA2CwN,OAA3C,EAAoDA,UAAUjU,OAAOsC,IAAP,CAAYC,QAA1E,EACQ,YAAY;AAAE,eAAOwO,SAAP;AAAmB,OADzC,EAC2C/Q,OAAOW,KADlD,EACyDX,OAAO2B,KADhE,EACuEwC,IADvE,EAC6EnE,OAAOsC,IAAP,CAAYG,UADzF,EACqGzC,OAAOsC,IAAP,CAAYN,SADjH;AAEH;;AAED,aAASgP,kBAAT,CAA4B6G,IAA5B,EAAkC5Z,MAAlC,EAA0C/C,GAA1C,EAA+C4c,YAA/C,EAA6D;AACzD,UAAI,OAAOD,IAAP,IAAe,QAAnB,EACI,OAAOA,IAAP,CADJ,KAEK;AACD;AACA;AACA;AACA,YAAIE,WAAW7T,IAAI8T,oBAAJ,CAAyB,CAAzB,EAA4B9c,GAA5B,EAAiC,CAAjC,EAAoC+C,MAApC,CAAf;;AAEA,aAAK,IAAI5I,IAAI,CAAR,EAAW4iB,IAAIJ,KAAK3X,MAAL,CAAY5K,MAAhC,EAAwCD,IAAI4iB,CAA5C,EAA+C,EAAE5iB,CAAjD,EAAoD;AAChD,cAAIF,IAAI0iB,KAAK3X,MAAL,CAAY7K,CAAZ,CAAR;;AACA,cAAI,OAAOF,CAAP,IAAY,QAAhB,EAA0B;AACtB,gBAAI+iB,KAAKxjB,EAAEC,KAAF,CAAQ+B,KAAR,CAAcohB,YAAd,CAAT;AACA,gBAAI3iB,EAAEgjB,UAAF,IAAgB,IAApB,EACID,KAAKA,GAAGziB,KAAH,CAAS,KAAT,EAAgBN,EAAEgjB,UAAlB,CAAL;AACJ,gBAAIhjB,EAAEijB,OAAF,IAAa,IAAjB,EACIF,GAAGljB,CAAH,IAAQG,EAAEijB,OAAV;AACJjjB,gBAAI+iB,GAAGviB,QAAH,EAAJ;AACH;;AACDoiB,mBAASM,YAAT,CAAsBhjB,KAAK4iB,IAAI,CAAT,CAAtB,EAAmC9iB,CAAnC;AACH;;AAED,eAAO4iB,QAAP;AACH;AACJ;AACJ,GA/jGQ,CAikGT;;;AAEArjB,IAAEuQ,IAAF,GAAS,UAASrF,WAAT,EAAsB8I,IAAtB,EAA4BzI,OAA5B,EAAqC;AAC1C;AACA,QAAIgF,OAAO,IAAItF,IAAJ,CAASjL,EAAEkL,WAAF,CAAT,EAAyB8I,IAAzB,EAA+BzI,OAA/B,EAAwCvL,EAAEuQ,IAAF,CAAOlF,OAA/C,CAAX,CAF0C,CAG1C;;AACA,WAAOkF,IAAP;AACH,GALD;;AAOAvQ,IAAEuQ,IAAF,CAAOqT,OAAP,GAAiB,OAAjB;AAEA5jB,IAAEuQ,IAAF,CAAOlF,OAAP,GAAiB,EAAjB,CA5kGS,CA8kGT;;AAEArL,IAAEwF,EAAF,CAAK+K,IAAL,GAAY,UAASyD,IAAT,EAAezI,OAAf,EAAwB;AAChC,WAAO,KAAK7F,IAAL,CAAU,YAAW;AACxB1F,QAAEuQ,IAAF,CAAO,IAAP,EAAayD,IAAb,EAAmBzI,OAAnB;AACH,KAFM,CAAP;AAGH,GAJD,CAhlGS,CAslGT;;;AACA,WAASsP,WAAT,CAAqB1J,CAArB,EAAwB0S,IAAxB,EAA8B;AAC1B,WAAOA,OAAO/Y,KAAKsN,KAAL,CAAWjH,IAAI0S,IAAf,CAAd;AACH;AAEJ,CA3lGD,EA2lGGze,MA3lGH,E;;;;;;AClCA,+C;;;;;;ACAA,+C;;;;;;ACAA,+C;;;;;;ACAA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,8BAA8B;AACpD,sBAAsB,8BAA8B;AACpD,sBAAsB,8BAA8B;;AAEpD;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,mBAAmB,OAAO;AACzD,+BAA+B,mBAAmB,OAAO;AACzD,+BAA+B,mBAAmB,OAAO;AACzD;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB;AAChB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB;AAChB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,gBAAgB;AAChB,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB;AAChB,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD,wCAAwC;AACxC,wCAAwC;AACxC;;AAEA;AACA;;AAEA,YAAY;AACZ;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;AACZ;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,cAAc;AACd;AACA;AACA;AACA,sDAAsD;AACtD,wCAAwC;AACxC,wCAAwC;AACxC;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,cAAc;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,yCAAyC;AAC5D,mBAAmB,yCAAyC;AAC5D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,wCAAwC;AAC3D,mBAAmB,yCAAyC;AAC5D,mBAAmB,yCAAyC;AAC5D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,uCAAuC;AAC1D,mBAAmB,wCAAwC;AAC3D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,+DAA+D,WAAW;AAC1E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,kBAAkB;AAC9C;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2DAA2D,wBAAwB;;AAEnF;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,8EAA8E,4BAA4B,gBAAgB;AAC1H,8EAA8E,2BAA2B,gBAAgB;AACzH,qDAAqD,oDAAoD,gBAAgB;AACzH,qDAAqD,oDAAoD,gBAAgB;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,uBAAuB;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA,oDAAoD,0BAA0B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA,KAAK,kBAAkB,YAAY,kBAAkB;AACrD;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,4BAA4B,YAAY;;AAExC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,EAAE,cAAc,EAAE,cAAc,EAAE;AACjE,+BAA+B,EAAE,cAAc,EAAE,cAAc,EAAE;AACjE,+BAA+B,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AACjF,+BAA+B,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AACjF;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAwC,UAAU,OAAO,UAAU,OAAO,SAAS;AACnF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,2CAA2C;AAC3C;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAwB,kBAAkB;AAAA;AAC1C;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;AC1qCD,+C;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;;;ACnBA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;IAEM0e,S;;;;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CA;AACA;;AAEA;AACA,qBAAqB,0BAA0B;;AAE/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,mDAAmD;AACnF;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4CAA4C;AAC5C;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yBAAyB,wBAAwB;AACjD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB,8BAA8B;AACrD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA,CAAC;AACD;;AAEA,CAAC;;;;;;;AC/iBD;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;;AAEA,iCAAiC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEljB,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;AACA;AACA,gBAAgB;AAChB;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iEAAiE;AACjE;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,oBAAoB;AACpB;AACA;;AAEA;AACA,oEAAoE;;AAEpE;;AAEA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,yCAAyC;AAC1E;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA,0FAA0F,aAAa;AACvG;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,mCAAmC,iCAAiC,eAAe,eAAe,gBAAgB,oBAAoB,MAAM,0CAA0C,+BAA+B,aAAa,qBAAqB,mCAAmC,EAAE,EAAE,cAAc,WAAW,UAAU,EAAE,UAAU,MAAM,yCAAyC,EAAE,UAAU,kBAAkB,EAAE,EAAE,aAAa,EAAE,2BAA2B,0BAA0B,YAAY,EAAE,2CAA2C,8BAA8B,EAAE,OAAO,6EAA6E,EAAE,GAAG,EAAE;;AAEtpB,iCAAiC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEljB,wCAAwC,mBAAmB,4BAA4B,kDAAkD,gBAAgB,kDAAkD,8DAA8D,0BAA0B,4CAA4C,uBAAuB,kBAAkB,EAAE,OAAO,cAAc,gBAAgB,gBAAgB,eAAe,2BAA2B,oBAAoB,EAAE,EAAE,4BAA4B,mBAAmB,EAAE,OAAO,uBAAuB,4BAA4B,kBAAkB,EAAE,8BAA8B,EAAE,EAAE;;AAElpB,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,0CAA0C,+DAA+D,qGAAqG,EAAE,yEAAyE,eAAe,yEAAyE,EAAE,EAAE,uHAAuH;;AAE5e;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,UAAU;AACV;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,UAAU;AACV;;AAEA;AACA,aAAa;;AAEb,oEAAoE,aAAa;AACjF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,UAAU;AACV;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,yBAAyB;AACzB;;AAEA;AACA;AACA,OAAO;AACP;;AAEA;AACA,oEAAoE,+BAA+B;AACnG;;AAEA,kDAAkD,+BAA+B;AACjF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,+BAA+B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;;AAEX;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA,yBAAyB,yBAAyB;AAClD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,oBAAoB,wBAAwB;AAC5C;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;;AAEA;;AAEA;AACA;;AAEA;;AAEA,mCAAmC,iCAAiC,eAAe,eAAe,gBAAgB,oBAAoB,MAAM,0CAA0C,+BAA+B,aAAa,qBAAqB,mCAAmC,EAAE,EAAE,cAAc,WAAW,UAAU,EAAE,UAAU,MAAM,yCAAyC,EAAE,UAAU,kBAAkB,EAAE,EAAE,aAAa,EAAE,2BAA2B,0BAA0B,YAAY,EAAE,2CAA2C,8BAA8B,EAAE,OAAO,6EAA6E,EAAE,GAAG,EAAE;;AAEtpB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;;AAEA,+BAA+B;AAC/B,+BAA+B;;AAE/B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AA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","file":"module.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 78f88c2069b3213b7977","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 0\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jquery\"\n// module id = 1\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"angular\"\n// module id = 2\n// module chunks = 0","/* Javascript plotting library for jQuery, version 0.8.3.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\n*/\n\n// first an inline dependency, jquery.colorhelpers.js, we inline it here\n// for convenience\n\n/* Plugin for jQuery for working with colors.\n *\n * Version 1.1.\n *\n * Inspiration from jQuery color animation plugin by John Resig.\n *\n * Released under the MIT license by Ole Laursen, October 2009.\n *\n * Examples:\n *\n *   $.color.parse(\"#fff\").scale('rgb', 0.25).add('a', -0.5).toString()\n *   var c = $.color.extract($(\"#mydiv\"), 'background-color');\n *   console.log(c.r, c.g, c.b, c.a);\n *   $.color.make(100, 50, 25, 0.4).toString() // returns \"rgba(100,50,25,0.4)\"\n *\n * Note that .scale() and .add() return the same modified object\n * instead of making a new one.\n *\n * V. 1.1: Fix error handling so e.g. parsing an empty string does\n * produce a color rather than just crashing.\n */\n(function($){$.color={};$.color.make=function(r,g,b,a){var o={};o.r=r||0;o.g=g||0;o.b=b||0;o.a=a!=null?a:1;o.add=function(c,d){for(var i=0;i<c.length;++i)o[c.charAt(i)]+=d;return o.normalize()};o.scale=function(c,f){for(var i=0;i<c.length;++i)o[c.charAt(i)]*=f;return o.normalize()};o.toString=function(){if(o.a>=1){return\"rgb(\"+[o.r,o.g,o.b].join(\",\")+\")\"}else{return\"rgba(\"+[o.r,o.g,o.b,o.a].join(\",\")+\")\"}};o.normalize=function(){function clamp(min,value,max){return value<min?min:value>max?max:value}o.r=clamp(0,parseInt(o.r),255);o.g=clamp(0,parseInt(o.g),255);o.b=clamp(0,parseInt(o.b),255);o.a=clamp(0,o.a,1);return o};o.clone=function(){return $.color.make(o.r,o.b,o.g,o.a)};return o.normalize()};$.color.extract=function(elem,css){var c;do{c=elem.css(css).toLowerCase();if(c!=\"\"&&c!=\"transparent\")break;elem=elem.parent()}while(elem.length&&!$.nodeName(elem.get(0),\"body\"));if(c==\"rgba(0, 0, 0, 0)\")c=\"transparent\";return $.color.parse(c)};$.color.parse=function(str){var res,m=$.color.make;if(res=/rgb\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*\\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10));if(res=/rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10),parseFloat(res[4]));if(res=/rgb\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*\\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55);if(res=/rgba\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55,parseFloat(res[4]));if(res=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str))return m(parseInt(res[1],16),parseInt(res[2],16),parseInt(res[3],16));if(res=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str))return m(parseInt(res[1]+res[1],16),parseInt(res[2]+res[2],16),parseInt(res[3]+res[3],16));var name=$.trim(str).toLowerCase();if(name==\"transparent\")return m(255,255,255,0);else{res=lookupColors[name]||[0,0,0];return m(res[0],res[1],res[2])}};var lookupColors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);\n\n// the actual Flot code\n(function($) {\n\n\t// Cache the prototype hasOwnProperty for faster access\n\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    // A shim to provide 'detach' to jQuery versions prior to 1.4.  Using a DOM\n    // operation produces the same effect as detach, i.e. removing the element\n    // without touching its jQuery data.\n\n    // Do not merge this into Flot 0.9, since it requires jQuery 1.4.4+.\n\n    if (!$.fn.detach) {\n        $.fn.detach = function() {\n            return this.each(function() {\n                if (this.parentNode) {\n                    this.parentNode.removeChild( this );\n                }\n            });\n        };\n    }\n\n\t///////////////////////////////////////////////////////////////////////////\n\t// The Canvas object is a wrapper around an HTML5 <canvas> tag.\n\t//\n\t// @constructor\n\t// @param {string} cls List of classes to apply to the canvas.\n\t// @param {element} container Element onto which to append the canvas.\n\t//\n\t// Requiring a container is a little iffy, but unfortunately canvas\n\t// operations don't work unless the canvas is attached to the DOM.\n\n\tfunction Canvas(cls, container) {\n\n\t\tvar element = container.children(\".\" + cls)[0];\n\n\t\tif (element == null) {\n\n\t\t\telement = document.createElement(\"canvas\");\n\t\t\telement.className = cls;\n\n\t\t\t$(element).css({ direction: \"ltr\", position: \"absolute\", left: 0, top: 0 })\n\t\t\t\t.appendTo(container);\n\n\t\t\t// If HTML5 Canvas isn't available, fall back to [Ex|Flash]canvas\n\n\t\t\tif (!element.getContext) {\n\t\t\t\tif (window.G_vmlCanvasManager) {\n\t\t\t\t\telement = window.G_vmlCanvasManager.initElement(element);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(\"Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.element = element;\n\n\t\tvar context = this.context = element.getContext(\"2d\");\n\n\t\t// Determine the screen's ratio of physical to device-independent\n\t\t// pixels.  This is the ratio between the canvas width that the browser\n\t\t// advertises and the number of pixels actually present in that space.\n\n\t\t// The iPhone 4, for example, has a device-independent width of 320px,\n\t\t// but its screen is actually 640px wide.  It therefore has a pixel\n\t\t// ratio of 2, while most normal devices have a ratio of 1.\n\n\t\tvar devicePixelRatio = window.devicePixelRatio || 1,\n\t\t\tbackingStoreRatio =\n\t\t\t\tcontext.webkitBackingStorePixelRatio ||\n\t\t\t\tcontext.mozBackingStorePixelRatio ||\n\t\t\t\tcontext.msBackingStorePixelRatio ||\n\t\t\t\tcontext.oBackingStorePixelRatio ||\n\t\t\t\tcontext.backingStorePixelRatio || 1;\n\n\t\tthis.pixelRatio = devicePixelRatio / backingStoreRatio;\n\n\t\t// Size the canvas to match the internal dimensions of its container\n\n\t\tthis.resize(container.width(), container.height());\n\n\t\t// Collection of HTML div layers for text overlaid onto the canvas\n\n\t\tthis.textContainer = null;\n\t\tthis.text = {};\n\n\t\t// Cache of text fragments and metrics, so we can avoid expensively\n\t\t// re-calculating them when the plot is re-rendered in a loop.\n\n\t\tthis._textCache = {};\n\t\tthis._textSizeCache = window.flotTextSizeCache = window.flotTextSizeCache || {};\n\t}\n\n\t// Resizes the canvas to the given dimensions.\n\t//\n\t// @param {number} width New width of the canvas, in pixels.\n\t// @param {number} width New height of the canvas, in pixels.\n\n\tCanvas.prototype.resize = function(width, height) {\n\n\t\tif (width <= 0 || height <= 0) {\n\t\t\tthrow new Error(\"Invalid dimensions for plot, width = \" + width + \", height = \" + height);\n\t\t}\n\n\t\tvar element = this.element,\n\t\t\tcontext = this.context,\n\t\t\tpixelRatio = this.pixelRatio;\n\n\t\t// Resize the canvas, increasing its density based on the display's\n\t\t// pixel ratio; basically giving it more pixels without increasing the\n\t\t// size of its element, to take advantage of the fact that retina\n\t\t// displays have that many more pixels in the same advertised space.\n\n\t\t// Resizing should reset the state (excanvas seems to be buggy though)\n\n\t\tif (this.width != width) {\n\t\t\telement.width = width * pixelRatio;\n\t\t\telement.style.width = width + \"px\";\n\t\t\tthis.width = width;\n\t\t}\n\n\t\tif (this.height != height) {\n\t\t\telement.height = height * pixelRatio;\n\t\t\telement.style.height = height + \"px\";\n\t\t\tthis.height = height;\n\t\t}\n\n\t\t// Save the context, so we can reset in case we get replotted.  The\n\t\t// restore ensure that we're really back at the initial state, and\n\t\t// should be safe even if we haven't saved the initial state yet.\n\n\t\tcontext.restore();\n\t\tcontext.save();\n\n\t\t// Scale the coordinate space to match the display density; so even though we\n\t\t// may have twice as many pixels, we still want lines and other drawing to\n\t\t// appear at the same size; the extra pixels will just make them crisper.\n\n\t\tcontext.scale(pixelRatio, pixelRatio);\n\t};\n\n\t// Clears the entire canvas area, not including any overlaid HTML text\n\n\tCanvas.prototype.clear = function() {\n\t\tthis.context.clearRect(0, 0, this.width, this.height);\n\t};\n\n\t// Finishes rendering the canvas, including managing the text overlay.\n\n\tCanvas.prototype.render = function() {\n\n\t\tvar cache = this._textCache;\n\n\t\t// For each text layer, add elements marked as active that haven't\n\t\t// already been rendered, and remove those that are no longer active.\n\n\t\tfor (var layerKey in cache) {\n\t\t\tif (hasOwnProperty.call(cache, layerKey)) {\n\n\t\t\t\tvar layer = this.getTextLayer(layerKey),\n\t\t\t\t\tlayerCache = cache[layerKey];\n\n\t\t\t\tlayer.hide();\n\n\t\t\t\tfor (var styleKey in layerCache) {\n\t\t\t\t\tif (hasOwnProperty.call(layerCache, styleKey)) {\n\t\t\t\t\t\tvar styleCache = layerCache[styleKey];\n\t\t\t\t\t\tfor (var key in styleCache) {\n\t\t\t\t\t\t\tif (hasOwnProperty.call(styleCache, key)) {\n\n\t\t\t\t\t\t\t\tvar positions = styleCache[key].positions;\n\n\t\t\t\t\t\t\t\tfor (var i = 0, position; position = positions[i]; i++) {\n\t\t\t\t\t\t\t\t\tif (position.active) {\n\t\t\t\t\t\t\t\t\t\tif (!position.rendered) {\n\t\t\t\t\t\t\t\t\t\t\tlayer.append(position.element);\n\t\t\t\t\t\t\t\t\t\t\tposition.rendered = true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tpositions.splice(i--, 1);\n\t\t\t\t\t\t\t\t\t\tif (position.rendered) {\n\t\t\t\t\t\t\t\t\t\t\tposition.element.detach();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (positions.length == 0) {\n\t\t\t\t\t\t\t\t\tdelete styleCache[key];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlayer.show();\n\t\t\t}\n\t\t}\n\t};\n\n\t// Creates (if necessary) and returns the text overlay container.\n\t//\n\t// @param {string} classes String of space-separated CSS classes used to\n\t//     uniquely identify the text layer.\n\t// @return {object} The jQuery-wrapped text-layer div.\n\n\tCanvas.prototype.getTextLayer = function(classes) {\n\n\t\tvar layer = this.text[classes];\n\n\t\t// Create the text layer if it doesn't exist\n\n\t\tif (layer == null) {\n\n\t\t\t// Create the text layer container, if it doesn't exist\n\n\t\t\tif (this.textContainer == null) {\n\t\t\t\tthis.textContainer = $(\"<div class='flot-text flot-temp-elem'></div>\")\n\t\t\t\t\t.css({\n\t\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\tbottom: 0,\n\t\t\t\t\t\tright: 0,\n\t\t\t\t\t\t'font-size': \"smaller\",\n\t\t\t\t\t\tcolor: \"#545454\"\n\t\t\t\t\t})\n\t\t\t\t\t.insertAfter(this.element);\n\t\t\t}\n\n\t\t\tlayer = this.text[classes] = $(\"<div></div>\")\n\t\t\t\t.addClass(classes)\n\t\t\t\t.css({\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tbottom: 0,\n\t\t\t\t\tright: 0\n\t\t\t\t})\n\t\t\t\t.appendTo(this.textContainer);\n\t\t}\n\n\t\treturn layer;\n\t};\n\n\t// Creates (if necessary) and returns a text info object.\n\t//\n\t// The object looks like this:\n\t//\n\t// {\n\t//     width: Width of the text's wrapper div.\n\t//     height: Height of the text's wrapper div.\n\t//     element: The jQuery-wrapped HTML div containing the text.\n\t//     positions: Array of positions at which this text is drawn.\n\t// }\n\t//\n\t// The positions array contains objects that look like this:\n\t//\n\t// {\n\t//     active: Flag indicating whether the text should be visible.\n\t//     rendered: Flag indicating whether the text is currently visible.\n\t//     element: The jQuery-wrapped HTML div containing the text.\n\t//     x: X coordinate at which to draw the text.\n\t//     y: Y coordinate at which to draw the text.\n\t// }\n\t//\n\t// Each position after the first receives a clone of the original element.\n\t//\n\t// The idea is that that the width, height, and general 'identity' of the\n\t// text is constant no matter where it is placed; the placements are a\n\t// secondary property.\n\t//\n\t// Canvas maintains a cache of recently-used text info objects; getTextInfo\n\t// either returns the cached element or creates a new entry.\n\t//\n\t// @param {string} layer A string of space-separated CSS classes uniquely\n\t//     identifying the layer containing this text.\n\t// @param {string} text Text string to retrieve info for.\n\t// @param {(string|object)=} font Either a string of space-separated CSS\n\t//     classes or a font-spec object, defining the text's font and style.\n\t// @param {number=} angle Angle at which to rotate the text, in degrees.\n\t//     Angle is currently unused, it will be implemented in the future.\n\t// @param {number=} width Maximum width of the text before it wraps.\n\t// @return {object} a text info object.\n\n\tCanvas.prototype.getTextInfo = function(layer, text, font, angle, width) {\n\n\t\tvar textStyle, layerCache, styleCache, info;\n\n\t\t// Cast the value to a string, in case we were given a number or such\n\n\t\ttext = \"\" + text;\n\n\t\t// If the font is a font-spec object, generate a CSS font definition\n\n\t\tif (typeof font === \"object\") {\n\t\t\ttextStyle = font.style + \" \" + font.variant + \" \" + font.weight + \" \" + font.size + \"px/\" + font.lineHeight + \"px \" + font.family;\n\t\t} else {\n\t\t\ttextStyle = font;\n\t\t}\n\n\t\t// Retrieve (or create) the cache for the text's layer and styles\n\n\t\tlayerCache = this._textCache[layer];\n\n\t\tif (layerCache == null) {\n\t\t\tlayerCache = this._textCache[layer] = {};\n\t\t}\n\n\t\tstyleCache = layerCache[textStyle];\n\n\t\tif (styleCache == null) {\n\t\t\tstyleCache = layerCache[textStyle] = {};\n\t\t}\n\n\t\tinfo = styleCache[text];\n\n\t\t// If we can't find a matching element in our cache, create a new one\n\n\t\tif (info == null) {\n\n\t\t\tvar element = $(\"<div></div>\").html(text)\n\t\t\t\t.css({\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\t'max-width': width,\n\t\t\t\t\ttop: -9999\n\t\t\t\t})\n\t\t\t\t.appendTo(this.getTextLayer(layer));\n\n\t\t\tif (typeof font === \"object\") {\n\t\t\t\telement.css({\n\t\t\t\t\tfont: textStyle,\n\t\t\t\t\tcolor: font.color\n\t\t\t\t});\n\t\t\t} else if (typeof font === \"string\") {\n\t\t\t\telement.addClass(font);\n\t\t\t}\n\n      info = styleCache[text] = { element: element, positions: [] };\n\n      var size = this._textSizeCache[text];\n\t\t\tif (size) {\n        info.width = size.width;\n        info.height = size.height;\n\t\t\t} else {\n        info.width = element.outerWidth(true);\n        info.height = element.outerHeight(true);\n        this._textSizeCache[text] = { width: info.width, height: info.height };\n\t\t\t}\n\t\t\telement.detach();\n\t\t}\n\n\t\treturn info;\n\t};\n\n\t// Adds a text string to the canvas text overlay.\n\t//\n\t// The text isn't drawn immediately; it is marked as rendering, which will\n\t// result in its addition to the canvas on the next render pass.\n\t//\n\t// @param {string} layer A string of space-separated CSS classes uniquely\n\t//     identifying the layer containing this text.\n\t// @param {number} x X coordinate at which to draw the text.\n\t// @param {number} y Y coordinate at which to draw the text.\n\t// @param {string} text Text string to draw.\n\t// @param {(string|object)=} font Either a string of space-separated CSS\n\t//     classes or a font-spec object, defining the text's font and style.\n\t// @param {number=} angle Angle at which to rotate the text, in degrees.\n\t//     Angle is currently unused, it will be implemented in the future.\n\t// @param {number=} width Maximum width of the text before it wraps.\n\t// @param {string=} halign Horizontal alignment of the text; either \"left\",\n\t//     \"center\" or \"right\".\n\t// @param {string=} valign Vertical alignment of the text; either \"top\",\n\t//     \"middle\" or \"bottom\".\n\n\tCanvas.prototype.addText = function(layer, x, y, text, font, angle, width, halign, valign) {\n\n\t\tvar info = this.getTextInfo(layer, text, font, angle, width),\n\t\t\tpositions = info.positions;\n\n\t\t// Tweak the div's position to match the text's alignment\n\n\t\tif (halign == \"center\") {\n\t\t\tx -= info.width / 2;\n\t\t} else if (halign == \"right\") {\n\t\t\tx -= info.width;\n\t\t}\n\n\t\tif (valign == \"middle\") {\n\t\t\ty -= info.height / 2;\n\t\t} else if (valign == \"bottom\") {\n\t\t\ty -= info.height;\n\t\t}\n\n\t\t// Determine whether this text already exists at this position.\n\t\t// If so, mark it for inclusion in the next render pass.\n\n\t\tfor (var i = 0, position; position = positions[i]; i++) {\n\t\t\tif (position.x == x && position.y == y) {\n\t\t\t\tposition.active = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// If the text doesn't exist at this position, create a new entry\n\n\t\t// For the very first position we'll re-use the original element,\n\t\t// while for subsequent ones we'll clone it.\n\n\t\tposition = {\n\t\t\tactive: true,\n\t\t\trendered: false,\n\t\t\telement: positions.length ? info.element.clone() : info.element,\n\t\t\tx: x,\n\t\t\ty: y\n\t\t};\n\n\t\tpositions.push(position);\n\n\t\t// Move the element to its final position within the container\n\n\t\tposition.element.css({\n\t\t\ttop: Math.round(y),\n\t\t\tleft: Math.round(x),\n\t\t\t'text-align': halign\t// In case the text wraps\n\t\t});\n\t};\n\n\t// Removes one or more text strings from the canvas text overlay.\n\t//\n\t// If no parameters are given, all text within the layer is removed.\n\t//\n\t// Note that the text is not immediately removed; it is simply marked as\n\t// inactive, which will result in its removal on the next render pass.\n\t// This avoids the performance penalty for 'clear and redraw' behavior,\n\t// where we potentially get rid of all text on a layer, but will likely\n\t// add back most or all of it later, as when redrawing axes, for example.\n\t//\n\t// @param {string} layer A string of space-separated CSS classes uniquely\n\t//     identifying the layer containing this text.\n\t// @param {number=} x X coordinate of the text.\n\t// @param {number=} y Y coordinate of the text.\n\t// @param {string=} text Text string to remove.\n\t// @param {(string|object)=} font Either a string of space-separated CSS\n\t//     classes or a font-spec object, defining the text's font and style.\n\t// @param {number=} angle Angle at which the text is rotated, in degrees.\n\t//     Angle is currently unused, it will be implemented in the future.\n\n\tCanvas.prototype.removeText = function(layer, x, y, text, font, angle) {\n\t\tif (text == null) {\n\t\t\tvar layerCache = this._textCache[layer];\n\t\t\tif (layerCache != null) {\n\t\t\t\tfor (var styleKey in layerCache) {\n\t\t\t\t\tif (hasOwnProperty.call(layerCache, styleKey)) {\n\t\t\t\t\t\tvar styleCache = layerCache[styleKey];\n\t\t\t\t\t\tfor (var key in styleCache) {\n\t\t\t\t\t\t\tif (hasOwnProperty.call(styleCache, key)) {\n\t\t\t\t\t\t\t\tvar positions = styleCache[key].positions;\n\t\t\t\t\t\t\t\tfor (var i = 0, position; position = positions[i]; i++) {\n\t\t\t\t\t\t\t\t\tposition.active = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvar positions = this.getTextInfo(layer, text, font, angle).positions;\n\t\t\tfor (var i = 0, position; position = positions[i]; i++) {\n\t\t\t\tif (position.x == x && position.y == y) {\n\t\t\t\t\tposition.active = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t///////////////////////////////////////////////////////////////////////////\n\t// The top-level container for the entire plot.\n\n    function Plot(placeholder, data_, options_, plugins) {\n        // data is on the form:\n        //   [ series1, series2 ... ]\n        // where series is either just the data as [ [x1, y1], [x2, y2], ... ]\n        // or { data: [ [x1, y1], [x2, y2], ... ], label: \"some label\", ... }\n\n        var series = [],\n            options = {\n                // the color theme used for graphs\n                colors: [\"#edc240\", \"#afd8f8\", \"#cb4b4b\", \"#4da74d\", \"#9440ed\"],\n                legend: {\n                    show: true,\n                    noColumns: 1, // number of colums in legend table\n                    labelFormatter: null, // fn: string -> string\n                    labelBoxBorderColor: \"#ccc\", // border color for the little label boxes\n                    container: null, // container (as jQuery object) to put legend in, null means default on top of graph\n                    position: \"ne\", // position of default legend container within plot\n                    margin: 5, // distance from grid edge to default legend container within plot\n                    backgroundColor: null, // null means auto-detect\n                    backgroundOpacity: 0.85, // set to 0 to avoid background\n                    sorted: null    // default to no legend sorting\n                },\n                xaxis: {\n                    show: null, // null = auto-detect, true = always, false = never\n                    position: \"bottom\", // or \"top\"\n                    mode: null, // null or \"time\"\n                    font: null, // null (derived from CSS in placeholder) or object like { size: 11, lineHeight: 13, style: \"italic\", weight: \"bold\", family: \"sans-serif\", variant: \"small-caps\" }\n                    color: null, // base color, labels, ticks\n                    tickColor: null, // possibly different color of ticks, e.g. \"rgba(0,0,0,0.15)\"\n                    transform: null, // null or f: number -> number to transform axis\n                    inverseTransform: null, // if transform is set, this should be the inverse function\n                    min: null, // min. value to show, null means set automatically\n                    max: null, // max. value to show, null means set automatically\n                    autoscaleMargin: null, // margin in % to add if auto-setting min/max\n                    ticks: null, // either [1, 3] or [[1, \"a\"], 3] or (fn: axis info -> ticks) or app. number of ticks for auto-ticks\n                    tickFormatter: null, // fn: number -> string\n                    labelWidth: null, // size of tick labels in pixels\n                    labelHeight: null,\n                    reserveSpace: null, // whether to reserve space even if axis isn't shown\n                    tickLength: null, // size in pixels of ticks, or \"full\" for whole line\n                    alignTicksWithAxis: null, // axis number or null for no sync\n                    tickDecimals: null, // no. of decimals, null means auto\n                    tickSize: null, // number or [number, \"unit\"]\n                    minTickSize: null // number or [number, \"unit\"]\n                },\n                yaxis: {\n                    autoscaleMargin: 0.02,\n                    position: \"left\" // or \"right\"\n                },\n                xaxes: [],\n                yaxes: [],\n                series: {\n                    points: {\n                        show: false,\n                        radius: 3,\n                        lineWidth: 2, // in pixels\n                        fill: true,\n                        fillColor: \"#ffffff\",\n                        symbol: \"circle\" // or callback\n                    },\n                    lines: {\n                        // we don't put in show: false so we can see\n                        // whether lines were actively disabled\n                        lineWidth: 2, // in pixels\n                        fill: false,\n                        fillColor: null,\n                        steps: false\n                        // Omit 'zero', so we can later default its value to\n                        // match that of the 'fill' option.\n                    },\n                    bars: {\n                        show: false,\n                        lineWidth: 2, // in pixels\n                        barWidth: 1, // in units of the x axis\n                        fill: true,\n                        fillColor: null,\n                        align: \"left\", // \"left\", \"right\", or \"center\"\n                        horizontal: false,\n                        zero: true\n                    },\n                    shadowSize: 3,\n                    highlightColor: null\n                },\n                grid: {\n                    show: true,\n                    aboveData: false,\n                    color: \"#545454\", // primary color used for outline and labels\n                    backgroundColor: null, // null for transparent, else color\n                    borderColor: null, // set if different from the grid color\n                    tickColor: null, // color for the ticks, e.g. \"rgba(0,0,0,0.15)\"\n                    margin: 0, // distance from the canvas edge to the grid\n                    labelMargin: 5, // in pixels\n                    eventSectionHeight: 0, // space for event section\n                    axisMargin: 8, // in pixels\n                    borderWidth: 2, // in pixels\n                    minBorderMargin: null, // in pixels, null means taken from points radius\n                    markings: null, // array of ranges or fn: axes -> array of ranges\n                    markingsColor: \"#f4f4f4\",\n                    markingsLineWidth: 2,\n                    // interactive stuff\n                    clickable: false,\n                    hoverable: false,\n                    autoHighlight: true, // highlight in case mouse is near\n                    mouseActiveRadius: 10 // how far the mouse can be away to activate an item\n                },\n                interaction: {\n                    redrawOverlayInterval: 1000/60 // time between updates, -1 means in same flow\n                },\n                hooks: {}\n            },\n        surface = null,     // the canvas for the plot itself\n        overlay = null,     // canvas for interactive stuff on top of plot\n        eventHolder = null, // jQuery object that events should be bound to\n        ctx = null, octx = null,\n        xaxes = [], yaxes = [],\n        plotOffset = { left: 0, right: 0, top: 0, bottom: 0},\n        plotWidth = 0, plotHeight = 0,\n        hooks = {\n            processOptions: [],\n            processRawData: [],\n            processDatapoints: [],\n            processOffset: [],\n            drawBackground: [],\n            drawSeries: [],\n            draw: [],\n            bindEvents: [],\n            drawOverlay: [],\n            shutdown: []\n        },\n        plot = this;\n\n        // public functions\n        plot.setData = setData;\n        plot.setupGrid = setupGrid;\n        plot.draw = draw;\n        plot.getPlaceholder = function() { return placeholder; };\n        plot.getCanvas = function() { return surface.element; };\n        plot.getPlotOffset = function() { return plotOffset; };\n        plot.width = function () { return plotWidth; };\n        plot.height = function () { return plotHeight; };\n        plot.offset = function () {\n            var o = eventHolder.offset();\n            o.left += plotOffset.left;\n            o.top += plotOffset.top;\n            return o;\n        };\n        plot.getData = function () { return series; };\n        plot.getAxes = function () {\n            var res = {}, i;\n            $.each(xaxes.concat(yaxes), function (_, axis) {\n                if (axis)\n                    res[axis.direction + (axis.n != 1 ? axis.n : \"\") + \"axis\"] = axis;\n            });\n            return res;\n        };\n        plot.getXAxes = function () { return xaxes; };\n        plot.getYAxes = function () { return yaxes; };\n        plot.c2p = canvasToAxisCoords;\n        plot.p2c = axisToCanvasCoords;\n        plot.getOptions = function () { return options; };\n        plot.highlight = highlight;\n        plot.unhighlight = unhighlight;\n        plot.triggerRedrawOverlay = triggerRedrawOverlay;\n        plot.pointOffset = function(point) {\n            return {\n                left: parseInt(xaxes[axisNumber(point, \"x\") - 1].p2c(+point.x) + plotOffset.left, 10),\n                top: parseInt(yaxes[axisNumber(point, \"y\") - 1].p2c(+point.y) + plotOffset.top, 10)\n            };\n        };\n        plot.shutdown = shutdown;\n        plot.destroy = function () {\n            shutdown();\n            placeholder.removeData(\"plot\").empty();\n\n            series = [];\n            options = null;\n            surface = null;\n            overlay = null;\n            eventHolder = null;\n            ctx = null;\n            octx = null;\n            xaxes = [];\n            yaxes = [];\n            hooks = null;\n            highlights = [];\n            plot = null;\n        };\n        plot.resize = function () {\n        \tvar width = placeholder.width(),\n        \t\theight = placeholder.height();\n            surface.resize(width, height);\n            overlay.resize(width, height);\n        };\n\n        // public attributes\n        plot.hooks = hooks;\n\n        // initialize\n        initPlugins(plot);\n        parseOptions(options_);\n        setupCanvases();\n        setData(data_);\n        setupGrid();\n        draw();\n        bindEvents();\n\n\n        function executeHooks(hook, args) {\n            args = [plot].concat(args);\n            for (var i = 0; i < hook.length; ++i)\n                hook[i].apply(this, args);\n        }\n\n        function initPlugins() {\n\n            // References to key classes, allowing plugins to modify them\n\n            var classes = {\n                Canvas: Canvas\n            };\n\n            for (var i = 0; i < plugins.length; ++i) {\n                var p = plugins[i];\n                p.init(plot, classes);\n                if (p.options)\n                    $.extend(true, options, p.options);\n            }\n        }\n\n        function parseOptions(opts) {\n\n            $.extend(true, options, opts);\n\n            // $.extend merges arrays, rather than replacing them.  When less\n            // colors are provided than the size of the default palette, we\n            // end up with those colors plus the remaining defaults, which is\n            // not expected behavior; avoid it by replacing them here.\n\n            if (opts && opts.colors) {\n            \toptions.colors = opts.colors;\n            }\n\n            if (options.xaxis.color == null)\n                options.xaxis.color = $.color.parse(options.grid.color).scale('a', 0.22).toString();\n            if (options.yaxis.color == null)\n                options.yaxis.color = $.color.parse(options.grid.color).scale('a', 0.22).toString();\n\n            if (options.xaxis.tickColor == null) // grid.tickColor for back-compatibility\n                options.xaxis.tickColor = options.grid.tickColor || options.xaxis.color;\n            if (options.yaxis.tickColor == null) // grid.tickColor for back-compatibility\n                options.yaxis.tickColor = options.grid.tickColor || options.yaxis.color;\n\n            if (options.grid.borderColor == null)\n                options.grid.borderColor = options.grid.color;\n            if (options.grid.tickColor == null)\n                options.grid.tickColor = $.color.parse(options.grid.color).scale('a', 0.22).toString();\n\n            // Fill in defaults for axis options, including any unspecified\n            // font-spec fields, if a font-spec was provided.\n\n            // If no x/y axis options were provided, create one of each anyway,\n            // since the rest of the code assumes that they exist.\n\n            var i, axisOptions, axisCount,\n                fontSize = placeholder.css(\"font-size\"),\n                fontSizeDefault = fontSize ? +fontSize.replace(\"px\", \"\") : 13,\n                fontDefaults = {\n                    style: placeholder.css(\"font-style\"),\n                    size: Math.round(0.8 * fontSizeDefault),\n                    variant: placeholder.css(\"font-variant\"),\n                    weight: placeholder.css(\"font-weight\"),\n                    family: placeholder.css(\"font-family\")\n                };\n\n            axisCount = options.xaxes.length || 1;\n            for (i = 0; i < axisCount; ++i) {\n\n                axisOptions = options.xaxes[i];\n                if (axisOptions && !axisOptions.tickColor) {\n                    axisOptions.tickColor = axisOptions.color;\n                }\n\n                axisOptions = $.extend(true, {}, options.xaxis, axisOptions);\n                options.xaxes[i] = axisOptions;\n\n                if (axisOptions.font) {\n                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\n                    if (!axisOptions.font.color) {\n                        axisOptions.font.color = axisOptions.color;\n                    }\n                    if (!axisOptions.font.lineHeight) {\n                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\n                    }\n                }\n            }\n\n            axisCount = options.yaxes.length || 1;\n            for (i = 0; i < axisCount; ++i) {\n\n                axisOptions = options.yaxes[i];\n                if (axisOptions && !axisOptions.tickColor) {\n                    axisOptions.tickColor = axisOptions.color;\n                }\n\n                axisOptions = $.extend(true, {}, options.yaxis, axisOptions);\n                options.yaxes[i] = axisOptions;\n\n                if (axisOptions.font) {\n                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\n                    if (!axisOptions.font.color) {\n                        axisOptions.font.color = axisOptions.color;\n                    }\n                    if (!axisOptions.font.lineHeight) {\n                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\n                    }\n                }\n            }\n\n            // backwards compatibility, to be removed in future\n            if (options.xaxis.noTicks && options.xaxis.ticks == null)\n                options.xaxis.ticks = options.xaxis.noTicks;\n            if (options.yaxis.noTicks && options.yaxis.ticks == null)\n                options.yaxis.ticks = options.yaxis.noTicks;\n            if (options.x2axis) {\n                options.xaxes[1] = $.extend(true, {}, options.xaxis, options.x2axis);\n                options.xaxes[1].position = \"top\";\n                // Override the inherit to allow the axis to auto-scale\n                if (options.x2axis.min == null) {\n                    options.xaxes[1].min = null;\n                }\n                if (options.x2axis.max == null) {\n                    options.xaxes[1].max = null;\n                }\n            }\n            if (options.y2axis) {\n                options.yaxes[1] = $.extend(true, {}, options.yaxis, options.y2axis);\n                options.yaxes[1].position = \"right\";\n                // Override the inherit to allow the axis to auto-scale\n                if (options.y2axis.min == null) {\n                    options.yaxes[1].min = null;\n                }\n                if (options.y2axis.max == null) {\n                    options.yaxes[1].max = null;\n                }\n            }\n            if (options.grid.coloredAreas)\n                options.grid.markings = options.grid.coloredAreas;\n            if (options.grid.coloredAreasColor)\n                options.grid.markingsColor = options.grid.coloredAreasColor;\n            if (options.lines)\n                $.extend(true, options.series.lines, options.lines);\n            if (options.points)\n                $.extend(true, options.series.points, options.points);\n            if (options.bars)\n                $.extend(true, options.series.bars, options.bars);\n            if (options.shadowSize != null)\n                options.series.shadowSize = options.shadowSize;\n            if (options.highlightColor != null)\n                options.series.highlightColor = options.highlightColor;\n\n            // save options on axes for future reference\n            for (i = 0; i < options.xaxes.length; ++i)\n                getOrCreateAxis(xaxes, i + 1).options = options.xaxes[i];\n            for (i = 0; i < options.yaxes.length; ++i)\n                getOrCreateAxis(yaxes, i + 1).options = options.yaxes[i];\n\n            // add hooks from options\n            for (var n in hooks)\n                if (options.hooks[n] && options.hooks[n].length)\n                    hooks[n] = hooks[n].concat(options.hooks[n]);\n\n            executeHooks(hooks.processOptions, [options]);\n        }\n\n        function setData(d) {\n            series = parseData(d);\n            fillInSeriesOptions();\n            processData();\n        }\n\n        function parseData(d) {\n            var res = [];\n            for (var i = 0; i < d.length; ++i) {\n                var s = $.extend(true, {}, options.series);\n\n                if (d[i].data != null) {\n                    s.data = d[i].data; // move the data instead of deep-copy\n                    delete d[i].data;\n\n                    $.extend(true, s, d[i]);\n\n                    d[i].data = s.data;\n                }\n                else\n                    s.data = d[i];\n                res.push(s);\n            }\n\n            return res;\n        }\n\n        function axisNumber(obj, coord) {\n            var a = obj[coord + \"axis\"];\n            if (typeof a == \"object\") // if we got a real axis, extract number\n                a = a.n;\n            if (typeof a != \"number\")\n                a = 1; // default to first axis\n            return a;\n        }\n\n        function allAxes() {\n            // return flat array without annoying null entries\n            return $.grep(xaxes.concat(yaxes), function (a) { return a; });\n        }\n\n        function canvasToAxisCoords(pos) {\n            // return an object with x/y corresponding to all used axes\n            var res = {}, i, axis;\n            for (i = 0; i < xaxes.length; ++i) {\n                axis = xaxes[i];\n                if (axis && axis.used)\n                    res[\"x\" + axis.n] = axis.c2p(pos.left);\n            }\n\n            for (i = 0; i < yaxes.length; ++i) {\n                axis = yaxes[i];\n                if (axis && axis.used)\n                    res[\"y\" + axis.n] = axis.c2p(pos.top);\n            }\n\n            if (res.x1 !== undefined)\n                res.x = res.x1;\n            if (res.y1 !== undefined)\n                res.y = res.y1;\n\n            return res;\n        }\n\n        function axisToCanvasCoords(pos) {\n            // get canvas coords from the first pair of x/y found in pos\n            var res = {}, i, axis, key;\n\n            for (i = 0; i < xaxes.length; ++i) {\n                axis = xaxes[i];\n                if (axis && axis.used) {\n                    key = \"x\" + axis.n;\n                    if (pos[key] == null && axis.n == 1)\n                        key = \"x\";\n\n                    if (pos[key] != null) {\n                        res.left = axis.p2c(pos[key]);\n                        break;\n                    }\n                }\n            }\n\n            for (i = 0; i < yaxes.length; ++i) {\n                axis = yaxes[i];\n                if (axis && axis.used) {\n                    key = \"y\" + axis.n;\n                    if (pos[key] == null && axis.n == 1)\n                        key = \"y\";\n\n                    if (pos[key] != null) {\n                        res.top = axis.p2c(pos[key]);\n                        break;\n                    }\n                }\n            }\n\n            return res;\n        }\n\n        function getOrCreateAxis(axes, number) {\n            if (!axes[number - 1])\n                axes[number - 1] = {\n                    n: number, // save the number for future reference\n                    direction: axes == xaxes ? \"x\" : \"y\",\n                    options: $.extend(true, {}, axes == xaxes ? options.xaxis : options.yaxis)\n                };\n\n            return axes[number - 1];\n        }\n\n        function fillInSeriesOptions() {\n\n            var neededColors = series.length, maxIndex = -1, i;\n\n            // Subtract the number of series that already have fixed colors or\n            // color indexes from the number that we still need to generate.\n\n            for (i = 0; i < series.length; ++i) {\n                var sc = series[i].color;\n                if (sc != null) {\n                    neededColors--;\n                    if (typeof sc == \"number\" && sc > maxIndex) {\n                        maxIndex = sc;\n                    }\n                }\n            }\n\n            // If any of the series have fixed color indexes, then we need to\n            // generate at least as many colors as the highest index.\n\n            if (neededColors <= maxIndex) {\n                neededColors = maxIndex + 1;\n            }\n\n            // Generate all the colors, using first the option colors and then\n            // variations on those colors once they're exhausted.\n\n            var c, colors = [], colorPool = options.colors,\n                colorPoolSize = colorPool.length, variation = 0;\n\n            for (i = 0; i < neededColors; i++) {\n\n                c = $.color.parse(colorPool[i % colorPoolSize] || \"#666\");\n\n                // Each time we exhaust the colors in the pool we adjust\n                // a scaling factor used to produce more variations on\n                // those colors. The factor alternates negative/positive\n                // to produce lighter/darker colors.\n\n                // Reset the variation after every few cycles, or else\n                // it will end up producing only white or black colors.\n\n                if (i % colorPoolSize == 0 && i) {\n                    if (variation >= 0) {\n                        if (variation < 0.5) {\n                            variation = -variation - 0.2;\n                        } else variation = 0;\n                    } else variation = -variation;\n                }\n\n                colors[i] = c.scale('rgb', 1 + variation);\n            }\n\n            // Finalize the series options, filling in their colors\n\n            var colori = 0, s;\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n\n                // assign colors\n                if (s.color == null) {\n                    s.color = colors[colori].toString();\n                    ++colori;\n                }\n                else if (typeof s.color == \"number\")\n                    s.color = colors[s.color].toString();\n\n                // turn on lines automatically in case nothing is set\n                if (s.lines.show == null) {\n                    var v, show = true;\n                    for (v in s)\n                        if (s[v] && s[v].show) {\n                            show = false;\n                            break;\n                        }\n                    if (show)\n                        s.lines.show = true;\n                }\n\n                // If nothing was provided for lines.zero, default it to match\n                // lines.fill, since areas by default should extend to zero.\n\n                if (s.lines.zero == null) {\n                    s.lines.zero = !!s.lines.fill;\n                }\n\n                // setup axes\n                s.xaxis = getOrCreateAxis(xaxes, axisNumber(s, \"x\"));\n                s.yaxis = getOrCreateAxis(yaxes, axisNumber(s, \"y\"));\n            }\n        }\n\n        function processData() {\n            var topSentry = Number.POSITIVE_INFINITY,\n                bottomSentry = Number.NEGATIVE_INFINITY,\n                fakeInfinity = Number.MAX_VALUE,\n                i, j, k, m, length,\n                s, points, ps, x, y, axis, val, f, p,\n                data, format;\n\n            function updateAxis(axis, min, max) {\n                if (min < axis.datamin && min != -fakeInfinity)\n                    axis.datamin = min;\n                if (max > axis.datamax && max != fakeInfinity)\n                    axis.datamax = max;\n            }\n\n            $.each(allAxes(), function (_, axis) {\n                // init axis\n                axis.datamin = topSentry;\n                axis.datamax = bottomSentry;\n                axis.used = false;\n            });\n\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n                s.datapoints = { points: [] };\n\n                executeHooks(hooks.processRawData, [ s, s.data, s.datapoints ]);\n            }\n\n            // first pass: clean and copy data\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n\n                data = s.data;\n                format = s.datapoints.format;\n\n                if (!format) {\n                    format = [];\n                    // find out how to copy\n                    format.push({ x: true, number: true, required: true });\n                    format.push({ y: true, number: true, required: true });\n\n                    if (s.bars.show || (s.lines.show && s.lines.fill)) {\n                        var autoscale = !!((s.bars.show && s.bars.zero) || (s.lines.show && s.lines.zero));\n                        format.push({ y: true, number: true, required: false, defaultValue: 0, autoscale: autoscale });\n                        if (s.bars.horizontal) {\n                            delete format[format.length - 1].y;\n                            format[format.length - 1].x = true;\n                        }\n                    }\n\n                    s.datapoints.format = format;\n                }\n\n                if (s.datapoints.pointsize != null)\n                    continue; // already filled in\n\n                s.datapoints.pointsize = format.length;\n\n                ps = s.datapoints.pointsize;\n                points = s.datapoints.points;\n\n                var insertSteps = s.lines.show && s.lines.steps;\n                s.xaxis.used = s.yaxis.used = true;\n\n                for (j = k = 0; j < data.length; ++j, k += ps) {\n                    p = data[j];\n\n                    var nullify = p == null;\n                    if (!nullify) {\n                        for (m = 0; m < ps; ++m) {\n                            val = p[m];\n                            f = format[m];\n\n                            if (f) {\n                                if (f.number && val != null) {\n                                    val = +val; // convert to number\n                                    if (isNaN(val))\n                                        val = null;\n                                    else if (val == Infinity)\n                                        val = fakeInfinity;\n                                    else if (val == -Infinity)\n                                        val = -fakeInfinity;\n                                }\n\n                                if (val == null) {\n                                    if (f.required)\n                                        nullify = true;\n\n                                    if (f.defaultValue != null)\n                                        val = f.defaultValue;\n                                }\n                            }\n\n                            points[k + m] = val;\n                        }\n                    }\n\n                    if (nullify) {\n                        for (m = 0; m < ps; ++m) {\n                            val = points[k + m];\n                            if (val != null) {\n                                f = format[m];\n                                // extract min/max info\n                                if (f.autoscale !== false) {\n                                    if (f.x) {\n                                        updateAxis(s.xaxis, val, val);\n                                    }\n                                    if (f.y) {\n                                        updateAxis(s.yaxis, val, val);\n                                    }\n                                }\n                            }\n                            points[k + m] = null;\n                        }\n                    }\n\n                    if (insertSteps && k > 0 && (!nullify || points[k - ps] != null)) {\n                        // copy the point to make room for a middle point\n                        for (m = 0; m < ps; ++m)\n                            points[k + ps + m] = points[k + m];\n\n                        // middle point has same y\n                        points[k + 1] = points[k - ps + 1] || 0;\n\n                        // if series has null values, let's give the last !null value a nice step\n                        if(nullify)\n                        \tpoints[k] = p[0];\n\n                        // we've added a point, better reflect that\n                        k += ps;\n                    }\n                }\n            }\n\n            // give the hooks a chance to run\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n                points = s.datapoints.points;\n                ps = s.datapoints.pointsize;\n\n                // grafana\n                if (s.transform === 'negative-Y') {\n                  for (j = 0; j < points.length; j += ps) {\n                    if (points[j] == null)\n                        continue;\n\n                      val = points[j + 1];\n                      points[j + 1] = -val;\n                  }\n                }\n\n                executeHooks(hooks.processDatapoints, [ s, s.datapoints]);\n            }\n\n            // second pass: find datamax/datamin for auto-scaling\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n                points = s.datapoints.points;\n                ps = s.datapoints.pointsize;\n                format = s.datapoints.format;\n\n                var xmin = topSentry, ymin = topSentry,\n                    xmax = bottomSentry, ymax = bottomSentry;\n\n                for (j = 0; j < points.length; j += ps) {\n                    if (points[j] == null)\n                        continue;\n\n                    for (m = 0; m < ps; ++m) {\n                        val = points[j + m];\n                        f = format[m];\n                        if (!f || f.autoscale === false || val == fakeInfinity || val == -fakeInfinity)\n                            continue;\n\n                        if (f.x) {\n                            if (val < xmin)\n                                xmin = val;\n                            if (val > xmax)\n                                xmax = val;\n                        }\n                        if (f.y) {\n                            if (val < ymin)\n                                ymin = val;\n                            if (val > ymax)\n                                ymax = val;\n                        }\n                    }\n                }\n\n                if (s.bars.show) {\n                    // make sure we got room for the bar on the dancing floor\n                    var delta;\n\n                    switch (s.bars.align) {\n                        case \"left\":\n                            delta = 0;\n                            break;\n                        case \"right\":\n                            delta = -s.bars.barWidth;\n                            break;\n                        default:\n                            delta = -s.bars.barWidth / 2;\n                    }\n\n                    if (s.bars.horizontal) {\n                        ymin += delta;\n                        ymax += delta + s.bars.barWidth;\n                    }\n                    else {\n                        xmin += delta;\n                        xmax += delta + s.bars.barWidth;\n                    }\n                }\n\n                updateAxis(s.xaxis, xmin, xmax);\n                updateAxis(s.yaxis, ymin, ymax);\n            }\n\n            $.each(allAxes(), function (_, axis) {\n                if (axis.datamin == topSentry)\n                    axis.datamin = null;\n                if (axis.datamax == bottomSentry)\n                    axis.datamax = null;\n            });\n        }\n\n        function setupCanvases() {\n            // Make sure the placeholder is clear of everything except canvases\n            // from a previous plot in this container that we'll try to re-use.\n\n            placeholder.find(\".flot-temp-elem\").remove();\n\n            if (placeholder.css(\"position\") == 'static')\n                placeholder.css(\"position\", \"relative\"); // for positioning labels and overlay\n\n            surface = new Canvas(\"flot-base\", placeholder);\n            overlay = new Canvas(\"flot-overlay\", placeholder); // overlay canvas for interactive features\n\n            ctx = surface.context;\n            octx = overlay.context;\n\n            // define which element we're listening for events on\n            eventHolder = $(overlay.element).unbind();\n\n            // If we're re-using a plot object, shut down the old one\n\n            var existing = placeholder.data(\"plot\");\n\n            if (existing) {\n                existing.shutdown();\n                overlay.clear();\n            }\n\n            // save in case we get replotted\n            placeholder.data(\"plot\", plot);\n        }\n\n        function bindEvents() {\n            // bind events\n            if (options.grid.hoverable) {\n                eventHolder.mousemove(onMouseMove);\n\n                // Use bind, rather than .mouseleave, because we officially\n                // still support jQuery 1.2.6, which doesn't define a shortcut\n                // for mouseenter or mouseleave.  This was a bug/oversight that\n                // was fixed somewhere around 1.3.x.  We can return to using\n                // .mouseleave when we drop support for 1.2.6.\n\n                eventHolder.bind(\"mouseleave\", onMouseLeave);\n            }\n\n            if (options.grid.clickable)\n                eventHolder.click(onClick);\n\n            executeHooks(hooks.bindEvents, [eventHolder]);\n        }\n\n        function shutdown() {\n            if (redrawTimeout)\n                clearTimeout(redrawTimeout);\n\n            eventHolder.unbind(\"mousemove\", onMouseMove);\n            eventHolder.unbind(\"mouseleave\", onMouseLeave);\n            eventHolder.unbind(\"click\", onClick);\n\n            executeHooks(hooks.shutdown, [eventHolder]);\n        }\n\n        function setTransformationHelpers(axis) {\n            // set helper functions on the axis, assumes plot area\n            // has been computed already\n\n            function identity(x) { return x; }\n\n            var s, m, t = axis.options.transform || identity,\n                it = axis.options.inverseTransform;\n\n            // precompute how much the axis is scaling a point\n            // in canvas space\n            if (axis.direction == \"x\") {\n                s = axis.scale = plotWidth / Math.abs(t(axis.max) - t(axis.min));\n                m = Math.min(t(axis.max), t(axis.min));\n            }\n            else {\n                s = axis.scale = plotHeight / Math.abs(t(axis.max) - t(axis.min));\n                s = -s;\n                m = Math.max(t(axis.max), t(axis.min));\n            }\n\n            // data point to canvas coordinate\n            if (t == identity) // slight optimization\n                axis.p2c = function (p) { return (p - m) * s; };\n            else\n                axis.p2c = function (p) { return (t(p) - m) * s; };\n            // canvas coordinate to data point\n            if (!it)\n                axis.c2p = function (c) { return m + c / s; };\n            else\n                axis.c2p = function (c) { return it(m + c / s); };\n        }\n\n        function measureTickLabels(axis) {\n\n            var opts = axis.options,\n                ticks = axis.ticks || [],\n                labelWidth = opts.labelWidth || 0,\n                labelHeight = opts.labelHeight || 0,\n                maxWidth = labelWidth || (axis.direction == \"x\" ? Math.floor(surface.width / (ticks.length || 1)) : null),\n                legacyStyles = axis.direction + \"Axis \" + axis.direction + axis.n + \"Axis\",\n                layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + legacyStyles,\n                font = opts.font || \"flot-tick-label tickLabel\";\n\n            for (var i = 0; i < ticks.length; ++i) {\n\n                var t = ticks[i];\n\n                if (!t.label)\n                    continue;\n\n                var info = surface.getTextInfo(layer, t.label, font, null, maxWidth);\n\n                /// Grafana fix, add +1 to label width\n                labelWidth = Math.max(labelWidth, info.width + 1);\n                labelHeight = Math.max(labelHeight, info.height);\n            }\n\n            axis.labelWidth = opts.labelWidth || labelWidth;\n            axis.labelHeight = opts.labelHeight || labelHeight;\n        }\n\n        function allocateAxisBoxFirstPhase(axis) {\n            // find the bounding box of the axis by looking at label\n            // widths/heights and ticks, make room by diminishing the\n            // plotOffset; this first phase only looks at one\n            // dimension per axis, the other dimension depends on the\n            // other axes so will have to wait\n\n            var lw = axis.labelWidth,\n                lh = axis.labelHeight,\n                pos = axis.options.position,\n                isXAxis = axis.direction === \"x\",\n                tickLength = axis.options.tickLength,\n                axisMargin = options.grid.axisMargin,\n                padding = options.grid.labelMargin,\n                eventSectionPadding = options.grid.eventSectionHeight,\n                innermost = true,\n                outermost = true,\n                first = true,\n                found = false;\n\n            // Determine the axis's position in its direction and on its side\n\n            $.each(isXAxis ? xaxes : yaxes, function(i, a) {\n                if (a && (a.show || a.reserveSpace)) {\n                    if (a === axis) {\n                        found = true;\n                    } else if (a.options.position === pos) {\n                        if (found) {\n                            outermost = false;\n                        } else {\n                            innermost = false;\n                        }\n                    }\n                    if (!found) {\n                        first = false;\n                    }\n                }\n            });\n\n            // The outermost axis on each side has no margin\n\n            if (outermost) {\n                axisMargin = 0;\n            }\n\n            // The ticks for the first axis in each direction stretch across\n\n            if (tickLength == null) {\n                tickLength = first ? \"full\" : 5;\n            }\n\n            if (!isNaN(+tickLength))\n                padding += +tickLength;\n\n            if (isXAxis) {\n                // Add space for event section\n                lh += padding;\n                lh += eventSectionPadding;\n\n                if (pos == \"bottom\") {\n                    plotOffset.bottom += lh + axisMargin;\n                    axis.box = { top: surface.height - plotOffset.bottom, height: lh };\n                }\n                else {\n                    axis.box = { top: plotOffset.top + axisMargin, height: lh };\n                    plotOffset.top += lh + axisMargin;\n                }\n            }\n            else {\n                lw += padding;\n\n                if (pos == \"left\") {\n                    axis.box = { left: plotOffset.left + axisMargin, width: lw };\n                    plotOffset.left += lw + axisMargin;\n                }\n                else {\n                    plotOffset.right += lw + axisMargin;\n                    axis.box = { left: surface.width - plotOffset.right, width: lw };\n                }\n            }\n\n             // save for future reference\n            axis.position = pos;\n            axis.tickLength = tickLength;\n            axis.box.padding = padding;\n            axis.box.eventSectionPadding = eventSectionPadding;\n            axis.innermost = innermost;\n        }\n\n        function allocateAxisBoxSecondPhase(axis) {\n            // now that all axis boxes have been placed in one\n            // dimension, we can set the remaining dimension coordinates\n            if (axis.direction == \"x\") {\n                axis.box.left = plotOffset.left - axis.labelWidth / 2;\n                axis.box.width = surface.width - plotOffset.left - plotOffset.right + axis.labelWidth;\n            }\n            else {\n                axis.box.top = plotOffset.top - axis.labelHeight / 2;\n                axis.box.height = surface.height - plotOffset.bottom - plotOffset.top + axis.labelHeight;\n            }\n        }\n\n        function adjustLayoutForThingsStickingOut() {\n            // possibly adjust plot offset to ensure everything stays\n            // inside the canvas and isn't clipped off\n\n            var minMargin = options.grid.minBorderMargin,\n                axis, i;\n\n            // check stuff from the plot (FIXME: this should just read\n            // a value from the series, otherwise it's impossible to\n            // customize)\n            if (minMargin == null) {\n                minMargin = 0;\n                for (i = 0; i < series.length; ++i)\n                    minMargin = Math.max(minMargin, 2 * (series[i].points.radius + series[i].points.lineWidth/2));\n            }\n\n            var margins = {\n                left: minMargin,\n                right: minMargin,\n                top: minMargin,\n                bottom: minMargin\n            };\n\n            // check axis labels, note we don't check the actual\n            // labels but instead use the overall width/height to not\n            // jump as much around with replots\n            $.each(allAxes(), function (_, axis) {\n                if (axis.reserveSpace && axis.ticks && axis.ticks.length) {\n                    if (axis.direction === \"x\") {\n                        margins.left = Math.max(margins.left, axis.labelWidth / 2);\n                        margins.right = Math.max(margins.right, axis.labelWidth / 2);\n                    } else {\n                        margins.bottom = Math.max(margins.bottom, axis.labelHeight / 2);\n                        margins.top = Math.max(margins.top, axis.labelHeight / 2);\n                    }\n                }\n            });\n\n            plotOffset.left = Math.ceil(Math.max(margins.left, plotOffset.left));\n            plotOffset.right = Math.ceil(Math.max(margins.right, plotOffset.right));\n            plotOffset.top = Math.ceil(Math.max(margins.top, plotOffset.top));\n            plotOffset.bottom = Math.ceil(Math.max(margins.bottom, plotOffset.bottom));\n        }\n\n        function setupGrid() {\n            var i, axes = allAxes(), showGrid = options.grid.show;\n\n            // Initialize the plot's offset from the edge of the canvas\n\n            for (var a in plotOffset) {\n                var margin = options.grid.margin || 0;\n                plotOffset[a] = typeof margin == \"number\" ? margin : margin[a] || 0;\n            }\n\n            executeHooks(hooks.processOffset, [plotOffset]);\n\n            // If the grid is visible, add its border width to the offset\n\n            for (var a in plotOffset) {\n                if(typeof(options.grid.borderWidth) == \"object\") {\n                    plotOffset[a] += showGrid ? options.grid.borderWidth[a] : 0;\n                }\n                else {\n                    plotOffset[a] += showGrid ? options.grid.borderWidth : 0;\n                }\n            }\n\n            $.each(axes, function (_, axis) {\n                var axisOpts = axis.options;\n                axis.show = axisOpts.show == null ? axis.used : axisOpts.show;\n                axis.reserveSpace = axisOpts.reserveSpace == null ? axis.show : axisOpts.reserveSpace;\n                setRange(axis);\n            });\n\n            if (showGrid) {\n\n                var allocatedAxes = $.grep(axes, function (axis) {\n                    return axis.show || axis.reserveSpace;\n                });\n\n                $.each(allocatedAxes, function (_, axis) {\n                    // make the ticks\n                    setupTickGeneration(axis);\n                    setTicks(axis);\n                    snapRangeToTicks(axis, axis.ticks);\n                    // find labelWidth/Height for axis\n                    measureTickLabels(axis);\n                });\n\n                // with all dimensions calculated, we can compute the\n                // axis bounding boxes, start from the outside\n                // (reverse order)\n                for (i = allocatedAxes.length - 1; i >= 0; --i)\n                    allocateAxisBoxFirstPhase(allocatedAxes[i]);\n\n                // make sure we've got enough space for things that\n                // might stick out\n                adjustLayoutForThingsStickingOut();\n\n                $.each(allocatedAxes, function (_, axis) {\n                    allocateAxisBoxSecondPhase(axis);\n                });\n            }\n\n            plotWidth = surface.width - plotOffset.left - plotOffset.right;\n            plotHeight = surface.height - plotOffset.bottom - plotOffset.top;\n\n            // now we got the proper plot dimensions, we can compute the scaling\n            $.each(axes, function (_, axis) {\n                setTransformationHelpers(axis);\n            });\n\n            if (showGrid) {\n                drawAxisLabels();\n            }\n\n            insertLegend();\n        }\n\n        function setRange(axis) {\n            var opts = axis.options,\n                min = +(opts.min != null ? opts.min : axis.datamin),\n                max = +(opts.max != null ? opts.max : axis.datamax),\n                delta = max - min;\n\n            if (delta == 0.0) {\n                // Grafana fix: wide Y min and max using increased wideFactor\n                // when all series values are the same\n                var wideFactor = 0.25;\n                var widen = Math.abs(max == 0 ? 1 : max * wideFactor);\n\n                if (opts.min == null) {\n                  min -= widen;\n                }\n                // always widen max if we couldn't widen min to ensure we\n                // don't fall into min == max which doesn't work\n                if (opts.max == null || opts.min != null) {\n                  max += widen;\n                }\n            }\n            else {\n                // consider autoscaling\n                var margin = opts.autoscaleMargin;\n                if (margin != null) {\n                    if (opts.min == null) {\n                        min -= delta * margin;\n                        // make sure we don't go below zero if all values\n                        // are positive\n                        if (min < 0 && axis.datamin != null && axis.datamin >= 0)\n                            min = 0;\n                    }\n                    if (opts.max == null) {\n                        max += delta * margin;\n                        if (max > 0 && axis.datamax != null && axis.datamax <= 0)\n                            max = 0;\n                    }\n                }\n            }\n            axis.min = min;\n            axis.max = max;\n        }\n\n        function setupTickGeneration(axis) {\n            var opts = axis.options;\n\n            // estimate number of ticks\n            var noTicks;\n            if (typeof opts.ticks == \"number\" && opts.ticks > 0)\n                noTicks = opts.ticks;\n            else\n                // heuristic based on the model a*sqrt(x) fitted to\n                // some data points that seemed reasonable\n                noTicks = 0.3 * Math.sqrt(axis.direction == \"x\" ? surface.width : surface.height);\n\n            var delta = (axis.max - axis.min) / noTicks,\n                dec = -Math.floor(Math.log(delta) / Math.LN10),\n                maxDec = opts.tickDecimals;\n\n            if (maxDec != null && dec > maxDec) {\n                dec = maxDec;\n            }\n\n            var magn = Math.pow(10, -dec),\n                norm = delta / magn, // norm is between 1.0 and 10.0\n                size;\n\n            if (norm < 1.5) {\n                size = 1;\n            } else if (norm < 3) {\n                size = 2;\n                // special case for 2.5, requires an extra decimal\n                if (norm > 2.25 && (maxDec == null || dec + 1 <= maxDec)) {\n                    size = 2.5;\n                    ++dec;\n                }\n            } else if (norm < 7.5) {\n                size = 5;\n            } else {\n                size = 10;\n            }\n\n            size *= magn;\n\n            if (opts.minTickSize != null && size < opts.minTickSize) {\n                size = opts.minTickSize;\n            }\n\n            axis.delta = delta;\n            axis.tickDecimals = Math.max(0, maxDec != null ? maxDec : dec);\n            axis.tickSize = opts.tickSize || size;\n            // grafana addition\n            axis.scaledDecimals = axis.tickDecimals - Math.floor(Math.log(axis.tickSize) / Math.LN10);\n\n            // Time mode was moved to a plug-in in 0.8, and since so many people use it\n            // we'll add an especially friendly reminder to make sure they included it.\n\n            if (opts.mode == \"time\" && !axis.tickGenerator) {\n                throw new Error(\"Time mode requires the flot.time plugin.\");\n            }\n\n            // Flot supports base-10 axes; any other mode else is handled by a plug-in,\n            // like flot.time.js.\n\n            if (!axis.tickGenerator) {\n\n                axis.tickGenerator = function (axis) {\n\n                    var ticks = [],\n                        start = floorInBase(axis.min, axis.tickSize),\n                        i = 0,\n                        v = Number.NaN,\n                        prev;\n\n                    do {\n                        prev = v;\n                        v = start + i * axis.tickSize;\n                        ticks.push(v);\n                        ++i;\n                    } while (v < axis.max && v != prev);\n                    return ticks;\n                };\n\n\t\t\t\taxis.tickFormatter = function (value, axis) {\n\n\t\t\t\t\tvar factor = axis.tickDecimals ? Math.pow(10, axis.tickDecimals) : 1;\n\t\t\t\t\tvar formatted = \"\" + Math.round(value * factor) / factor;\n\n\t\t\t\t\t// If tickDecimals was specified, ensure that we have exactly that\n\t\t\t\t\t// much precision; otherwise default to the value's own precision.\n\n\t\t\t\t\tif (axis.tickDecimals != null) {\n\t\t\t\t\t\tvar decimal = formatted.indexOf(\".\");\n\t\t\t\t\t\tvar precision = decimal == -1 ? 0 : formatted.length - decimal - 1;\n\t\t\t\t\t\tif (precision < axis.tickDecimals) {\n\t\t\t\t\t\t\treturn (precision ? formatted : formatted + \".\") + (\"\" + factor).substr(1, axis.tickDecimals - precision);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n                    return formatted;\n                };\n            }\n\n            if ($.isFunction(opts.tickFormatter))\n                axis.tickFormatter = function (v, axis) { return \"\" + opts.tickFormatter(v, axis); };\n\n            if (opts.alignTicksWithAxis != null) {\n                var otherAxis = (axis.direction == \"x\" ? xaxes : yaxes)[opts.alignTicksWithAxis - 1];\n                if (otherAxis && otherAxis.used && otherAxis != axis) {\n                    // consider snapping min/max to outermost nice ticks\n                    var niceTicks = axis.tickGenerator(axis);\n                    if (niceTicks.length > 0) {\n                        if (opts.min == null)\n                            axis.min = Math.min(axis.min, niceTicks[0]);\n                        if (opts.max == null && niceTicks.length > 1)\n                            axis.max = Math.max(axis.max, niceTicks[niceTicks.length - 1]);\n                    }\n\n                    axis.tickGenerator = function (axis) {\n                        // copy ticks, scaled to this axis\n                        var ticks = [], v, i;\n                        for (i = 0; i < otherAxis.ticks.length; ++i) {\n                            v = (otherAxis.ticks[i].v - otherAxis.min) / (otherAxis.max - otherAxis.min);\n                            v = axis.min + v * (axis.max - axis.min);\n                            ticks.push(v);\n                        }\n                        return ticks;\n                    };\n\n                    // we might need an extra decimal since forced\n                    // ticks don't necessarily fit naturally\n                    if (!axis.mode && opts.tickDecimals == null) {\n                        var extraDec = Math.max(0, -Math.floor(Math.log(axis.delta) / Math.LN10) + 1),\n                            ts = axis.tickGenerator(axis);\n\n                        // only proceed if the tick interval rounded\n                        // with an extra decimal doesn't give us a\n                        // zero at end\n                        if (!(ts.length > 1 && /\\..*0$/.test((ts[1] - ts[0]).toFixed(extraDec))))\n                            axis.tickDecimals = extraDec;\n                    }\n                }\n            }\n        }\n\n        function setTicks(axis) {\n            var oticks = axis.options.ticks, ticks = [];\n            if (oticks == null || (typeof oticks == \"number\" && oticks > 0))\n                ticks = axis.tickGenerator(axis);\n            else if (oticks) {\n                if ($.isFunction(oticks))\n                    // generate the ticks\n                    ticks = oticks(axis);\n                else\n                    ticks = oticks;\n            }\n\n            // clean up/labelify the supplied ticks, copy them over\n            var i, v;\n            axis.ticks = [];\n            for (i = 0; i < ticks.length; ++i) {\n                var label = null;\n                var t = ticks[i];\n                if (typeof t == \"object\") {\n                    v = +t[0];\n                    if (t.length > 1)\n                        label = t[1];\n                }\n                else\n                    v = +t;\n                if (label == null)\n                    label = axis.tickFormatter(v, axis);\n                if (!isNaN(v))\n                    axis.ticks.push({ v: v, label: label });\n            }\n        }\n\n        function snapRangeToTicks(axis, ticks) {\n            if (axis.options.autoscaleMargin && ticks.length > 0) {\n                // snap to ticks\n                if (axis.options.min == null)\n                    axis.min = Math.min(axis.min, ticks[0].v);\n                if (axis.options.max == null && ticks.length > 1)\n                    axis.max = Math.max(axis.max, ticks[ticks.length - 1].v);\n            }\n        }\n\n        function draw() {\n\n            surface.clear();\n\n            executeHooks(hooks.drawBackground, [ctx]);\n\n            var grid = options.grid;\n\n            // draw background, if any\n            if (grid.show && grid.backgroundColor)\n                drawBackground();\n\n            if (grid.show && !grid.aboveData) {\n                drawGrid();\n            }\n\n            for (var i = 0; i < series.length; ++i) {\n                executeHooks(hooks.drawSeries, [ctx, series[i]]);\n                drawSeries(series[i]);\n            }\n\n            executeHooks(hooks.draw, [ctx]);\n\n            if (grid.show && grid.aboveData) {\n                drawGrid();\n            }\n\n            surface.render();\n\n            // A draw implies that either the axes or data have changed, so we\n            // should probably update the overlay highlights as well.\n\n            triggerRedrawOverlay();\n        }\n\n        function extractRange(ranges, coord) {\n            var axis, from, to, key, axes = allAxes();\n\n            for (var i = 0; i < axes.length; ++i) {\n                axis = axes[i];\n                if (axis.direction == coord) {\n                    key = coord + axis.n + \"axis\";\n                    if (!ranges[key] && axis.n == 1)\n                        key = coord + \"axis\"; // support x1axis as xaxis\n                    if (ranges[key]) {\n                        from = ranges[key].from;\n                        to = ranges[key].to;\n                        break;\n                    }\n                }\n            }\n\n            // backwards-compat stuff - to be removed in future\n            if (!ranges[key]) {\n                axis = coord == \"x\" ? xaxes[0] : yaxes[0];\n                from = ranges[coord + \"1\"];\n                to = ranges[coord + \"2\"];\n            }\n\n            // auto-reverse as an added bonus\n            if (from != null && to != null && from > to) {\n                var tmp = from;\n                from = to;\n                to = tmp;\n            }\n\n            return { from: from, to: to, axis: axis };\n        }\n\n        function drawBackground() {\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            ctx.fillStyle = getColorOrGradient(options.grid.backgroundColor, plotHeight, 0, \"rgba(255, 255, 255, 0)\");\n            ctx.fillRect(0, 0, plotWidth, plotHeight);\n            ctx.restore();\n        }\n\n        function drawGrid() {\n            var i, axes, bw, bc;\n\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            // draw markings\n            var markings = options.grid.markings;\n            if (markings) {\n                if ($.isFunction(markings)) {\n                    axes = plot.getAxes();\n                    // xmin etc. is backwards compatibility, to be\n                    // removed in the future\n                    axes.xmin = axes.xaxis.min;\n                    axes.xmax = axes.xaxis.max;\n                    axes.ymin = axes.yaxis.min;\n                    axes.ymax = axes.yaxis.max;\n\n                    markings = markings(axes);\n                }\n\n                for (i = 0; i < markings.length; ++i) {\n                    var m = markings[i],\n                        xrange = extractRange(m, \"x\"),\n                        yrange = extractRange(m, \"y\");\n\n                    // fill in missing\n                    if (xrange.from == null)\n                        xrange.from = xrange.axis.min;\n                    if (xrange.to == null)\n                        xrange.to = xrange.axis.max;\n                    if (yrange.from == null)\n                        yrange.from = yrange.axis.min;\n                    if (yrange.to == null)\n                        yrange.to = yrange.axis.max;\n\n                    // clip\n                    if (xrange.to < xrange.axis.min || xrange.from > xrange.axis.max ||\n                        yrange.to < yrange.axis.min || yrange.from > yrange.axis.max)\n                        continue;\n\n                    xrange.from = Math.max(xrange.from, xrange.axis.min);\n                    xrange.to = Math.min(xrange.to, xrange.axis.max);\n                    yrange.from = Math.max(yrange.from, yrange.axis.min);\n                    yrange.to = Math.min(yrange.to, yrange.axis.max);\n\n                    var xequal = xrange.from === xrange.to,\n                        yequal = yrange.from === yrange.to;\n\n                    if (xequal && yequal) {\n                        continue;\n                    }\n\n                    // then draw\n                    xrange.from = Math.floor(xrange.axis.p2c(xrange.from));\n                    xrange.to = Math.floor(xrange.axis.p2c(xrange.to));\n                    yrange.from = Math.floor(yrange.axis.p2c(yrange.from));\n                    yrange.to = Math.floor(yrange.axis.p2c(yrange.to));\n\n                    if (xequal || yequal) {\n                        var lineWidth = m.lineWidth || options.grid.markingsLineWidth,\n                            subPixel = lineWidth % 2 ? 0.5 : 0;\n                        ctx.beginPath();\n                        ctx.strokeStyle = m.color || options.grid.markingsColor;\n                        ctx.lineWidth = lineWidth;\n                        if (xequal) {\n                            ctx.moveTo(xrange.to + subPixel, yrange.from);\n                            ctx.lineTo(xrange.to + subPixel, yrange.to);\n                        } else {\n                            ctx.moveTo(xrange.from, yrange.to + subPixel);\n                            ctx.lineTo(xrange.to, yrange.to + subPixel);\n                        }\n                        ctx.stroke();\n                    } else {\n                        ctx.fillStyle = m.color || options.grid.markingsColor;\n                        ctx.fillRect(xrange.from, yrange.to,\n                                     xrange.to - xrange.from,\n                                     yrange.from - yrange.to);\n                    }\n                }\n            }\n\n            // draw the ticks\n            axes = allAxes();\n            bw = options.grid.borderWidth;\n\n            for (var j = 0; j < axes.length; ++j) {\n                var axis = axes[j], box = axis.box,\n                    t = axis.tickLength, x, y, xoff, yoff;\n                if (!axis.show || axis.ticks.length == 0)\n                    continue;\n\n                ctx.lineWidth = 1;\n\n                // find the edges\n                if (axis.direction == \"x\") {\n                    x = 0;\n                    if (t == \"full\")\n                        y = (axis.position == \"top\" ? 0 : plotHeight);\n                    else\n                        y = box.top - plotOffset.top + (axis.position == \"top\" ? box.height : 0);\n                }\n                else {\n                    y = 0;\n                    if (t == \"full\")\n                        x = (axis.position == \"left\" ? 0 : plotWidth);\n                    else\n                        x = box.left - plotOffset.left + (axis.position == \"left\" ? box.width : 0);\n                }\n\n                // draw tick bar\n                if (!axis.innermost) {\n                    ctx.strokeStyle = axis.options.color;\n                    ctx.beginPath();\n                    xoff = yoff = 0;\n                    if (axis.direction == \"x\")\n                        xoff = plotWidth + 1;\n                    else\n                        yoff = plotHeight + 1;\n\n                    if (ctx.lineWidth == 1) {\n                        if (axis.direction == \"x\") {\n                            y = Math.floor(y) + 0.5;\n                        } else {\n                            x = Math.floor(x) + 0.5;\n                        }\n                    }\n\n                    ctx.moveTo(x, y);\n                    ctx.lineTo(x + xoff, y + yoff);\n                    ctx.stroke();\n                }\n\n                // draw ticks\n\n                ctx.strokeStyle = axis.options.tickColor;\n\n                ctx.beginPath();\n                for (i = 0; i < axis.ticks.length; ++i) {\n                    var v = axis.ticks[i].v;\n\n                    xoff = yoff = 0;\n\n                    if (isNaN(v) || v < axis.min || v > axis.max\n                        // skip those lying on the axes if we got a border\n                        || (t == \"full\"\n                            && ((typeof bw == \"object\" && bw[axis.position] > 0) || bw > 0)\n                            && (v == axis.min || v == axis.max)))\n                        continue;\n\n                    if (axis.direction == \"x\") {\n                        x = axis.p2c(v);\n                        yoff = t == \"full\" ? -plotHeight : t;\n\n                        if (axis.position == \"top\")\n                            yoff = -yoff;\n                    }\n                    else {\n                        y = axis.p2c(v);\n                        xoff = t == \"full\" ? -plotWidth : t;\n\n                        if (axis.position == \"left\")\n                            xoff = -xoff;\n                    }\n\n                    if (ctx.lineWidth == 1) {\n                        if (axis.direction == \"x\")\n                            x = Math.floor(x) + 0.5;\n                        else\n                            y = Math.floor(y) + 0.5;\n                    }\n\n                    ctx.moveTo(x, y);\n                    ctx.lineTo(x + xoff, y + yoff);\n                }\n\n                ctx.stroke();\n            }\n\n\n            // draw border\n            if (bw) {\n                // If either borderWidth or borderColor is an object, then draw the border\n                // line by line instead of as one rectangle\n                bc = options.grid.borderColor;\n                if(typeof bw == \"object\" || typeof bc == \"object\") {\n                    if (typeof bw !== \"object\") {\n                        bw = {top: bw, right: bw, bottom: bw, left: bw};\n                    }\n                    if (typeof bc !== \"object\") {\n                        bc = {top: bc, right: bc, bottom: bc, left: bc};\n                    }\n\n                    if (bw.top > 0) {\n                        ctx.strokeStyle = bc.top;\n                        ctx.lineWidth = bw.top;\n                        ctx.beginPath();\n                        ctx.moveTo(0 - bw.left, 0 - bw.top/2);\n                        ctx.lineTo(plotWidth, 0 - bw.top/2);\n                        ctx.stroke();\n                    }\n\n                    if (bw.right > 0) {\n                        ctx.strokeStyle = bc.right;\n                        ctx.lineWidth = bw.right;\n                        ctx.beginPath();\n                        ctx.moveTo(plotWidth + bw.right / 2, 0 - bw.top);\n                        ctx.lineTo(plotWidth + bw.right / 2, plotHeight);\n                        ctx.stroke();\n                    }\n\n                    if (bw.bottom > 0) {\n                        ctx.strokeStyle = bc.bottom;\n                        ctx.lineWidth = bw.bottom;\n                        ctx.beginPath();\n                        ctx.moveTo(plotWidth + bw.right, plotHeight + bw.bottom / 2);\n                        ctx.lineTo(0, plotHeight + bw.bottom / 2);\n                        ctx.stroke();\n                    }\n\n                    if (bw.left > 0) {\n                        ctx.strokeStyle = bc.left;\n                        ctx.lineWidth = bw.left;\n                        ctx.beginPath();\n                        ctx.moveTo(0 - bw.left/2, plotHeight + bw.bottom);\n                        ctx.lineTo(0- bw.left/2, 0);\n                        ctx.stroke();\n                    }\n                }\n                else {\n                    ctx.lineWidth = bw;\n                    ctx.strokeStyle = options.grid.borderColor;\n                    ctx.strokeRect(-bw/2, -bw/2, plotWidth + bw, plotHeight + bw);\n                }\n            }\n\n            ctx.restore();\n        }\n\n        function drawAxisLabels() {\n\n            $.each(allAxes(), function (_, axis) {\n                var box = axis.box,\n                    legacyStyles = axis.direction + \"Axis \" + axis.direction + axis.n + \"Axis\",\n                    layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + legacyStyles,\n                    font = axis.options.font || \"flot-tick-label tickLabel\",\n                    tick, x, y, halign, valign;\n\n                // Remove text before checking for axis.show and ticks.length;\n                // otherwise plugins, like flot-tickrotor, that draw their own\n                // tick labels will end up with both theirs and the defaults.\n\n                surface.removeText(layer);\n\n                if (!axis.show || axis.ticks.length == 0)\n                    return;\n\n                for (var i = 0; i < axis.ticks.length; ++i) {\n\n                    tick = axis.ticks[i];\n                    if (!tick.label || tick.v < axis.min || tick.v > axis.max)\n                        continue;\n\n                    if (axis.direction == \"x\") {\n                        halign = \"center\";\n                        x = plotOffset.left + axis.p2c(tick.v);\n                        if (axis.position == \"bottom\") {\n                            y = box.top + box.padding + box.eventSectionPadding;\n                        } else {\n                            y = box.top + box.height - box.padding;\n                            valign = \"bottom\";\n                        }\n                    } else {\n                        valign = \"middle\";\n                        y = plotOffset.top + axis.p2c(tick.v);\n                        if (axis.position == \"left\") {\n                            x = box.left + box.width - box.padding;\n                            halign = \"right\";\n                        } else {\n                            x = box.left + box.padding;\n                        }\n                    }\n\n                    surface.addText(layer, x, y, tick.label, font, null, null, halign, valign);\n                }\n            });\n        }\n\n        function drawSeries(series) {\n            if (series.lines.show)\n                drawSeriesLines(series);\n            if (series.bars.show)\n                drawSeriesBars(series);\n            if (series.points.show)\n                drawSeriesPoints(series);\n        }\n\n        function drawSeriesLines(series) {\n            function plotLine(datapoints, xoffset, yoffset, axisx, axisy) {\n                var points = datapoints.points,\n                    ps = datapoints.pointsize,\n                    prevx = null, prevy = null;\n\n                ctx.beginPath();\n                for (var i = ps; i < points.length; i += ps) {\n                    var x1 = points[i - ps], y1 = points[i - ps + 1],\n                        x2 = points[i], y2 = points[i + 1];\n\n                    if (x1 == null || x2 == null)\n                        continue;\n\n                    // clip with ymin\n                    if (y1 <= y2 && y1 < axisy.min) {\n                        if (y2 < axisy.min)\n                            continue;   // line segment is outside\n                        // compute new intersection point\n                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y1 = axisy.min;\n                    }\n                    else if (y2 <= y1 && y2 < axisy.min) {\n                        if (y1 < axisy.min)\n                            continue;\n                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y2 = axisy.min;\n                    }\n\n                    // clip with ymax\n                    if (y1 >= y2 && y1 > axisy.max) {\n                        if (y2 > axisy.max)\n                            continue;\n                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y1 = axisy.max;\n                    }\n                    else if (y2 >= y1 && y2 > axisy.max) {\n                        if (y1 > axisy.max)\n                            continue;\n                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y2 = axisy.max;\n                    }\n\n                    // clip with xmin\n                    if (x1 <= x2 && x1 < axisx.min) {\n                        if (x2 < axisx.min)\n                            continue;\n                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x1 = axisx.min;\n                    }\n                    else if (x2 <= x1 && x2 < axisx.min) {\n                        if (x1 < axisx.min)\n                            continue;\n                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x2 = axisx.min;\n                    }\n\n                    // clip with xmax\n                    if (x1 >= x2 && x1 > axisx.max) {\n                        if (x2 > axisx.max)\n                            continue;\n                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x1 = axisx.max;\n                    }\n                    else if (x2 >= x1 && x2 > axisx.max) {\n                        if (x1 > axisx.max)\n                            continue;\n                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x2 = axisx.max;\n                    }\n\n                    if (x1 != prevx || y1 != prevy)\n                        ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);\n\n                    prevx = x2;\n                    prevy = y2;\n                    ctx.lineTo(axisx.p2c(x2) + xoffset, axisy.p2c(y2) + yoffset);\n                }\n                ctx.stroke();\n            }\n\n            function plotLineArea(datapoints, axisx, axisy) {\n                var points = datapoints.points,\n                    ps = datapoints.pointsize,\n                    bottom = Math.min(Math.max(0, axisy.min), axisy.max),\n                    i = 0, top, areaOpen = false,\n                    ypos = 1, segmentStart = 0, segmentEnd = 0;\n\n                // we process each segment in two turns, first forward\n                // direction to sketch out top, then once we hit the\n                // end we go backwards to sketch the bottom\n                while (true) {\n                    if (ps > 0 && i > points.length + ps)\n                        break;\n\n                    i += ps; // ps is negative if going backwards\n\n                    var x1 = points[i - ps],\n                        y1 = points[i - ps + ypos],\n                        x2 = points[i], y2 = points[i + ypos];\n\n                    if (areaOpen) {\n                        if (ps > 0 && x1 != null && x2 == null) {\n                            // at turning point\n                            segmentEnd = i;\n                            ps = -ps;\n                            ypos = 2;\n                            continue;\n                        }\n\n                        if (ps < 0 && i == segmentStart + ps) {\n                            // done with the reverse sweep\n                            ctx.fill();\n                            areaOpen = false;\n                            ps = -ps;\n                            ypos = 1;\n                            i = segmentStart = segmentEnd + ps;\n                            continue;\n                        }\n                    }\n\n                    if (x1 == null || x2 == null)\n                        continue;\n\n                    // clip x values\n\n                    // clip with xmin\n                    if (x1 <= x2 && x1 < axisx.min) {\n                        if (x2 < axisx.min)\n                            continue;\n                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x1 = axisx.min;\n                    }\n                    else if (x2 <= x1 && x2 < axisx.min) {\n                        if (x1 < axisx.min)\n                            continue;\n                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x2 = axisx.min;\n                    }\n\n                    // clip with xmax\n                    if (x1 >= x2 && x1 > axisx.max) {\n                        if (x2 > axisx.max)\n                            continue;\n                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x1 = axisx.max;\n                    }\n                    else if (x2 >= x1 && x2 > axisx.max) {\n                        if (x1 > axisx.max)\n                            continue;\n                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x2 = axisx.max;\n                    }\n\n                    if (!areaOpen) {\n                        // open area\n                        ctx.beginPath();\n                        ctx.moveTo(axisx.p2c(x1), axisy.p2c(bottom));\n                        areaOpen = true;\n                    }\n\n                    // now first check the case where both is outside\n                    if (y1 >= axisy.max && y2 >= axisy.max) {\n                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.max));\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.max));\n                        continue;\n                    }\n                    else if (y1 <= axisy.min && y2 <= axisy.min) {\n                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.min));\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.min));\n                        continue;\n                    }\n\n                    // else it's a bit more complicated, there might\n                    // be a flat maxed out rectangle first, then a\n                    // triangular cutout or reverse; to find these\n                    // keep track of the current x values\n                    var x1old = x1, x2old = x2;\n\n                    // clip the y values, without shortcutting, we\n                    // go through all cases in turn\n\n                    // clip with ymin\n                    if (y1 <= y2 && y1 < axisy.min && y2 >= axisy.min) {\n                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y1 = axisy.min;\n                    }\n                    else if (y2 <= y1 && y2 < axisy.min && y1 >= axisy.min) {\n                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y2 = axisy.min;\n                    }\n\n                    // clip with ymax\n                    if (y1 >= y2 && y1 > axisy.max && y2 <= axisy.max) {\n                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y1 = axisy.max;\n                    }\n                    else if (y2 >= y1 && y2 > axisy.max && y1 <= axisy.max) {\n                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y2 = axisy.max;\n                    }\n\n                    // if the x value was changed we got a rectangle\n                    // to fill\n                    if (x1 != x1old) {\n                        ctx.lineTo(axisx.p2c(x1old), axisy.p2c(y1));\n                        // it goes to (x1, y1), but we fill that below\n                    }\n\n                    // fill triangular section, this sometimes result\n                    // in redundant points if (x1, y1) hasn't changed\n                    // from previous line to, but we just ignore that\n                    ctx.lineTo(axisx.p2c(x1), axisy.p2c(y1));\n                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\n\n                    // fill the other rectangle if it's there\n                    if (x2 != x2old) {\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\n                        ctx.lineTo(axisx.p2c(x2old), axisy.p2c(y2));\n                    }\n                }\n            }\n\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n            ctx.lineJoin = \"round\";\n\n            var lw = series.lines.lineWidth,\n                sw = series.shadowSize;\n            // FIXME: consider another form of shadow when filling is turned on\n            if (lw > 0 && sw > 0) {\n                // draw shadow as a thick and thin line with transparency\n                ctx.lineWidth = sw;\n                ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\n                // position shadow at angle from the mid of line\n                var angle = Math.PI/18;\n                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/2), Math.cos(angle) * (lw/2 + sw/2), series.xaxis, series.yaxis);\n                ctx.lineWidth = sw/2;\n                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/4), Math.cos(angle) * (lw/2 + sw/4), series.xaxis, series.yaxis);\n            }\n\n            ctx.lineWidth = lw;\n            ctx.strokeStyle = series.color;\n            var fillStyle = getFillStyle(series.lines, series.color, 0, plotHeight);\n            if (fillStyle) {\n                ctx.fillStyle = fillStyle;\n                plotLineArea(series.datapoints, series.xaxis, series.yaxis);\n            }\n\n            if (lw > 0)\n                plotLine(series.datapoints, 0, 0, series.xaxis, series.yaxis);\n            ctx.restore();\n        }\n\n        function drawSeriesPoints(series) {\n            function plotPoints(datapoints, radius, fillStyle, offset, shadow, axisx, axisy, symbol) {\n                var points = datapoints.points, ps = datapoints.pointsize;\n\n                for (var i = 0; i < points.length; i += ps) {\n                    var x = points[i], y = points[i + 1];\n                    if (x == null || x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)\n                        continue;\n\n                    ctx.beginPath();\n                    x = axisx.p2c(x);\n                    y = axisy.p2c(y) + offset;\n                    if (symbol == \"circle\")\n                        ctx.arc(x, y, radius, 0, shadow ? Math.PI : Math.PI * 2, false);\n                    else\n                        symbol(ctx, x, y, radius, shadow);\n                    ctx.closePath();\n\n                    if (fillStyle) {\n                        ctx.fillStyle = fillStyle;\n                        ctx.fill();\n                    }\n                    ctx.stroke();\n                }\n            }\n\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            var lw = series.points.lineWidth,\n                sw = series.shadowSize,\n                radius = series.points.radius,\n                symbol = series.points.symbol;\n\n            // If the user sets the line width to 0, we change it to a very\n            // small value. A line width of 0 seems to force the default of 1.\n            // Doing the conditional here allows the shadow setting to still be\n            // optional even with a lineWidth of 0.\n\n            if( lw == 0 )\n                lw = 0.0001;\n\n            if (lw > 0 && sw > 0) {\n                // draw shadow in two steps\n                var w = sw / 2;\n                ctx.lineWidth = w;\n                ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\n                plotPoints(series.datapoints, radius, null, w + w/2, true,\n                           series.xaxis, series.yaxis, symbol);\n\n                ctx.strokeStyle = \"rgba(0,0,0,0.2)\";\n                plotPoints(series.datapoints, radius, null, w/2, true,\n                           series.xaxis, series.yaxis, symbol);\n            }\n\n            ctx.lineWidth = lw;\n            ctx.strokeStyle = series.color;\n            plotPoints(series.datapoints, radius,\n                       getFillStyle(series.points, series.color), 0, false,\n                       series.xaxis, series.yaxis, symbol);\n            ctx.restore();\n        }\n\n        function drawBar(x, y, b, barLeft, barRight, fillStyleCallback, axisx, axisy, c, horizontal, lineWidth) {\n            var left, right, bottom, top,\n                drawLeft, drawRight, drawTop, drawBottom,\n                tmp;\n\n            // in horizontal mode, we start the bar from the left\n            // instead of from the bottom so it appears to be\n            // horizontal rather than vertical\n            if (horizontal) {\n                drawBottom = drawRight = drawTop = true;\n                drawLeft = false;\n                left = b;\n                right = x;\n                top = y + barLeft;\n                bottom = y + barRight;\n\n                // account for negative bars\n                if (right < left) {\n                    tmp = right;\n                    right = left;\n                    left = tmp;\n                    drawLeft = true;\n                    drawRight = false;\n                }\n            }\n            else {\n                drawLeft = drawRight = drawTop = true;\n                drawBottom = false;\n                left = x + barLeft;\n                right = x + barRight;\n                bottom = b;\n                top = y;\n\n                // account for negative bars\n                if (top < bottom) {\n                    tmp = top;\n                    top = bottom;\n                    bottom = tmp;\n                    drawBottom = true;\n                    drawTop = false;\n                }\n            }\n\n            // clip\n            if (right < axisx.min || left > axisx.max ||\n                top < axisy.min || bottom > axisy.max)\n                return;\n\n            if (left < axisx.min) {\n                left = axisx.min;\n                drawLeft = false;\n            }\n\n            if (right > axisx.max) {\n                right = axisx.max;\n                drawRight = false;\n            }\n\n            if (bottom < axisy.min) {\n                bottom = axisy.min;\n                drawBottom = false;\n            }\n\n            if (top > axisy.max) {\n                top = axisy.max;\n                drawTop = false;\n            }\n\n            left = axisx.p2c(left);\n            bottom = axisy.p2c(bottom);\n            right = axisx.p2c(right);\n            top = axisy.p2c(top);\n\n            // fill the bar\n            if (fillStyleCallback) {\n                c.fillStyle = fillStyleCallback(bottom, top);\n                c.fillRect(left, top, right - left, bottom - top)\n            }\n\n            // draw outline\n            if (lineWidth > 0 && (drawLeft || drawRight || drawTop || drawBottom)) {\n                c.beginPath();\n\n                // FIXME: inline moveTo is buggy with excanvas\n                c.moveTo(left, bottom);\n                if (drawLeft)\n                    c.lineTo(left, top);\n                else\n                    c.moveTo(left, top);\n                if (drawTop)\n                    c.lineTo(right, top);\n                else\n                    c.moveTo(right, top);\n                if (drawRight)\n                    c.lineTo(right, bottom);\n                else\n                    c.moveTo(right, bottom);\n                if (drawBottom)\n                    c.lineTo(left, bottom);\n                else\n                    c.moveTo(left, bottom);\n                c.stroke();\n            }\n        }\n\n        function drawSeriesBars(series) {\n            function plotBars(datapoints, barLeft, barRight, fillStyleCallback, axisx, axisy) {\n                var points = datapoints.points, ps = datapoints.pointsize;\n\n                for (var i = 0; i < points.length; i += ps) {\n                    if (points[i] == null)\n                        continue;\n                    drawBar(points[i], points[i + 1], points[i + 2], barLeft, barRight, fillStyleCallback, axisx, axisy, ctx, series.bars.horizontal, series.bars.lineWidth);\n                }\n            }\n\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            // FIXME: figure out a way to add shadows (for instance along the right edge)\n            ctx.lineWidth = series.bars.lineWidth;\n            ctx.strokeStyle = series.color;\n\n            var barLeft;\n\n            switch (series.bars.align) {\n                case \"left\":\n                    barLeft = 0;\n                    break;\n                case \"right\":\n                    barLeft = -series.bars.barWidth;\n                    break;\n                default:\n                    barLeft = -series.bars.barWidth / 2;\n            }\n\n            var fillStyleCallback = series.bars.fill ? function (bottom, top) { return getFillStyle(series.bars, series.color, bottom, top); } : null;\n            plotBars(series.datapoints, barLeft, barLeft + series.bars.barWidth, fillStyleCallback, series.xaxis, series.yaxis);\n            ctx.restore();\n        }\n\n        function getFillStyle(filloptions, seriesColor, bottom, top) {\n            var fill = filloptions.fill;\n            if (!fill)\n                return null;\n\n            if (filloptions.fillColor)\n                return getColorOrGradient(filloptions.fillColor, bottom, top, seriesColor);\n\n            var c = $.color.parse(seriesColor);\n            c.a = typeof fill == \"number\" ? fill : 0.4;\n            c.normalize();\n            return c.toString();\n        }\n\n        function insertLegend() {\n\n            if (options.legend.container != null) {\n                $(options.legend.container).html(\"\");\n            } else {\n                placeholder.find(\".legend\").remove();\n            }\n\n            if (!options.legend.show) {\n                return;\n            }\n\n            var fragments = [], entries = [], rowStarted = false,\n                lf = options.legend.labelFormatter, s, label;\n\n            // Build a list of legend entries, with each having a label and a color\n\n            for (var i = 0; i < series.length; ++i) {\n                s = series[i];\n                if (s.label) {\n                    label = lf ? lf(s.label, s) : s.label;\n                    if (label) {\n                        entries.push({\n                            label: label,\n                            color: s.color\n                        });\n                    }\n                }\n            }\n\n            // Sort the legend using either the default or a custom comparator\n\n            if (options.legend.sorted) {\n                if ($.isFunction(options.legend.sorted)) {\n                    entries.sort(options.legend.sorted);\n                } else if (options.legend.sorted == \"reverse\") {\n                \tentries.reverse();\n                } else {\n                    var ascending = options.legend.sorted != \"descending\";\n                    entries.sort(function(a, b) {\n                        return a.label == b.label ? 0 : (\n                            (a.label < b.label) != ascending ? 1 : -1   // Logical XOR\n                        );\n                    });\n                }\n            }\n\n            // Generate markup for the list of entries, in their final order\n\n            for (var i = 0; i < entries.length; ++i) {\n\n                var entry = entries[i];\n\n                if (i % options.legend.noColumns == 0) {\n                    if (rowStarted)\n                        fragments.push('</tr>');\n                    fragments.push('<tr>');\n                    rowStarted = true;\n                }\n\n                fragments.push(\n                    '<td class=\"legendColorBox\"><div style=\"border:1px solid ' + options.legend.labelBoxBorderColor + ';padding:1px\"><div style=\"width:4px;height:0;border:5px solid ' + entry.color + ';overflow:hidden\"></div></div></td>' +\n                    '<td class=\"legendLabel\">' + entry.label + '</td>'\n                );\n            }\n\n            if (rowStarted)\n                fragments.push('</tr>');\n\n            if (fragments.length == 0)\n                return;\n\n            var table = '<table style=\"font-size:smaller;color:' + options.grid.color + '\">' + fragments.join(\"\") + '</table>';\n            if (options.legend.container != null)\n                $(options.legend.container).html(table);\n            else {\n                var pos = \"\",\n                    p = options.legend.position,\n                    m = options.legend.margin;\n                if (m[0] == null)\n                    m = [m, m];\n                if (p.charAt(0) == \"n\")\n                    pos += 'top:' + (m[1] + plotOffset.top) + 'px;';\n                else if (p.charAt(0) == \"s\")\n                    pos += 'bottom:' + (m[1] + plotOffset.bottom) + 'px;';\n                if (p.charAt(1) == \"e\")\n                    pos += 'right:' + (m[0] + plotOffset.right) + 'px;';\n                else if (p.charAt(1) == \"w\")\n                    pos += 'left:' + (m[0] + plotOffset.left) + 'px;';\n                var legend = $('<div class=\"legend\">' + table.replace('style=\"', 'style=\"position:absolute;' + pos +';') + '</div>').appendTo(placeholder);\n                if (options.legend.backgroundOpacity != 0.0) {\n                    // put in the transparent background\n                    // separately to avoid blended labels and\n                    // label boxes\n                    var c = options.legend.backgroundColor;\n                    if (c == null) {\n                        c = options.grid.backgroundColor;\n                        if (c && typeof c == \"string\")\n                            c = $.color.parse(c);\n                        else\n                            c = $.color.extract(legend, 'background-color');\n                        c.a = 1;\n                        c = c.toString();\n                    }\n                    var div = legend.children();\n                    $('<div style=\"position:absolute;width:' + div.width() + 'px;height:' + div.height() + 'px;' + pos +'background-color:' + c + ';\"> </div>').prependTo(legend).css('opacity', options.legend.backgroundOpacity);\n                }\n            }\n        }\n\n\n        // interactive features\n\n        var highlights = [],\n            redrawTimeout = null;\n\n        // returns the data item the mouse is over, or null if none is found\n        function findNearbyItem(mouseX, mouseY, seriesFilter) {\n            var maxDistance = options.grid.mouseActiveRadius,\n                smallestDistance = maxDistance * maxDistance + 1,\n                item = null, foundPoint = false, i, j, ps;\n\n            for (i = series.length - 1; i >= 0; --i) {\n                if (!seriesFilter(series[i]))\n                    continue;\n\n                var s = series[i],\n                    axisx = s.xaxis,\n                    axisy = s.yaxis,\n                    points = s.datapoints.points,\n                    mx = axisx.c2p(mouseX), // precompute some stuff to make the loop faster\n                    my = axisy.c2p(mouseY),\n                    maxx = maxDistance / axisx.scale,\n                    maxy = maxDistance / axisy.scale;\n\n                ps = s.datapoints.pointsize;\n                // with inverse transforms, we can't use the maxx/maxy\n                // optimization, sadly\n                if (axisx.options.inverseTransform)\n                    maxx = Number.MAX_VALUE;\n                if (axisy.options.inverseTransform)\n                    maxy = Number.MAX_VALUE;\n\n                if (s.lines.show || s.points.show) {\n                    for (j = 0; j < points.length; j += ps) {\n                        var x = points[j], y = points[j + 1];\n                        if (x == null)\n                            continue;\n\n                        // For points and lines, the cursor must be within a\n                        // certain distance to the data point\n                        if (x - mx > maxx || x - mx < -maxx ||\n                            y - my > maxy || y - my < -maxy)\n                            continue;\n\n                        // We have to calculate distances in pixels, not in\n                        // data units, because the scales of the axes may be different\n                        var dx = Math.abs(axisx.p2c(x) - mouseX),\n                            dy = Math.abs(axisy.p2c(y) - mouseY),\n                            dist = dx * dx + dy * dy; // we save the sqrt\n\n                        // use <= to ensure last point takes precedence\n                        // (last generally means on top of)\n                        if (dist < smallestDistance) {\n                            smallestDistance = dist;\n                            item = [i, j / ps];\n                        }\n                    }\n                }\n\n                if (s.bars.show && !item) { // no other point can be nearby\n\n                    var barLeft, barRight;\n\n                    switch (s.bars.align) {\n                        case \"left\":\n                            barLeft = 0;\n                            break;\n                        case \"right\":\n                            barLeft = -s.bars.barWidth;\n                            break;\n                        default:\n                            barLeft = -s.bars.barWidth / 2;\n                    }\n\n                    barRight = barLeft + s.bars.barWidth;\n\n                    for (j = 0; j < points.length; j += ps) {\n                        var x = points[j], y = points[j + 1], b = points[j + 2];\n                        if (x == null)\n                            continue;\n\n                        // for a bar graph, the cursor must be inside the bar\n                        if (series[i].bars.horizontal ?\n                            (mx <= Math.max(b, x) && mx >= Math.min(b, x) &&\n                             my >= y + barLeft && my <= y + barRight) :\n                            (mx >= x + barLeft && mx <= x + barRight &&\n                             my >= Math.min(b, y) && my <= Math.max(b, y)))\n                                item = [i, j / ps];\n                    }\n                }\n            }\n\n            if (item) {\n                i = item[0];\n                j = item[1];\n                ps = series[i].datapoints.pointsize;\n\n                return { datapoint: series[i].datapoints.points.slice(j * ps, (j + 1) * ps),\n                         dataIndex: j,\n                         series: series[i],\n                         seriesIndex: i };\n            }\n\n            return null;\n        }\n\n        function onMouseMove(e) {\n            if (options.grid.hoverable)\n                triggerClickHoverEvent(\"plothover\", e,\n                                       function (s) { return s[\"hoverable\"] != false; });\n        }\n\n        function onMouseLeave(e) {\n            if (options.grid.hoverable)\n                triggerClickHoverEvent(\"plothover\", e,\n                                       function (s) { return false; });\n        }\n\n        function onClick(e) {\n          if (plot.isSelecting) {\n            return;\n          }\n\n          triggerClickHoverEvent(\"plotclick\", e, function (s) { return s[\"clickable\"] != false; });\n        }\n\n        // trigger click or hover event (they send the same parameters\n        // so we share their code)\n        function triggerClickHoverEvent(eventname, event, seriesFilter) {\n            var offset = eventHolder.offset(),\n                canvasX = event.pageX - offset.left - plotOffset.left,\n                canvasY = event.pageY - offset.top - plotOffset.top,\n            pos = canvasToAxisCoords({ left: canvasX, top: canvasY });\n\n            pos.pageX = event.pageX;\n            pos.pageY = event.pageY;\n\n            // Add ctrlKey and metaKey to event\n            pos.ctrlKey = event.ctrlKey;\n            pos.metaKey = event.metaKey;\n\n            var item = findNearbyItem(canvasX, canvasY, seriesFilter);\n\n            if (item) {\n                // fill in mouse pos for any listeners out there\n                item.pageX = parseInt(item.series.xaxis.p2c(item.datapoint[0]) + offset.left + plotOffset.left, 10);\n                item.pageY = parseInt(item.series.yaxis.p2c(item.datapoint[1]) + offset.top + plotOffset.top, 10);\n            }\n\n            if (options.grid.autoHighlight) {\n                // clear auto-highlights\n                for (var i = 0; i < highlights.length; ++i) {\n                    var h = highlights[i];\n                    if (h.auto == eventname &&\n                        !(item && h.series == item.series &&\n                          h.point[0] == item.datapoint[0] &&\n                          h.point[1] == item.datapoint[1]))\n                        unhighlight(h.series, h.point);\n                }\n\n                if (item)\n                    highlight(item.series, item.datapoint, eventname);\n            }\n\n            placeholder.trigger(eventname, [ pos, item ]);\n        }\n\n        function triggerRedrawOverlay() {\n            var t = options.interaction.redrawOverlayInterval;\n            if (t == -1) {      // skip event queue\n                drawOverlay();\n                return;\n            }\n\n            if (!redrawTimeout)\n                redrawTimeout = setTimeout(drawOverlay, t);\n        }\n\n        function drawOverlay() {\n            redrawTimeout = null;\n\n            // draw highlights\n            octx.save();\n            overlay.clear();\n            octx.translate(plotOffset.left, plotOffset.top);\n\n            var i, hi;\n            for (i = 0; i < highlights.length; ++i) {\n                hi = highlights[i];\n\n                if (hi.series.bars.show)\n                    drawBarHighlight(hi.series, hi.point);\n                else\n                    drawPointHighlight(hi.series, hi.point);\n            }\n            octx.restore();\n\n            executeHooks(hooks.drawOverlay, [octx]);\n        }\n\n        function highlight(s, point, auto) {\n            if (typeof s == \"number\")\n                s = series[s];\n\n            if (typeof point == \"number\") {\n                var ps = s.datapoints.pointsize;\n                point = s.datapoints.points.slice(ps * point, ps * (point + 1));\n            }\n\n            var i = indexOfHighlight(s, point);\n            if (i == -1) {\n                highlights.push({ series: s, point: point, auto: auto });\n\n                triggerRedrawOverlay();\n            }\n            else if (!auto)\n                highlights[i].auto = false;\n        }\n\n        function unhighlight(s, point) {\n            if (s == null && point == null) {\n                highlights = [];\n                triggerRedrawOverlay();\n                return;\n            }\n\n            if (typeof s == \"number\")\n                s = series[s];\n\n            if (typeof point == \"number\") {\n                var ps = s.datapoints.pointsize;\n                point = s.datapoints.points.slice(ps * point, ps * (point + 1));\n            }\n\n            var i = indexOfHighlight(s, point);\n            if (i != -1) {\n                highlights.splice(i, 1);\n\n                triggerRedrawOverlay();\n            }\n        }\n\n        function indexOfHighlight(s, p) {\n            for (var i = 0; i < highlights.length; ++i) {\n                var h = highlights[i];\n                if (h.series == s && h.point[0] == p[0]\n                    && h.point[1] == p[1])\n                    return i;\n            }\n            return -1;\n        }\n\n        function drawPointHighlight(series, point) {\n            var x = point[0], y = point[1],\n                axisx = series.xaxis, axisy = series.yaxis,\n                highlightColor = (typeof series.highlightColor === \"string\") ? series.highlightColor : $.color.parse(series.color).scale('a', 0.5).toString();\n\n            if (x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)\n                return;\n\n            var pointRadius = series.points.radius + series.points.lineWidth / 2;\n            octx.lineWidth = pointRadius;\n            octx.strokeStyle = highlightColor;\n            var radius = 1.5 * pointRadius;\n            x = axisx.p2c(x);\n            y = axisy.p2c(y);\n\n            octx.beginPath();\n            if (series.points.symbol == \"circle\")\n                octx.arc(x, y, radius, 0, 2 * Math.PI, false);\n            else\n                series.points.symbol(octx, x, y, radius, false);\n            octx.closePath();\n            octx.stroke();\n        }\n\n        function drawBarHighlight(series, point) {\n            var highlightColor = (typeof series.highlightColor === \"string\") ? series.highlightColor : $.color.parse(series.color).scale('a', 0.5).toString(),\n                fillStyle = highlightColor,\n                barLeft;\n\n            switch (series.bars.align) {\n                case \"left\":\n                    barLeft = 0;\n                    break;\n                case \"right\":\n                    barLeft = -series.bars.barWidth;\n                    break;\n                default:\n                    barLeft = -series.bars.barWidth / 2;\n            }\n\n            octx.lineWidth = series.bars.lineWidth;\n            octx.strokeStyle = highlightColor;\n\n            drawBar(point[0], point[1], point[2] || 0, barLeft, barLeft + series.bars.barWidth,\n                    function () { return fillStyle; }, series.xaxis, series.yaxis, octx, series.bars.horizontal, series.bars.lineWidth);\n        }\n\n        function getColorOrGradient(spec, bottom, top, defaultColor) {\n            if (typeof spec == \"string\")\n                return spec;\n            else {\n                // assume this is a gradient spec; IE currently only\n                // supports a simple vertical gradient properly, so that's\n                // what we support too\n                var gradient = ctx.createLinearGradient(0, top, 0, bottom);\n\n                for (var i = 0, l = spec.colors.length; i < l; ++i) {\n                    var c = spec.colors[i];\n                    if (typeof c != \"string\") {\n                        var co = $.color.parse(defaultColor);\n                        if (c.brightness != null)\n                            co = co.scale('rgb', c.brightness);\n                        if (c.opacity != null)\n                            co.a *= c.opacity;\n                        c = co.toString();\n                    }\n                    gradient.addColorStop(i / (l - 1), c);\n                }\n\n                return gradient;\n            }\n        }\n    }\n\n    // Add the plot function to the top level of the jQuery object\n\n    $.plot = function(placeholder, data, options) {\n        //var t0 = new Date();\n        var plot = new Plot($(placeholder), data, options, $.plot.plugins);\n        //(window.console ? console.log : alert)(\"time used (msecs): \" + ((new Date()).getTime() - t0.getTime()));\n        return plot;\n    };\n\n    $.plot.version = \"0.8.3\";\n\n    $.plot.plugins = [];\n\n    // Also add the plot function as a chainable property\n\n    $.fn.plot = function(data, options) {\n        return this.each(function() {\n            $.plot(this, data, options);\n        });\n    };\n\n    // round to nearby lower multiple of base\n    function floorInBase(n, base) {\n        return base * Math.floor(n / base);\n    }\n\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/flot/jquery.flot.js","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment\"\n// module id = 4\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"app/core/utils/kbn\"\n// module id = 5\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"app/core/core\"\n// module id = 6\n// module chunks = 0","// TinyColor v1.4.1\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\n(function(Math) {\n\nvar trimLeft = /^\\s+/,\n    trimRight = /\\s+$/,\n    tinyCounter = 0,\n    mathRound = Math.round,\n    mathMin = Math.min,\n    mathMax = Math.max,\n    mathRandom = Math.random;\n\nfunction tinycolor (color, opts) {\n\n    color = (color) ? color : '';\n    opts = opts || { };\n\n    // If input is already a tinycolor, return itself\n    if (color instanceof tinycolor) {\n       return color;\n    }\n    // If we are called as a function, call using new instead\n    if (!(this instanceof tinycolor)) {\n        return new tinycolor(color, opts);\n    }\n\n    var rgb = inputToRGB(color);\n    this._originalInput = color,\n    this._r = rgb.r,\n    this._g = rgb.g,\n    this._b = rgb.b,\n    this._a = rgb.a,\n    this._roundA = mathRound(100*this._a) / 100,\n    this._format = opts.format || rgb.format;\n    this._gradientType = opts.gradientType;\n\n    // Don't let the range of [0,255] come back in [0,1].\n    // Potentially lose a little bit of precision here, but will fix issues where\n    // .5 gets interpreted as half of the total, instead of half of 1\n    // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n    if (this._r < 1) { this._r = mathRound(this._r); }\n    if (this._g < 1) { this._g = mathRound(this._g); }\n    if (this._b < 1) { this._b = mathRound(this._b); }\n\n    this._ok = rgb.ok;\n    this._tc_id = tinyCounter++;\n}\n\ntinycolor.prototype = {\n    isDark: function() {\n        return this.getBrightness() < 128;\n    },\n    isLight: function() {\n        return !this.isDark();\n    },\n    isValid: function() {\n        return this._ok;\n    },\n    getOriginalInput: function() {\n      return this._originalInput;\n    },\n    getFormat: function() {\n        return this._format;\n    },\n    getAlpha: function() {\n        return this._a;\n    },\n    getBrightness: function() {\n        //http://www.w3.org/TR/AERT#color-contrast\n        var rgb = this.toRgb();\n        return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n    },\n    getLuminance: function() {\n        //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n        var rgb = this.toRgb();\n        var RsRGB, GsRGB, BsRGB, R, G, B;\n        RsRGB = rgb.r/255;\n        GsRGB = rgb.g/255;\n        BsRGB = rgb.b/255;\n\n        if (RsRGB <= 0.03928) {R = RsRGB / 12.92;} else {R = Math.pow(((RsRGB + 0.055) / 1.055), 2.4);}\n        if (GsRGB <= 0.03928) {G = GsRGB / 12.92;} else {G = Math.pow(((GsRGB + 0.055) / 1.055), 2.4);}\n        if (BsRGB <= 0.03928) {B = BsRGB / 12.92;} else {B = Math.pow(((BsRGB + 0.055) / 1.055), 2.4);}\n        return (0.2126 * R) + (0.7152 * G) + (0.0722 * B);\n    },\n    setAlpha: function(value) {\n        this._a = boundAlpha(value);\n        this._roundA = mathRound(100*this._a) / 100;\n        return this;\n    },\n    toHsv: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n    },\n    toHsvString: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\n        return (this._a == 1) ?\n          \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\n          \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ this._roundA + \")\";\n    },\n    toHsl: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n    },\n    toHslString: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\n        return (this._a == 1) ?\n          \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\n          \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ this._roundA + \")\";\n    },\n    toHex: function(allow3Char) {\n        return rgbToHex(this._r, this._g, this._b, allow3Char);\n    },\n    toHexString: function(allow3Char) {\n        return '#' + this.toHex(allow3Char);\n    },\n    toHex8: function(allow4Char) {\n        return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n    },\n    toHex8String: function(allow4Char) {\n        return '#' + this.toHex8(allow4Char);\n    },\n    toRgb: function() {\n        return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\n    },\n    toRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" :\n          \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\n    },\n    toPercentageRgb: function() {\n        return { r: mathRound(bound01(this._r, 255) * 100) + \"%\", g: mathRound(bound01(this._g, 255) * 100) + \"%\", b: mathRound(bound01(this._b, 255) * 100) + \"%\", a: this._a };\n    },\n    toPercentageRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" :\n          \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n    },\n    toName: function() {\n        if (this._a === 0) {\n            return \"transparent\";\n        }\n\n        if (this._a < 1) {\n            return false;\n        }\n\n        return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n    },\n    toFilter: function(secondColor) {\n        var hex8String = '#' + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n        var secondHex8String = hex8String;\n        var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n        if (secondColor) {\n            var s = tinycolor(secondColor);\n            secondHex8String = '#' + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n        }\n\n        return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\";\n    },\n    toString: function(format) {\n        var formatSet = !!format;\n        format = format || this._format;\n\n        var formattedString = false;\n        var hasAlpha = this._a < 1 && this._a >= 0;\n        var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n\n        if (needsAlphaFormat) {\n            // Special case for \"transparent\", all other non-alpha formats\n            // will return rgba when there is transparency.\n            if (format === \"name\" && this._a === 0) {\n                return this.toName();\n            }\n            return this.toRgbString();\n        }\n        if (format === \"rgb\") {\n            formattedString = this.toRgbString();\n        }\n        if (format === \"prgb\") {\n            formattedString = this.toPercentageRgbString();\n        }\n        if (format === \"hex\" || format === \"hex6\") {\n            formattedString = this.toHexString();\n        }\n        if (format === \"hex3\") {\n            formattedString = this.toHexString(true);\n        }\n        if (format === \"hex4\") {\n            formattedString = this.toHex8String(true);\n        }\n        if (format === \"hex8\") {\n            formattedString = this.toHex8String();\n        }\n        if (format === \"name\") {\n            formattedString = this.toName();\n        }\n        if (format === \"hsl\") {\n            formattedString = this.toHslString();\n        }\n        if (format === \"hsv\") {\n            formattedString = this.toHsvString();\n        }\n\n        return formattedString || this.toHexString();\n    },\n    clone: function() {\n        return tinycolor(this.toString());\n    },\n\n    _applyModification: function(fn, args) {\n        var color = fn.apply(null, [this].concat([].slice.call(args)));\n        this._r = color._r;\n        this._g = color._g;\n        this._b = color._b;\n        this.setAlpha(color._a);\n        return this;\n    },\n    lighten: function() {\n        return this._applyModification(lighten, arguments);\n    },\n    brighten: function() {\n        return this._applyModification(brighten, arguments);\n    },\n    darken: function() {\n        return this._applyModification(darken, arguments);\n    },\n    desaturate: function() {\n        return this._applyModification(desaturate, arguments);\n    },\n    saturate: function() {\n        return this._applyModification(saturate, arguments);\n    },\n    greyscale: function() {\n        return this._applyModification(greyscale, arguments);\n    },\n    spin: function() {\n        return this._applyModification(spin, arguments);\n    },\n\n    _applyCombination: function(fn, args) {\n        return fn.apply(null, [this].concat([].slice.call(args)));\n    },\n    analogous: function() {\n        return this._applyCombination(analogous, arguments);\n    },\n    complement: function() {\n        return this._applyCombination(complement, arguments);\n    },\n    monochromatic: function() {\n        return this._applyCombination(monochromatic, arguments);\n    },\n    splitcomplement: function() {\n        return this._applyCombination(splitcomplement, arguments);\n    },\n    triad: function() {\n        return this._applyCombination(triad, arguments);\n    },\n    tetrad: function() {\n        return this._applyCombination(tetrad, arguments);\n    }\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function(color, opts) {\n    if (typeof color == \"object\") {\n        var newColor = {};\n        for (var i in color) {\n            if (color.hasOwnProperty(i)) {\n                if (i === \"a\") {\n                    newColor[i] = color[i];\n                }\n                else {\n                    newColor[i] = convertToPercentage(color[i]);\n                }\n            }\n        }\n        color = newColor;\n    }\n\n    return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n\n    var rgb = { r: 0, g: 0, b: 0 };\n    var a = 1;\n    var s = null;\n    var v = null;\n    var l = null;\n    var ok = false;\n    var format = false;\n\n    if (typeof color == \"string\") {\n        color = stringInputToObject(color);\n    }\n\n    if (typeof color == \"object\") {\n        if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n            rgb = rgbToRgb(color.r, color.g, color.b);\n            ok = true;\n            format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n            s = convertToPercentage(color.s);\n            v = convertToPercentage(color.v);\n            rgb = hsvToRgb(color.h, s, v);\n            ok = true;\n            format = \"hsv\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n            s = convertToPercentage(color.s);\n            l = convertToPercentage(color.l);\n            rgb = hslToRgb(color.h, s, l);\n            ok = true;\n            format = \"hsl\";\n        }\n\n        if (color.hasOwnProperty(\"a\")) {\n            a = color.a;\n        }\n    }\n\n    a = boundAlpha(a);\n\n    return {\n        ok: ok,\n        format: color.format || format,\n        r: mathMin(255, mathMax(rgb.r, 0)),\n        g: mathMin(255, mathMax(rgb.g, 0)),\n        b: mathMin(255, mathMax(rgb.b, 0)),\n        a: a\n    };\n}\n\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b){\n    return {\n        r: bound01(r, 255) * 255,\n        g: bound01(g, 255) * 255,\n        b: bound01(b, 255) * 255\n    };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if(max == min) {\n        h = s = 0; // achromatic\n    }\n    else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n\n        h /= 6;\n    }\n\n    return { h: h, s: s, l: l };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n    var r, g, b;\n\n    h = bound01(h, 360);\n    s = bound01(s, 100);\n    l = bound01(l, 100);\n\n    function hue2rgb(p, q, t) {\n        if(t < 0) t += 1;\n        if(t > 1) t -= 1;\n        if(t < 1/6) return p + (q - p) * 6 * t;\n        if(t < 1/2) return q;\n        if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n        return p;\n    }\n\n    if(s === 0) {\n        r = g = b = l; // achromatic\n    }\n    else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1/3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1/3);\n    }\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, v = max;\n\n    var d = max - min;\n    s = max === 0 ? 0 : d / max;\n\n    if(max == min) {\n        h = 0; // achromatic\n    }\n    else {\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n        h /= 6;\n    }\n    return { h: h, s: s, v: v };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\n function hsvToRgb(h, s, v) {\n\n    h = bound01(h, 360) * 6;\n    s = bound01(s, 100);\n    v = bound01(v, 100);\n\n    var i = Math.floor(h),\n        f = h - i,\n        p = v * (1 - s),\n        q = v * (1 - f * s),\n        t = v * (1 - (1 - f) * s),\n        mod = i % 6,\n        r = [v, q, p, p, t, v][mod],\n        g = [t, v, v, q, p, p][mod],\n        b = [p, p, t, v, v, q][mod];\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    // Return a 3 character hex if possible\n    if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16)),\n        pad2(convertDecimalToHex(a))\n    ];\n\n    // Return a 4 character hex if possible\n    if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n\n    var hex = [\n        pad2(convertDecimalToHex(a)),\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n    if (!color1 || !color2) { return false; }\n    return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\n\ntinycolor.random = function() {\n    return tinycolor.fromRatio({\n        r: mathRandom(),\n        g: mathRandom(),\n        b: mathRandom()\n    });\n};\n\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction desaturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s -= amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction saturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s += amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction greyscale(color) {\n    return tinycolor(color).desaturate(100);\n}\n\nfunction lighten (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l += amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\nfunction brighten(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var rgb = tinycolor(color).toRgb();\n    rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\n    rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\n    rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\n    return tinycolor(rgb);\n}\n\nfunction darken (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l -= amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction spin(color, amount) {\n    var hsl = tinycolor(color).toHsl();\n    var hue = (hsl.h + amount) % 360;\n    hsl.h = hue < 0 ? 360 + hue : hue;\n    return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction complement(color) {\n    var hsl = tinycolor(color).toHsl();\n    hsl.h = (hsl.h + 180) % 360;\n    return tinycolor(hsl);\n}\n\nfunction triad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction tetrad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction splitcomplement(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\n        tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\n    ];\n}\n\nfunction analogous(color, results, slices) {\n    results = results || 6;\n    slices = slices || 30;\n\n    var hsl = tinycolor(color).toHsl();\n    var part = 360 / slices;\n    var ret = [tinycolor(color)];\n\n    for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\n        hsl.h = (hsl.h + part) % 360;\n        ret.push(tinycolor(hsl));\n    }\n    return ret;\n}\n\nfunction monochromatic(color, results) {\n    results = results || 6;\n    var hsv = tinycolor(color).toHsv();\n    var h = hsv.h, s = hsv.s, v = hsv.v;\n    var ret = [];\n    var modification = 1 / results;\n\n    while (results--) {\n        ret.push(tinycolor({ h: h, s: s, v: v}));\n        v = (v + modification) % 1;\n    }\n\n    return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function(color1, color2, amount) {\n    amount = (amount === 0) ? 0 : (amount || 50);\n\n    var rgb1 = tinycolor(color1).toRgb();\n    var rgb2 = tinycolor(color2).toRgb();\n\n    var p = amount / 100;\n\n    var rgba = {\n        r: ((rgb2.r - rgb1.r) * p) + rgb1.r,\n        g: ((rgb2.g - rgb1.g) * p) + rgb1.g,\n        b: ((rgb2.b - rgb1.b) * p) + rgb1.b,\n        a: ((rgb2.a - rgb1.a) * p) + rgb1.a\n    };\n\n    return tinycolor(rgba);\n};\n\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function(color1, color2) {\n    var c1 = tinycolor(color1);\n    var c2 = tinycolor(color2);\n    return (Math.max(c1.getLuminance(),c2.getLuminance())+0.05) / (Math.min(c1.getLuminance(),c2.getLuminance())+0.05);\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function(color1, color2, wcag2) {\n    var readability = tinycolor.readability(color1, color2);\n    var wcag2Parms, out;\n\n    out = false;\n\n    wcag2Parms = validateWCAG2Parms(wcag2);\n    switch (wcag2Parms.level + wcag2Parms.size) {\n        case \"AAsmall\":\n        case \"AAAlarge\":\n            out = readability >= 4.5;\n            break;\n        case \"AAlarge\":\n            out = readability >= 3;\n            break;\n        case \"AAAsmall\":\n            out = readability >= 7;\n            break;\n    }\n    return out;\n\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function(baseColor, colorList, args) {\n    var bestColor = null;\n    var bestScore = 0;\n    var readability;\n    var includeFallbackColors, level, size ;\n    args = args || {};\n    includeFallbackColors = args.includeFallbackColors ;\n    level = args.level;\n    size = args.size;\n\n    for (var i= 0; i < colorList.length ; i++) {\n        readability = tinycolor.readability(baseColor, colorList[i]);\n        if (readability > bestScore) {\n            bestScore = readability;\n            bestColor = tinycolor(colorList[i]);\n        }\n    }\n\n    if (tinycolor.isReadable(baseColor, bestColor, {\"level\":level,\"size\":size}) || !includeFallbackColors) {\n        return bestColor;\n    }\n    else {\n        args.includeFallbackColors=false;\n        return tinycolor.mostReadable(baseColor,[\"#fff\", \"#000\"],args);\n    }\n};\n\n\n// Big List of Colors\n// ------------------\n// <http://www.w3.org/TR/css3-color/#svg-color>\nvar names = tinycolor.names = {\n    aliceblue: \"f0f8ff\",\n    antiquewhite: \"faebd7\",\n    aqua: \"0ff\",\n    aquamarine: \"7fffd4\",\n    azure: \"f0ffff\",\n    beige: \"f5f5dc\",\n    bisque: \"ffe4c4\",\n    black: \"000\",\n    blanchedalmond: \"ffebcd\",\n    blue: \"00f\",\n    blueviolet: \"8a2be2\",\n    brown: \"a52a2a\",\n    burlywood: \"deb887\",\n    burntsienna: \"ea7e5d\",\n    cadetblue: \"5f9ea0\",\n    chartreuse: \"7fff00\",\n    chocolate: \"d2691e\",\n    coral: \"ff7f50\",\n    cornflowerblue: \"6495ed\",\n    cornsilk: \"fff8dc\",\n    crimson: \"dc143c\",\n    cyan: \"0ff\",\n    darkblue: \"00008b\",\n    darkcyan: \"008b8b\",\n    darkgoldenrod: \"b8860b\",\n    darkgray: \"a9a9a9\",\n    darkgreen: \"006400\",\n    darkgrey: \"a9a9a9\",\n    darkkhaki: \"bdb76b\",\n    darkmagenta: \"8b008b\",\n    darkolivegreen: \"556b2f\",\n    darkorange: \"ff8c00\",\n    darkorchid: \"9932cc\",\n    darkred: \"8b0000\",\n    darksalmon: \"e9967a\",\n    darkseagreen: \"8fbc8f\",\n    darkslateblue: \"483d8b\",\n    darkslategray: \"2f4f4f\",\n    darkslategrey: \"2f4f4f\",\n    darkturquoise: \"00ced1\",\n    darkviolet: \"9400d3\",\n    deeppink: \"ff1493\",\n    deepskyblue: \"00bfff\",\n    dimgray: \"696969\",\n    dimgrey: \"696969\",\n    dodgerblue: \"1e90ff\",\n    firebrick: \"b22222\",\n    floralwhite: \"fffaf0\",\n    forestgreen: \"228b22\",\n    fuchsia: \"f0f\",\n    gainsboro: \"dcdcdc\",\n    ghostwhite: \"f8f8ff\",\n    gold: \"ffd700\",\n    goldenrod: \"daa520\",\n    gray: \"808080\",\n    green: \"008000\",\n    greenyellow: \"adff2f\",\n    grey: \"808080\",\n    honeydew: \"f0fff0\",\n    hotpink: \"ff69b4\",\n    indianred: \"cd5c5c\",\n    indigo: \"4b0082\",\n    ivory: \"fffff0\",\n    khaki: \"f0e68c\",\n    lavender: \"e6e6fa\",\n    lavenderblush: \"fff0f5\",\n    lawngreen: \"7cfc00\",\n    lemonchiffon: \"fffacd\",\n    lightblue: \"add8e6\",\n    lightcoral: \"f08080\",\n    lightcyan: \"e0ffff\",\n    lightgoldenrodyellow: \"fafad2\",\n    lightgray: \"d3d3d3\",\n    lightgreen: \"90ee90\",\n    lightgrey: \"d3d3d3\",\n    lightpink: \"ffb6c1\",\n    lightsalmon: \"ffa07a\",\n    lightseagreen: \"20b2aa\",\n    lightskyblue: \"87cefa\",\n    lightslategray: \"789\",\n    lightslategrey: \"789\",\n    lightsteelblue: \"b0c4de\",\n    lightyellow: \"ffffe0\",\n    lime: \"0f0\",\n    limegreen: \"32cd32\",\n    linen: \"faf0e6\",\n    magenta: \"f0f\",\n    maroon: \"800000\",\n    mediumaquamarine: \"66cdaa\",\n    mediumblue: \"0000cd\",\n    mediumorchid: \"ba55d3\",\n    mediumpurple: \"9370db\",\n    mediumseagreen: \"3cb371\",\n    mediumslateblue: \"7b68ee\",\n    mediumspringgreen: \"00fa9a\",\n    mediumturquoise: \"48d1cc\",\n    mediumvioletred: \"c71585\",\n    midnightblue: \"191970\",\n    mintcream: \"f5fffa\",\n    mistyrose: \"ffe4e1\",\n    moccasin: \"ffe4b5\",\n    navajowhite: \"ffdead\",\n    navy: \"000080\",\n    oldlace: \"fdf5e6\",\n    olive: \"808000\",\n    olivedrab: \"6b8e23\",\n    orange: \"ffa500\",\n    orangered: \"ff4500\",\n    orchid: \"da70d6\",\n    palegoldenrod: \"eee8aa\",\n    palegreen: \"98fb98\",\n    paleturquoise: \"afeeee\",\n    palevioletred: \"db7093\",\n    papayawhip: \"ffefd5\",\n    peachpuff: \"ffdab9\",\n    peru: \"cd853f\",\n    pink: \"ffc0cb\",\n    plum: \"dda0dd\",\n    powderblue: \"b0e0e6\",\n    purple: \"800080\",\n    rebeccapurple: \"663399\",\n    red: \"f00\",\n    rosybrown: \"bc8f8f\",\n    royalblue: \"4169e1\",\n    saddlebrown: \"8b4513\",\n    salmon: \"fa8072\",\n    sandybrown: \"f4a460\",\n    seagreen: \"2e8b57\",\n    seashell: \"fff5ee\",\n    sienna: \"a0522d\",\n    silver: \"c0c0c0\",\n    skyblue: \"87ceeb\",\n    slateblue: \"6a5acd\",\n    slategray: \"708090\",\n    slategrey: \"708090\",\n    snow: \"fffafa\",\n    springgreen: \"00ff7f\",\n    steelblue: \"4682b4\",\n    tan: \"d2b48c\",\n    teal: \"008080\",\n    thistle: \"d8bfd8\",\n    tomato: \"ff6347\",\n    turquoise: \"40e0d0\",\n    violet: \"ee82ee\",\n    wheat: \"f5deb3\",\n    white: \"fff\",\n    whitesmoke: \"f5f5f5\",\n    yellow: \"ff0\",\n    yellowgreen: \"9acd32\"\n};\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = tinycolor.hexNames = flip(names);\n\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n    var flipped = { };\n    for (var i in o) {\n        if (o.hasOwnProperty(i)) {\n            flipped[o[i]] = i;\n        }\n    }\n    return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n    a = parseFloat(a);\n\n    if (isNaN(a) || a < 0 || a > 1) {\n        a = 1;\n    }\n\n    return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n    if (isOnePointZero(n)) { n = \"100%\"; }\n\n    var processPercent = isPercentage(n);\n    n = mathMin(max, mathMax(0, parseFloat(n)));\n\n    // Automatically convert percentage into number\n    if (processPercent) {\n        n = parseInt(n * max, 10) / 100;\n    }\n\n    // Handle floating point rounding errors\n    if ((Math.abs(n - max) < 0.000001)) {\n        return 1;\n    }\n\n    // Convert into [0, 1] range if it isn't already\n    return (n % max) / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n    return mathMin(1, mathMax(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n    return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n    return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n    return typeof n === \"string\" && n.indexOf('%') != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n    return c.length == 1 ? '0' + c : '' + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n    if (n <= 1) {\n        n = (n * 100) + \"%\";\n    }\n\n    return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n    return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n    return (parseIntFromHex(h) / 255);\n}\n\nvar matchers = (function() {\n\n    // <http://www.w3.org/TR/css3-values/#integers>\n    var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n    // <http://www.w3.org/TR/css3-values/#number-value>\n    var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n    // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n    var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n    // Actual matching.\n    // Parentheses and commas are optional, but not required.\n    // Whitespace can take the place of commas or opening paren\n    var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n    var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n\n    return {\n        CSS_UNIT: new RegExp(CSS_UNIT),\n        rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n        rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n        hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n        hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n        hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n        hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n        hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n        hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n    };\n})();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n    return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n\n    color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\n    var named = false;\n    if (names[color]) {\n        color = names[color];\n        named = true;\n    }\n    else if (color == 'transparent') {\n        return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n    }\n\n    // Try to match string input using regular expressions.\n    // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n    // Just return an object and let the conversion functions handle that.\n    // This way the result will be the same whether the tinycolor is initialized with string or object.\n    var match;\n    if ((match = matchers.rgb.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3] };\n    }\n    if ((match = matchers.rgba.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsl.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3] };\n    }\n    if ((match = matchers.hsla.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsv.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3] };\n    }\n    if ((match = matchers.hsva.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3], a: match[4] };\n    }\n    if ((match = matchers.hex8.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            a: convertHexToDecimal(match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex6.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n    if ((match = matchers.hex4.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            a: convertHexToDecimal(match[4] + '' + match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex3.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n\n    return false;\n}\n\nfunction validateWCAG2Parms(parms) {\n    // return valid WCAG2 parms for isReadable.\n    // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n    var level, size;\n    parms = parms || {\"level\":\"AA\", \"size\":\"small\"};\n    level = (parms.level || \"AA\").toUpperCase();\n    size = (parms.size || \"small\").toLowerCase();\n    if (level !== \"AA\" && level !== \"AAA\") {\n        level = \"AA\";\n    }\n    if (size !== \"small\" && size !== \"large\") {\n        size = \"small\";\n    }\n    return {\"level\":level, \"size\":size};\n}\n\n// Node: Export function\nif (typeof module !== \"undefined\" && module.exports) {\n    module.exports = tinycolor;\n}\n// AMD/requirejs: Define the module\nelse if (typeof define === 'function' && define.amd) {\n    define(function () {return tinycolor;});\n}\n// Browser: Expose to window\nelse {\n    window.tinycolor = tinycolor;\n}\n\n})(Math);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/bg/workspace/grafana-data/plugins/lightstep-grafana-plugin/node_modules/tinycolor2/tinycolor.js\n// module id = 7\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"app/plugins/sdk\"\n// module id = 8\n// module chunks = 0","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 9\n// module chunks = 0","///<reference path=\"../../../headers/common.d.ts\" />\n\nimport './graph';\nimport './legend';\nimport './series_overrides_ctrl';\nimport './thresholds_form';\n\nimport template from './template';\nimport _ from 'lodash';\nimport config from 'grafana/app/core/config';\nimport {MetricsPanelCtrl, alertTab} from 'grafana/app/plugins/sdk';\nimport {DataProcessor} from './data_processor';\nimport {axesEditorComponent} from './axes_editor';\n\nclass GraphCtrl extends MetricsPanelCtrl {\n\n  /** @ngInject */\n  constructor($scope, $injector, annotationsSrv) {\n    super($scope, $injector);\n    this.$scope = $scope\n    this.$injector = $injector;\n    this.annotationsSrv = annotationsSrv;\n\n    this.hiddenSeries = {};\n    this.seriesList = [];\n    this.dataList = [];\n    this.annotations = [];\n    this.alertState = null;\n\n    this.annotationsPromise = null;\n    this.dataWarning = null;\n    this.colors = [];\n    this.subTabIndex = 0;\n\n    this.panelDefaults = {\n      // datasource name, null = default datasource\n      datasource: null,\n      // sets client side (flot) or native graphite png renderer (png)\n      renderer: 'flot',\n      yaxes: [\n        {\n          label: null,\n          show: true,\n          logBase: 1,\n          min: null,\n          max: null,\n          format: 'short'\n        },\n        {\n          label: null,\n          show: true,\n          logBase: 1,\n          min: null,\n          max: null,\n          format: 'short'\n        }\n      ],\n      xaxis: {\n        show: true,\n        mode: 'time',\n        name: null,\n        values: [],\n        buckets: null\n      },\n      // show/hide lines\n      lines         : true,\n      // fill factor\n      fill          : 1,\n      // line width in pixels\n      linewidth     : 1,\n      // show/hide dashed line\n      dashes        : false,\n      // length of a dash\n      dashLength    : 10,\n      // length of space between two dashes\n      spaceLength   : 10,\n      // show hide points\n      points        : false,\n      // point radius in pixels\n      pointradius   : 5,\n      // show hide bars\n      bars          : false,\n      // enable/disable stacking\n      stack         : false,\n      // stack percentage mode\n      percentage    : false,\n      // legend options\n      legend: {\n        show: true, // disable/enable legend\n        values: false, // disable/enable legend values\n        min: false,\n        max: false,\n        current: false,\n        total: false,\n        avg: false\n      },\n      // how null points should be handled\n      nullPointMode : 'null',\n      // staircase line mode\n      steppedLine: false,\n      // tooltip options\n      tooltip       : {\n        value_type: 'individual',\n        shared: true,\n        sort: 0,\n      },\n      // time overrides\n      timeFrom: null,\n      timeShift: null,\n      // metric queries\n      targets: [{}],\n      // series color overrides\n      aliasColors: {},\n      // other style overrides\n      seriesOverrides: [{\n        alias: '/traces/',\n        lines: false,\n        points: true,\n        pointradius: 1,\n      }],\n      thresholds: [],\n    };\n\n\n    _.defaults(this.panel, this.panelDefaults);\n    _.defaults(this.panel.tooltip, this.panelDefaults.tooltip);\n    _.defaults(this.panel.legend, this.panelDefaults.legend);\n    _.defaults(this.panel.xaxis, this.panelDefaults.xaxis);\n\n    this.processor = new DataProcessor(this.panel);\n\n    this.events.on('render', this.onRender.bind(this));\n    this.events.on('data-received', this.onDataReceived.bind(this));\n    this.events.on('data-error', this.onDataError.bind(this));\n    this.events.on('data-snapshot-load', this.onDataSnapshotLoad.bind(this));\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n    this.events.on('init-panel-actions', this.onInitPanelActions.bind(this));\n  }\n\n  onInitEditMode() {\n    this.addEditorTab('Axes', axesEditorComponent, 2);\n    this.addEditorTab('Legend', 'public/app/plugins/panel/graph/tab_legend.html', 3);\n    this.addEditorTab('Display', 'public/app/plugins/panel/graph/tab_display.html', 4);\n\n    if (config.alertingEnabled) {\n      this.addEditorTab('Alert', alertTab, 5);\n    }\n\n    this.subTabIndex = 0;\n  }\n\n  onInitPanelActions(actions) {\n    actions.push({text: 'Export CSV', click: 'ctrl.exportCsv()'});\n    actions.push({text: 'Toggle legend', click: 'ctrl.toggleLegend()'});\n  }\n\n  issueQueries(datasource) {\n    this.annotationsPromise = this.annotationsSrv.getAnnotations({\n      dashboard: this.dashboard,\n      panel: this.panel,\n      range: this.range,\n    });\n    return super.issueQueries(datasource);\n  }\n\n  zoomOut(evt) {\n    this.publishAppEvent('zoom-out', 2);\n  }\n\n  onDataSnapshotLoad(snapshotData) {\n    this.annotationsPromise = this.annotationsSrv.getAnnotations({\n      dashboard: this.dashboard,\n      panel: this.panel,\n      range: this.range,\n    });\n    this.onDataReceived(snapshotData);\n  }\n\n  onDataError(err) {\n    this.seriesList = [];\n    this.annotations = [];\n    this.render([]);\n  }\n\n  onDataReceived(dataList) {\n    this.dataList = dataList;\n    this.seriesList = this.processor.getSeriesList({dataList: dataList, range: this.range});\n\n    this.dataWarning = null;\n    const datapointsCount = this.seriesList.reduce((prev, series) => {\n      return prev + series.datapoints.length;\n    }, 0);\n\n    if (datapointsCount === 0) {\n      this.dataWarning = {\n        title: 'No data points',\n        tip: 'No datapoints returned from data query'\n      };\n    } else {\n\n      for (let series of this.seriesList) {\n        if (series.isOutsideRange) {\n          this.dataWarning = {\n            title: 'Data points outside time range',\n            tip: 'Can be caused by timezone mismatch or missing time filter in query',\n          };\n          break;\n        }\n      }\n    }\n\n    this.annotationsPromise.then(result => {\n      this.loading = false;\n      this.alertState = result.alertState;\n      this.annotations = result.annotations;\n      this.render(this.seriesList);\n    }, () => {\n      this.loading = false;\n      this.render(this.seriesList);\n    });\n  }\n\n  onRender() {\n    if (!this.seriesList) { return; }\n\n    for (let series of this.seriesList) {\n      series.applySeriesOverrides(this.panel.seriesOverrides);\n\n      if (series.unit) {\n        this.panel.yaxes[series.yaxis-1].format = series.unit;\n      }\n    }\n  }\n\n  changeSeriesColor(series, color) {\n    series.color = color;\n    this.panel.aliasColors[series.alias] = series.color;\n    this.render();\n  }\n\n  toggleSeries(serie, event) {\n    if (event.ctrlKey || event.metaKey || event.shiftKey) {\n      if (this.hiddenSeries[serie.alias]) {\n        delete this.hiddenSeries[serie.alias];\n      } else {\n        this.hiddenSeries[serie.alias] = true;\n      }\n    } else {\n      this.toggleSeriesExclusiveMode(serie);\n    }\n    this.render();\n  }\n\n  toggleSeriesExclusiveMode (serie) {\n    var hidden = this.hiddenSeries;\n\n    if (hidden[serie.alias]) {\n      delete hidden[serie.alias];\n    }\n\n    // check if every other series is hidden\n    var alreadyExclusive = _.every(this.seriesList, value => {\n      if (value.alias === serie.alias) {\n        return true;\n      }\n\n      return hidden[value.alias];\n    });\n\n    if (alreadyExclusive) {\n      // remove all hidden series\n      _.each(this.seriesList, value => {\n        delete this.hiddenSeries[value.alias];\n      });\n    } else {\n      // hide all but this serie\n      _.each(this.seriesList, value => {\n        if (value.alias === serie.alias) {\n          return;\n        }\n\n        this.hiddenSeries[value.alias] = true;\n      });\n    }\n  }\n\n  toggleAxis(info) {\n    var override = _.find(this.panel.seriesOverrides, {alias: info.alias});\n    if (!override) {\n      override = { alias: info.alias };\n      this.panel.seriesOverrides.push(override);\n    }\n    info.yaxis = override.yaxis = info.yaxis === 2 ? 1 : 2;\n    this.render();\n  }\n\n  addSeriesOverride(override) {\n    this.panel.seriesOverrides.push(override || {});\n  }\n\n  removeSeriesOverride(override) {\n    this.panel.seriesOverrides = _.without(this.panel.seriesOverrides, override);\n    this.render();\n  }\n\n  toggleLegend() {\n    this.panel.legend.show = !this.panel.legend.show;\n    this.refresh();\n  }\n\n  legendValuesOptionChanged() {\n    var legend = this.panel.legend;\n    legend.values = legend.min || legend.max || legend.avg || legend.current || legend.total;\n    this.render();\n  }\n\n  exportCsv() {\n    var scope = this.$scope.$new(true);\n    scope.seriesList = this.seriesList;\n    this.publishAppEvent('show-modal', {\n      templateHtml: '<export-data-modal data=\"seriesList\"></export-data-modal>',\n      scope,\n      modalClass: 'modal--narrow'\n    });\n  }\n}\n\nGraphCtrl.template = template;\n\nexport {GraphCtrl, GraphCtrl as PanelCtrl};\n\n\n\n// WEBPACK FOOTER //\n// ./module.js","///<reference path=\"../../../headers/common.d.ts\" />\n\nimport './vendor/flot/jquery.flot';\nimport './vendor/flot/jquery.flot.selection';\nimport './vendor/flot/jquery.flot.time';\nimport './vendor/flot/jquery.flot.stack';\nimport './vendor/flot/jquery.flot.stackpercent';\nimport './vendor/flot/jquery.flot.fillbelow';\nimport './vendor/flot/jquery.flot.crosshair';\nimport './vendor/flot/jquery.flot.dashes';\nimport './jquery.flot.events';\n\nimport $ from 'jquery';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport kbn from 'grafana/app/core/utils/kbn';\nimport {tickStep} from 'grafana/app/core/utils/ticks';\nimport {appEvents, coreModule} from 'grafana/app/core/core';\nimport GraphTooltip from './graph_tooltip';\nimport {ThresholdManager} from './threshold_manager';\nimport {EventManager} from './event_manager';\nimport {convertValuesToHistogram, getSeriesValues} from './histogram';\n\n/** @ngInject **/\nfunction graphDirective($rootScope, timeSrv, popoverSrv, contextSrv) {\n  return {\n    restrict: 'A',\n    template: '',\n    link: function(scope, elem) {\n      var ctrl = scope.ctrl;\n      var dashboard = ctrl.dashboard;\n      var panel = ctrl.panel;\n      var annotations = [];\n      var data;\n      var plot;\n      var sortedSeries;\n      var legendSideLastValue = null;\n      var rootScope = scope.$root;\n      var panelWidth = 0;\n      var eventManager = new EventManager(ctrl);\n      var thresholdManager = new ThresholdManager(ctrl);\n      var tooltip = new GraphTooltip(elem, dashboard, scope, function() {\n        return sortedSeries;\n      });\n\n      // panel events\n      ctrl.events.on('panel-teardown', () => {\n        thresholdManager = null;\n\n        if (plot) {\n          plot.destroy();\n          plot = null;\n        }\n      });\n\n      ctrl.events.on('render', function(renderData) {\n        data = renderData || data;\n        if (!data) {\n          return;\n        }\n        annotations = ctrl.annotations || [];\n        render_panel();\n      });\n\n      // global events\n      appEvents.on('graph-hover', function(evt) {\n        // ignore other graph hover events if shared tooltip is disabled\n        if (!dashboard.sharedTooltipModeEnabled()) {\n          return;\n        }\n\n        // ignore if we are the emitter\n        if (!plot || evt.panel.id === panel.id || ctrl.otherPanelInFullscreenMode()) {\n          return;\n        }\n\n        tooltip.show(evt.pos);\n      }, scope);\n\n      appEvents.on('graph-hover-clear', function(event, info) {\n        if (plot) {\n          tooltip.clear(plot);\n        }\n      }, scope);\n\n      function getLegendHeight(panelHeight) {\n        if (!panel.legend.show || panel.legend.rightSide) {\n          return 0;\n        }\n\n        if (panel.legend.alignAsTable) {\n          var legendSeries = _.filter(data, function(series) {\n            return series.hideFromLegend(panel.legend) === false;\n          });\n          var total = 23 + (21 * legendSeries.length);\n          return Math.min(total, Math.floor(panelHeight/2));\n        } else {\n          return 26;\n        }\n      }\n\n      function setElementHeight() {\n        try {\n          var height = ctrl.height - getLegendHeight(ctrl.height);\n          elem.css('height', height + 'px');\n\n          return true;\n        } catch (e) { // IE throws errors sometimes\n          console.log(e);\n          return false;\n        }\n      }\n\n      function shouldAbortRender() {\n        if (!data) {\n          return true;\n        }\n\n        if (!setElementHeight()) { return true; }\n\n        if (panelWidth === 0) {\n          return true;\n        }\n\n        return false;\n      }\n\n      function drawHook(plot) {\n        // Update legend values\n        var yaxis = plot.getYAxes();\n        for (var i = 0; i < data.length; i++) {\n          var series = data[i];\n          var axis = yaxis[series.yaxis - 1];\n          var formater = kbn.valueFormats[panel.yaxes[series.yaxis - 1].format];\n\n          // decimal override\n          if (_.isNumber(panel.decimals)) {\n            series.updateLegendValues(formater, panel.decimals, null);\n          } else {\n            // auto decimals\n            // legend and tooltip gets one more decimal precision\n            // than graph legend ticks\n            var tickDecimals = (axis.tickDecimals || -1) + 1;\n            series.updateLegendValues(formater, tickDecimals, axis.scaledDecimals + 2);\n          }\n\n          if (!rootScope.$$phase) { scope.$digest(); }\n        }\n\n        // add left axis labels\n        if (panel.yaxes[0].label && panel.yaxes[0].show) {\n          $(\"<div class='axisLabel left-yaxis-label flot-temp-elem'></div>\").text(panel.yaxes[0].label).appendTo(elem);\n        }\n\n        // add right axis labels\n        if (panel.yaxes[1].label && panel.yaxes[1].show) {\n          $(\"<div class='axisLabel right-yaxis-label flot-temp-elem'></div>\").text(panel.yaxes[1].label).appendTo(elem);\n        }\n\n        thresholdManager.draw(plot);\n      }\n\n      function processOffsetHook(plot, gridMargin) {\n        var left = panel.yaxes[0];\n        var right = panel.yaxes[1];\n        if (left.show && left.label) { gridMargin.left = 20; }\n        if (right.show && right.label) { gridMargin.right = 20; }\n\n        // apply y-axis min/max options\n        var yaxis = plot.getYAxes();\n        for (var i = 0; i < yaxis.length; i++) {\n          var axis = yaxis[i];\n          var panelOptions = panel.yaxes[i];\n          axis.options.max = axis.options.max !== null ? axis.options.max : panelOptions.max;\n          axis.options.min = axis.options.min !== null ? axis.options.min : panelOptions.min;\n        }\n      }\n\n      // Series could have different timeSteps,\n      // let's find the smallest one so that bars are correctly rendered.\n      // In addition, only take series which are rendered as bars for this.\n      function getMinTimeStepOfSeries(data) {\n        var min = Number.MAX_VALUE;\n\n        for (let i = 0; i < data.length; i++) {\n          if (!data[i].stats.timeStep) {\n            continue;\n          }\n          if (panel.bars) {\n            if (data[i].bars && data[i].bars.show === false) {\n              continue;\n            }\n          } else {\n            if (typeof data[i].bars === 'undefined' || typeof data[i].bars.show === 'undefined' || !data[i].bars.show) {\n              continue;\n            }\n          }\n\n          if (data[i].stats.timeStep < min) {\n            min = data[i].stats.timeStep;\n          }\n        }\n\n        return min;\n      }\n\n      // Function for rendering panel\n      function render_panel() {\n        panelWidth =  elem.width();\n\n        if (shouldAbortRender()) {\n          return;\n        }\n\n        // give space to alert editing\n        thresholdManager.prepare(elem, data);\n\n        // un-check dashes if lines are unchecked\n        panel.dashes = panel.lines ? panel.dashes : false;\n\n        var stack = panel.stack ? true : null;\n\n        // Populate element\n        var options = {\n          hooks: {\n            draw: [drawHook],\n            processOffset: [processOffsetHook],\n          },\n          legend: { show: false },\n          series: {\n            stackpercent: panel.stack ? panel.percentage : false,\n            stack: panel.percentage ? null : stack,\n            lines:  {\n              show: panel.lines,\n              zero: false,\n              fill: translateFillOption(panel.fill),\n              lineWidth: panel.dashes ? 0 : panel.linewidth,\n              steps: panel.steppedLine\n            },\n            dashes: {\n              show: panel.dashes,\n              lineWidth: panel.linewidth,\n              dashLength: [panel.dashLength, panel.spaceLength]\n            },\n            bars: {\n              show: panel.bars,\n              fill: 1,\n              barWidth: 1,\n              zero: false,\n              lineWidth: 0\n            },\n            points: {\n              show: panel.points,\n              fill: 1,\n              fillColor: false,\n              radius: panel.points ? panel.pointradius : 2\n            },\n            shadowSize: 0\n          },\n          yaxes: [],\n          xaxis: {},\n          grid: {\n            minBorderMargin: 0,\n            markings: [],\n            backgroundColor: null,\n            borderWidth: 0,\n            hoverable: true,\n            clickable: true,\n            color: '#c8c8c8',\n            margin: { left: 0, right: 0 },\n            labelMarginX: 0,\n          },\n          selection: {\n            mode: \"x\",\n            color: '#666'\n          },\n          crosshair: {\n            mode: 'x'\n          }\n        };\n\n        for (let i = 0; i < data.length; i++) {\n          let series = data[i];\n          series.data = series.getFlotPairs(series.nullPointMode || panel.nullPointMode);\n\n          // if hidden remove points and disable stack\n          if (ctrl.hiddenSeries[series.alias]) {\n            series.data = [];\n            series.stack = false;\n          }\n        }\n\n        switch (panel.xaxis.mode) {\n          case 'series': {\n            options.series.bars.barWidth = 0.7;\n            options.series.bars.align = 'center';\n\n            for (let i = 0; i < data.length; i++) {\n              let series = data[i];\n              series.data = [[i + 1, series.stats[panel.xaxis.values[0]]]];\n            }\n\n            addXSeriesAxis(options);\n            break;\n          }\n          case 'histogram': {\n            let bucketSize = 0;\n            let values = getSeriesValues(data);\n\n            if (data.length && values.length) {\n              let histMin = _.min(_.map(data, s => s.stats.min));\n              let histMax = _.max(_.map(data, s => s.stats.max));\n              let ticks = panel.xaxis.buckets || panelWidth / 50;\n              bucketSize = tickStep(histMin, histMax, ticks);\n              let histogram = convertValuesToHistogram(values, bucketSize);\n\n              data[0].data = histogram;\n              data[0].alias = data[0].label = data[0].id = \"count\";\n              data = [data[0]];\n\n              options.series.bars.barWidth = bucketSize * 0.8;\n            } else {\n              bucketSize = 0;\n            }\n\n            addXHistogramAxis(options, bucketSize);\n            break;\n          }\n          case 'table': {\n            options.series.bars.barWidth = 0.7;\n            options.series.bars.align = 'center';\n            addXTableAxis(options);\n            break;\n          }\n          default: {\n            options.series.bars.barWidth = getMinTimeStepOfSeries(data) / 1.5;\n            addTimeAxis(options);\n            break;\n          }\n        }\n\n        thresholdManager.addFlotOptions(options, panel);\n        eventManager.addFlotEvents(annotations, options);\n        configureAxisOptions(data, options);\n\n        sortedSeries = _.sortBy(data, function(series) { return series.zindex; });\n\n        function callPlot(incrementRenderCounter) {\n          try {\n            plot = $.plot(elem, sortedSeries, options);\n            if (ctrl.renderError) {\n              delete ctrl.error;\n              delete ctrl.inspector;\n            }\n          } catch (e) {\n            console.log('flotcharts error', e);\n            ctrl.error = e.message || \"Render Error\";\n            ctrl.renderError = true;\n            ctrl.inspector = {error: e};\n          }\n\n          if (incrementRenderCounter) {\n            ctrl.renderingCompleted();\n          }\n        }\n\n        if (shouldDelayDraw(panel)) {\n          // temp fix for legends on the side, need to render twice to get dimensions right\n          callPlot(false);\n          setTimeout(function() { callPlot(true); }, 50);\n          legendSideLastValue = panel.legend.rightSide;\n        } else {\n          callPlot(true);\n        }\n      }\n\n      function translateFillOption(fill) {\n        if (panel.percentage && panel.stack) {\n          return fill === 0 ? 0.001 : fill/10;\n        } else {\n          return fill/10;\n        }\n      }\n\n      function shouldDelayDraw(panel) {\n        if (panel.legend.rightSide) {\n          return true;\n        }\n        if (legendSideLastValue !== null && panel.legend.rightSide !== legendSideLastValue) {\n          return true;\n        }\n        return false;\n      }\n\n      function addTimeAxis(options) {\n        var ticks = panelWidth / 100;\n        var min = _.isUndefined(ctrl.range.from) ? null : ctrl.range.from.valueOf();\n        var max = _.isUndefined(ctrl.range.to) ? null : ctrl.range.to.valueOf();\n\n        options.xaxis = {\n          timezone: dashboard.getTimezone(),\n          show: panel.xaxis.show,\n          mode: \"time\",\n          min: min,\n          max: max,\n          label: \"Datetime\",\n          ticks: ticks,\n          timeformat: time_format(ticks, min, max),\n        };\n      }\n\n      function addXSeriesAxis(options) {\n        var ticks = _.map(data, function(series, index) {\n          return [index + 1, series.alias];\n        });\n\n        options.xaxis = {\n          timezone: dashboard.getTimezone(),\n          show: panel.xaxis.show,\n          mode: null,\n          min: 0,\n          max: ticks.length + 1,\n          label: \"Datetime\",\n          ticks: ticks\n        };\n      }\n\n      function addXHistogramAxis(options, bucketSize) {\n        let ticks, min, max;\n        let defaultTicks = panelWidth / 50;\n\n        if (data.length && bucketSize) {\n          ticks = _.map(data[0].data, point => point[0]);\n          min = _.min(ticks);\n          max = _.max(ticks);\n\n          // Adjust tick step\n          let tickStep = bucketSize;\n          let ticks_num = Math.floor((max - min) / tickStep);\n          while (ticks_num > defaultTicks) {\n            tickStep = tickStep * 2;\n            ticks_num = Math.ceil((max - min) / tickStep);\n          }\n\n          // Expand ticks for pretty view\n          min = Math.floor(min / tickStep) * tickStep;\n          max = Math.ceil(max / tickStep) * tickStep;\n\n          ticks = [];\n          for (let i = min; i <= max; i += tickStep) {\n            ticks.push(i);\n          }\n        } else {\n          // Set defaults if no data\n          ticks = defaultTicks / 2;\n          min = 0;\n          max = 1;\n        }\n\n        options.xaxis = {\n          timezone: dashboard.getTimezone(),\n          show: panel.xaxis.show,\n          mode: null,\n          min: min,\n          max: max,\n          label: \"Histogram\",\n          ticks: ticks\n        };\n\n        // Use 'short' format for histogram values\n        configureAxisMode(options.xaxis, 'short');\n      }\n\n      function addXTableAxis(options) {\n        var ticks = _.map(data, function(series, seriesIndex) {\n          return _.map(series.datapoints, function(point, pointIndex) {\n            var tickIndex = seriesIndex * series.datapoints.length + pointIndex;\n            return [tickIndex + 1, point[1]];\n          });\n        });\n        ticks = _.flatten(ticks, true);\n\n        options.xaxis = {\n          timezone: dashboard.getTimezone(),\n          show: panel.xaxis.show,\n          mode: null,\n          min: 0,\n          max: ticks.length + 1,\n          label: \"Datetime\",\n          ticks: ticks\n        };\n      }\n\n      function configureAxisOptions(data, options) {\n        var defaults = {\n          position: 'left',\n          show: panel.yaxes[0].show,\n          index: 1,\n          logBase: panel.yaxes[0].logBase || 1,\n          min: parseNumber(panel.yaxes[0].min),\n          max: parseNumber(panel.yaxes[0].max),\n          tickDecimals: panel.yaxes[0].decimals\n        };\n\n        options.yaxes.push(defaults);\n\n        if (_.find(data, {yaxis: 2})) {\n          var secondY = _.clone(defaults);\n          secondY.index = 2;\n          secondY.show = panel.yaxes[1].show;\n          secondY.logBase = panel.yaxes[1].logBase || 1;\n          secondY.position = 'right';\n          secondY.min = parseNumber(panel.yaxes[1].min);\n          secondY.max = parseNumber(panel.yaxes[1].max);\n          secondY.tickDecimals = panel.yaxes[1].decimals;\n          options.yaxes.push(secondY);\n\n          applyLogScale(options.yaxes[1], data);\n          configureAxisMode(options.yaxes[1], panel.percentage && panel.stack ? \"percent\" : panel.yaxes[1].format);\n        }\n        applyLogScale(options.yaxes[0], data);\n        configureAxisMode(options.yaxes[0], panel.percentage && panel.stack ? \"percent\" : panel.yaxes[0].format);\n      }\n\n      function parseNumber(value) {\n        if (value === null || typeof value === 'undefined') {\n          return null;\n        }\n\n        return _.toNumber(value);\n      }\n\n      function applyLogScale(axis, data) {\n        if (axis.logBase === 1) {\n          return;\n        }\n\n        const minSetToZero = axis.min === 0;\n\n        if (axis.min < Number.MIN_VALUE) {\n          axis.min = null;\n        }\n        if (axis.max < Number.MIN_VALUE) {\n          axis.max = null;\n        }\n\n        var series, i;\n        var max = axis.max, min = axis.min;\n\n        for (i = 0; i < data.length; i++) {\n          series = data[i];\n          if (series.yaxis === axis.index) {\n            if (!max || max < series.stats.max) {\n              max = series.stats.max;\n            }\n            if (!min || min > series.stats.logmin) {\n              min = series.stats.logmin;\n            }\n          }\n        }\n\n        axis.transform = function(v) { return (v < Number.MIN_VALUE) ? null : Math.log(v) / Math.log(axis.logBase); };\n        axis.inverseTransform  = function (v) { return Math.pow(axis.logBase,v); };\n\n        if (!max && !min) {\n          max = axis.inverseTransform(+2);\n          min = axis.inverseTransform(-2);\n        } else if (!max) {\n          max = min*axis.inverseTransform(+4);\n        } else if (!min) {\n          min = max*axis.inverseTransform(-4);\n        }\n\n        if (axis.min) {\n          min = axis.inverseTransform(Math.ceil(axis.transform(axis.min)));\n        } else {\n          min = axis.min = axis.inverseTransform(Math.floor(axis.transform(min)));\n        }\n        if (axis.max) {\n          max = axis.inverseTransform(Math.floor(axis.transform(axis.max)));\n        } else {\n          max = axis.max = axis.inverseTransform(Math.ceil(axis.transform(max)));\n        }\n\n        if (!min || min < Number.MIN_VALUE || !max || max < Number.MIN_VALUE) {\n          return;\n        }\n\n        if (Number.isFinite(min) && Number.isFinite(max)) {\n          if (minSetToZero) {\n            axis.min = 0.1;\n            min = 1;\n          }\n\n          axis.ticks = generateTicksForLogScaleYAxis(min, max, axis.logBase);\n          if (minSetToZero) {\n            axis.ticks.unshift(0.1);\n          }\n          if (axis.ticks[axis.ticks.length - 1] > axis.max) {\n            axis.max = axis.ticks[axis.ticks.length - 1];\n          }\n        } else {\n          axis.ticks = [1, 2];\n          delete axis.min;\n          delete axis.max;\n        }\n      }\n\n      function generateTicksForLogScaleYAxis(min, max, logBase) {\n        let ticks = [];\n\n        var nextTick;\n        for (nextTick = min; nextTick <= max; nextTick *= logBase) {\n          ticks.push(nextTick);\n        }\n\n        const maxNumTicks = Math.ceil(ctrl.height/25);\n        const numTicks = ticks.length;\n        if (numTicks > maxNumTicks) {\n          const factor = Math.ceil(numTicks/maxNumTicks) * logBase;\n          ticks = [];\n\n          for (nextTick = min; nextTick <= (max * factor); nextTick *= factor) {\n            ticks.push(nextTick);\n          }\n        }\n\n        return ticks;\n      }\n\n      function configureAxisMode(axis, format) {\n        axis.tickFormatter = function(val, axis) {\n          return kbn.valueFormats[format](val, axis.tickDecimals, axis.scaledDecimals);\n        };\n      }\n\n      function time_format(ticks, min, max) {\n        if (min && max && ticks) {\n          var range = max - min;\n          var secPerTick = (range/ticks) / 1000;\n          var oneDay = 86400000;\n          var oneYear = 31536000000;\n\n          if (secPerTick <= 45) {\n            return \"%H:%M:%S\";\n          }\n          if (secPerTick <= 7200 || range <= oneDay) {\n            return \"%H:%M\";\n          }\n          if (secPerTick <= 80000) {\n            return \"%m/%d %H:%M\";\n          }\n          if (secPerTick <= 2419200 || range <= oneYear) {\n            return \"%m/%d\";\n          }\n          return \"%Y-%m\";\n        }\n\n        return \"%H:%M\";\n      }\n\n      elem.bind(\"plotselected\", function (event, ranges) {\n        if ((ranges.ctrlKey || ranges.metaKey) && contextSrv.isEditor) {\n          setTimeout(() => {\n            eventManager.updateTime(ranges.xaxis);\n          }, 100);\n        } else {\n          scope.$apply(function() {\n            timeSrv.setTime({\n              from  : moment.utc(ranges.xaxis.from),\n              to    : moment.utc(ranges.xaxis.to),\n            });\n          });\n        }\n      });\n\n      elem.bind(\"plotclick\", function (event, pos, item) {\n        if ((pos.ctrlKey || pos.metaKey) && contextSrv.isEditor) {\n          // Skip if range selected (added in \"plotselected\" event handler)\n          let isRangeSelection = pos.x !== pos.x1;\n          if (!isRangeSelection) {\n            setTimeout(() => {\n              eventManager.updateTime({from: pos.x, to: null});\n            }, 100);\n          }\n        }\n      });\n\n      scope.$on('$destroy', function() {\n        tooltip.destroy();\n        elem.off();\n        elem.remove();\n      });\n    }\n  };\n}\n\ncoreModule.directive('lightstepGraph', graphDirective);\n\n\n\n// WEBPACK FOOTER //\n// ./graph.js","/* Flot plugin for selecting regions of a plot.\n\nCopyright (c) 2007-2013 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nThe plugin supports these options:\n\nselection: {\n\tmode: null or \"x\" or \"y\" or \"xy\",\n\tcolor: color,\n\tshape: \"round\" or \"miter\" or \"bevel\",\n\tminSize: number of pixels\n}\n\nSelection support is enabled by setting the mode to one of \"x\", \"y\" or \"xy\".\nIn \"x\" mode, the user will only be able to specify the x range, similarly for\n\"y\" mode. For \"xy\", the selection becomes a rectangle where both ranges can be\nspecified. \"color\" is color of the selection (if you need to change the color\nlater on, you can get to it with plot.getOptions().selection.color). \"shape\"\nis the shape of the corners of the selection.\n\n\"minSize\" is the minimum size a selection can be in pixels. This value can\nbe customized to determine the smallest size a selection can be and still\nhave the selection rectangle be displayed. When customizing this value, the\nfact that it refers to pixels, not axis units must be taken into account.\nThus, for example, if there is a bar graph in time mode with BarWidth set to 1\nminute, setting \"minSize\" to 1 will not make the minimum selection size 1\nminute, but rather 1 pixel. Note also that setting \"minSize\" to 0 will prevent\n\"plotunselected\" events from being fired when the user clicks the mouse without\ndragging.\n\nWhen selection support is enabled, a \"plotselected\" event will be emitted on\nthe DOM element you passed into the plot function. The event handler gets a\nparameter with the ranges selected on the axes, like this:\n\n\tplaceholder.bind( \"plotselected\", function( event, ranges ) {\n\t\talert(\"You selected \" + ranges.xaxis.from + \" to \" + ranges.xaxis.to)\n\t\t// similar for yaxis - with multiple axes, the extra ones are in\n\t\t// x2axis, x3axis, ...\n\t});\n\nThe \"plotselected\" event is only fired when the user has finished making the\nselection. A \"plotselecting\" event is fired during the process with the same\nparameters as the \"plotselected\" event, in case you want to know what's\nhappening while it's happening,\n\nA \"plotunselected\" event with no arguments is emitted when the user clicks the\nmouse to remove the selection. As stated above, setting \"minSize\" to 0 will\ndestroy this behavior.\n\nThe plugin allso adds the following methods to the plot object:\n\n- setSelection( ranges, preventEvent )\n\n  Set the selection rectangle. The passed in ranges is on the same form as\n  returned in the \"plotselected\" event. If the selection mode is \"x\", you\n  should put in either an xaxis range, if the mode is \"y\" you need to put in\n  an yaxis range and both xaxis and yaxis if the selection mode is \"xy\", like\n  this:\n\n\tsetSelection({ xaxis: { from: 0, to: 10 }, yaxis: { from: 40, to: 60 } });\n\n  setSelection will trigger the \"plotselected\" event when called. If you don't\n  want that to happen, e.g. if you're inside a \"plotselected\" handler, pass\n  true as the second parameter. If you are using multiple axes, you can\n  specify the ranges on any of those, e.g. as x2axis/x3axis/... instead of\n  xaxis, the plugin picks the first one it sees.\n\n- clearSelection( preventEvent )\n\n  Clear the selection rectangle. Pass in true to avoid getting a\n  \"plotunselected\" event.\n\n- getSelection()\n\n  Returns the current selection in the same format as the \"plotselected\"\n  event. If there's currently no selection, the function returns null.\n\n*/\n\n(function ($) {\n    function init(plot) {\n        var selection = {\n                first: { x: -1, y: -1}, second: { x: -1, y: -1},\n                show: false,\n                active: false\n            };\n\n        // FIXME: The drag handling implemented here should be\n        // abstracted out, there's some similar code from a library in\n        // the navigation plugin, this should be massaged a bit to fit\n        // the Flot cases here better and reused. Doing this would\n        // make this plugin much slimmer.\n        var savedhandlers = {};\n\n        var mouseUpHandler = null;\n\n        function onMouseMove(e) {\n            if (selection.active) {\n                updateSelection(e);\n\n                plot.getPlaceholder().trigger(\"plotselecting\", [ getSelection() ]);\n            }\n        }\n\n        function onMouseDown(e) {\n            if (e.which != 1)  // only accept left-click\n                return;\n\n            // cancel out any text selections\n            document.body.focus();\n\n            // prevent text selection and drag in old-school browsers\n            if (document.onselectstart !== undefined && savedhandlers.onselectstart == null) {\n                savedhandlers.onselectstart = document.onselectstart;\n                document.onselectstart = function () { return false; };\n            }\n            if (document.ondrag !== undefined && savedhandlers.ondrag == null) {\n                savedhandlers.ondrag = document.ondrag;\n                document.ondrag = function () { return false; };\n            }\n\n            setSelectionPos(selection.first, e);\n\n            selection.active = true;\n\n            // this is a bit silly, but we have to use a closure to be\n            // able to whack the same handler again\n            mouseUpHandler = function (e) { onMouseUp(e); };\n\n            $(document).one(\"mouseup\", mouseUpHandler);\n        }\n\n        function onMouseUp(e) {\n            mouseUpHandler = null;\n\n            // revert drag stuff for old-school browsers\n            if (document.onselectstart !== undefined)\n                document.onselectstart = savedhandlers.onselectstart;\n            if (document.ondrag !== undefined)\n                document.ondrag = savedhandlers.ondrag;\n\n            // no more dragging\n            selection.active = false;\n            updateSelection(e);\n\n            if (selectionIsSane())\n                triggerSelectedEvent(e);\n            else {\n                // this counts as a clear\n                plot.getPlaceholder().trigger(\"plotunselected\", [ ]);\n                plot.getPlaceholder().trigger(\"plotselecting\", [ null ]);\n            }\n\n            setTimeout(function() {\n              plot.isSelecting = false;\n            }, 10);\n\n            return false;\n        }\n\n        function getSelection() {\n            if (!selectionIsSane())\n                return null;\n\n            if (!selection.show) return null;\n\n            var r = {}, c1 = selection.first, c2 = selection.second;\n            var axes = plot.getAxes();\n            // look if no axis is used\n            var noAxisInUse = true;\n            $.each(axes, function (name, axis) {\n              if (axis.used) {\n                anyUsed = false;\n              }\n            })\n\n            $.each(axes, function (name, axis) {\n                if (axis.used || noAxisInUse) {\n                    var p1 = axis.c2p(c1[axis.direction]), p2 = axis.c2p(c2[axis.direction]);\n                    r[name] = { from: Math.min(p1, p2), to: Math.max(p1, p2) };\n                }\n            });\n            return r;\n        }\n\n        function triggerSelectedEvent(event) {\n            var r = getSelection();\n\n            // Add ctrlKey and metaKey to event\n            r.ctrlKey = event.ctrlKey;\n            r.metaKey = event.metaKey;\n\n            plot.getPlaceholder().trigger(\"plotselected\", [ r ]);\n\n            // backwards-compat stuff, to be removed in future\n            if (r.xaxis && r.yaxis)\n                plot.getPlaceholder().trigger(\"selected\", [ { x1: r.xaxis.from, y1: r.yaxis.from, x2: r.xaxis.to, y2: r.yaxis.to } ]);\n        }\n\n        function clamp(min, value, max) {\n            return value < min ? min: (value > max ? max: value);\n        }\n\n        function setSelectionPos(pos, e) {\n            var o = plot.getOptions();\n            var offset = plot.getPlaceholder().offset();\n            var plotOffset = plot.getPlotOffset();\n            pos.x = clamp(0, e.pageX - offset.left - plotOffset.left, plot.width());\n            pos.y = clamp(0, e.pageY - offset.top - plotOffset.top, plot.height());\n\n            if (o.selection.mode == \"y\")\n                pos.x = pos == selection.first ? 0 : plot.width();\n\n            if (o.selection.mode == \"x\")\n                pos.y = pos == selection.first ? 0 : plot.height();\n        }\n\n        function updateSelection(pos) {\n            if (pos.pageX == null)\n                return;\n\n            setSelectionPos(selection.second, pos);\n            if (selectionIsSane()) {\n                plot.isSelecting = true;\n                selection.show = true;\n                plot.triggerRedrawOverlay();\n            }\n            else\n                clearSelection(true);\n        }\n\n        function clearSelection(preventEvent) {\n            if (selection.show) {\n                selection.show = false;\n                plot.triggerRedrawOverlay();\n                if (!preventEvent)\n                    plot.getPlaceholder().trigger(\"plotunselected\", [ ]);\n            }\n        }\n\n        // function taken from markings support in Flot\n        function extractRange(ranges, coord) {\n            var axis, from, to, key, axes = plot.getAxes();\n\n            for (var k in axes) {\n                axis = axes[k];\n                if (axis.direction == coord) {\n                    key = coord + axis.n + \"axis\";\n                    if (!ranges[key] && axis.n == 1)\n                        key = coord + \"axis\"; // support x1axis as xaxis\n                    if (ranges[key]) {\n                        from = ranges[key].from;\n                        to = ranges[key].to;\n                        break;\n                    }\n                }\n            }\n\n            // backwards-compat stuff - to be removed in future\n            if (!ranges[key]) {\n                axis = coord == \"x\" ? plot.getXAxes()[0] : plot.getYAxes()[0];\n                from = ranges[coord + \"1\"];\n                to = ranges[coord + \"2\"];\n            }\n\n            // auto-reverse as an added bonus\n            if (from != null && to != null && from > to) {\n                var tmp = from;\n                from = to;\n                to = tmp;\n            }\n\n            return { from: from, to: to, axis: axis };\n        }\n\n        function setSelection(ranges, preventEvent) {\n            var axis, range, o = plot.getOptions();\n\n            if (o.selection.mode == \"y\") {\n                selection.first.x = 0;\n                selection.second.x = plot.width();\n            }\n            else {\n                range = extractRange(ranges, \"x\");\n\n                selection.first.x = range.axis.p2c(range.from);\n                selection.second.x = range.axis.p2c(range.to);\n            }\n\n            if (o.selection.mode == \"x\") {\n                selection.first.y = 0;\n                selection.second.y = plot.height();\n            }\n            else {\n                range = extractRange(ranges, \"y\");\n\n                selection.first.y = range.axis.p2c(range.from);\n                selection.second.y = range.axis.p2c(range.to);\n            }\n\n            selection.show = true;\n            plot.triggerRedrawOverlay();\n            if (!preventEvent && selectionIsSane())\n                triggerSelectedEvent();\n        }\n\n        function selectionIsSane() {\n            var minSize = plot.getOptions().selection.minSize;\n            return Math.abs(selection.second.x - selection.first.x) >= minSize &&\n                Math.abs(selection.second.y - selection.first.y) >= minSize;\n        }\n\n        plot.clearSelection = clearSelection;\n        plot.setSelection = setSelection;\n        plot.getSelection = getSelection;\n\n        plot.hooks.bindEvents.push(function(plot, eventHolder) {\n            var o = plot.getOptions();\n            if (o.selection.mode != null) {\n                eventHolder.mousemove(onMouseMove);\n                eventHolder.mousedown(onMouseDown);\n            }\n        });\n\n\n        plot.hooks.drawOverlay.push(function (plot, ctx) {\n            // draw selection\n            if (selection.show && selectionIsSane()) {\n                var plotOffset = plot.getPlotOffset();\n                var o = plot.getOptions();\n\n                ctx.save();\n                ctx.translate(plotOffset.left, plotOffset.top);\n\n                var c = $.color.parse(o.selection.color);\n\n                ctx.strokeStyle = c.scale('a', 0.8).toString();\n                ctx.lineWidth = 1;\n                ctx.lineJoin = o.selection.shape;\n                ctx.fillStyle = c.scale('a', 0.4).toString();\n\n                var x = Math.min(selection.first.x, selection.second.x) + 0.5,\n                    y = Math.min(selection.first.y, selection.second.y) + 0.5,\n                    w = Math.abs(selection.second.x - selection.first.x) - 1,\n                    h = Math.abs(selection.second.y - selection.first.y) - 1;\n\n                ctx.fillRect(x, y, w, h);\n                ctx.strokeRect(x, y, w, h);\n\n                ctx.restore();\n            }\n        });\n\n        plot.hooks.shutdown.push(function (plot, eventHolder) {\n            eventHolder.unbind(\"mousemove\", onMouseMove);\n            eventHolder.unbind(\"mousedown\", onMouseDown);\n\n            if (mouseUpHandler)\n                $(document).unbind(\"mouseup\", mouseUpHandler);\n        });\n\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: {\n            selection: {\n                mode: null, // one of null, \"x\", \"y\" or \"xy\"\n                color: \"#e8cfac\",\n                shape: \"round\", // one of \"round\", \"miter\", or \"bevel\"\n                minSize: 5 // minimum number of pixels\n            }\n        },\n        name: 'selection',\n        version: '1.1'\n    });\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/flot/jquery.flot.selection.js","/* Pretty handling of time axes.\n\nCopyright (c) 2007-2013 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nSet axis.mode to \"time\" to enable. See the section \"Time series data\" in\nAPI.txt for details.\n\n*/\n\n(function($) {\n\n\tvar options = {\n\t\txaxis: {\n\t\t\ttimezone: null,\t\t// \"browser\" for local to the client or timezone for timezone-js\n\t\t\ttimeformat: null,\t// format string to use\n\t\t\ttwelveHourClock: false,\t// 12 or 24 time in time mode\n\t\t\tmonthNames: null\t// list of names of months\n\t\t}\n\t};\n\n\t// round to nearby lower multiple of base\n\n\tfunction floorInBase(n, base) {\n\t\treturn base * Math.floor(n / base);\n\t}\n\n\t// Returns a string with the date d formatted according to fmt.\n\t// A subset of the Open Group's strftime format is supported.\n\n\tfunction formatDate(d, fmt, monthNames, dayNames) {\n\n\t\tif (typeof d.strftime == \"function\") {\n\t\t\treturn d.strftime(fmt);\n\t\t}\n\n\t\tvar leftPad = function(n, pad) {\n\t\t\tn = \"\" + n;\n\t\t\tpad = \"\" + (pad == null ? \"0\" : pad);\n\t\t\treturn n.length == 1 ? pad + n : n;\n\t\t};\n\n\t\tvar r = [];\n\t\tvar escape = false;\n\t\tvar hours = d.getHours();\n\t\tvar isAM = hours < 12;\n\n\t\tif (monthNames == null) {\n\t\t\tmonthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\t\t}\n\n\t\tif (dayNames == null) {\n\t\t\tdayNames = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n\t\t}\n\n\t\tvar hours12;\n\n\t\tif (hours > 12) {\n\t\t\thours12 = hours - 12;\n\t\t} else if (hours == 0) {\n\t\t\thours12 = 12;\n\t\t} else {\n\t\t\thours12 = hours;\n\t\t}\n\n\t\tfor (var i = 0; i < fmt.length; ++i) {\n\n\t\t\tvar c = fmt.charAt(i);\n\n\t\t\tif (escape) {\n\t\t\t\tswitch (c) {\n\t\t\t\t\tcase 'a': c = \"\" + dayNames[d.getDay()]; break;\n\t\t\t\t\tcase 'b': c = \"\" + monthNames[d.getMonth()]; break;\n\t\t\t\t\tcase 'd': c = leftPad(d.getDate(), \"\"); break;\n\t\t\t\t\tcase 'e': c = leftPad(d.getDate(), \" \"); break;\n\t\t\t\t\tcase 'h':\t// For back-compat with 0.7; remove in 1.0\n\t\t\t\t\tcase 'H': c = leftPad(hours); break;\n\t\t\t\t\tcase 'I': c = leftPad(hours12); break;\n\t\t\t\t\tcase 'l': c = leftPad(hours12, \" \"); break;\n\t\t\t\t\tcase 'm': c = leftPad(d.getMonth() + 1, \"\"); break;\n\t\t\t\t\tcase 'M': c = leftPad(d.getMinutes()); break;\n\t\t\t\t\t// quarters not in Open Group's strftime specification\n\t\t\t\t\tcase 'q':\n\t\t\t\t\t\tc = \"\" + (Math.floor(d.getMonth() / 3) + 1); break;\n\t\t\t\t\tcase 'S': c = leftPad(d.getSeconds()); break;\n\t\t\t\t\tcase 'y': c = leftPad(d.getFullYear() % 100); break;\n\t\t\t\t\tcase 'Y': c = \"\" + d.getFullYear(); break;\n\t\t\t\t\tcase 'p': c = (isAM) ? (\"\" + \"am\") : (\"\" + \"pm\"); break;\n\t\t\t\t\tcase 'P': c = (isAM) ? (\"\" + \"AM\") : (\"\" + \"PM\"); break;\n\t\t\t\t\tcase 'w': c = \"\" + d.getDay(); break;\n\t\t\t\t}\n\t\t\t\tr.push(c);\n\t\t\t\tescape = false;\n\t\t\t} else {\n\t\t\t\tif (c == \"%\") {\n\t\t\t\t\tescape = true;\n\t\t\t\t} else {\n\t\t\t\t\tr.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn r.join(\"\");\n\t}\n\n\t// To have a consistent view of time-based data independent of which time\n\t// zone the client happens to be in we need a date-like object independent\n\t// of time zones.  This is done through a wrapper that only calls the UTC\n\t// versions of the accessor methods.\n\n\tfunction makeUtcWrapper(d) {\n\n\t\tfunction addProxyMethod(sourceObj, sourceMethod, targetObj, targetMethod) {\n\t\t\tsourceObj[sourceMethod] = function() {\n\t\t\t\treturn targetObj[targetMethod].apply(targetObj, arguments);\n\t\t\t};\n\t\t};\n\n\t\tvar utc = {\n\t\t\tdate: d\n\t\t};\n\n\t\t// support strftime, if found\n\n\t\tif (d.strftime != undefined) {\n\t\t\taddProxyMethod(utc, \"strftime\", d, \"strftime\");\n\t\t}\n\n\t\taddProxyMethod(utc, \"getTime\", d, \"getTime\");\n\t\taddProxyMethod(utc, \"setTime\", d, \"setTime\");\n\n\t\tvar props = [\"Date\", \"Day\", \"FullYear\", \"Hours\", \"Milliseconds\", \"Minutes\", \"Month\", \"Seconds\"];\n\n\t\tfor (var p = 0; p < props.length; p++) {\n\t\t\taddProxyMethod(utc, \"get\" + props[p], d, \"getUTC\" + props[p]);\n\t\t\taddProxyMethod(utc, \"set\" + props[p], d, \"setUTC\" + props[p]);\n\t\t}\n\n\t\treturn utc;\n\t};\n\n\t// select time zone strategy.  This returns a date-like object tied to the\n\t// desired timezone\n\n\tfunction dateGenerator(ts, opts) {\n\t\tif (opts.timezone == \"browser\") {\n\t\t\treturn new Date(ts);\n\t\t} else if (!opts.timezone || opts.timezone == \"utc\") {\n\t\t\treturn makeUtcWrapper(new Date(ts));\n\t\t} else if (typeof timezoneJS != \"undefined\" && typeof timezoneJS.Date != \"undefined\") {\n\t\t\tvar d = new timezoneJS.Date();\n\t\t\t// timezone-js is fickle, so be sure to set the time zone before\n\t\t\t// setting the time.\n\t\t\td.setTimezone(opts.timezone);\n\t\t\td.setTime(ts);\n\t\t\treturn d;\n\t\t} else {\n\t\t\treturn makeUtcWrapper(new Date(ts));\n\t\t}\n\t}\n\n\t// map of app. size of time units in milliseconds\n\n\tvar timeUnitSize = {\n\t\t\"second\": 1000,\n\t\t\"minute\": 60 * 1000,\n\t\t\"hour\": 60 * 60 * 1000,\n\t\t\"day\": 24 * 60 * 60 * 1000,\n\t\t\"month\": 30 * 24 * 60 * 60 * 1000,\n\t\t\"quarter\": 3 * 30 * 24 * 60 * 60 * 1000,\n\t\t\"year\": 365.2425 * 24 * 60 * 60 * 1000\n\t};\n\n\t// the allowed tick sizes, after 1 year we use\n\t// an integer algorithm\n\n\tvar baseSpec = [\n\t\t[1, \"second\"], [2, \"second\"], [5, \"second\"], [10, \"second\"],\n\t\t[30, \"second\"],\n\t\t[1, \"minute\"], [2, \"minute\"], [5, \"minute\"], [10, \"minute\"],\n\t\t[30, \"minute\"],\n\t\t[1, \"hour\"], [2, \"hour\"], [4, \"hour\"],\n\t\t[8, \"hour\"], [12, \"hour\"],\n\t\t[1, \"day\"], [2, \"day\"], [3, \"day\"],\n\t\t[0.25, \"month\"], [0.5, \"month\"], [1, \"month\"],\n\t\t[2, \"month\"]\n\t];\n\n\t// we don't know which variant(s) we'll need yet, but generating both is\n\t// cheap\n\n\tvar specMonths = baseSpec.concat([[3, \"month\"], [6, \"month\"],\n\t\t[1, \"year\"]]);\n\tvar specQuarters = baseSpec.concat([[1, \"quarter\"], [2, \"quarter\"],\n\t\t[1, \"year\"]]);\n\n\tfunction init(plot) {\n\t\tplot.hooks.processOptions.push(function (plot, options) {\n\t\t\t$.each(plot.getAxes(), function(axisName, axis) {\n\n\t\t\t\tvar opts = axis.options;\n\n\t\t\t\tif (opts.mode == \"time\") {\n\t\t\t\t\taxis.tickGenerator = function(axis) {\n\n\t\t\t\t\t\tvar ticks = [];\n\t\t\t\t\t\tvar d = dateGenerator(axis.min, opts);\n\t\t\t\t\t\tvar minSize = 0;\n\n\t\t\t\t\t\t// make quarter use a possibility if quarters are\n\t\t\t\t\t\t// mentioned in either of these options\n\n\t\t\t\t\t\tvar spec = (opts.tickSize && opts.tickSize[1] ===\n\t\t\t\t\t\t\t\"quarter\") ||\n\t\t\t\t\t\t\t(opts.minTickSize && opts.minTickSize[1] ===\n\t\t\t\t\t\t\t\"quarter\") ? specQuarters : specMonths;\n\n\t\t\t\t\t\tif (opts.minTickSize != null) {\n\t\t\t\t\t\t\tif (typeof opts.tickSize == \"number\") {\n\t\t\t\t\t\t\t\tminSize = opts.tickSize;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tminSize = opts.minTickSize[0] * timeUnitSize[opts.minTickSize[1]];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (var i = 0; i < spec.length - 1; ++i) {\n\t\t\t\t\t\t\tif (axis.delta < (spec[i][0] * timeUnitSize[spec[i][1]]\n\t\t\t\t\t\t\t\t\t\t\t  + spec[i + 1][0] * timeUnitSize[spec[i + 1][1]]) / 2\n\t\t\t\t\t\t\t\t&& spec[i][0] * timeUnitSize[spec[i][1]] >= minSize) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar size = spec[i][0];\n\t\t\t\t\t\tvar unit = spec[i][1];\n\n\t\t\t\t\t\t// special-case the possibility of several years\n\n\t\t\t\t\t\tif (unit == \"year\") {\n\n\t\t\t\t\t\t\t// if given a minTickSize in years, just use it,\n\t\t\t\t\t\t\t// ensuring that it's an integer\n\n\t\t\t\t\t\t\tif (opts.minTickSize != null && opts.minTickSize[1] == \"year\") {\n\t\t\t\t\t\t\t\tsize = Math.floor(opts.minTickSize[0]);\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tvar magn = Math.pow(10, Math.floor(Math.log(axis.delta / timeUnitSize.year) / Math.LN10));\n\t\t\t\t\t\t\t\tvar norm = (axis.delta / timeUnitSize.year) / magn;\n\n\t\t\t\t\t\t\t\tif (norm < 1.5) {\n\t\t\t\t\t\t\t\t\tsize = 1;\n\t\t\t\t\t\t\t\t} else if (norm < 3) {\n\t\t\t\t\t\t\t\t\tsize = 2;\n\t\t\t\t\t\t\t\t} else if (norm < 7.5) {\n\t\t\t\t\t\t\t\t\tsize = 5;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsize = 10;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tsize *= magn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// minimum size for years is 1\n\n\t\t\t\t\t\t\tif (size < 1) {\n\t\t\t\t\t\t\t\tsize = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\taxis.tickSize = opts.tickSize || [size, unit];\n\t\t\t\t\t\tvar tickSize = axis.tickSize[0];\n\t\t\t\t\t\tunit = axis.tickSize[1];\n\n\t\t\t\t\t\tvar step = tickSize * timeUnitSize[unit];\n\n\t\t\t\t\t\tif (unit == \"second\") {\n\t\t\t\t\t\t\td.setSeconds(floorInBase(d.getSeconds(), tickSize));\n\t\t\t\t\t\t} else if (unit == \"minute\") {\n\t\t\t\t\t\t\td.setMinutes(floorInBase(d.getMinutes(), tickSize));\n\t\t\t\t\t\t} else if (unit == \"hour\") {\n\t\t\t\t\t\t\td.setHours(floorInBase(d.getHours(), tickSize));\n\t\t\t\t\t\t} else if (unit == \"month\") {\n\t\t\t\t\t\t\td.setMonth(floorInBase(d.getMonth(), tickSize));\n\t\t\t\t\t\t} else if (unit == \"quarter\") {\n\t\t\t\t\t\t\td.setMonth(3 * floorInBase(d.getMonth() / 3,\n\t\t\t\t\t\t\t\ttickSize));\n\t\t\t\t\t\t} else if (unit == \"year\") {\n\t\t\t\t\t\t\td.setFullYear(floorInBase(d.getFullYear(), tickSize));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// reset smaller components\n\n\t\t\t\t\t\td.setMilliseconds(0);\n\n\t\t\t\t\t\tif (step >= timeUnitSize.minute) {\n\t\t\t\t\t\t\td.setSeconds(0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (step >= timeUnitSize.hour) {\n\t\t\t\t\t\t\td.setMinutes(0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (step >= timeUnitSize.day) {\n\t\t\t\t\t\t\td.setHours(0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (step >= timeUnitSize.day * 4) {\n\t\t\t\t\t\t\td.setDate(1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (step >= timeUnitSize.month * 2) {\n\t\t\t\t\t\t\td.setMonth(floorInBase(d.getMonth(), 3));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (step >= timeUnitSize.quarter * 2) {\n\t\t\t\t\t\t\td.setMonth(floorInBase(d.getMonth(), 6));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (step >= timeUnitSize.year) {\n\t\t\t\t\t\t\td.setMonth(0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar carry = 0;\n\t\t\t\t\t\tvar v = Number.NaN;\n\t\t\t\t\t\tvar prev;\n\n\t\t\t\t\t\tdo {\n\n\t\t\t\t\t\t\tprev = v;\n\t\t\t\t\t\t\tv = d.getTime();\n\t\t\t\t\t\t\tticks.push(v);\n\n\t\t\t\t\t\t\tif (unit == \"month\" || unit == \"quarter\") {\n\t\t\t\t\t\t\t\tif (tickSize < 1) {\n\n\t\t\t\t\t\t\t\t\t// a bit complicated - we'll divide the\n\t\t\t\t\t\t\t\t\t// month/quarter up but we need to take\n\t\t\t\t\t\t\t\t\t// care of fractions so we don't end up in\n\t\t\t\t\t\t\t\t\t// the middle of a day\n\n\t\t\t\t\t\t\t\t\td.setDate(1);\n\t\t\t\t\t\t\t\t\tvar start = d.getTime();\n\t\t\t\t\t\t\t\t\td.setMonth(d.getMonth() +\n\t\t\t\t\t\t\t\t\t\t(unit == \"quarter\" ? 3 : 1));\n\t\t\t\t\t\t\t\t\tvar end = d.getTime();\n\t\t\t\t\t\t\t\t\td.setTime(v + carry * timeUnitSize.hour + (end - start) * tickSize);\n\t\t\t\t\t\t\t\t\tcarry = d.getHours();\n\t\t\t\t\t\t\t\t\td.setHours(0);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\td.setMonth(d.getMonth() +\n\t\t\t\t\t\t\t\t\t\ttickSize * (unit == \"quarter\" ? 3 : 1));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (unit == \"year\") {\n\t\t\t\t\t\t\t\td.setFullYear(d.getFullYear() + tickSize);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\td.setTime(v + step);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} while (v < axis.max && v != prev);\n\n\t\t\t\t\t\treturn ticks;\n\t\t\t\t\t};\n\n\t\t\t\t\taxis.tickFormatter = function (v, axis) {\n\n\t\t\t\t\t\tvar d = dateGenerator(v, axis.options);\n\n\t\t\t\t\t\t// first check global format\n\n\t\t\t\t\t\tif (opts.timeformat != null) {\n\t\t\t\t\t\t\treturn formatDate(d, opts.timeformat, opts.monthNames, opts.dayNames);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// possibly use quarters if quarters are mentioned in\n\t\t\t\t\t\t// any of these places\n\n\t\t\t\t\t\tvar useQuarters = (axis.options.tickSize &&\n\t\t\t\t\t\t\t\taxis.options.tickSize[1] == \"quarter\") ||\n\t\t\t\t\t\t\t(axis.options.minTickSize &&\n\t\t\t\t\t\t\t\taxis.options.minTickSize[1] == \"quarter\");\n\n\t\t\t\t\t\tvar t = axis.tickSize[0] * timeUnitSize[axis.tickSize[1]];\n\t\t\t\t\t\tvar span = axis.max - axis.min;\n\t\t\t\t\t\tvar suffix = (opts.twelveHourClock) ? \" %p\" : \"\";\n\t\t\t\t\t\tvar hourCode = (opts.twelveHourClock) ? \"%I\" : \"%H\";\n\t\t\t\t\t\tvar fmt;\n\n\t\t\t\t\t\tif (t < timeUnitSize.minute) {\n\t\t\t\t\t\t\tfmt = hourCode + \":%M:%S\" + suffix;\n\t\t\t\t\t\t} else if (t < timeUnitSize.day) {\n\t\t\t\t\t\t\tif (span < 2 * timeUnitSize.day) {\n\t\t\t\t\t\t\t\tfmt = hourCode + \":%M\" + suffix;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfmt = \"%b %d \" + hourCode + \":%M\" + suffix;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (t < timeUnitSize.month) {\n\t\t\t\t\t\t\tfmt = \"%b %d\";\n\t\t\t\t\t\t} else if ((useQuarters && t < timeUnitSize.quarter) ||\n\t\t\t\t\t\t\t(!useQuarters && t < timeUnitSize.year)) {\n\t\t\t\t\t\t\tif (span < timeUnitSize.year) {\n\t\t\t\t\t\t\t\tfmt = \"%b\";\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfmt = \"%b %Y\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (useQuarters && t < timeUnitSize.year) {\n\t\t\t\t\t\t\tif (span < timeUnitSize.year) {\n\t\t\t\t\t\t\t\tfmt = \"Q%q\";\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfmt = \"Q%q %Y\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfmt = \"%Y\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar rt = formatDate(d, fmt, opts.monthNames, opts.dayNames);\n\n\t\t\t\t\t\treturn rt;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t$.plot.plugins.push({\n\t\tinit: init,\n\t\toptions: options,\n\t\tname: 'time',\n\t\tversion: '1.0'\n\t});\n\n\t// Time-axis support used to be in Flot core, which exposed the\n\t// formatDate function on the plot object.  Various plugins depend\n\t// on the function, so we need to re-expose it here.\n\n\t$.plot.formatDate = formatDate;\n\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/flot/jquery.flot.time.js","/* Flot plugin for stacking data sets rather than overlyaing them.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nThe plugin assumes the data is sorted on x (or y if stacking horizontally).\nFor line charts, it is assumed that if a line has an undefined gap (from a\nnull point), then the line above it should have the same gap - insert zeros\ninstead of \"null\" if you want another behaviour. This also holds for the start\nand end of the chart. Note that stacking a mix of positive and negative values\nin most instances doesn't make sense (so it looks weird).\n\nTwo or more series are stacked when their \"stack\" attribute is set to the same\nkey (which can be any number or string or just \"true\"). To specify the default\nstack, you can set the stack option like this:\n\n    series: {\n        stack: null/false, true, or a key (number/string)\n    }\n\nYou can also specify it for a single series, like this:\n\n    $.plot( $(\"#placeholder\"), [{\n        data: [ ... ],\n        stack: true\n    }])\n\nThe stacking order is determined by the order of the data series in the array\n(later series end up on top of the previous).\n\nInternally, the plugin modifies the datapoints in each series, adding an\noffset to the y value. For line series, extra data points are inserted through\ninterpolation. If there's a second y value, it's also adjusted (e.g for bar\ncharts or filled areas).\n\n*/\n\n(function ($) {\n    var options = {\n        series: { stack: null } // or number/string\n    };\n\n    function init(plot) {\n        function findMatchingSeries(s, allseries) {\n            var res = null;\n            for (var i = 0; i < allseries.length; ++i) {\n                if (s == allseries[i])\n                    break;\n\n                if (allseries[i].stack == s.stack)\n                    res = allseries[i];\n            }\n\n            return res;\n        }\n\n        function stackData(plot, s, datapoints) {\n            if (s.stack == null || s.stack === false)\n                return;\n\n            var other = findMatchingSeries(s, plot.getData());\n            if (!other)\n                return;\n\n            var ps = datapoints.pointsize,\n                points = datapoints.points,\n                otherps = other.datapoints.pointsize,\n                otherpoints = other.datapoints.points,\n                newpoints = [],\n                px, py, intery, qx, qy, bottom,\n                withlines = s.lines.show,\n                horizontal = s.bars.horizontal,\n                withbottom = ps > 2 && (horizontal ? datapoints.format[2].x : datapoints.format[2].y),\n                withsteps = withlines && s.lines.steps,\n                keyOffset = horizontal ? 1 : 0,\n                accumulateOffset = horizontal ? 0 : 1,\n                i = 0, j = 0, l, m;\n\n            while (true) {\n                if (i >= points.length && j >= otherpoints.length)\n                    break;\n\n                l = newpoints.length;\n\n                if (i < points.length && points[i] == null) {\n                    // copy gaps\n                    for (m = 0; m < ps; ++m)\n                        newpoints.push(points[i + m]);\n                    i += ps;\n                }\n                else if (i >= points.length) {\n                    // take the remaining points from the previous series\n                    for (m = 0; m < ps; ++m)\n                        newpoints.push(otherpoints[j + m]);\n                    if (withbottom)\n                        newpoints[l + 2] = otherpoints[j + accumulateOffset];\n                    j += otherps;\n                }\n                else if (j >= otherpoints.length) {\n                    // take the remaining points from the current series\n                    for (m = 0; m < ps; ++m)\n                        newpoints.push(points[i + m]);\n                    i += ps;\n                }\n                else if (j < otherpoints.length && otherpoints[j] == null) {\n                    // ignore point\n                    j += otherps;\n                }\n                else {\n                    // cases where we actually got two points\n                    px = points[i + keyOffset];\n                    py = points[i + accumulateOffset];\n                    qx = otherpoints[j + keyOffset];\n                    qy = otherpoints[j + accumulateOffset];\n                    bottom = 0;\n\n                    if (px == qx) {\n                        for (m = 0; m < ps; ++m)\n                            newpoints.push(points[i + m]);\n\n                        newpoints[l + accumulateOffset] += qy;\n                        bottom = qy;\n\n                        i += ps;\n                        j += otherps;\n                    }\n                    else if (px > qx) {\n                        // take the point from the previous series so that next series will correctly stack\n                        if (i == 0) {\n                            for (m = 0; m < ps; ++m)\n                                newpoints.push(otherpoints[j + m]);\n                            bottom = qy;\n                        }\n                        // we got past point below, might need to\n                        // insert interpolated extra point\n                        if (i > 0 && points[i - ps] != null) {\n                            intery = py + (points[i - ps + accumulateOffset] - py) * (qx - px) / (points[i - ps + keyOffset] - px);\n                            newpoints.push(qx);\n                            newpoints.push(intery + qy);\n                            for (m = 2; m < ps; ++m)\n                                newpoints.push(points[i + m]);\n                            bottom = qy;\n                        }\n\n                        j += otherps;\n                    }\n                    else { // px < qx\n                        for (m = 0; m < ps; ++m)\n                            newpoints.push(points[i + m]);\n\n                        // we might be able to interpolate a point below,\n                        // this can give us a better y\n                        if (j > 0 && otherpoints[j - otherps] != null)\n                            bottom = qy + (otherpoints[j - otherps + accumulateOffset] - qy) * (px - qx) / (otherpoints[j - otherps + keyOffset] - qx);\n\n                        newpoints[l + accumulateOffset] += bottom;\n\n                        i += ps;\n                    }\n\n                    fromgap = false;\n\n                    if (l != newpoints.length && withbottom)\n                        newpoints[l + 2] = bottom;\n                }\n\n                // maintain the line steps invariant\n                if (withsteps && l != newpoints.length && l > 0\n                    && newpoints[l] != null\n                    && newpoints[l] != newpoints[l - ps]\n                    && newpoints[l + 1] != newpoints[l - ps + 1]) {\n                    for (m = 0; m < ps; ++m)\n                        newpoints[l + ps + m] = newpoints[l + m];\n                    newpoints[l + 1] = newpoints[l - ps + 1];\n                }\n            }\n\n            datapoints.points = newpoints;\n        }\n\n        plot.hooks.processDatapoints.push(stackData);\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: options,\n        name: 'stack',\n        version: '1.2'\n    });\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/flot/jquery.flot.stack.js","(function ($) {\n    var options = {\n        series: {\n            stackpercent: null\n        } // or number/string\n    };\n\n    function init(plot) {\n\n        // will be built up dynamically as a hash from x-value, or y-value if horizontal\n        var stackBases = {};\n        var processed = false;\n        var stackSums = {};\n\n        //set percentage for stacked chart\n        function processRawData(plot, series, data, datapoints) {\n            if (!processed) {\n                processed = true;\n                stackSums = getStackSums(plot.getData());\n            }\n\t\t\tif (series.stackpercent == true) {\n\t\t\t\tvar num = data.length;\n\t\t\t\tseries.percents = [];\n\t\t\t\tvar key_idx = 0;\n\t\t\t\tvar value_idx = 1;\n\t\t\t\tif (series.bars && series.bars.horizontal && series.bars.horizontal === true) {\n\t\t\t\t\tkey_idx = 1;\n\t\t\t\t\tvalue_idx = 0;\n\t\t\t\t}\n\t\t\t\tfor (var j = 0; j < num; j++) {\n\t\t\t\t\tvar sum = stackSums[data[j][key_idx] + \"\"];\n\t\t\t\t\tif (sum > 0) {\n\t\t\t\t\t\tseries.percents.push(data[j][value_idx] * 100 / sum);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseries.percents.push(0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n        }\n\n        //calculate summary\n        function getStackSums(_data) {\n            var data_len = _data.length;\n            var sums = {};\n            if (data_len > 0) {\n                //caculate summary\n                for (var i = 0; i < data_len; i++) {\n                    if (_data[i].stackpercent) {\n\t\t\t\t\t\tvar key_idx = 0;\n\t\t\t\t\t\tvar value_idx = 1;\n\t\t\t\t\t\tif (_data[i].bars && _data[i].bars.horizontal && _data[i].bars.horizontal === true) {\n\t\t\t\t\t\t\tkey_idx = 1;\n\t\t\t\t\t\t\tvalue_idx = 0;\n\t\t\t\t\t\t}\n                        var num = _data[i].data.length;\n                        for (var j = 0; j < num; j++) {\n                            var value = 0;\n                            if (_data[i].data[j][1] != null) {\n                                value = _data[i].data[j][value_idx];\n                            }\n                            if (sums[_data[i].data[j][key_idx] + \"\"]) {\n                                sums[_data[i].data[j][key_idx] + \"\"] += value;\n                            } else {\n                                sums[_data[i].data[j][key_idx] + \"\"] = value;\n                            }\n\n                        }\n                    }\n                }\n            }\n            return sums;\n        }\n\n        function stackData(plot, s, datapoints) {\n            if (!s.stackpercent) return;\n            if (!processed) {\n                stackSums = getStackSums(plot.getData());\n            }\n            var newPoints = [];\n\n\n\t\t\tvar key_idx = 0;\n\t\t\tvar value_idx = 1;\n\t\t\tif (s.bars && s.bars.horizontal && s.bars.horizontal === true) {\n\t\t\t\tkey_idx = 1;\n\t\t\t\tvalue_idx = 0;\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < datapoints.points.length; i += 3) {\n\t\t\t\t// note that the values need to be turned into absolute y-values.\n\t\t\t\t// in other words, if you were to stack (x, y1), (x, y2), and (x, y3),\n\t\t\t\t// (each from different series, which is where stackBases comes in),\n\t\t\t\t// you'd want the new points to be (x, y1, 0), (x, y1+y2, y1), (x, y1+y2+y3, y1+y2)\n\t\t\t\t// generally, (x, thisValue + (base up to this point), + (base up to this point))\n\t\t\t\tif (!stackBases[datapoints.points[i + key_idx]]) {\n\t\t\t\t\tstackBases[datapoints.points[i + key_idx]] = 0;\n\t\t\t\t}\n\t\t\t\tnewPoints[i + key_idx] = datapoints.points[i + key_idx];\n\t\t\t\tnewPoints[i + value_idx] = datapoints.points[i + value_idx] + stackBases[datapoints.points[i + key_idx]];\n\t\t\t\tnewPoints[i + 2] = stackBases[datapoints.points[i + key_idx]];\n\t\t\t\tstackBases[datapoints.points[i + key_idx]] += datapoints.points[i + value_idx];\n\t\t\t\t// change points to percentage values\n\t\t\t\t// you may need to set yaxis:{ max = 100 }\n\t\t\t\tif ( stackSums[newPoints[i+key_idx]+\"\"] > 0 ){\n\t\t\t\t\tnewPoints[i + value_idx] = newPoints[i + value_idx] * 100 / stackSums[newPoints[i + key_idx] + \"\"];\n\t\t\t\t\tnewPoints[i + 2] = newPoints[i + 2] * 100 / stackSums[newPoints[i + key_idx] + \"\"];\n\t\t\t\t} else {\n\t\t\t\t\tnewPoints[i + value_idx] = 0;\n\t\t\t\t\tnewPoints[i + 2] = 0;\n\t\t\t\t}\n\t\t\t}\n\n            datapoints.points = newPoints;\n        }\n\n\t\tplot.hooks.processRawData.push(processRawData);\n        plot.hooks.processDatapoints.push(stackData);\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: options,\n        name: 'stackpercent',\n        version: '0.1'\n    });\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/flot/jquery.flot.stackpercent.js","(function($) {\n    \"use strict\";\n\n    var options = {\n        series: {\n            fillBelowTo: null\n        }\n    };\n\n    function init(plot) {\n        function findBelowSeries( series, allseries ) {\n\n            var i;\n\n            for ( i = 0; i < allseries.length; ++i ) {\n                if ( allseries[ i ].id === series.fillBelowTo ) {\n                    return allseries[ i ];\n                }\n            }\n\n            return null;\n        }\n\n        /* top and bottom doesn't actually matter for this, we're just using it to help make this easier to think about */\n        /* this is a vector cross product operation */\n        function segmentIntersection(top_left_x, top_left_y, top_right_x, top_right_y, bottom_left_x, bottom_left_y, bottom_right_x, bottom_right_y) {\n            var top_delta_x, top_delta_y, bottom_delta_x, bottom_delta_y,\n                s, t;\n\n            top_delta_x = top_right_x - top_left_x;\n            top_delta_y = top_right_y - top_left_y;\n            bottom_delta_x = bottom_right_x - bottom_left_x;\n            bottom_delta_y = bottom_right_y - bottom_left_y;\n\n            s = (\n                (-top_delta_y * (top_left_x - bottom_left_x)) + (top_delta_x * (top_left_y - bottom_left_y))\n            ) / (\n                -bottom_delta_x * top_delta_y + top_delta_x * bottom_delta_y\n            );\n\n            t = (\n                (bottom_delta_x * (top_left_y - bottom_left_y)) - (bottom_delta_y * (top_left_x - bottom_left_x))\n            ) / (\n                -bottom_delta_x * top_delta_y + top_delta_x * bottom_delta_y\n            );\n\n            // Collision detected\n            if (s >= 0 && s <= 1 && t >= 0 && t <= 1) {\n                return [\n                    top_left_x + (t * top_delta_x), // X\n                    top_left_y + (t * top_delta_y) // Y\n                ];\n            }\n\n            // No collision\n            return null;\n        }\n\n        function plotDifferenceArea(plot, ctx, series) {\n            if ( series.fillBelowTo === null ) {\n                return;\n            }\n\n            var otherseries,\n\n                ps,\n                points,\n\n                otherps,\n                otherpoints,\n\n                plotOffset,\n                fillStyle;\n\n            function openPolygon(x, y) {\n                ctx.beginPath();\n                ctx.moveTo(\n                    series.xaxis.p2c(x) + plotOffset.left,\n                    series.yaxis.p2c(y) + plotOffset.top\n                );\n\n            }\n\n            function closePolygon() {\n                ctx.closePath();\n                ctx.fill();\n            }\n\n            function validateInput() {\n                if (points.length/ps !== otherpoints.length/otherps) {\n                    console.error(\"Refusing to graph inconsistent number of points\");\n                    return false;\n                }\n\n                var i;\n                for (i = 0; i < (points.length / ps); i++) {\n                    if (\n                        points[i * ps] !== null &&\n                        otherpoints[i * otherps] !== null &&\n                        points[i * ps] !== otherpoints[i * otherps]\n                    ) {\n                        console.error(\"Refusing to graph points without matching value\");\n                        return false;\n                    }\n                }\n\n                return true;\n            }\n\n            function findNextStart(start_i, end_i) {\n                console.assert(end_i > start_i, \"expects the end index to be greater than the start index\");\n\n                var start = (\n                        start_i === 0 ||\n                        points[start_i - 1] === null ||\n                        otherpoints[start_i - 1] === null\n                    ),\n                    equal = false,\n                    i,\n                    intersect;\n\n                for (i = start_i; i < end_i; i++) {\n                    // Take note of null points\n                    if (\n                        points[(i * ps) + 1] === null ||\n                        otherpoints[(i * ps) + 1] === null\n                    ) {\n                        equal = false;\n                        start = true;\n                    }\n\n                    // Take note of equal points\n                    else if (points[(i * ps) + 1] === otherpoints[(i * otherps) + 1]) {\n                        equal = true;\n                        start = false;\n                    }\n\n\n                    else if (points[(i * ps) + 1] > otherpoints[(i * otherps) + 1]) {\n                        // If we begin above the desired point\n                        if (start) {\n                            openPolygon(points[i * ps], points[(i * ps) + 1]);\n                        }\n\n                        // If an equal point preceeds this, start the polygon at that equal point\n                        else if (equal) {\n                            openPolygon(points[(i - 1) * ps], points[((i - 1) * ps) + 1]);\n                        }\n\n                        // Otherwise, find the intersection point, and start it there\n                        else {\n                            intersect = intersectionPoint(i);\n                            openPolygon(intersect[0], intersect[1]);\n                        }\n\n                        topTraversal(i, end_i);\n                        return;\n                    }\n\n                    // If we go below equal, equal at any preceeding point is irrelevant\n                    else {\n                        start = false;\n                        equal = false;\n                    }\n                }\n            }\n\n            function intersectionPoint(right_i) {\n                console.assert(right_i > 0, \"expects the second point in the series line segment\");\n\n                var i, intersect;\n\n                for (i = 1; i < (otherpoints.length/otherps); i++) {\n                    intersect = segmentIntersection(\n                        points[(right_i - 1) * ps], points[((right_i - 1) * ps) + 1],\n                        points[right_i * ps], points[(right_i * ps) + 1],\n\n                        otherpoints[(i - 1) * otherps], otherpoints[((i - 1) * otherps) + 1],\n                        otherpoints[i * otherps], otherpoints[(i * otherps) + 1]\n                    );\n\n                    if (intersect !== null) {\n                        return intersect;\n                    }\n                }\n\n                console.error(\"intersectionPoint() should only be called when an intersection happens\");\n            }\n\n            function bottomTraversal(start_i, end_i) {\n                console.assert(start_i >= end_i, \"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)\");\n\n                var i;\n\n                for (i = start_i; i >= end_i; i--) {\n                    ctx.lineTo(\n                        otherseries.xaxis.p2c(otherpoints[i * otherps]) + plotOffset.left,\n                        otherseries.yaxis.p2c(otherpoints[(i * otherps) + 1]) + plotOffset.top\n                    );\n                }\n\n                closePolygon();\n            }\n\n            function topTraversal(start_i, end_i) {\n                console.assert(start_i <= end_i, \"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)\");\n\n                var i,\n                    intersect;\n\n                for (i = start_i; i < end_i; i++) {\n                    if (points[(i * ps) + 1] === null && i > start_i) {\n                        bottomTraversal(i - 1, start_i);\n                        findNextStart(i, end_i);\n                        return;\n                    }\n\n                    else if (points[(i * ps) + 1] === otherpoints[(i * otherps) + 1]) {\n                        bottomTraversal(i, start_i);\n                        findNextStart(i, end_i);\n                        return;\n                    }\n\n                    else if (points[(i * ps) + 1] < otherpoints[(i * otherps) + 1]) {\n                        intersect = intersectionPoint(i);\n                        ctx.lineTo(\n                            series.xaxis.p2c(intersect[0]) + plotOffset.left,\n                            series.yaxis.p2c(intersect[1]) + plotOffset.top\n                        );\n                        bottomTraversal(i, start_i);\n                        findNextStart(i, end_i);\n                        return;\n\n                    }\n\n                    else {\n                        ctx.lineTo(\n                            series.xaxis.p2c(points[i * ps]) + plotOffset.left,\n                            series.yaxis.p2c(points[(i * ps) + 1]) + plotOffset.top\n                        );\n                    }\n                }\n\n                bottomTraversal(end_i, start_i);\n            }\n\n\n            // Begin processing\n\n            otherseries = findBelowSeries( series, plot.getData() );\n\n            if ( !otherseries ) {\n                return;\n            }\n\n            ps = series.datapoints.pointsize;\n            points = series.datapoints.points;\n            otherps = otherseries.datapoints.pointsize;\n            otherpoints = otherseries.datapoints.points;\n            plotOffset = plot.getPlotOffset();\n\n            if (!validateInput()) {\n                return;\n            }\n\n\n            // Flot's getFillStyle() should probably be exposed somewhere\n            fillStyle = $.color.parse(series.color);\n            fillStyle.a = 0.4;\n            fillStyle.normalize();\n            ctx.fillStyle = fillStyle.toString();\n\n\n            // Begin recursive bi-directional traversal\n            findNextStart(0, points.length/ps);\n        }\n\n        plot.hooks.drawSeries.push(plotDifferenceArea);\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: options,\n        name: \"fillbelow\",\n        version: \"0.1.0\"\n    });\n\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/flot/jquery.flot.fillbelow.js","/* Flot plugin for showing crosshairs when the mouse hovers over the plot.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nThe plugin supports these options:\n\n\tcrosshair: {\n\t\tmode: null or \"x\" or \"y\" or \"xy\"\n\t\tcolor: color\n\t\tlineWidth: number\n\t}\n\nSet the mode to one of \"x\", \"y\" or \"xy\". The \"x\" mode enables a vertical\ncrosshair that lets you trace the values on the x axis, \"y\" enables a\nhorizontal crosshair and \"xy\" enables them both. \"color\" is the color of the\ncrosshair (default is \"rgba(170, 0, 0, 0.80)\"), \"lineWidth\" is the width of\nthe drawn lines (default is 1).\n\nThe plugin also adds four public methods:\n\n  - setCrosshair( pos )\n\n    Set the position of the crosshair. Note that this is cleared if the user\n    moves the mouse. \"pos\" is in coordinates of the plot and should be on the\n    form { x: xpos, y: ypos } (you can use x2/x3/... if you're using multiple\n    axes), which is coincidentally the same format as what you get from a\n    \"plothover\" event. If \"pos\" is null, the crosshair is cleared.\n\n  - clearCrosshair()\n\n    Clear the crosshair.\n\n  - lockCrosshair(pos)\n\n    Cause the crosshair to lock to the current location, no longer updating if\n    the user moves the mouse. Optionally supply a position (passed on to\n    setCrosshair()) to move it to.\n\n    Example usage:\n\n\tvar myFlot = $.plot( $(\"#graph\"), ..., { crosshair: { mode: \"x\" } } };\n\t$(\"#graph\").bind( \"plothover\", function ( evt, position, item ) {\n\t\tif ( item ) {\n\t\t\t// Lock the crosshair to the data point being hovered\n\t\t\tmyFlot.lockCrosshair({\n\t\t\t\tx: item.datapoint[ 0 ],\n\t\t\t\ty: item.datapoint[ 1 ]\n\t\t\t});\n\t\t} else {\n\t\t\t// Return normal crosshair operation\n\t\t\tmyFlot.unlockCrosshair();\n\t\t}\n\t});\n\n  - unlockCrosshair()\n\n    Free the crosshair to move again after locking it.\n*/\n\n(function ($) {\n    var options = {\n        crosshair: {\n            mode: null, // one of null, \"x\", \"y\" or \"xy\",\n            color: \"rgba(170, 0, 0, 0.80)\",\n            lineWidth: 1\n        }\n    };\n    \n    function init(plot) {\n        // position of crosshair in pixels\n        var crosshair = { x: -1, y: -1, locked: false };\n\n        plot.setCrosshair = function setCrosshair(pos) {\n            if (!pos)\n                crosshair.x = -1;\n            else {\n                var o = plot.p2c(pos);\n                crosshair.x = Math.max(0, Math.min(o.left, plot.width()));\n                crosshair.y = Math.max(0, Math.min(o.top, plot.height()));\n            }\n            \n            plot.triggerRedrawOverlay();\n        };\n        \n        plot.clearCrosshair = plot.setCrosshair; // passes null for pos\n        \n        plot.lockCrosshair = function lockCrosshair(pos) {\n            if (pos)\n                plot.setCrosshair(pos);\n            crosshair.locked = true;\n        };\n\n        plot.unlockCrosshair = function unlockCrosshair() {\n            crosshair.locked = false;\n        };\n\n        function onMouseOut(e) {\n            if (crosshair.locked)\n                return;\n\n            if (crosshair.x != -1) {\n                crosshair.x = -1;\n                plot.triggerRedrawOverlay();\n            }\n        }\n\n        function onMouseMove(e) {\n            if (crosshair.locked)\n                return;\n                \n            if (plot.getSelection && plot.getSelection()) {\n                crosshair.x = -1; // hide the crosshair while selecting\n                return;\n            }\n                \n            var offset = plot.offset();\n            crosshair.x = Math.max(0, Math.min(e.pageX - offset.left, plot.width()));\n            crosshair.y = Math.max(0, Math.min(e.pageY - offset.top, plot.height()));\n            plot.triggerRedrawOverlay();\n        }\n        \n        plot.hooks.bindEvents.push(function (plot, eventHolder) {\n            if (!plot.getOptions().crosshair.mode)\n                return;\n\n            eventHolder.mouseout(onMouseOut);\n            eventHolder.mousemove(onMouseMove);\n        });\n\n        plot.hooks.drawOverlay.push(function (plot, ctx) {\n            var c = plot.getOptions().crosshair;\n            if (!c.mode)\n                return;\n\n            var plotOffset = plot.getPlotOffset();\n            \n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            if (crosshair.x != -1) {\n                var adj = plot.getOptions().crosshair.lineWidth % 2 ? 0.5 : 0;\n\n                ctx.strokeStyle = c.color;\n                ctx.lineWidth = c.lineWidth;\n                ctx.lineJoin = \"round\";\n\n                ctx.beginPath();\n                if (c.mode.indexOf(\"x\") != -1) {\n                    var drawX = Math.floor(crosshair.x) + adj;\n                    ctx.moveTo(drawX, 0);\n                    ctx.lineTo(drawX, plot.height());\n                }\n                if (c.mode.indexOf(\"y\") != -1) {\n                    var drawY = Math.floor(crosshair.y) + adj;\n                    ctx.moveTo(0, drawY);\n                    ctx.lineTo(plot.width(), drawY);\n                }\n                ctx.stroke();\n            }\n            ctx.restore();\n        });\n\n        plot.hooks.shutdown.push(function (plot, eventHolder) {\n            eventHolder.unbind(\"mouseout\", onMouseOut);\n            eventHolder.unbind(\"mousemove\", onMouseMove);\n        });\n    }\n    \n    $.plot.plugins.push({\n        init: init,\n        options: options,\n        name: 'crosshair',\n        version: '1.0'\n    });\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/flot/jquery.flot.crosshair.js","/*\n * jQuery.flot.dashes\n *\n * options = {\n *   series: {\n *     dashes: {\n *\n *       // show\n *       // default: false\n *       // Whether to show dashes for the series.\n *       show: <boolean>,\n *\n *       // lineWidth\n *       // default: 2\n *       // The width of the dashed line in pixels.\n *       lineWidth: <number>,\n *\n *       // dashLength\n *       // default: 10\n *       // Controls the length of the individual dashes and the amount of\n *       // space between them.\n *       // If this is a number, the dashes and spaces will have that length.\n *       // If this is an array, it is read as [ dashLength, spaceLength ]\n *       dashLength: <number> or <array[2]>\n *     }\n *   }\n * }\n */\n(function($){\n\n  function init(plot) {\n\n    plot.hooks.processDatapoints.push(function(plot, series, datapoints) {\n\n      if (!series.dashes.show) return;\n\n      plot.hooks.draw.push(function(plot, ctx) {\n\n        var plotOffset = plot.getPlotOffset(),\n          axisx = series.xaxis,\n          axisy = series.yaxis;\n\n        function plotDashes(xoffset, yoffset) {\n\n          var points = datapoints.points,\n            ps = datapoints.pointsize,\n            prevx = null,\n            prevy = null,\n            dashRemainder = 0,\n            dashOn = true,\n            dashOnLength,\n            dashOffLength;\n\n          if (series.dashes.dashLength[0]) {\n            dashOnLength = series.dashes.dashLength[0];\n            if (series.dashes.dashLength[1]) {\n              dashOffLength = series.dashes.dashLength[1];\n            } else {\n              dashOffLength = dashOnLength;\n            }\n          } else {\n            dashOffLength = dashOnLength = series.dashes.dashLength;\n          }\n\n          ctx.beginPath();\n\n          for (var i = ps; i < points.length; i += ps) {\n\n            var x1 = points[i - ps],\n              y1 = points[i - ps + 1],\n              x2 = points[i],\n              y2 = points[i + 1];\n\n            if (x1 == null || x2 == null) continue;\n\n            // clip with ymin\n            if (y1 <= y2 && y1 < axisy.min) {\n              if (y2 < axisy.min) continue;   // line segment is outside\n              // compute new intersection point\n              x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n              y1 = axisy.min;\n            } else if (y2 <= y1 && y2 < axisy.min) {\n              if (y1 < axisy.min) continue;\n              x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n              y2 = axisy.min;\n            }\n\n            // clip with ymax\n            if (y1 >= y2 && y1 > axisy.max) {\n              if (y2 > axisy.max) continue;\n              x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n              y1 = axisy.max;\n            } else if (y2 >= y1 && y2 > axisy.max) {\n              if (y1 > axisy.max) continue;\n              x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n              y2 = axisy.max;\n            }\n\n            // clip with xmin\n            if (x1 <= x2 && x1 < axisx.min) {\n              if (x2 < axisx.min) continue;\n              y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n              x1 = axisx.min;\n            } else if (x2 <= x1 && x2 < axisx.min) {\n              if (x1 < axisx.min) continue;\n              y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n              x2 = axisx.min;\n            }\n\n            // clip with xmax\n            if (x1 >= x2 && x1 > axisx.max) {\n              if (x2 > axisx.max) continue;\n              y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n              x1 = axisx.max;\n            } else if (x2 >= x1 && x2 > axisx.max) {\n              if (x1 > axisx.max) continue;\n              y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n              x2 = axisx.max;\n            }\n\n            if (x1 != prevx || y1 != prevy) {\n              ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);\n            }\n\n            var ax1 = axisx.p2c(x1) + xoffset,\n              ay1 = axisy.p2c(y1) + yoffset,\n              ax2 = axisx.p2c(x2) + xoffset,\n              ay2 = axisy.p2c(y2) + yoffset,\n              dashOffset;\n\n            function lineSegmentOffset(segmentLength) {\n\n              var c = Math.sqrt(Math.pow(ax2 - ax1, 2) + Math.pow(ay2 - ay1, 2));\n\n              if (c <= segmentLength) {\n                return {\n                  deltaX: ax2 - ax1,\n                  deltaY: ay2 - ay1,\n                  distance: c,\n                  remainder: segmentLength - c\n                }\n              } else {\n                var xsign = ax2 > ax1 ? 1 : -1,\n                  ysign = ay2 > ay1 ? 1 : -1;\n                return {\n                  deltaX: xsign * Math.sqrt(Math.pow(segmentLength, 2) / (1 + Math.pow((ay2 - ay1)/(ax2 - ax1), 2))),\n                  deltaY: ysign * Math.sqrt(Math.pow(segmentLength, 2) - Math.pow(segmentLength, 2) / (1 + Math.pow((ay2 - ay1)/(ax2 - ax1), 2))),\n                  distance: segmentLength,\n                  remainder: 0\n                };\n              }\n            }\n            //-end lineSegmentOffset\n\n            do {\n\n              dashOffset = lineSegmentOffset(\n                dashRemainder > 0 ? dashRemainder :\n                  dashOn ? dashOnLength : dashOffLength);\n\n              if (dashOffset.deltaX != 0 || dashOffset.deltaY != 0) {\n                if (dashOn) {\n                  ctx.lineTo(ax1 + dashOffset.deltaX, ay1 + dashOffset.deltaY);\n                } else {\n                  ctx.moveTo(ax1 + dashOffset.deltaX, ay1 + dashOffset.deltaY);\n                }\n              }\n\n              dashOn = !dashOn;\n              dashRemainder = dashOffset.remainder;\n              ax1 += dashOffset.deltaX;\n              ay1 += dashOffset.deltaY;\n\n            } while (dashOffset.distance > 0);\n\n            prevx = x2;\n            prevy = y2;\n          }\n\n          ctx.stroke();\n        }\n        //-end plotDashes\n\n        ctx.save();\n        ctx.translate(plotOffset.left, plotOffset.top);\n        ctx.lineJoin = 'round';\n\n        var lw = series.dashes.lineWidth,\n          sw = series.shadowSize;\n\n        // FIXME: consider another form of shadow when filling is turned on\n        if (lw > 0 && sw > 0) {\n          // draw shadow as a thick and thin line with transparency\n          ctx.lineWidth = sw;\n          ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\n          // position shadow at angle from the mid of line\n          var angle = Math.PI/18;\n          plotDashes(Math.sin(angle) * (lw/2 + sw/2), Math.cos(angle) * (lw/2 + sw/2));\n          ctx.lineWidth = sw/2;\n          plotDashes(Math.sin(angle) * (lw/2 + sw/4), Math.cos(angle) * (lw/2 + sw/4));\n        }\n\n        ctx.lineWidth = lw;\n        ctx.strokeStyle = series.color;\n\n        if (lw > 0) {\n          plotDashes(0, 0);\n        }\n\n        ctx.restore();\n\n      });\n      //-end draw hook\n\n    });\n    //-end processDatapoints hook\n\n  }\n  //-end init\n\n  $.plot.plugins.push({\n    init: init,\n    options: {\n      series: {\n        dashes: {\n          show: false,\n          lineWidth: 2,\n          dashLength: 10\n        }\n      }\n    },\n    name: 'dashes',\n    version: '0.1'\n  });\n\n})(jQuery)\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/flot/jquery.flot.dashes.js","define([\n  'jquery',\n  'lodash',\n  'angular',\n  'tether-drop',\n],\nfunction ($, _, angular, Drop) {\n  'use strict';\n\n  function createAnnotationToolip(element, event, plot) {\n    var injector = angular.element(document).injector();\n    var content = document.createElement('div');\n    content.innerHTML = '<annotation-tooltip event=\"event\" on-edit=\"onEdit()\"></annotation-tooltip>';\n\n    injector.invoke([\"$compile\", \"$rootScope\", function($compile, $rootScope) {\n      var eventManager = plot.getOptions().events.manager;\n      var tmpScope = $rootScope.$new(true);\n      tmpScope.event = event;\n      tmpScope.onEdit = function() {\n        eventManager.editEvent(event);\n      };\n\n      $compile(content)(tmpScope);\n      tmpScope.$digest();\n      tmpScope.$destroy();\n\n      var drop = new Drop({\n        target: element[0],\n        content: content,\n        position: \"bottom center\",\n        classes: 'drop-popover drop-popover--annotation',\n        openOn: 'hover',\n        hoverCloseDelay: 200,\n        tetherOptions: {\n          constraints: [{to: 'window', pin: true, attachment: \"both\"}]\n        }\n      });\n\n      drop.open();\n\n      drop.on('close', function() {\n        setTimeout(function() {\n          drop.destroy();\n        });\n      });\n    }]);\n  }\n\n  var markerElementToAttachTo = null;\n\n  function createEditPopover(element, event, plot) {\n    var eventManager = plot.getOptions().events.manager;\n    if (eventManager.editorOpen) {\n      // update marker element to attach to (needed in case of legend on the right\n      // when there is a double render pass and the inital marker element is removed)\n      markerElementToAttachTo = element;\n      return;\n    }\n\n    // mark as openend\n    eventManager.editorOpened();\n    // set marker elment to attache to\n    markerElementToAttachTo = element;\n\n    // wait for element to be attached and positioned\n    setTimeout(function() {\n\n      var injector = angular.element(document).injector();\n      var content = document.createElement('div');\n      content.innerHTML = '<event-editor panel-ctrl=\"panelCtrl\" event=\"event\" close=\"close()\"></event-editor>';\n\n      injector.invoke([\"$compile\", \"$rootScope\", function($compile, $rootScope) {\n        var scope = $rootScope.$new(true);\n        var drop;\n\n        scope.event = event;\n        scope.panelCtrl = eventManager.panelCtrl;\n        scope.close = function() {\n          drop.close();\n        };\n\n        $compile(content)(scope);\n        scope.$digest();\n\n        drop = new Drop({\n          target: markerElementToAttachTo[0],\n          content: content,\n          position: \"bottom center\",\n          classes: 'drop-popover drop-popover--form',\n          openOn: 'click',\n          tetherOptions: {\n            constraints: [{to: 'window', pin: true, attachment: \"both\"}]\n          }\n        });\n\n        drop.open();\n        eventManager.editorOpened();\n\n        drop.on('close', function() {\n          // need timeout here in order call drop.destroy\n          setTimeout(function() {\n            eventManager.editorClosed();\n            scope.$destroy();\n            drop.destroy();\n          });\n        });\n      }]);\n\n    }, 100);\n  }\n\n  /*\n   * jquery.flot.events\n   *\n   * description: Flot plugin for adding events/markers to the plot\n   * version: 0.2.5\n   * authors:\n   *    Alexander Wunschik <alex@wunschik.net>\n   *    Joel Oughton <joeloughton@gmail.com>\n   *    Nicolas Joseph <www.nicolasjoseph.com>\n   *\n   * website: https://github.com/mojoaxel/flot-events\n   *\n   * released under MIT License and GPLv2+\n   */\n\n  /**\n   * A class that allows for the drawing an remove of some object\n   */\n  var DrawableEvent = function(object, drawFunc, clearFunc, moveFunc, left, top, width, height) {\n    var _object = object;\n    var\t_drawFunc = drawFunc;\n    var\t_clearFunc = clearFunc;\n    var\t_moveFunc = moveFunc;\n    var\t_position = { left: left, top: top };\n    var\t_width = width;\n    var\t_height = height;\n\n    this.width = function() { return _width; };\n    this.height = function() { return _height; };\n    this.position = function() { return _position; };\n    this.draw = function() { _drawFunc(_object); };\n    this.clear = function() { _clearFunc(_object); };\n    this.getObject = function() { return _object; };\n    this.moveTo = function(position) {\n      _position = position;\n      _moveFunc(_object, _position);\n    };\n  };\n\n  /**\n   * Event class that stores options (eventType, min, max, title, description) and the object to draw.\n   */\n  var VisualEvent = function(options, drawableEvent) {\n    var _parent;\n    var _options = options;\n    var _drawableEvent = drawableEvent;\n    var _hidden = false;\n\n    this.visual = function() { return _drawableEvent; };\n    this.getOptions = function() { return _options; };\n    this.getParent = function() { return _parent; };\n    this.isHidden = function() { return _hidden; };\n    this.hide = function() { _hidden = true; };\n    this.unhide = function() { _hidden = false; };\n  };\n\n  /**\n   * A Class that handles the event-markers inside the given plot\n   */\n  var EventMarkers = function(plot) {\n    var _events = [];\n\n    this._types = [];\n    this._plot = plot;\n    this.eventsEnabled = false;\n\n    this.getEvents = function() {\n      return _events;\n    };\n\n    this.setTypes = function(types) {\n      return this._types = types;\n    };\n\n    /**\n     * create internal objects for the given events\n     */\n    this.setupEvents = function(events) {\n      var that = this;\n      var parts = _.partition(events, 'isRegion');\n      var regions = parts[0];\n      events = parts[1];\n\n      $.each(events, function(index, event) {\n        var ve = new VisualEvent(event, that._buildDiv(event));\n        _events.push(ve);\n      });\n\n      $.each(regions, function (index, event) {\n        var vre = new VisualEvent(event, that._buildRegDiv(event));\n        _events.push(vre);\n      });\n\n      _events.sort(function(a, b) {\n        var ao = a.getOptions(), bo = b.getOptions();\n        if (ao.min > bo.min) { return 1; }\n        if (ao.min < bo.min) { return -1; }\n        return 0;\n      });\n    };\n\n    /**\n     * draw the events to the plot\n     */\n    this.drawEvents = function() {\n      var that = this;\n      // var o = this._plot.getPlotOffset();\n\n      $.each(_events, function(index, event) {\n        // check event is inside the graph range\n        if (that._insidePlot(event.getOptions().min) && !event.isHidden()) {\n          event.visual().draw();\n        }  else {\n          event.visual().getObject().hide();\n        }\n      });\n    };\n\n    /**\n     * update the position of the event-markers (e.g. after scrolling or zooming)\n     */\n    this.updateEvents = function() {\n      var that = this;\n      var o = this._plot.getPlotOffset(), left, top;\n      var xaxis = this._plot.getXAxes()[this._plot.getOptions().events.xaxis - 1];\n\n      $.each(_events, function(index, event) {\n        top = o.top + that._plot.height() - event.visual().height();\n        left = xaxis.p2c(event.getOptions().min) + o.left - event.visual().width() / 2;\n        event.visual().moveTo({ top: top, left: left });\n      });\n    };\n\n    /**\n     * remove all events from the plot\n     */\n    this._clearEvents = function() {\n      $.each(_events, function(index, val) {\n        val.visual().clear();\n      });\n      _events = [];\n    };\n\n    /**\n     * create a DOM element for the given event\n     */\n    this._buildDiv = function(event) {\n      var that = this;\n\n      var container = this._plot.getPlaceholder();\n      var o = this._plot.getPlotOffset();\n      var axes = this._plot.getAxes();\n      var xaxis = this._plot.getXAxes()[this._plot.getOptions().events.xaxis - 1];\n      var yaxis, top, left, color, markerSize, markerShow, lineStyle, lineWidth;\n      var markerTooltip;\n\n      // determine the y axis used\n      if (axes.yaxis && axes.yaxis.used) { yaxis = axes.yaxis; }\n      if (axes.yaxis2 && axes.yaxis2.used) { yaxis = axes.yaxis2; }\n\n      // map the eventType to a types object\n      var eventTypeId = event.eventType;\n\n      if (this._types === null || !this._types[eventTypeId] || !this._types[eventTypeId].color) {\n        color = '#666';\n      } else {\n        color = this._types[eventTypeId].color;\n      }\n\n      if (this._types === null || !this._types[eventTypeId] || !this._types[eventTypeId].markerSize) {\n        markerSize = 8; //default marker size\n      } else {\n        markerSize = this._types[eventTypeId].markerSize;\n      }\n\n      if (this._types === null || !this._types[eventTypeId] || this._types[eventTypeId].markerShow === undefined) {\n        markerShow = true;\n      } else {\n        markerShow = this._types[eventTypeId].markerShow;\n      }\n\n      if (this._types === null || !this._types[eventTypeId] || this._types[eventTypeId].markerTooltip === undefined) {\n        markerTooltip = true;\n      } else {\n        markerTooltip = this._types[eventTypeId].markerTooltip;\n      }\n\n      if (this._types == null || !this._types[eventTypeId] || !this._types[eventTypeId].lineStyle) {\n        lineStyle = 'dashed'; //default line style\n      } else {\n        lineStyle = this._types[eventTypeId].lineStyle.toLowerCase();\n      }\n\n      if (this._types == null || !this._types[eventTypeId] || this._types[eventTypeId].lineWidth === undefined) {\n        lineWidth = 1; //default line width\n      } else {\n        lineWidth = this._types[eventTypeId].lineWidth;\n      }\n\n      var topOffset = xaxis.options.eventSectionHeight || 0;\n      topOffset = topOffset / 3;\n\n      top = o.top + this._plot.height() + topOffset;\n      left = xaxis.p2c(event.min) + o.left;\n\n      var line = $('<div class=\"events_line flot-temp-elem\"></div>').css({\n        \"position\": \"absolute\",\n        \"opacity\": 0.8,\n        \"left\": left + 'px',\n        \"top\": 8,\n        \"width\": lineWidth + \"px\",\n        \"height\": this._plot.height() + topOffset * 0.8,\n        \"border-left-width\": lineWidth + \"px\",\n        \"border-left-style\": lineStyle,\n        \"border-left-color\": color,\n        \"color\": color\n      })\n      .appendTo(container);\n\n      if (markerShow) {\n        var marker = $('<div class=\"events_marker\"></div>').css({\n          \"position\": \"absolute\",\n          \"left\": (-markerSize - Math.round(lineWidth / 2)) + \"px\",\n          \"font-size\": 0,\n          \"line-height\": 0,\n          \"width\": 0,\n          \"height\": 0,\n          \"border-left\": markerSize+\"px solid transparent\",\n          \"border-right\": markerSize+\"px solid transparent\"\n        });\n\n        marker.appendTo(line);\n\n        if (this._types[eventTypeId] && this._types[eventTypeId].position && this._types[eventTypeId].position.toUpperCase() === 'BOTTOM') {\n          marker.css({\n            \"top\": top-markerSize-8 +\"px\",\n            \"border-top\": \"none\",\n            \"border-bottom\": markerSize+\"px solid \" + color\n          });\n        } else {\n          marker.css({\n            \"top\": \"0px\",\n            \"border-top\": markerSize+\"px solid \" + color,\n            \"border-bottom\": \"none\"\n          });\n        }\n\n        marker.data({\n          \"event\": event\n        });\n\n        var mouseenter = function() {\n          createAnnotationToolip(marker, $(this).data(\"event\"), that._plot);\n        };\n\n        if (event.editModel) {\n          createEditPopover(marker, event.editModel, that._plot);\n        }\n\n        var mouseleave = function() {\n          that._plot.clearSelection();\n        };\n\n        if (markerTooltip) {\n          marker.css({ \"cursor\": \"help\" });\n          marker.hover(mouseenter, mouseleave);\n        }\n      }\n\n      var drawableEvent = new DrawableEvent(\n        line,\n        function drawFunc(obj) { obj.show(); },\n        function(obj) { obj.remove(); },\n        function(obj, position) {\n          obj.css({\n            top: position.top,\n            left: position.left\n          });\n        },\n        left,\n        top,\n        line.width(),\n        line.height()\n      );\n\n      return drawableEvent;\n    };\n\n    /**\n     * create a DOM element for the given region\n     */\n    this._buildRegDiv = function (event) {\n      var that = this;\n\n      var container = this._plot.getPlaceholder();\n      var o = this._plot.getPlotOffset();\n      var axes = this._plot.getAxes();\n      var xaxis = this._plot.getXAxes()[this._plot.getOptions().events.xaxis - 1];\n      var yaxis, top, left, lineWidth, regionWidth, lineStyle, color, markerTooltip;\n\n      // determine the y axis used\n      if (axes.yaxis && axes.yaxis.used) { yaxis = axes.yaxis; }\n      if (axes.yaxis2 && axes.yaxis2.used) { yaxis = axes.yaxis2; }\n\n      // map the eventType to a types object\n      var eventTypeId = event.eventType;\n\n      if (this._types === null || !this._types[eventTypeId] || !this._types[eventTypeId].color) {\n        color = '#666';\n      } else {\n        color = this._types[eventTypeId].color;\n      }\n\n      if (this._types === null || !this._types[eventTypeId] || this._types[eventTypeId].markerTooltip === undefined) {\n        markerTooltip = true;\n      } else {\n        markerTooltip = this._types[eventTypeId].markerTooltip;\n      }\n\n      if (this._types == null || !this._types[eventTypeId] || this._types[eventTypeId].lineWidth === undefined) {\n        lineWidth = 1; //default line width\n      } else {\n        lineWidth = this._types[eventTypeId].lineWidth;\n      }\n\n      if (this._types == null || !this._types[eventTypeId] || !this._types[eventTypeId].lineStyle) {\n        lineStyle = 'dashed'; //default line style\n      } else {\n        lineStyle = this._types[eventTypeId].lineStyle.toLowerCase();\n      }\n\n      var topOffset = 2;\n      top = o.top + this._plot.height() + topOffset;\n\n      var timeFrom = Math.min(event.min, event.timeEnd);\n      var timeTo = Math.max(event.min, event.timeEnd);\n      left = xaxis.p2c(timeFrom) + o.left;\n      var right = xaxis.p2c(timeTo) + o.left;\n      regionWidth = right - left;\n\n      _.each([left, right], function(position) {\n        var line = $('<div class=\"events_line flot-temp-elem\"></div>').css({\n          \"position\": \"absolute\",\n          \"opacity\": 0.8,\n          \"left\": position + 'px',\n          \"top\": 8,\n          \"width\": lineWidth + \"px\",\n          \"height\": that._plot.height() + topOffset,\n          \"border-left-width\": lineWidth + \"px\",\n          \"border-left-style\": lineStyle,\n          \"border-left-color\": color,\n          \"color\": color\n        });\n        line.appendTo(container);\n      });\n\n      var region = $('<div class=\"events_marker region_marker flot-temp-elem\"></div>').css({\n        \"position\": \"absolute\",\n        \"opacity\": 0.5,\n        \"left\": left + 'px',\n        \"top\": top,\n        \"width\": Math.round(regionWidth + lineWidth) + \"px\",\n        \"height\": \"0.5rem\",\n        \"border-left-color\": color,\n        \"color\": color,\n        \"background-color\": color\n      });\n      region.appendTo(container);\n\n      region.data({\n        \"event\": event\n      });\n\n      var mouseenter = function () {\n        createAnnotationToolip(region, $(this).data(\"event\"), that._plot);\n      };\n\n      if (event.editModel) {\n        createEditPopover(region, event.editModel, that._plot);\n      }\n\n      var mouseleave = function () {\n        that._plot.clearSelection();\n      };\n\n      if (markerTooltip) {\n        region.css({ \"cursor\": \"help\" });\n        region.hover(mouseenter, mouseleave);\n      }\n\n      var drawableEvent = new DrawableEvent(\n        region,\n        function drawFunc(obj) { obj.show(); },\n        function (obj) { obj.remove(); },\n        function (obj, position) {\n          obj.css({\n            top: position.top,\n            left: position.left\n          });\n        },\n        left,\n        top,\n        region.width(),\n        region.height()\n      );\n\n      return drawableEvent;\n    };\n\n    /**\n     * check if the event is inside visible range\n     */\n    this._insidePlot = function(x) {\n      var xaxis = this._plot.getXAxes()[this._plot.getOptions().events.xaxis - 1];\n      var xc = xaxis.p2c(x);\n      return xc > 0 && xc < xaxis.p2c(xaxis.max);\n    };\n  };\n\n  /**\n   * initialize the plugin for the given plot\n   */\n  function init(plot) {\n    /*jshint validthis:true */\n    var that = this;\n    var eventMarkers = new EventMarkers(plot);\n\n    plot.getEvents = function() {\n      return eventMarkers._events;\n    };\n\n    plot.hideEvents = function() {\n      $.each(eventMarkers._events, function(index, event) {\n        event.visual().getObject().hide();\n      });\n    };\n\n    plot.showEvents = function() {\n      plot.hideEvents();\n      $.each(eventMarkers._events, function(index, event) {\n        event.hide();\n      });\n\n      that.eventMarkers.drawEvents();\n    };\n\n    // change events on an existing plot\n    plot.setEvents = function(events) {\n      if (eventMarkers.eventsEnabled) {\n        eventMarkers.setupEvents(events);\n      }\n    };\n\n    plot.hooks.processOptions.push(function(plot, options) {\n      // enable the plugin\n      if (options.events.data != null) {\n        eventMarkers.eventsEnabled = true;\n      }\n    });\n\n    plot.hooks.draw.push(function(plot) {\n      var options = plot.getOptions();\n\n      if (eventMarkers.eventsEnabled) {\n        // check for first run\n        if (eventMarkers.getEvents().length < 1) {\n          eventMarkers.setTypes(options.events.types);\n          eventMarkers.setupEvents(options.events.data);\n        } else {\n          eventMarkers.updateEvents();\n        }\n      }\n\n      eventMarkers.drawEvents();\n    });\n  }\n\n  var defaultOptions = {\n    events: {\n      data: null,\n      types: null,\n      xaxis: 1,\n      position: 'BOTTOM'\n    }\n  };\n\n  $.plot.plugins.push({\n    init: init,\n    options: defaultOptions,\n    name: \"events\",\n    version: \"0.2.5\"\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./jquery.flot.events.js","/*! tether-drop 1.4.1 */\n\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([\"tether\"], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory(require('tether'));\n  } else {\n    root.Drop = factory(root.Tether);\n  }\n}(this, function(Tether) {\n\n/* global Tether */\n'use strict';\n\nvar _bind = Function.prototype.bind;\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _Tether$Utils = Tether.Utils;\nvar extend = _Tether$Utils.extend;\nvar addClass = _Tether$Utils.addClass;\nvar removeClass = _Tether$Utils.removeClass;\nvar hasClass = _Tether$Utils.hasClass;\nvar Evented = _Tether$Utils.Evented;\n\nfunction sortAttach(str) {\n  var _str$split = str.split(' ');\n\n  var _str$split2 = _slicedToArray(_str$split, 2);\n\n  var first = _str$split2[0];\n  var second = _str$split2[1];\n\n  if (['left', 'right'].indexOf(first) >= 0) {\n    var _ref = [second, first];\n    first = _ref[0];\n    second = _ref[1];\n  }\n  return [first, second].join(' ');\n}\n\nfunction removeFromArray(arr, item) {\n  var index = undefined;\n  var results = [];\n  while ((index = arr.indexOf(item)) !== -1) {\n    results.push(arr.splice(index, 1));\n  }\n  return results;\n}\n\nvar clickEvents = ['click'];\nif ('ontouchstart' in document.documentElement) {\n  clickEvents.push('touchstart');\n}\n\nvar transitionEndEvents = {\n  'WebkitTransition': 'webkitTransitionEnd',\n  'MozTransition': 'transitionend',\n  'OTransition': 'otransitionend',\n  'transition': 'transitionend'\n};\n\nvar transitionEndEvent = '';\nfor (var _name in transitionEndEvents) {\n  if (({}).hasOwnProperty.call(transitionEndEvents, _name)) {\n    var tempEl = document.createElement('p');\n    if (typeof tempEl.style[_name] !== 'undefined') {\n      transitionEndEvent = transitionEndEvents[_name];\n    }\n  }\n}\n\nvar MIRROR_ATTACH = {\n  left: 'right',\n  right: 'left',\n  top: 'bottom',\n  bottom: 'top',\n  middle: 'middle',\n  center: 'center'\n};\n\nvar allDrops = {};\n\n// Drop can be included in external libraries.  Calling createContext gives you a fresh\n// copy of drop which won't interact with other copies on the page (beyond calling the document events).\n\nfunction createContext() {\n  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n  var drop = function drop() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return new (_bind.apply(DropInstance, [null].concat(args)))();\n  };\n\n  extend(drop, {\n    createContext: createContext,\n    drops: [],\n    defaults: {}\n  });\n\n  var defaultOptions = {\n    classPrefix: 'drop',\n    defaults: {\n      position: 'bottom left',\n      openOn: 'click',\n      beforeClose: null,\n      constrainToScrollParent: true,\n      constrainToWindow: true,\n      classes: '',\n      remove: false,\n      openDelay: 0,\n      closeDelay: 50,\n      // inherited from openDelay and closeDelay if not explicitly defined\n      focusDelay: null,\n      blurDelay: null,\n      hoverOpenDelay: null,\n      hoverCloseDelay: null,\n      tetherOptions: {}\n    }\n  };\n\n  extend(drop, defaultOptions, options);\n  extend(drop.defaults, defaultOptions.defaults, options.defaults);\n\n  if (typeof allDrops[drop.classPrefix] === 'undefined') {\n    allDrops[drop.classPrefix] = [];\n  }\n\n  drop.updateBodyClasses = function () {\n    // There is only one body, so despite the context concept, we still iterate through all\n    // drops which share our classPrefix.\n\n    var anyOpen = false;\n    var drops = allDrops[drop.classPrefix];\n    var len = drops.length;\n    for (var i = 0; i < len; ++i) {\n      if (drops[i].isOpened()) {\n        anyOpen = true;\n        break;\n      }\n    }\n\n    if (anyOpen) {\n      addClass(document.body, drop.classPrefix + '-open');\n    } else {\n      removeClass(document.body, drop.classPrefix + '-open');\n    }\n  };\n\n  var DropInstance = (function (_Evented) {\n    _inherits(DropInstance, _Evented);\n\n    function DropInstance(opts) {\n      _classCallCheck(this, DropInstance);\n\n      _get(Object.getPrototypeOf(DropInstance.prototype), 'constructor', this).call(this);\n      this.options = extend({}, drop.defaults, opts);\n      this.target = this.options.target;\n\n      if (typeof this.target === 'undefined') {\n        throw new Error('Drop Error: You must provide a target.');\n      }\n\n      var dataPrefix = 'data-' + drop.classPrefix;\n\n      var contentAttr = this.target.getAttribute(dataPrefix);\n      if (contentAttr && this.options.content == null) {\n        this.options.content = contentAttr;\n      }\n\n      var attrsOverride = ['position', 'openOn'];\n      for (var i = 0; i < attrsOverride.length; ++i) {\n\n        var override = this.target.getAttribute(dataPrefix + '-' + attrsOverride[i]);\n        if (override && this.options[attrsOverride[i]] == null) {\n          this.options[attrsOverride[i]] = override;\n        }\n      }\n\n      if (this.options.classes && this.options.addTargetClasses !== false) {\n        addClass(this.target, this.options.classes);\n      }\n\n      drop.drops.push(this);\n      allDrops[drop.classPrefix].push(this);\n\n      this._boundEvents = [];\n      this.bindMethods();\n      this.setupElements();\n      this.setupEvents();\n      this.setupTether();\n    }\n\n    _createClass(DropInstance, [{\n      key: '_on',\n      value: function _on(element, event, handler) {\n        this._boundEvents.push({ element: element, event: event, handler: handler });\n        element.addEventListener(event, handler);\n      }\n    }, {\n      key: 'bindMethods',\n      value: function bindMethods() {\n        this.transitionEndHandler = this._transitionEndHandler.bind(this);\n      }\n    }, {\n      key: 'setupElements',\n      value: function setupElements() {\n        var _this = this;\n\n        this.drop = document.createElement('div');\n        addClass(this.drop, drop.classPrefix);\n\n        if (this.options.classes) {\n          addClass(this.drop, this.options.classes);\n        }\n\n        this.content = document.createElement('div');\n        addClass(this.content, drop.classPrefix + '-content');\n\n        if (typeof this.options.content === 'function') {\n          var generateAndSetContent = function generateAndSetContent() {\n            // content function might return a string or an element\n            var contentElementOrHTML = _this.options.content.call(_this, _this);\n\n            if (typeof contentElementOrHTML === 'string') {\n              _this.content.innerHTML = contentElementOrHTML;\n            } else if (typeof contentElementOrHTML === 'object') {\n              _this.content.innerHTML = '';\n              _this.content.appendChild(contentElementOrHTML);\n            } else {\n              throw new Error('Drop Error: Content function should return a string or HTMLElement.');\n            }\n          };\n\n          generateAndSetContent();\n          this.on('open', generateAndSetContent.bind(this));\n        } else if (typeof this.options.content === 'object') {\n          this.content.appendChild(this.options.content);\n        } else {\n          this.content.innerHTML = this.options.content;\n        }\n\n        this.drop.appendChild(this.content);\n      }\n    }, {\n      key: 'setupTether',\n      value: function setupTether() {\n        // Tether expects two attachment points, one in the target element, one in the\n        // drop.  We use a single one, and use the order as well, to allow us to put\n        // the drop on either side of any of the four corners.  This magic converts between\n        // the two:\n        var dropAttach = this.options.position.split(' ');\n        dropAttach[0] = MIRROR_ATTACH[dropAttach[0]];\n        dropAttach = dropAttach.join(' ');\n\n        var constraints = [];\n        if (this.options.constrainToScrollParent) {\n          constraints.push({\n            to: 'scrollParent',\n            pin: 'top, bottom',\n            attachment: 'together none'\n          });\n        } else {\n          // To get 'out of bounds' classes\n          constraints.push({\n            to: 'scrollParent'\n          });\n        }\n\n        if (this.options.constrainToWindow !== false) {\n          constraints.push({\n            to: 'window',\n            attachment: 'together'\n          });\n        } else {\n          // To get 'out of bounds' classes\n          constraints.push({\n            to: 'window'\n          });\n        }\n\n        var opts = {\n          element: this.drop,\n          target: this.target,\n          attachment: sortAttach(dropAttach),\n          targetAttachment: sortAttach(this.options.position),\n          classPrefix: drop.classPrefix,\n          offset: '0 0',\n          targetOffset: '0 0',\n          enabled: false,\n          constraints: constraints,\n          addTargetClasses: this.options.addTargetClasses\n        };\n\n        if (this.options.tetherOptions !== false) {\n          this.tether = new Tether(extend({}, opts, this.options.tetherOptions));\n        }\n      }\n    }, {\n      key: 'setupEvents',\n      value: function setupEvents() {\n        var _this2 = this;\n\n        if (!this.options.openOn) {\n          return;\n        }\n\n        if (this.options.openOn === 'always') {\n          setTimeout(this.open.bind(this));\n          return;\n        }\n\n        var events = this.options.openOn.split(' ');\n\n        if (events.indexOf('click') >= 0) {\n          var openHandler = function openHandler(event) {\n            _this2.toggle(event);\n            event.preventDefault();\n          };\n\n          var closeHandler = function closeHandler(event) {\n            if (!_this2.isOpened()) {\n              return;\n            }\n\n            // Clicking inside dropdown\n            if (event.target === _this2.drop || _this2.drop.contains(event.target)) {\n              return;\n            }\n\n            // Clicking target\n            if (event.target === _this2.target || _this2.target.contains(event.target)) {\n              return;\n            }\n\n            _this2.close(event);\n          };\n\n          for (var i = 0; i < clickEvents.length; ++i) {\n            var clickEvent = clickEvents[i];\n            this._on(this.target, clickEvent, openHandler);\n            this._on(document, clickEvent, closeHandler);\n          }\n        }\n\n        var inTimeout = null;\n        var outTimeout = null;\n\n        var inHandler = function inHandler(event) {\n          if (outTimeout !== null) {\n            clearTimeout(outTimeout);\n          } else {\n            inTimeout = setTimeout(function () {\n              _this2.open(event);\n              inTimeout = null;\n            }, (event.type === 'focus' ? _this2.options.focusDelay : _this2.options.hoverOpenDelay) || _this2.options.openDelay);\n          }\n        };\n\n        var outHandler = function outHandler(event) {\n          if (inTimeout !== null) {\n            clearTimeout(inTimeout);\n          } else {\n            outTimeout = setTimeout(function () {\n              _this2.close(event);\n              outTimeout = null;\n            }, (event.type === 'blur' ? _this2.options.blurDelay : _this2.options.hoverCloseDelay) || _this2.options.closeDelay);\n          }\n        };\n\n        if (events.indexOf('hover') >= 0) {\n          this._on(this.target, 'mouseover', inHandler);\n          this._on(this.drop, 'mouseover', inHandler);\n          this._on(this.target, 'mouseout', outHandler);\n          this._on(this.drop, 'mouseout', outHandler);\n        }\n\n        if (events.indexOf('focus') >= 0) {\n          this._on(this.target, 'focus', inHandler);\n          this._on(this.drop, 'focus', inHandler);\n          this._on(this.target, 'blur', outHandler);\n          this._on(this.drop, 'blur', outHandler);\n        }\n      }\n    }, {\n      key: 'isOpened',\n      value: function isOpened() {\n        if (this.drop) {\n          return hasClass(this.drop, drop.classPrefix + '-open');\n        }\n      }\n    }, {\n      key: 'toggle',\n      value: function toggle(event) {\n        if (this.isOpened()) {\n          this.close(event);\n        } else {\n          this.open(event);\n        }\n      }\n    }, {\n      key: 'open',\n      value: function open(event) {\n        var _this3 = this;\n\n        /* eslint no-unused-vars: 0 */\n        if (this.isOpened()) {\n          return;\n        }\n\n        if (!this.drop.parentNode) {\n          document.body.appendChild(this.drop);\n        }\n\n        if (typeof this.tether !== 'undefined') {\n          this.tether.enable();\n        }\n\n        addClass(this.drop, drop.classPrefix + '-open');\n        addClass(this.drop, drop.classPrefix + '-open-transitionend');\n\n        setTimeout(function () {\n          if (_this3.drop) {\n            addClass(_this3.drop, drop.classPrefix + '-after-open');\n          }\n        });\n\n        if (typeof this.tether !== 'undefined') {\n          this.tether.position();\n        }\n\n        this.trigger('open');\n\n        drop.updateBodyClasses();\n      }\n    }, {\n      key: '_transitionEndHandler',\n      value: function _transitionEndHandler(e) {\n        if (e.target !== e.currentTarget) {\n          return;\n        }\n\n        if (!hasClass(this.drop, drop.classPrefix + '-open')) {\n          removeClass(this.drop, drop.classPrefix + '-open-transitionend');\n        }\n        this.drop.removeEventListener(transitionEndEvent, this.transitionEndHandler);\n      }\n    }, {\n      key: 'beforeCloseHandler',\n      value: function beforeCloseHandler(event) {\n        var shouldClose = true;\n\n        if (!this.isClosing && typeof this.options.beforeClose === 'function') {\n          this.isClosing = true;\n          shouldClose = this.options.beforeClose(event, this) !== false;\n        }\n\n        this.isClosing = false;\n\n        return shouldClose;\n      }\n    }, {\n      key: 'close',\n      value: function close(event) {\n        if (!this.isOpened()) {\n          return;\n        }\n\n        if (!this.beforeCloseHandler(event)) {\n          return;\n        }\n\n        removeClass(this.drop, drop.classPrefix + '-open');\n        removeClass(this.drop, drop.classPrefix + '-after-open');\n\n        this.drop.addEventListener(transitionEndEvent, this.transitionEndHandler);\n\n        this.trigger('close');\n\n        if (typeof this.tether !== 'undefined') {\n          this.tether.disable();\n        }\n\n        drop.updateBodyClasses();\n\n        if (this.options.remove) {\n          this.remove(event);\n        }\n      }\n    }, {\n      key: 'remove',\n      value: function remove(event) {\n        this.close(event);\n        if (this.drop.parentNode) {\n          this.drop.parentNode.removeChild(this.drop);\n        }\n      }\n    }, {\n      key: 'position',\n      value: function position() {\n        if (this.isOpened() && typeof this.tether !== 'undefined') {\n          this.tether.position();\n        }\n      }\n    }, {\n      key: 'destroy',\n      value: function destroy() {\n        this.remove();\n\n        if (typeof this.tether !== 'undefined') {\n          this.tether.destroy();\n        }\n\n        for (var i = 0; i < this._boundEvents.length; ++i) {\n          var _boundEvents$i = this._boundEvents[i];\n          var element = _boundEvents$i.element;\n          var _event = _boundEvents$i.event;\n          var handler = _boundEvents$i.handler;\n\n          element.removeEventListener(_event, handler);\n        }\n\n        this._boundEvents = [];\n\n        this.tether = null;\n        this.drop = null;\n        this.content = null;\n        this.target = null;\n\n        removeFromArray(allDrops[drop.classPrefix], this);\n        removeFromArray(drop.drops, this);\n      }\n    }]);\n\n    return DropInstance;\n  })(Evented);\n\n  return drop;\n}\n\nvar Drop = createContext();\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  Drop.updateBodyClasses();\n});\nreturn Drop;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/bg/workspace/grafana-data/plugins/lightstep-grafana-plugin/node_modules/tether-drop/dist/js/drop.js\n// module id = 20\n// module chunks = 0","/*! tether 1.4.3 */\n\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory(require, exports, module);\n  } else {\n    root.Tether = factory();\n  }\n}(this, function(require, exports, module) {\n\n'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar TetherBase = undefined;\nif (typeof TetherBase === 'undefined') {\n  TetherBase = { modules: [] };\n}\n\nvar zeroElement = null;\n\n// Same as native getBoundingClientRect, except it takes into account parent <frame> offsets\n// if the element lies within a nested document (<frame> or <iframe>-like).\nfunction getActualBoundingClientRect(node) {\n  var boundingRect = node.getBoundingClientRect();\n\n  // The original object returned by getBoundingClientRect is immutable, so we clone it\n  // We can't use extend because the properties are not considered part of the object by hasOwnProperty in IE9\n  var rect = {};\n  for (var k in boundingRect) {\n    rect[k] = boundingRect[k];\n  }\n\n  if (node.ownerDocument !== document) {\n    var _frameElement = node.ownerDocument.defaultView.frameElement;\n    if (_frameElement) {\n      var frameRect = getActualBoundingClientRect(_frameElement);\n      rect.top += frameRect.top;\n      rect.bottom += frameRect.top;\n      rect.left += frameRect.left;\n      rect.right += frameRect.left;\n    }\n  }\n\n  return rect;\n}\n\nfunction getScrollParents(el) {\n  // In firefox if the el is inside an iframe with display: none; window.getComputedStyle() will return null;\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n  var computedStyle = getComputedStyle(el) || {};\n  var position = computedStyle.position;\n  var parents = [];\n\n  if (position === 'fixed') {\n    return [el];\n  }\n\n  var parent = el;\n  while ((parent = parent.parentNode) && parent && parent.nodeType === 1) {\n    var style = undefined;\n    try {\n      style = getComputedStyle(parent);\n    } catch (err) {}\n\n    if (typeof style === 'undefined' || style === null) {\n      parents.push(parent);\n      return parents;\n    }\n\n    var _style = style;\n    var overflow = _style.overflow;\n    var overflowX = _style.overflowX;\n    var overflowY = _style.overflowY;\n\n    if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n      if (position !== 'absolute' || ['relative', 'absolute', 'fixed'].indexOf(style.position) >= 0) {\n        parents.push(parent);\n      }\n    }\n  }\n\n  parents.push(el.ownerDocument.body);\n\n  // If the node is within a frame, account for the parent window scroll\n  if (el.ownerDocument !== document) {\n    parents.push(el.ownerDocument.defaultView);\n  }\n\n  return parents;\n}\n\nvar uniqueId = (function () {\n  var id = 0;\n  return function () {\n    return ++id;\n  };\n})();\n\nvar zeroPosCache = {};\nvar getOrigin = function getOrigin() {\n  // getBoundingClientRect is unfortunately too accurate.  It introduces a pixel or two of\n  // jitter as the user scrolls that messes with our ability to detect if two positions\n  // are equivilant or not.  We place an element at the top left of the page that will\n  // get the same jitter, so we can cancel the two out.\n  var node = zeroElement;\n  if (!node || !document.body.contains(node)) {\n    node = document.createElement('div');\n    node.setAttribute('data-tether-id', uniqueId());\n    extend(node.style, {\n      top: 0,\n      left: 0,\n      position: 'absolute'\n    });\n\n    document.body.appendChild(node);\n\n    zeroElement = node;\n  }\n\n  var id = node.getAttribute('data-tether-id');\n  if (typeof zeroPosCache[id] === 'undefined') {\n    zeroPosCache[id] = getActualBoundingClientRect(node);\n\n    // Clear the cache when this position call is done\n    defer(function () {\n      delete zeroPosCache[id];\n    });\n  }\n\n  return zeroPosCache[id];\n};\n\nfunction removeUtilElements() {\n  if (zeroElement) {\n    document.body.removeChild(zeroElement);\n  }\n  zeroElement = null;\n};\n\nfunction getBounds(el) {\n  var doc = undefined;\n  if (el === document) {\n    doc = document;\n    el = document.documentElement;\n  } else {\n    doc = el.ownerDocument;\n  }\n\n  var docEl = doc.documentElement;\n\n  var box = getActualBoundingClientRect(el);\n\n  var origin = getOrigin();\n\n  box.top -= origin.top;\n  box.left -= origin.left;\n\n  if (typeof box.width === 'undefined') {\n    box.width = document.body.scrollWidth - box.left - box.right;\n  }\n  if (typeof box.height === 'undefined') {\n    box.height = document.body.scrollHeight - box.top - box.bottom;\n  }\n\n  box.top = box.top - docEl.clientTop;\n  box.left = box.left - docEl.clientLeft;\n  box.right = doc.body.clientWidth - box.width - box.left;\n  box.bottom = doc.body.clientHeight - box.height - box.top;\n\n  return box;\n}\n\nfunction getOffsetParent(el) {\n  return el.offsetParent || document.documentElement;\n}\n\nvar _scrollBarSize = null;\nfunction getScrollBarSize() {\n  if (_scrollBarSize) {\n    return _scrollBarSize;\n  }\n  var inner = document.createElement('div');\n  inner.style.width = '100%';\n  inner.style.height = '200px';\n\n  var outer = document.createElement('div');\n  extend(outer.style, {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    pointerEvents: 'none',\n    visibility: 'hidden',\n    width: '200px',\n    height: '150px',\n    overflow: 'hidden'\n  });\n\n  outer.appendChild(inner);\n\n  document.body.appendChild(outer);\n\n  var widthContained = inner.offsetWidth;\n  outer.style.overflow = 'scroll';\n  var widthScroll = inner.offsetWidth;\n\n  if (widthContained === widthScroll) {\n    widthScroll = outer.clientWidth;\n  }\n\n  document.body.removeChild(outer);\n\n  var width = widthContained - widthScroll;\n\n  _scrollBarSize = { width: width, height: width };\n  return _scrollBarSize;\n}\n\nfunction extend() {\n  var out = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n  var args = [];\n\n  Array.prototype.push.apply(args, arguments);\n\n  args.slice(1).forEach(function (obj) {\n    if (obj) {\n      for (var key in obj) {\n        if (({}).hasOwnProperty.call(obj, key)) {\n          out[key] = obj[key];\n        }\n      }\n    }\n  });\n\n  return out;\n}\n\nfunction removeClass(el, name) {\n  if (typeof el.classList !== 'undefined') {\n    name.split(' ').forEach(function (cls) {\n      if (cls.trim()) {\n        el.classList.remove(cls);\n      }\n    });\n  } else {\n    var regex = new RegExp('(^| )' + name.split(' ').join('|') + '( |$)', 'gi');\n    var className = getClassName(el).replace(regex, ' ');\n    setClassName(el, className);\n  }\n}\n\nfunction addClass(el, name) {\n  if (typeof el.classList !== 'undefined') {\n    name.split(' ').forEach(function (cls) {\n      if (cls.trim()) {\n        el.classList.add(cls);\n      }\n    });\n  } else {\n    removeClass(el, name);\n    var cls = getClassName(el) + (' ' + name);\n    setClassName(el, cls);\n  }\n}\n\nfunction hasClass(el, name) {\n  if (typeof el.classList !== 'undefined') {\n    return el.classList.contains(name);\n  }\n  var className = getClassName(el);\n  return new RegExp('(^| )' + name + '( |$)', 'gi').test(className);\n}\n\nfunction getClassName(el) {\n  // Can't use just SVGAnimatedString here since nodes within a Frame in IE have\n  // completely separately SVGAnimatedString base classes\n  if (el.className instanceof el.ownerDocument.defaultView.SVGAnimatedString) {\n    return el.className.baseVal;\n  }\n  return el.className;\n}\n\nfunction setClassName(el, className) {\n  el.setAttribute('class', className);\n}\n\nfunction updateClasses(el, add, all) {\n  // Of the set of 'all' classes, we need the 'add' classes, and only the\n  // 'add' classes to be set.\n  all.forEach(function (cls) {\n    if (add.indexOf(cls) === -1 && hasClass(el, cls)) {\n      removeClass(el, cls);\n    }\n  });\n\n  add.forEach(function (cls) {\n    if (!hasClass(el, cls)) {\n      addClass(el, cls);\n    }\n  });\n}\n\nvar deferred = [];\n\nvar defer = function defer(fn) {\n  deferred.push(fn);\n};\n\nvar flush = function flush() {\n  var fn = undefined;\n  while (fn = deferred.pop()) {\n    fn();\n  }\n};\n\nvar Evented = (function () {\n  function Evented() {\n    _classCallCheck(this, Evented);\n  }\n\n  _createClass(Evented, [{\n    key: 'on',\n    value: function on(event, handler, ctx) {\n      var once = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\n      if (typeof this.bindings === 'undefined') {\n        this.bindings = {};\n      }\n      if (typeof this.bindings[event] === 'undefined') {\n        this.bindings[event] = [];\n      }\n      this.bindings[event].push({ handler: handler, ctx: ctx, once: once });\n    }\n  }, {\n    key: 'once',\n    value: function once(event, handler, ctx) {\n      this.on(event, handler, ctx, true);\n    }\n  }, {\n    key: 'off',\n    value: function off(event, handler) {\n      if (typeof this.bindings === 'undefined' || typeof this.bindings[event] === 'undefined') {\n        return;\n      }\n\n      if (typeof handler === 'undefined') {\n        delete this.bindings[event];\n      } else {\n        var i = 0;\n        while (i < this.bindings[event].length) {\n          if (this.bindings[event][i].handler === handler) {\n            this.bindings[event].splice(i, 1);\n          } else {\n            ++i;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'trigger',\n    value: function trigger(event) {\n      if (typeof this.bindings !== 'undefined' && this.bindings[event]) {\n        var i = 0;\n\n        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        while (i < this.bindings[event].length) {\n          var _bindings$event$i = this.bindings[event][i];\n          var handler = _bindings$event$i.handler;\n          var ctx = _bindings$event$i.ctx;\n          var once = _bindings$event$i.once;\n\n          var context = ctx;\n          if (typeof context === 'undefined') {\n            context = this;\n          }\n\n          handler.apply(context, args);\n\n          if (once) {\n            this.bindings[event].splice(i, 1);\n          } else {\n            ++i;\n          }\n        }\n      }\n    }\n  }]);\n\n  return Evented;\n})();\n\nTetherBase.Utils = {\n  getActualBoundingClientRect: getActualBoundingClientRect,\n  getScrollParents: getScrollParents,\n  getBounds: getBounds,\n  getOffsetParent: getOffsetParent,\n  extend: extend,\n  addClass: addClass,\n  removeClass: removeClass,\n  hasClass: hasClass,\n  updateClasses: updateClasses,\n  defer: defer,\n  flush: flush,\n  uniqueId: uniqueId,\n  Evented: Evented,\n  getScrollBarSize: getScrollBarSize,\n  removeUtilElements: removeUtilElements\n};\n/* globals TetherBase, performance */\n\n'use strict';\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x6, _x7, _x8) { var _again = true; _function: while (_again) { var object = _x6, property = _x7, receiver = _x8; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x6 = parent; _x7 = property; _x8 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nif (typeof TetherBase === 'undefined') {\n  throw new Error('You must include the utils.js file before tether.js');\n}\n\nvar _TetherBase$Utils = TetherBase.Utils;\nvar getScrollParents = _TetherBase$Utils.getScrollParents;\nvar getBounds = _TetherBase$Utils.getBounds;\nvar getOffsetParent = _TetherBase$Utils.getOffsetParent;\nvar extend = _TetherBase$Utils.extend;\nvar addClass = _TetherBase$Utils.addClass;\nvar removeClass = _TetherBase$Utils.removeClass;\nvar updateClasses = _TetherBase$Utils.updateClasses;\nvar defer = _TetherBase$Utils.defer;\nvar flush = _TetherBase$Utils.flush;\nvar getScrollBarSize = _TetherBase$Utils.getScrollBarSize;\nvar removeUtilElements = _TetherBase$Utils.removeUtilElements;\n\nfunction within(a, b) {\n  var diff = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];\n\n  return a + diff >= b && b >= a - diff;\n}\n\nvar transformKey = (function () {\n  if (typeof document === 'undefined') {\n    return '';\n  }\n  var el = document.createElement('div');\n\n  var transforms = ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform'];\n  for (var i = 0; i < transforms.length; ++i) {\n    var key = transforms[i];\n    if (el.style[key] !== undefined) {\n      return key;\n    }\n  }\n})();\n\nvar tethers = [];\n\nvar position = function position() {\n  tethers.forEach(function (tether) {\n    tether.position(false);\n  });\n  flush();\n};\n\nfunction now() {\n  if (typeof performance === 'object' && typeof performance.now === 'function') {\n    return performance.now();\n  }\n  return +new Date();\n}\n\n(function () {\n  var lastCall = null;\n  var lastDuration = null;\n  var pendingTimeout = null;\n\n  var tick = function tick() {\n    if (typeof lastDuration !== 'undefined' && lastDuration > 16) {\n      // We voluntarily throttle ourselves if we can't manage 60fps\n      lastDuration = Math.min(lastDuration - 16, 250);\n\n      // Just in case this is the last event, remember to position just once more\n      pendingTimeout = setTimeout(tick, 250);\n      return;\n    }\n\n    if (typeof lastCall !== 'undefined' && now() - lastCall < 10) {\n      // Some browsers call events a little too frequently, refuse to run more than is reasonable\n      return;\n    }\n\n    if (pendingTimeout != null) {\n      clearTimeout(pendingTimeout);\n      pendingTimeout = null;\n    }\n\n    lastCall = now();\n    position();\n    lastDuration = now() - lastCall;\n  };\n\n  if (typeof window !== 'undefined' && typeof window.addEventListener !== 'undefined') {\n    ['resize', 'scroll', 'touchmove'].forEach(function (event) {\n      window.addEventListener(event, tick);\n    });\n  }\n})();\n\nvar MIRROR_LR = {\n  center: 'center',\n  left: 'right',\n  right: 'left'\n};\n\nvar MIRROR_TB = {\n  middle: 'middle',\n  top: 'bottom',\n  bottom: 'top'\n};\n\nvar OFFSET_MAP = {\n  top: 0,\n  left: 0,\n  middle: '50%',\n  center: '50%',\n  bottom: '100%',\n  right: '100%'\n};\n\nvar autoToFixedAttachment = function autoToFixedAttachment(attachment, relativeToAttachment) {\n  var left = attachment.left;\n  var top = attachment.top;\n\n  if (left === 'auto') {\n    left = MIRROR_LR[relativeToAttachment.left];\n  }\n\n  if (top === 'auto') {\n    top = MIRROR_TB[relativeToAttachment.top];\n  }\n\n  return { left: left, top: top };\n};\n\nvar attachmentToOffset = function attachmentToOffset(attachment) {\n  var left = attachment.left;\n  var top = attachment.top;\n\n  if (typeof OFFSET_MAP[attachment.left] !== 'undefined') {\n    left = OFFSET_MAP[attachment.left];\n  }\n\n  if (typeof OFFSET_MAP[attachment.top] !== 'undefined') {\n    top = OFFSET_MAP[attachment.top];\n  }\n\n  return { left: left, top: top };\n};\n\nfunction addOffset() {\n  var out = { top: 0, left: 0 };\n\n  for (var _len = arguments.length, offsets = Array(_len), _key = 0; _key < _len; _key++) {\n    offsets[_key] = arguments[_key];\n  }\n\n  offsets.forEach(function (_ref) {\n    var top = _ref.top;\n    var left = _ref.left;\n\n    if (typeof top === 'string') {\n      top = parseFloat(top, 10);\n    }\n    if (typeof left === 'string') {\n      left = parseFloat(left, 10);\n    }\n\n    out.top += top;\n    out.left += left;\n  });\n\n  return out;\n}\n\nfunction offsetToPx(offset, size) {\n  if (typeof offset.left === 'string' && offset.left.indexOf('%') !== -1) {\n    offset.left = parseFloat(offset.left, 10) / 100 * size.width;\n  }\n  if (typeof offset.top === 'string' && offset.top.indexOf('%') !== -1) {\n    offset.top = parseFloat(offset.top, 10) / 100 * size.height;\n  }\n\n  return offset;\n}\n\nvar parseOffset = function parseOffset(value) {\n  var _value$split = value.split(' ');\n\n  var _value$split2 = _slicedToArray(_value$split, 2);\n\n  var top = _value$split2[0];\n  var left = _value$split2[1];\n\n  return { top: top, left: left };\n};\nvar parseAttachment = parseOffset;\n\nvar TetherClass = (function (_Evented) {\n  _inherits(TetherClass, _Evented);\n\n  function TetherClass(options) {\n    var _this = this;\n\n    _classCallCheck(this, TetherClass);\n\n    _get(Object.getPrototypeOf(TetherClass.prototype), 'constructor', this).call(this);\n    this.position = this.position.bind(this);\n\n    tethers.push(this);\n\n    this.history = [];\n\n    this.setOptions(options, false);\n\n    TetherBase.modules.forEach(function (module) {\n      if (typeof module.initialize !== 'undefined') {\n        module.initialize.call(_this);\n      }\n    });\n\n    this.position();\n  }\n\n  _createClass(TetherClass, [{\n    key: 'getClass',\n    value: function getClass() {\n      var key = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n      var classes = this.options.classes;\n\n      if (typeof classes !== 'undefined' && classes[key]) {\n        return this.options.classes[key];\n      } else if (this.options.classPrefix) {\n        return this.options.classPrefix + '-' + key;\n      } else {\n        return key;\n      }\n    }\n  }, {\n    key: 'setOptions',\n    value: function setOptions(options) {\n      var _this2 = this;\n\n      var pos = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];\n\n      var defaults = {\n        offset: '0 0',\n        targetOffset: '0 0',\n        targetAttachment: 'auto auto',\n        classPrefix: 'tether'\n      };\n\n      this.options = extend(defaults, options);\n\n      var _options = this.options;\n      var element = _options.element;\n      var target = _options.target;\n      var targetModifier = _options.targetModifier;\n\n      this.element = element;\n      this.target = target;\n      this.targetModifier = targetModifier;\n\n      if (this.target === 'viewport') {\n        this.target = document.body;\n        this.targetModifier = 'visible';\n      } else if (this.target === 'scroll-handle') {\n        this.target = document.body;\n        this.targetModifier = 'scroll-handle';\n      }\n\n      ['element', 'target'].forEach(function (key) {\n        if (typeof _this2[key] === 'undefined') {\n          throw new Error('Tether Error: Both element and target must be defined');\n        }\n\n        if (typeof _this2[key].jquery !== 'undefined') {\n          _this2[key] = _this2[key][0];\n        } else if (typeof _this2[key] === 'string') {\n          _this2[key] = document.querySelector(_this2[key]);\n        }\n      });\n\n      addClass(this.element, this.getClass('element'));\n      if (!(this.options.addTargetClasses === false)) {\n        addClass(this.target, this.getClass('target'));\n      }\n\n      if (!this.options.attachment) {\n        throw new Error('Tether Error: You must provide an attachment');\n      }\n\n      this.targetAttachment = parseAttachment(this.options.targetAttachment);\n      this.attachment = parseAttachment(this.options.attachment);\n      this.offset = parseOffset(this.options.offset);\n      this.targetOffset = parseOffset(this.options.targetOffset);\n\n      if (typeof this.scrollParents !== 'undefined') {\n        this.disable();\n      }\n\n      if (this.targetModifier === 'scroll-handle') {\n        this.scrollParents = [this.target];\n      } else {\n        this.scrollParents = getScrollParents(this.target);\n      }\n\n      if (!(this.options.enabled === false)) {\n        this.enable(pos);\n      }\n    }\n  }, {\n    key: 'getTargetBounds',\n    value: function getTargetBounds() {\n      if (typeof this.targetModifier !== 'undefined') {\n        if (this.targetModifier === 'visible') {\n          if (this.target === document.body) {\n            return { top: pageYOffset, left: pageXOffset, height: innerHeight, width: innerWidth };\n          } else {\n            var bounds = getBounds(this.target);\n\n            var out = {\n              height: bounds.height,\n              width: bounds.width,\n              top: bounds.top,\n              left: bounds.left\n            };\n\n            out.height = Math.min(out.height, bounds.height - (pageYOffset - bounds.top));\n            out.height = Math.min(out.height, bounds.height - (bounds.top + bounds.height - (pageYOffset + innerHeight)));\n            out.height = Math.min(innerHeight, out.height);\n            out.height -= 2;\n\n            out.width = Math.min(out.width, bounds.width - (pageXOffset - bounds.left));\n            out.width = Math.min(out.width, bounds.width - (bounds.left + bounds.width - (pageXOffset + innerWidth)));\n            out.width = Math.min(innerWidth, out.width);\n            out.width -= 2;\n\n            if (out.top < pageYOffset) {\n              out.top = pageYOffset;\n            }\n            if (out.left < pageXOffset) {\n              out.left = pageXOffset;\n            }\n\n            return out;\n          }\n        } else if (this.targetModifier === 'scroll-handle') {\n          var bounds = undefined;\n          var target = this.target;\n          if (target === document.body) {\n            target = document.documentElement;\n\n            bounds = {\n              left: pageXOffset,\n              top: pageYOffset,\n              height: innerHeight,\n              width: innerWidth\n            };\n          } else {\n            bounds = getBounds(target);\n          }\n\n          var style = getComputedStyle(target);\n\n          var hasBottomScroll = target.scrollWidth > target.clientWidth || [style.overflow, style.overflowX].indexOf('scroll') >= 0 || this.target !== document.body;\n\n          var scrollBottom = 0;\n          if (hasBottomScroll) {\n            scrollBottom = 15;\n          }\n\n          var height = bounds.height - parseFloat(style.borderTopWidth) - parseFloat(style.borderBottomWidth) - scrollBottom;\n\n          var out = {\n            width: 15,\n            height: height * 0.975 * (height / target.scrollHeight),\n            left: bounds.left + bounds.width - parseFloat(style.borderLeftWidth) - 15\n          };\n\n          var fitAdj = 0;\n          if (height < 408 && this.target === document.body) {\n            fitAdj = -0.00011 * Math.pow(height, 2) - 0.00727 * height + 22.58;\n          }\n\n          if (this.target !== document.body) {\n            out.height = Math.max(out.height, 24);\n          }\n\n          var scrollPercentage = this.target.scrollTop / (target.scrollHeight - height);\n          out.top = scrollPercentage * (height - out.height - fitAdj) + bounds.top + parseFloat(style.borderTopWidth);\n\n          if (this.target === document.body) {\n            out.height = Math.max(out.height, 24);\n          }\n\n          return out;\n        }\n      } else {\n        return getBounds(this.target);\n      }\n    }\n  }, {\n    key: 'clearCache',\n    value: function clearCache() {\n      this._cache = {};\n    }\n  }, {\n    key: 'cache',\n    value: function cache(k, getter) {\n      // More than one module will often need the same DOM info, so\n      // we keep a cache which is cleared on each position call\n      if (typeof this._cache === 'undefined') {\n        this._cache = {};\n      }\n\n      if (typeof this._cache[k] === 'undefined') {\n        this._cache[k] = getter.call(this);\n      }\n\n      return this._cache[k];\n    }\n  }, {\n    key: 'enable',\n    value: function enable() {\n      var _this3 = this;\n\n      var pos = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n      if (!(this.options.addTargetClasses === false)) {\n        addClass(this.target, this.getClass('enabled'));\n      }\n      addClass(this.element, this.getClass('enabled'));\n      this.enabled = true;\n\n      this.scrollParents.forEach(function (parent) {\n        if (parent !== _this3.target.ownerDocument) {\n          parent.addEventListener('scroll', _this3.position);\n        }\n      });\n\n      if (pos) {\n        this.position();\n      }\n    }\n  }, {\n    key: 'disable',\n    value: function disable() {\n      var _this4 = this;\n\n      removeClass(this.target, this.getClass('enabled'));\n      removeClass(this.element, this.getClass('enabled'));\n      this.enabled = false;\n\n      if (typeof this.scrollParents !== 'undefined') {\n        this.scrollParents.forEach(function (parent) {\n          parent.removeEventListener('scroll', _this4.position);\n        });\n      }\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      var _this5 = this;\n\n      this.disable();\n\n      tethers.forEach(function (tether, i) {\n        if (tether === _this5) {\n          tethers.splice(i, 1);\n        }\n      });\n\n      // Remove any elements we were using for convenience from the DOM\n      if (tethers.length === 0) {\n        removeUtilElements();\n      }\n    }\n  }, {\n    key: 'updateAttachClasses',\n    value: function updateAttachClasses(elementAttach, targetAttach) {\n      var _this6 = this;\n\n      elementAttach = elementAttach || this.attachment;\n      targetAttach = targetAttach || this.targetAttachment;\n      var sides = ['left', 'top', 'bottom', 'right', 'middle', 'center'];\n\n      if (typeof this._addAttachClasses !== 'undefined' && this._addAttachClasses.length) {\n        // updateAttachClasses can be called more than once in a position call, so\n        // we need to clean up after ourselves such that when the last defer gets\n        // ran it doesn't add any extra classes from previous calls.\n        this._addAttachClasses.splice(0, this._addAttachClasses.length);\n      }\n\n      if (typeof this._addAttachClasses === 'undefined') {\n        this._addAttachClasses = [];\n      }\n      var add = this._addAttachClasses;\n\n      if (elementAttach.top) {\n        add.push(this.getClass('element-attached') + '-' + elementAttach.top);\n      }\n      if (elementAttach.left) {\n        add.push(this.getClass('element-attached') + '-' + elementAttach.left);\n      }\n      if (targetAttach.top) {\n        add.push(this.getClass('target-attached') + '-' + targetAttach.top);\n      }\n      if (targetAttach.left) {\n        add.push(this.getClass('target-attached') + '-' + targetAttach.left);\n      }\n\n      var all = [];\n      sides.forEach(function (side) {\n        all.push(_this6.getClass('element-attached') + '-' + side);\n        all.push(_this6.getClass('target-attached') + '-' + side);\n      });\n\n      defer(function () {\n        if (!(typeof _this6._addAttachClasses !== 'undefined')) {\n          return;\n        }\n\n        updateClasses(_this6.element, _this6._addAttachClasses, all);\n        if (!(_this6.options.addTargetClasses === false)) {\n          updateClasses(_this6.target, _this6._addAttachClasses, all);\n        }\n\n        delete _this6._addAttachClasses;\n      });\n    }\n  }, {\n    key: 'position',\n    value: function position() {\n      var _this7 = this;\n\n      var flushChanges = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n      // flushChanges commits the changes immediately, leave true unless you are positioning multiple\n      // tethers (in which case call Tether.Utils.flush yourself when you're done)\n\n      if (!this.enabled) {\n        return;\n      }\n\n      this.clearCache();\n\n      // Turn 'auto' attachments into the appropriate corner or edge\n      var targetAttachment = autoToFixedAttachment(this.targetAttachment, this.attachment);\n\n      this.updateAttachClasses(this.attachment, targetAttachment);\n\n      var elementPos = this.cache('element-bounds', function () {\n        return getBounds(_this7.element);\n      });\n\n      var width = elementPos.width;\n      var height = elementPos.height;\n\n      if (width === 0 && height === 0 && typeof this.lastSize !== 'undefined') {\n        var _lastSize = this.lastSize;\n\n        // We cache the height and width to make it possible to position elements that are\n        // getting hidden.\n        width = _lastSize.width;\n        height = _lastSize.height;\n      } else {\n        this.lastSize = { width: width, height: height };\n      }\n\n      var targetPos = this.cache('target-bounds', function () {\n        return _this7.getTargetBounds();\n      });\n      var targetSize = targetPos;\n\n      // Get an actual px offset from the attachment\n      var offset = offsetToPx(attachmentToOffset(this.attachment), { width: width, height: height });\n      var targetOffset = offsetToPx(attachmentToOffset(targetAttachment), targetSize);\n\n      var manualOffset = offsetToPx(this.offset, { width: width, height: height });\n      var manualTargetOffset = offsetToPx(this.targetOffset, targetSize);\n\n      // Add the manually provided offset\n      offset = addOffset(offset, manualOffset);\n      targetOffset = addOffset(targetOffset, manualTargetOffset);\n\n      // It's now our goal to make (element position + offset) == (target position + target offset)\n      var left = targetPos.left + targetOffset.left - offset.left;\n      var top = targetPos.top + targetOffset.top - offset.top;\n\n      for (var i = 0; i < TetherBase.modules.length; ++i) {\n        var _module2 = TetherBase.modules[i];\n        var ret = _module2.position.call(this, {\n          left: left,\n          top: top,\n          targetAttachment: targetAttachment,\n          targetPos: targetPos,\n          elementPos: elementPos,\n          offset: offset,\n          targetOffset: targetOffset,\n          manualOffset: manualOffset,\n          manualTargetOffset: manualTargetOffset,\n          scrollbarSize: scrollbarSize,\n          attachment: this.attachment\n        });\n\n        if (ret === false) {\n          return false;\n        } else if (typeof ret === 'undefined' || typeof ret !== 'object') {\n          continue;\n        } else {\n          top = ret.top;\n          left = ret.left;\n        }\n      }\n\n      // We describe the position three different ways to give the optimizer\n      // a chance to decide the best possible way to position the element\n      // with the fewest repaints.\n      var next = {\n        // It's position relative to the page (absolute positioning when\n        // the element is a child of the body)\n        page: {\n          top: top,\n          left: left\n        },\n\n        // It's position relative to the viewport (fixed positioning)\n        viewport: {\n          top: top - pageYOffset,\n          bottom: pageYOffset - top - height + innerHeight,\n          left: left - pageXOffset,\n          right: pageXOffset - left - width + innerWidth\n        }\n      };\n\n      var doc = this.target.ownerDocument;\n      var win = doc.defaultView;\n\n      var scrollbarSize = undefined;\n      if (win.innerHeight > doc.documentElement.clientHeight) {\n        scrollbarSize = this.cache('scrollbar-size', getScrollBarSize);\n        next.viewport.bottom -= scrollbarSize.height;\n      }\n\n      if (win.innerWidth > doc.documentElement.clientWidth) {\n        scrollbarSize = this.cache('scrollbar-size', getScrollBarSize);\n        next.viewport.right -= scrollbarSize.width;\n      }\n\n      if (['', 'static'].indexOf(doc.body.style.position) === -1 || ['', 'static'].indexOf(doc.body.parentElement.style.position) === -1) {\n        // Absolute positioning in the body will be relative to the page, not the 'initial containing block'\n        next.page.bottom = doc.body.scrollHeight - top - height;\n        next.page.right = doc.body.scrollWidth - left - width;\n      }\n\n      if (typeof this.options.optimizations !== 'undefined' && this.options.optimizations.moveElement !== false && !(typeof this.targetModifier !== 'undefined')) {\n        (function () {\n          var offsetParent = _this7.cache('target-offsetparent', function () {\n            return getOffsetParent(_this7.target);\n          });\n          var offsetPosition = _this7.cache('target-offsetparent-bounds', function () {\n            return getBounds(offsetParent);\n          });\n          var offsetParentStyle = getComputedStyle(offsetParent);\n          var offsetParentSize = offsetPosition;\n\n          var offsetBorder = {};\n          ['Top', 'Left', 'Bottom', 'Right'].forEach(function (side) {\n            offsetBorder[side.toLowerCase()] = parseFloat(offsetParentStyle['border' + side + 'Width']);\n          });\n\n          offsetPosition.right = doc.body.scrollWidth - offsetPosition.left - offsetParentSize.width + offsetBorder.right;\n          offsetPosition.bottom = doc.body.scrollHeight - offsetPosition.top - offsetParentSize.height + offsetBorder.bottom;\n\n          if (next.page.top >= offsetPosition.top + offsetBorder.top && next.page.bottom >= offsetPosition.bottom) {\n            if (next.page.left >= offsetPosition.left + offsetBorder.left && next.page.right >= offsetPosition.right) {\n              // We're within the visible part of the target's scroll parent\n              var scrollTop = offsetParent.scrollTop;\n              var scrollLeft = offsetParent.scrollLeft;\n\n              // It's position relative to the target's offset parent (absolute positioning when\n              // the element is moved to be a child of the target's offset parent).\n              next.offset = {\n                top: next.page.top - offsetPosition.top + scrollTop - offsetBorder.top,\n                left: next.page.left - offsetPosition.left + scrollLeft - offsetBorder.left\n              };\n            }\n          }\n        })();\n      }\n\n      // We could also travel up the DOM and try each containing context, rather than only\n      // looking at the body, but we're gonna get diminishing returns.\n\n      this.move(next);\n\n      this.history.unshift(next);\n\n      if (this.history.length > 3) {\n        this.history.pop();\n      }\n\n      if (flushChanges) {\n        flush();\n      }\n\n      return true;\n    }\n\n    // THE ISSUE\n  }, {\n    key: 'move',\n    value: function move(pos) {\n      var _this8 = this;\n\n      if (!(typeof this.element.parentNode !== 'undefined')) {\n        return;\n      }\n\n      var same = {};\n\n      for (var type in pos) {\n        same[type] = {};\n\n        for (var key in pos[type]) {\n          var found = false;\n\n          for (var i = 0; i < this.history.length; ++i) {\n            var point = this.history[i];\n            if (typeof point[type] !== 'undefined' && !within(point[type][key], pos[type][key])) {\n              found = true;\n              break;\n            }\n          }\n\n          if (!found) {\n            same[type][key] = true;\n          }\n        }\n      }\n\n      var css = { top: '', left: '', right: '', bottom: '' };\n\n      var transcribe = function transcribe(_same, _pos) {\n        var hasOptimizations = typeof _this8.options.optimizations !== 'undefined';\n        var gpu = hasOptimizations ? _this8.options.optimizations.gpu : null;\n        if (gpu !== false) {\n          var yPos = undefined,\n              xPos = undefined;\n          if (_same.top) {\n            css.top = 0;\n            yPos = _pos.top;\n          } else {\n            css.bottom = 0;\n            yPos = -_pos.bottom;\n          }\n\n          if (_same.left) {\n            css.left = 0;\n            xPos = _pos.left;\n          } else {\n            css.right = 0;\n            xPos = -_pos.right;\n          }\n\n          if (window.matchMedia) {\n            // HubSpot/tether#207\n            var retina = window.matchMedia('only screen and (min-resolution: 1.3dppx)').matches || window.matchMedia('only screen and (-webkit-min-device-pixel-ratio: 1.3)').matches;\n            if (!retina) {\n              xPos = Math.round(xPos);\n              yPos = Math.round(yPos);\n            }\n          }\n\n          css[transformKey] = 'translateX(' + xPos + 'px) translateY(' + yPos + 'px)';\n\n          if (transformKey !== 'msTransform') {\n            // The Z transform will keep this in the GPU (faster, and prevents artifacts),\n            // but IE9 doesn't support 3d transforms and will choke.\n            css[transformKey] += \" translateZ(0)\";\n          }\n        } else {\n          if (_same.top) {\n            css.top = _pos.top + 'px';\n          } else {\n            css.bottom = _pos.bottom + 'px';\n          }\n\n          if (_same.left) {\n            css.left = _pos.left + 'px';\n          } else {\n            css.right = _pos.right + 'px';\n          }\n        }\n      };\n\n      var moved = false;\n      if ((same.page.top || same.page.bottom) && (same.page.left || same.page.right)) {\n        css.position = 'absolute';\n        transcribe(same.page, pos.page);\n      } else if ((same.viewport.top || same.viewport.bottom) && (same.viewport.left || same.viewport.right)) {\n        css.position = 'fixed';\n        transcribe(same.viewport, pos.viewport);\n      } else if (typeof same.offset !== 'undefined' && same.offset.top && same.offset.left) {\n        (function () {\n          css.position = 'absolute';\n          var offsetParent = _this8.cache('target-offsetparent', function () {\n            return getOffsetParent(_this8.target);\n          });\n\n          if (getOffsetParent(_this8.element) !== offsetParent) {\n            defer(function () {\n              _this8.element.parentNode.removeChild(_this8.element);\n              offsetParent.appendChild(_this8.element);\n            });\n          }\n\n          transcribe(same.offset, pos.offset);\n          moved = true;\n        })();\n      } else {\n        css.position = 'absolute';\n        transcribe({ top: true, left: true }, pos.page);\n      }\n\n      if (!moved) {\n        if (this.options.bodyElement) {\n          if (this.element.parentNode !== this.options.bodyElement) {\n            this.options.bodyElement.appendChild(this.element);\n          }\n        } else {\n          var offsetParentIsBody = true;\n          var currentNode = this.element.parentNode;\n          while (currentNode && currentNode.nodeType === 1 && currentNode.tagName !== 'BODY') {\n            if (getComputedStyle(currentNode).position !== 'static') {\n              offsetParentIsBody = false;\n              break;\n            }\n\n            currentNode = currentNode.parentNode;\n          }\n\n          if (!offsetParentIsBody) {\n            this.element.parentNode.removeChild(this.element);\n            this.element.ownerDocument.body.appendChild(this.element);\n          }\n        }\n      }\n\n      // Any css change will trigger a repaint, so let's avoid one if nothing changed\n      var writeCSS = {};\n      var write = false;\n      for (var key in css) {\n        var val = css[key];\n        var elVal = this.element.style[key];\n\n        if (elVal !== val) {\n          write = true;\n          writeCSS[key] = val;\n        }\n      }\n\n      if (write) {\n        defer(function () {\n          extend(_this8.element.style, writeCSS);\n          _this8.trigger('repositioned');\n        });\n      }\n    }\n  }]);\n\n  return TetherClass;\n})(Evented);\n\nTetherClass.modules = [];\n\nTetherBase.position = position;\n\nvar Tether = extend(TetherClass, TetherBase);\n/* globals TetherBase */\n\n'use strict';\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nvar _TetherBase$Utils = TetherBase.Utils;\nvar getBounds = _TetherBase$Utils.getBounds;\nvar extend = _TetherBase$Utils.extend;\nvar updateClasses = _TetherBase$Utils.updateClasses;\nvar defer = _TetherBase$Utils.defer;\n\nvar BOUNDS_FORMAT = ['left', 'top', 'right', 'bottom'];\n\nfunction getBoundingRect(tether, to) {\n  if (to === 'scrollParent') {\n    to = tether.scrollParents[0];\n  } else if (to === 'window') {\n    to = [pageXOffset, pageYOffset, innerWidth + pageXOffset, innerHeight + pageYOffset];\n  }\n\n  if (to === document) {\n    to = to.documentElement;\n  }\n\n  if (typeof to.nodeType !== 'undefined') {\n    (function () {\n      var node = to;\n      var size = getBounds(to);\n      var pos = size;\n      var style = getComputedStyle(to);\n\n      to = [pos.left, pos.top, size.width + pos.left, size.height + pos.top];\n\n      // Account any parent Frames scroll offset\n      if (node.ownerDocument !== document) {\n        var win = node.ownerDocument.defaultView;\n        to[0] += win.pageXOffset;\n        to[1] += win.pageYOffset;\n        to[2] += win.pageXOffset;\n        to[3] += win.pageYOffset;\n      }\n\n      BOUNDS_FORMAT.forEach(function (side, i) {\n        side = side[0].toUpperCase() + side.substr(1);\n        if (side === 'Top' || side === 'Left') {\n          to[i] += parseFloat(style['border' + side + 'Width']);\n        } else {\n          to[i] -= parseFloat(style['border' + side + 'Width']);\n        }\n      });\n    })();\n  }\n\n  return to;\n}\n\nTetherBase.modules.push({\n  position: function position(_ref) {\n    var _this = this;\n\n    var top = _ref.top;\n    var left = _ref.left;\n    var targetAttachment = _ref.targetAttachment;\n\n    if (!this.options.constraints) {\n      return true;\n    }\n\n    var _cache = this.cache('element-bounds', function () {\n      return getBounds(_this.element);\n    });\n\n    var height = _cache.height;\n    var width = _cache.width;\n\n    if (width === 0 && height === 0 && typeof this.lastSize !== 'undefined') {\n      var _lastSize = this.lastSize;\n\n      // Handle the item getting hidden as a result of our positioning without glitching\n      // the classes in and out\n      width = _lastSize.width;\n      height = _lastSize.height;\n    }\n\n    var targetSize = this.cache('target-bounds', function () {\n      return _this.getTargetBounds();\n    });\n\n    var targetHeight = targetSize.height;\n    var targetWidth = targetSize.width;\n\n    var allClasses = [this.getClass('pinned'), this.getClass('out-of-bounds')];\n\n    this.options.constraints.forEach(function (constraint) {\n      var outOfBoundsClass = constraint.outOfBoundsClass;\n      var pinnedClass = constraint.pinnedClass;\n\n      if (outOfBoundsClass) {\n        allClasses.push(outOfBoundsClass);\n      }\n      if (pinnedClass) {\n        allClasses.push(pinnedClass);\n      }\n    });\n\n    allClasses.forEach(function (cls) {\n      ['left', 'top', 'right', 'bottom'].forEach(function (side) {\n        allClasses.push(cls + '-' + side);\n      });\n    });\n\n    var addClasses = [];\n\n    var tAttachment = extend({}, targetAttachment);\n    var eAttachment = extend({}, this.attachment);\n\n    this.options.constraints.forEach(function (constraint) {\n      var to = constraint.to;\n      var attachment = constraint.attachment;\n      var pin = constraint.pin;\n\n      if (typeof attachment === 'undefined') {\n        attachment = '';\n      }\n\n      var changeAttachX = undefined,\n          changeAttachY = undefined;\n      if (attachment.indexOf(' ') >= 0) {\n        var _attachment$split = attachment.split(' ');\n\n        var _attachment$split2 = _slicedToArray(_attachment$split, 2);\n\n        changeAttachY = _attachment$split2[0];\n        changeAttachX = _attachment$split2[1];\n      } else {\n        changeAttachX = changeAttachY = attachment;\n      }\n\n      var bounds = getBoundingRect(_this, to);\n\n      if (changeAttachY === 'target' || changeAttachY === 'both') {\n        if (top < bounds[1] && tAttachment.top === 'top') {\n          top += targetHeight;\n          tAttachment.top = 'bottom';\n        }\n\n        if (top + height > bounds[3] && tAttachment.top === 'bottom') {\n          top -= targetHeight;\n          tAttachment.top = 'top';\n        }\n      }\n\n      if (changeAttachY === 'together') {\n        if (tAttachment.top === 'top') {\n          if (eAttachment.top === 'bottom' && top < bounds[1]) {\n            top += targetHeight;\n            tAttachment.top = 'bottom';\n\n            top += height;\n            eAttachment.top = 'top';\n          } else if (eAttachment.top === 'top' && top + height > bounds[3] && top - (height - targetHeight) >= bounds[1]) {\n            top -= height - targetHeight;\n            tAttachment.top = 'bottom';\n\n            eAttachment.top = 'bottom';\n          }\n        }\n\n        if (tAttachment.top === 'bottom') {\n          if (eAttachment.top === 'top' && top + height > bounds[3]) {\n            top -= targetHeight;\n            tAttachment.top = 'top';\n\n            top -= height;\n            eAttachment.top = 'bottom';\n          } else if (eAttachment.top === 'bottom' && top < bounds[1] && top + (height * 2 - targetHeight) <= bounds[3]) {\n            top += height - targetHeight;\n            tAttachment.top = 'top';\n\n            eAttachment.top = 'top';\n          }\n        }\n\n        if (tAttachment.top === 'middle') {\n          if (top + height > bounds[3] && eAttachment.top === 'top') {\n            top -= height;\n            eAttachment.top = 'bottom';\n          } else if (top < bounds[1] && eAttachment.top === 'bottom') {\n            top += height;\n            eAttachment.top = 'top';\n          }\n        }\n      }\n\n      if (changeAttachX === 'target' || changeAttachX === 'both') {\n        if (left < bounds[0] && tAttachment.left === 'left') {\n          left += targetWidth;\n          tAttachment.left = 'right';\n        }\n\n        if (left + width > bounds[2] && tAttachment.left === 'right') {\n          left -= targetWidth;\n          tAttachment.left = 'left';\n        }\n      }\n\n      if (changeAttachX === 'together') {\n        if (left < bounds[0] && tAttachment.left === 'left') {\n          if (eAttachment.left === 'right') {\n            left += targetWidth;\n            tAttachment.left = 'right';\n\n            left += width;\n            eAttachment.left = 'left';\n          } else if (eAttachment.left === 'left') {\n            left += targetWidth;\n            tAttachment.left = 'right';\n\n            left -= width;\n            eAttachment.left = 'right';\n          }\n        } else if (left + width > bounds[2] && tAttachment.left === 'right') {\n          if (eAttachment.left === 'left') {\n            left -= targetWidth;\n            tAttachment.left = 'left';\n\n            left -= width;\n            eAttachment.left = 'right';\n          } else if (eAttachment.left === 'right') {\n            left -= targetWidth;\n            tAttachment.left = 'left';\n\n            left += width;\n            eAttachment.left = 'left';\n          }\n        } else if (tAttachment.left === 'center') {\n          if (left + width > bounds[2] && eAttachment.left === 'left') {\n            left -= width;\n            eAttachment.left = 'right';\n          } else if (left < bounds[0] && eAttachment.left === 'right') {\n            left += width;\n            eAttachment.left = 'left';\n          }\n        }\n      }\n\n      if (changeAttachY === 'element' || changeAttachY === 'both') {\n        if (top < bounds[1] && eAttachment.top === 'bottom') {\n          top += height;\n          eAttachment.top = 'top';\n        }\n\n        if (top + height > bounds[3] && eAttachment.top === 'top') {\n          top -= height;\n          eAttachment.top = 'bottom';\n        }\n      }\n\n      if (changeAttachX === 'element' || changeAttachX === 'both') {\n        if (left < bounds[0]) {\n          if (eAttachment.left === 'right') {\n            left += width;\n            eAttachment.left = 'left';\n          } else if (eAttachment.left === 'center') {\n            left += width / 2;\n            eAttachment.left = 'left';\n          }\n        }\n\n        if (left + width > bounds[2]) {\n          if (eAttachment.left === 'left') {\n            left -= width;\n            eAttachment.left = 'right';\n          } else if (eAttachment.left === 'center') {\n            left -= width / 2;\n            eAttachment.left = 'right';\n          }\n        }\n      }\n\n      if (typeof pin === 'string') {\n        pin = pin.split(',').map(function (p) {\n          return p.trim();\n        });\n      } else if (pin === true) {\n        pin = ['top', 'left', 'right', 'bottom'];\n      }\n\n      pin = pin || [];\n\n      var pinned = [];\n      var oob = [];\n\n      if (top < bounds[1]) {\n        if (pin.indexOf('top') >= 0) {\n          top = bounds[1];\n          pinned.push('top');\n        } else {\n          oob.push('top');\n        }\n      }\n\n      if (top + height > bounds[3]) {\n        if (pin.indexOf('bottom') >= 0) {\n          top = bounds[3] - height;\n          pinned.push('bottom');\n        } else {\n          oob.push('bottom');\n        }\n      }\n\n      if (left < bounds[0]) {\n        if (pin.indexOf('left') >= 0) {\n          left = bounds[0];\n          pinned.push('left');\n        } else {\n          oob.push('left');\n        }\n      }\n\n      if (left + width > bounds[2]) {\n        if (pin.indexOf('right') >= 0) {\n          left = bounds[2] - width;\n          pinned.push('right');\n        } else {\n          oob.push('right');\n        }\n      }\n\n      if (pinned.length) {\n        (function () {\n          var pinnedClass = undefined;\n          if (typeof _this.options.pinnedClass !== 'undefined') {\n            pinnedClass = _this.options.pinnedClass;\n          } else {\n            pinnedClass = _this.getClass('pinned');\n          }\n\n          addClasses.push(pinnedClass);\n          pinned.forEach(function (side) {\n            addClasses.push(pinnedClass + '-' + side);\n          });\n        })();\n      }\n\n      if (oob.length) {\n        (function () {\n          var oobClass = undefined;\n          if (typeof _this.options.outOfBoundsClass !== 'undefined') {\n            oobClass = _this.options.outOfBoundsClass;\n          } else {\n            oobClass = _this.getClass('out-of-bounds');\n          }\n\n          addClasses.push(oobClass);\n          oob.forEach(function (side) {\n            addClasses.push(oobClass + '-' + side);\n          });\n        })();\n      }\n\n      if (pinned.indexOf('left') >= 0 || pinned.indexOf('right') >= 0) {\n        eAttachment.left = tAttachment.left = false;\n      }\n      if (pinned.indexOf('top') >= 0 || pinned.indexOf('bottom') >= 0) {\n        eAttachment.top = tAttachment.top = false;\n      }\n\n      if (tAttachment.top !== targetAttachment.top || tAttachment.left !== targetAttachment.left || eAttachment.top !== _this.attachment.top || eAttachment.left !== _this.attachment.left) {\n        _this.updateAttachClasses(eAttachment, tAttachment);\n        _this.trigger('update', {\n          attachment: eAttachment,\n          targetAttachment: tAttachment\n        });\n      }\n    });\n\n    defer(function () {\n      if (!(_this.options.addTargetClasses === false)) {\n        updateClasses(_this.target, addClasses, allClasses);\n      }\n      updateClasses(_this.element, addClasses, allClasses);\n    });\n\n    return { top: top, left: left };\n  }\n});\n/* globals TetherBase */\n\n'use strict';\n\nvar _TetherBase$Utils = TetherBase.Utils;\nvar getBounds = _TetherBase$Utils.getBounds;\nvar updateClasses = _TetherBase$Utils.updateClasses;\nvar defer = _TetherBase$Utils.defer;\n\nTetherBase.modules.push({\n  position: function position(_ref) {\n    var _this = this;\n\n    var top = _ref.top;\n    var left = _ref.left;\n\n    var _cache = this.cache('element-bounds', function () {\n      return getBounds(_this.element);\n    });\n\n    var height = _cache.height;\n    var width = _cache.width;\n\n    var targetPos = this.getTargetBounds();\n\n    var bottom = top + height;\n    var right = left + width;\n\n    var abutted = [];\n    if (top <= targetPos.bottom && bottom >= targetPos.top) {\n      ['left', 'right'].forEach(function (side) {\n        var targetPosSide = targetPos[side];\n        if (targetPosSide === left || targetPosSide === right) {\n          abutted.push(side);\n        }\n      });\n    }\n\n    if (left <= targetPos.right && right >= targetPos.left) {\n      ['top', 'bottom'].forEach(function (side) {\n        var targetPosSide = targetPos[side];\n        if (targetPosSide === top || targetPosSide === bottom) {\n          abutted.push(side);\n        }\n      });\n    }\n\n    var allClasses = [];\n    var addClasses = [];\n\n    var sides = ['left', 'top', 'right', 'bottom'];\n    allClasses.push(this.getClass('abutted'));\n    sides.forEach(function (side) {\n      allClasses.push(_this.getClass('abutted') + '-' + side);\n    });\n\n    if (abutted.length) {\n      addClasses.push(this.getClass('abutted'));\n    }\n\n    abutted.forEach(function (side) {\n      addClasses.push(_this.getClass('abutted') + '-' + side);\n    });\n\n    defer(function () {\n      if (!(_this.options.addTargetClasses === false)) {\n        updateClasses(_this.target, addClasses, allClasses);\n      }\n      updateClasses(_this.element, addClasses, allClasses);\n    });\n\n    return true;\n  }\n});\n/* globals TetherBase */\n\n'use strict';\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nTetherBase.modules.push({\n  position: function position(_ref) {\n    var top = _ref.top;\n    var left = _ref.left;\n\n    if (!this.options.shift) {\n      return;\n    }\n\n    var shift = this.options.shift;\n    if (typeof this.options.shift === 'function') {\n      shift = this.options.shift.call(this, { top: top, left: left });\n    }\n\n    var shiftTop = undefined,\n        shiftLeft = undefined;\n    if (typeof shift === 'string') {\n      shift = shift.split(' ');\n      shift[1] = shift[1] || shift[0];\n\n      var _shift = shift;\n\n      var _shift2 = _slicedToArray(_shift, 2);\n\n      shiftTop = _shift2[0];\n      shiftLeft = _shift2[1];\n\n      shiftTop = parseFloat(shiftTop, 10);\n      shiftLeft = parseFloat(shiftLeft, 10);\n    } else {\n      shiftTop = shift.top;\n      shiftLeft = shift.left;\n    }\n\n    top += shiftTop;\n    left += shiftLeft;\n\n    return { top: top, left: left };\n  }\n});\nreturn Tether;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/bg/workspace/grafana-data/plugins/lightstep-grafana-plugin/node_modules/tether/dist/js/tether.js\n// module id = 21\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_22__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"app/core/utils/ticks\"\n// module id = 22\n// module chunks = 0","define([\n  'jquery',\n  'grafana/app/core/core',\n],\nfunction ($, core) {\n  'use strict';\n\n  var appEvents = core.appEvents;\n\n  function GraphTooltip(elem, dashboard, scope, getSeriesFn) {\n    var self = this;\n    var ctrl = scope.ctrl;\n    var panel = ctrl.panel;\n\n    var $tooltip = $('<div class=\"graph-tooltip\">');\n\n    this.destroy = function() {\n      $tooltip.remove();\n    };\n\n    this.findHoverIndexFromDataPoints = function(posX, series, last) {\n      var ps = series.datapoints.pointsize;\n      var initial = last*ps;\n      var len = series.datapoints.points.length;\n      for (var j = initial; j < len; j += ps) {\n        // Special case of a non stepped line, highlight the very last point just before a null point\n        if ((!series.lines.steps && series.datapoints.points[initial] != null && series.datapoints.points[j] == null)\n            //normal case\n            || series.datapoints.points[j] > posX) {\n          return Math.max(j - ps,  0)/ps;\n        }\n      }\n      return j/ps - 1;\n    };\n\n    this.findHoverIndexFromData = function(posX, series) {\n      var lower = 0;\n      var upper = series.data.length - 1;\n      var middle;\n      while (true) {\n        if (lower > upper) {\n          return Math.max(upper, 0);\n        }\n        middle = Math.floor((lower + upper) / 2);\n        if (series.data[middle][0] === posX) {\n          return middle;\n        } else if (series.data[middle][0] < posX) {\n          lower = middle + 1;\n        } else {\n          upper = middle - 1;\n        }\n      }\n    };\n\n    this.renderAndShow = function(absoluteTime, innerHtml, pos, xMode) {\n      if (xMode === 'time') {\n        innerHtml = '<div class=\"graph-tooltip-time\">'+ absoluteTime + '</div>' + innerHtml;\n      }\n      $tooltip.html(innerHtml).place_tt(pos.pageX + 20, pos.pageY);\n    };\n\n    this.getMultiSeriesPlotHoverInfo = function(seriesList, pos) {\n      var value, i, series, hoverIndex, hoverDistance, pointTime, yaxis;\n      // 3 sub-arrays, 1st for hidden series, 2nd for left yaxis, 3rd for right yaxis.\n      var results = [[],[],[]];\n\n      //now we know the current X (j) position for X and Y values\n      var last_value = 0; //needed for stacked values\n\n      var minDistance, minTime;\n\n      for (i = 0; i < seriesList.length; i++) {\n        series = seriesList[i];\n\n        if (!series.data.length || (panel.legend.hideEmpty && series.allIsNull)) {\n          // Init value so that it does not brake series sorting\n          results[0].push({ hidden: true, value: 0 });\n          continue;\n        }\n\n        if (!series.data.length || (panel.legend.hideZero && series.allIsZero)) {\n          // Init value so that it does not brake series sorting\n          results[0].push({ hidden: true, value: 0 });\n          continue;\n        }\n\n        hoverIndex = this.findHoverIndexFromData(pos.x, series);\n        hoverDistance = pos.x - series.data[hoverIndex][0];\n        pointTime = series.data[hoverIndex][0];\n\n        // Take the closest point before the cursor, or if it does not exist, the closest after\n        if (! minDistance\n            || (hoverDistance >=0 && (hoverDistance < minDistance || minDistance < 0))\n            || (hoverDistance < 0 && hoverDistance > minDistance)) {\n          minDistance = hoverDistance;\n          minTime = pointTime;\n        }\n\n        if (series.stack) {\n          if (panel.tooltip.value_type === 'individual') {\n            value = series.data[hoverIndex][1];\n          } else if (!series.stack) {\n            value = series.data[hoverIndex][1];\n          } else {\n            last_value += series.data[hoverIndex][1];\n            value = last_value;\n          }\n        } else {\n          value = series.data[hoverIndex][1];\n        }\n\n        // Highlighting multiple Points depending on the plot type\n        if (series.lines.steps || series.stack) {\n          // stacked and steppedLine plots can have series with different length.\n          // Stacked series can increase its length on each new stacked serie if null points found,\n          // to speed the index search we begin always on the last found hoverIndex.\n          hoverIndex = this.findHoverIndexFromDataPoints(pos.x, series, hoverIndex);\n        }\n\n        // Be sure we have a yaxis so that it does not brake series sorting\n        yaxis = 0;\n        if (series.yaxis) {\n          yaxis = series.yaxis.n;\n        }\n\n        results[yaxis].push({\n          value: value,\n          hoverIndex: hoverIndex,\n          color: series.color,\n          label: series.label,\n          time: pointTime,\n          distance: hoverDistance,\n          index: i\n        });\n      }\n\n      // Contat the 3 sub-arrays\n      results = results[0].concat(results[1],results[2]);\n\n      // Time of the point closer to pointer\n      results.time = minTime;\n\n      return results;\n    };\n\n    elem.mouseleave(function () {\n      if (panel.tooltip.shared) {\n        var plot = elem.data().plot;\n        if (plot) {\n          $tooltip.detach();\n          plot.unhighlight();\n        }\n      }\n      appEvents.emit('graph-hover-clear');\n    });\n\n    elem.bind(\"plothover\", function (event, pos, item) {\n      self.show(pos, item);\n\n      // broadcast to other graph panels that we are hovering!\n      pos.panelRelY = (pos.pageY - elem.offset().top) / elem.height();\n      appEvents.emit('graph-hover', {pos: pos, panel: panel});\n    });\n\n    elem.bind(\"plotclick\", function (event, pos, item) {\n      appEvents.emit('graph-click', {pos: pos, panel: panel, item: item, ctrl: ctrl});\n    });\n\n    this.clear = function(plot) {\n      $tooltip.detach();\n      plot.clearCrosshair();\n      plot.unhighlight();\n    };\n\n    this.show = function(pos, item) {\n      var plot = elem.data().plot;\n      var plotData = plot.getData();\n      var xAxes = plot.getXAxes();\n      var xMode = xAxes[0].options.mode;\n      var seriesList = getSeriesFn();\n      var allSeriesMode = panel.tooltip.shared;\n      var group, value, absoluteTime, hoverInfo, i, series, seriesHtml, tooltipFormat;\n\n      // if panelRelY is defined another panel wants us to show a tooltip\n      // get pageX from position on x axis and pageY from relative position in original panel\n      if (pos.panelRelY) {\n        var pointOffset = plot.pointOffset({x: pos.x});\n        if (Number.isNaN(pointOffset.left) || pointOffset.left < 0 || pointOffset.left > elem.width()) {\n          self.clear(plot);\n          return;\n        }\n        pos.pageX = elem.offset().left + pointOffset.left;\n        pos.pageY = elem.offset().top + elem.height() * pos.panelRelY;\n        var isVisible = pos.pageY >= $(window).scrollTop() && pos.pageY <= $(window).innerHeight() + $(window).scrollTop();\n        if (!isVisible) {\n          self.clear(plot);\n          return;\n        }\n        plot.setCrosshair(pos);\n        allSeriesMode = true;\n\n        if (dashboard.sharedCrosshairModeOnly()) {\n          // if only crosshair mode we are done\n          return;\n        }\n      }\n\n      if (seriesList.length === 0) {\n        return;\n      }\n\n      if (seriesList[0].hasMsResolution) {\n        tooltipFormat = 'YYYY-MM-DD HH:mm:ss.SSS';\n      } else {\n        tooltipFormat = 'YYYY-MM-DD HH:mm:ss';\n      }\n\n      if (allSeriesMode) {\n        plot.unhighlight();\n\n        var seriesHoverInfo = self.getMultiSeriesPlotHoverInfo(plotData, pos);\n\n        seriesHtml = '';\n\n        absoluteTime = dashboard.formatDate(seriesHoverInfo.time, tooltipFormat);\n\n        // Dynamically reorder the hovercard for the current time point if the\n        // option is enabled.\n        if (panel.tooltip.sort === 2) {\n          seriesHoverInfo.sort(function(a, b) {\n            return b.value - a.value;\n          });\n        } else if (panel.tooltip.sort === 1) {\n          seriesHoverInfo.sort(function(a, b) {\n            return a.value - b.value;\n          });\n        }\n\n        for (i = 0; i < seriesHoverInfo.length; i++) {\n          hoverInfo = seriesHoverInfo[i];\n\n          if (hoverInfo.hidden) {\n            continue;\n          }\n\n          var highlightClass = '';\n          if (item && hoverInfo.index === item.seriesIndex) {\n            highlightClass = 'graph-tooltip-list-item--highlight';\n          }\n\n          series = seriesList[hoverInfo.index];\n\n          value = series.formatValue(hoverInfo.value);\n\n          seriesHtml += '<div class=\"graph-tooltip-list-item ' + highlightClass + '\"><div class=\"graph-tooltip-series-name\">';\n          seriesHtml += '<i class=\"fa fa-minus\" style=\"color:' + hoverInfo.color +';\"></i> ' + hoverInfo.label + ':</div>';\n          seriesHtml += '<div class=\"graph-tooltip-value\">' + value + '</div></div>';\n          plot.highlight(hoverInfo.index, hoverInfo.hoverIndex);\n        }\n\n        self.renderAndShow(absoluteTime, seriesHtml, pos, xMode);\n      }\n      // single series tooltip\n      else if (item) {\n        series = seriesList[item.seriesIndex];\n        group = '<div class=\"graph-tooltip-list-item\"><div class=\"graph-tooltip-series-name\">';\n        group += '<i class=\"fa fa-minus\" style=\"color:' + item.series.color +';\"></i> ' + series.label + ':</div>';\n\n        if (panel.stack && panel.tooltip.value_type === 'individual') {\n          value = item.datapoint[1] - item.datapoint[2];\n        }\n        else {\n          value = item.datapoint[1];\n        }\n\n        value = series.formatValue(value);\n\n        absoluteTime = dashboard.formatDate(item.datapoint[0], tooltipFormat);\n\n        group += '<div class=\"graph-tooltip-value\">' + value + '</div>';\n\n        self.renderAndShow(absoluteTime, group, pos, xMode);\n      }\n      // no hit\n      else {\n        $tooltip.detach();\n      }\n    };\n  }\n\n  return GraphTooltip;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./graph_tooltip.js","import './vendor/flot/jquery.flot';\nimport $ from 'jquery';\nimport _ from 'lodash';\n\nexport class ThresholdManager {\n  constructor(panelCtrl) {\n    this.panelCtrl = panelCtrl;\n    this.plot = null;\n    this.placeholder = null;\n    this.height = null;\n    this.thresholds = null;\n    this.needsCleanup = false;\n    this.hasSecondYAxis = null;\n\n  }\n\n  getHandleHtml(handleIndex, model, valueStr) {\n    var stateClass = model.colorMode;\n    if (model.colorMode === 'custom') {\n      stateClass = 'critical';\n    }\n\n    return `\n    <div class=\"alert-handle-wrapper alert-handle-wrapper--T${handleIndex}\">\n      <div class=\"alert-handle-line alert-handle-line--${stateClass}\">\n      </div>\n      <div class=\"alert-handle\" data-handle-index=\"${handleIndex}\">\n        <i class=\"icon-gf icon-gf-${stateClass} alert-state-${stateClass}\"></i>\n        <span class=\"alert-handle-value\">${valueStr}<i class=\"alert-handle-grip\"></i></span>\n      </div>\n    </div>`;\n\n  }\n\n  initDragging(evt) {\n    var handleElem = $(evt.currentTarget).parents(\".alert-handle-wrapper\");\n    var handleIndex = $(evt.currentTarget).data(\"handleIndex\");\n\n    var isMoving = false;\n    var lastY = null;\n    var posTop;\n    var plot = this.plot;\n    var panelCtrl = this.panelCtrl;\n    var model = this.thresholds[handleIndex];\n\n    function dragging(evt) {\n      if (lastY === null) {\n        lastY = evt.clientY;\n      } else {\n        var diff = evt.clientY - lastY;\n        posTop = posTop + diff;\n        lastY = evt.clientY;\n        handleElem.css({top: posTop + diff});\n      }\n    }\n\n    function stopped() {\n      isMoving = false;\n      // calculate graph level\n      var graphValue = plot.c2p({left: 0, top: posTop}).y;\n      graphValue = parseInt(graphValue.toFixed(0));\n      model.value = graphValue;\n\n      handleElem.off(\"mousemove\", dragging);\n      handleElem.off(\"mouseup\", dragging);\n      handleElem.off(\"mouseleave\", dragging);\n\n      // trigger digest and render\n      panelCtrl.$scope.$apply(function() {\n        panelCtrl.render();\n        panelCtrl.events.emit('threshold-changed', {threshold: model, handleIndex: handleIndex});\n      });\n    }\n\n    isMoving = true;\n    lastY = null;\n    posTop = handleElem.position().top;\n\n    handleElem.on(\"mousemove\", dragging);\n    handleElem.on(\"mouseup\", stopped);\n    handleElem.on(\"mouseleave\", stopped);\n  }\n\n  cleanUp() {\n    this.placeholder.find(\".alert-handle-wrapper\").remove();\n    this.needsCleanup = false;\n  }\n\n  renderHandle(handleIndex, defaultHandleTopPos) {\n    var model = this.thresholds[handleIndex];\n    var value = model.value;\n    var valueStr = value;\n    var handleTopPos = 0;\n\n    // handle no value\n    if (!_.isNumber(value)) {\n      valueStr = '';\n      handleTopPos = defaultHandleTopPos;\n    } else {\n      var valueCanvasPos = this.plot.p2c({x: 0, y: value});\n      handleTopPos = Math.round(Math.min(Math.max(valueCanvasPos.top, 0), this.height) - 6);\n    }\n\n    var handleElem = $(this.getHandleHtml(handleIndex, model, valueStr));\n    this.placeholder.append(handleElem);\n\n    handleElem.toggleClass('alert-handle-wrapper--no-value', valueStr === '');\n    handleElem.css({top: handleTopPos});\n  }\n\n  shouldDrawHandles() {\n    return !this.hasSecondYAxis && this.panelCtrl.editingThresholds && this.panelCtrl.panel.thresholds.length > 0;\n  }\n\n  prepare(elem, data) {\n    this.hasSecondYAxis = false;\n    for (var i = 0; i < data.length; i++) {\n      if (data[i].yaxis > 1) {\n        this.hasSecondYAxis = true;\n        break;\n      }\n    }\n\n    if (this.shouldDrawHandles()) {\n      var thresholdMargin = this.panelCtrl.panel.thresholds.length > 1 ? '220px' : '110px';\n      elem.css('margin-right', thresholdMargin);\n    } else if (this.needsCleanup) {\n      elem.css('margin-right', '0');\n    }\n  }\n\n  draw(plot) {\n    this.thresholds = this.panelCtrl.panel.thresholds;\n    this.plot = plot;\n    this.placeholder = plot.getPlaceholder();\n\n    if (this.needsCleanup) {\n      this.cleanUp();\n    }\n\n    if (!this.shouldDrawHandles()) {\n      return;\n    }\n\n    this.height = plot.height();\n\n    if (this.thresholds.length > 0) {\n      this.renderHandle(0, 10);\n    }\n    if (this.thresholds.length > 1) {\n      this.renderHandle(1, this.height-30);\n    }\n\n    this.placeholder.off('mousedown', '.alert-handle');\n    this.placeholder.on('mousedown', '.alert-handle', this.initDragging.bind(this));\n    this.needsCleanup = true;\n  }\n\n  addFlotOptions(options, panel) {\n    if (!panel.thresholds || panel.thresholds.length === 0) {\n      return;\n    }\n\n    var gtLimit = Infinity;\n    var ltLimit = -Infinity;\n    var i, threshold, other;\n\n    for (i = 0; i < panel.thresholds.length; i++) {\n      threshold = panel.thresholds[i];\n      if (!_.isNumber(threshold.value)) {\n        continue;\n      }\n\n      var limit;\n      switch (threshold.op) {\n        case 'gt': {\n          limit = gtLimit;\n          // if next threshold is less then op and greater value, then use that as limit\n          if (panel.thresholds.length > i+1) {\n            other = panel.thresholds[i+1];\n            if (other.value > threshold.value) {\n              limit = other.value;\n              ltLimit = limit;\n            }\n          }\n          break;\n        }\n        case 'lt': {\n          limit = ltLimit;\n          // if next threshold is less then op and greater value, then use that as limit\n          if (panel.thresholds.length > i+1) {\n            other = panel.thresholds[i+1];\n            if (other.value < threshold.value) {\n              limit = other.value;\n              gtLimit = limit;\n            }\n          }\n          break;\n        }\n      }\n\n      var fillColor, lineColor;\n      switch (threshold.colorMode) {\n        case 'critical': {\n          fillColor = 'rgba(234, 112, 112, 0.12)';\n          lineColor = 'rgba(237, 46, 24, 0.60)';\n          break;\n        }\n        case 'warning': {\n          fillColor = 'rgba(235, 138, 14, 0.12)';\n          lineColor = 'rgba(247, 149, 32, 0.60)';\n          break;\n        }\n        case 'ok': {\n          fillColor = 'rgba(11, 237, 50, 0.090)';\n          lineColor = 'rgba(6,163,69, 0.60)';\n          break;\n        }\n        case 'custom': {\n          fillColor = threshold.fillColor;\n          lineColor = threshold.lineColor;\n          break;\n        }\n      }\n\n      // fill\n      if (threshold.fill) {\n        options.grid.markings.push({yaxis: {from: threshold.value, to: limit}, color: fillColor});\n      }\n      if (threshold.line) {\n        options.grid.markings.push({yaxis: {from: threshold.value, to: threshold.value}, color: lineColor});\n      }\n    }\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./threshold_manager.js","import _ from 'lodash';\nimport moment from 'moment';\nimport tinycolor from 'tinycolor2';\nimport {MetricsPanelCtrl} from 'grafana/app/plugins/sdk';\nimport {OK_COLOR, ALERTING_COLOR, NO_DATA_COLOR, DEFAULT_ANNOTATION_COLOR, REGION_FILL_ALPHA} from './colors';\n\n// From app/features/annotation/event.ts\nclass AnnotationEvent {\n  constructor() {\n    this.dashboardId=  0;\n    this.panelId = 0;\n    this.userId = 0;\n    this.time = null;\n    this.timeEnd = null;\n    this.isRegion = false;\n    this.text = null;\n    this.type = null;\n    this.tags = null;\n  }\n}\n\nexport class EventManager {\n  constructor(panelCtrl) {\n    this.panelCtrl = panelCtrl\n    this.event = null;\n    this.editorOpen = null;\n\n  }\n\n  editorClosed() {\n    this.event = null;\n    this.editorOpen = false;\n    this.panelCtrl.render();\n  }\n\n  editorOpened() {\n    this.editorOpen = true;\n  }\n\n  updateTime(range) {\n    if (!this.event) {\n      this.event = new AnnotationEvent();\n      this.event.dashboardId = this.panelCtrl.dashboard.id;\n      this.event.panelId = this.panelCtrl.panel.id;\n    }\n\n    // update time\n    this.event.time = moment(range.from);\n    this.event.isRegion = false;\n    if (range.to) {\n      this.event.timeEnd = moment(range.to);\n      this.event.isRegion = true;\n    }\n\n    this.panelCtrl.render();\n  }\n\n  editEvent(event, elem) {\n    this.event = event;\n    this.panelCtrl.render();\n  }\n\n  addFlotEvents(annotations, flotOptions) {\n    if (!this.event && annotations.length === 0) {\n      return;\n    }\n\n    var types = {\n      $__alerting: {\n        color: ALERTING_COLOR,\n        position: 'BOTTOM',\n        markerSize: 5,\n      },\n      $__ok: {\n        color: OK_COLOR,\n        position: 'BOTTOM',\n        markerSize: 5,\n      },\n      $__no_data: {\n        color: NO_DATA_COLOR,\n        position: 'BOTTOM',\n        markerSize: 5,\n      },\n      $__editing: {\n        color: DEFAULT_ANNOTATION_COLOR,\n        position: 'BOTTOM',\n        markerSize: 5,\n      },\n    };\n\n    if (this.event) {\n      if (this.event.isRegion) {\n        annotations = [\n          {\n            isRegion: true,\n            min: this.event.time.valueOf(),\n            timeEnd: this.event.timeEnd.valueOf(),\n            text: this.event.text,\n            eventType: '$__editing',\n            editModel: this.event,\n          },\n        ];\n      } else {\n        annotations = [\n          {\n            min: this.event.time.valueOf(),\n            text: this.event.text,\n            editModel: this.event,\n            eventType: '$__editing',\n          },\n        ];\n      }\n    } else {\n      // annotations from query\n      for (var i = 0; i < annotations.length; i++) {\n        var item = annotations[i];\n\n        // add properties used by jquery flot events\n        item.min = item.time;\n        item.max = item.time;\n        item.eventType = item.source.name;\n\n        if (item.newState) {\n          item.eventType = '$__' + item.newState;\n          continue;\n        }\n\n        if (!types[item.source.name]) {\n          types[item.source.name] = {\n            color: item.source.iconColor,\n            position: 'BOTTOM',\n            markerSize: 5,\n          };\n        }\n      }\n    }\n\n    let regions = getRegions(annotations);\n    addRegionMarking(regions, flotOptions);\n\n    let eventSectionHeight = 20;\n    let eventSectionMargin = 7;\n    flotOptions.grid.eventSectionHeight = eventSectionMargin;\n    flotOptions.xaxis.eventSectionHeight = eventSectionHeight;\n\n    flotOptions.events = {\n      levels: _.keys(types).length + 1,\n      data: annotations,\n      types: types,\n      manager: this,\n    };\n  }\n}\n\nfunction getRegions(events) {\n  return _.filter(events, 'isRegion');\n}\n\nfunction addRegionMarking(regions, flotOptions) {\n  let markings = flotOptions.grid.markings;\n  let defaultColor = DEFAULT_ANNOTATION_COLOR;\n  let fillColor;\n\n  _.each(regions, region => {\n    if (region.source) {\n      fillColor = region.source.iconColor || defaultColor;\n    } else {\n      fillColor = defaultColor;\n    }\n\n    fillColor = addAlphaToRGB(fillColor, REGION_FILL_ALPHA);\n    markings.push({xaxis: {from: region.min, to: region.timeEnd}, color: fillColor});\n  });\n}\n\nfunction addAlphaToRGB(colorString, alpha) {\n  let color = tinycolor(colorString);\n  if (color.isValid()) {\n    color.setAlpha(alpha);\n    return color.toRgbString();\n  } else {\n    return colorString;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./event_manager.js","import _ from 'lodash';\nimport tinycolor from 'tinycolor2';\n\nexport const PALETTE_ROWS = 4;\nexport const PALETTE_COLUMNS = 14;\nexport const DEFAULT_ANNOTATION_COLOR = 'rgba(0, 211, 255, 1)';\nexport const OK_COLOR = \"rgba(11, 237, 50, 1)\";\nexport const ALERTING_COLOR = \"rgba(237, 46, 24, 1)\";\nexport const NO_DATA_COLOR = \"rgba(150, 150, 150, 1)\";\nexport const REGION_FILL_ALPHA = 0.09;\n\nlet colors = [\n  \"#7EB26D\",\"#EAB839\",\"#6ED0E0\",\"#EF843C\",\"#E24D42\",\"#1F78C1\",\"#BA43A9\",\"#705DA0\",\n  \"#508642\",\"#CCA300\",\"#447EBC\",\"#C15C17\",\"#890F02\",\"#0A437C\",\"#6D1F62\",\"#584477\",\n  \"#B7DBAB\",\"#F4D598\",\"#70DBED\",\"#F9BA8F\",\"#F29191\",\"#82B5D8\",\"#E5A8E2\",\"#AEA2E0\",\n  \"#629E51\",\"#E5AC0E\",\"#64B0C8\",\"#E0752D\",\"#BF1B00\",\"#0A50A1\",\"#962D82\",\"#614D93\",\n  \"#9AC48A\",\"#F2C96D\",\"#65C5DB\",\"#F9934E\",\"#EA6460\",\"#5195CE\",\"#D683CE\",\"#806EB7\",\n  \"#3F6833\",\"#967302\",\"#2F575E\",\"#99440A\",\"#58140C\",\"#052B51\",\"#511749\",\"#3F2B5B\",\n  \"#E0F9D7\",\"#FCEACA\",\"#CFFAFF\",\"#F9E2D2\",\"#FCE2DE\",\"#BADFF4\",\"#F9D9F9\",\"#DEDAF7\"\n];\n\nexport default colors;\n\nexport function sortColorsByHue(hexColors) {\n  let hslColors = _.map(hexColors, hexToHsl);\n\n  let sortedHSLColors = _.sortBy(hslColors, ['h']);\n  sortedHSLColors = _.chunk(sortedHSLColors, PALETTE_ROWS);\n  sortedHSLColors = _.map(sortedHSLColors, chunk => {\n    return _.sortBy(chunk, 'l');\n  });\n  sortedHSLColors = _.flattenDeep(_.zip(...sortedHSLColors));\n\n  return _.map(sortedHSLColors, hslToHex);\n}\n\nexport function hexToHsl(color) {\n  return tinycolor(color).toHsl();\n}\n\nexport function hslToHex(color) {\n  return tinycolor(color).toHexString();\n}\n\nexport let sortedColors = sortColorsByHue(colors);\n\n\n\n// WEBPACK FOOTER //\n// ./colors.js","import _ from 'lodash';\n\n/**\n * Convert series into array of series values.\n * @param data Array of series\n */\nexport function getSeriesValues(data) {\n  let values = [];\n\n  // Count histogam stats\n  for (let i = 0; i < data.length; i++) {\n    let series = data[i];\n    for (let j = 0; j < series.data.length; j++) {\n      if (series.data[j][1] !== null) {\n        values.push(series.data[j][1]);\n      }\n    }\n  }\n\n  return values;\n}\n\n/**\n * Convert array of values into timeseries-like histogram:\n * [[val_1, count_1], [val_2, count_2], ..., [val_n, count_n]]\n * @param values\n * @param bucketSize\n */\nexport function convertValuesToHistogram(values, bucketSize) {\n  let histogram = {};\n\n  for (let i = 0; i < values.length; i++) {\n    let bound = getBucketBound(values[i], bucketSize);\n    if (histogram[bound]) {\n      histogram[bound] = histogram[bound] + 1;\n    } else {\n      histogram[bound] = 1;\n    }\n  }\n\n  let histogam_series = _.map(histogram, (count, bound) => {\n    return [Number(bound), count];\n  });\n\n  // Sort by Y axis values\n  return _.sortBy(histogam_series, point => point[0]);\n}\n\nfunction getBucketBound(value, bucketSize) {\n  return Math.floor(value / bucketSize) * bucketSize;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./histogram.js","define([\n  'angular',\n  'lodash',\n  'jquery',\n],\nfunction (angular, _, $) {\n  'use strict';\n\n  var module = angular.module('grafana.directives');\n\n  module.directive('lightstepGraphLegend', function(popoverSrv, $timeout) {\n\n    return {\n      link: function(scope, elem) {\n        var $container = $('<section class=\"graph-legend\"></section>');\n        var firstRender = true;\n        var ctrl = scope.ctrl;\n        var panel = ctrl.panel;\n        var data;\n        var seriesList;\n        var i;\n\n        ctrl.events.on('render', function() {\n          data = ctrl.seriesList;\n          if (data) {\n            render();\n          }\n        });\n\n        function getSeriesIndexForElement(el) {\n          return el.parents('[data-series-index]').data('series-index');\n        }\n\n        function openColorSelector(e) {\n          // if we clicked inside poup container ignore click\n          if ($(e.target).parents('.popover').length) {\n            return;\n          }\n\n          var el = $(e.currentTarget).find('.fa-minus');\n          var index = getSeriesIndexForElement(el);\n          var series = seriesList[index];\n\n          $timeout(function() {\n            popoverSrv.show({\n              element: el[0],\n              position: 'bottom center',\n              template: '<series-color-picker series=\"series\" onToggleAxis=\"toggleAxis\" onColorChange=\"colorSelected\">' +\n                '</series-color-picker>',\n              openOn: 'hover',\n              model: {\n                series: series,\n                toggleAxis: function() {\n                  ctrl.toggleAxis(series);\n                },\n                colorSelected: function(color) {\n                  ctrl.changeSeriesColor(series, color);\n                }\n              },\n            });\n          });\n        }\n\n        function toggleSeries(e) {\n          var el = $(e.currentTarget);\n          var index = getSeriesIndexForElement(el);\n          var seriesInfo = seriesList[index];\n          var scrollPosition = $($container.children('tbody')).scrollTop();\n          ctrl.toggleSeries(seriesInfo, e);\n          $($container.children('tbody')).scrollTop(scrollPosition);\n        }\n\n        function sortLegend(e) {\n          var el = $(e.currentTarget);\n          var stat = el.data('stat');\n\n          if (stat !== panel.legend.sort) { panel.legend.sortDesc = null; }\n\n          // if already sort ascending, disable sorting\n          if (panel.legend.sortDesc === false) {\n            panel.legend.sort = null;\n            panel.legend.sortDesc = null;\n            render();\n            return;\n          }\n\n          panel.legend.sortDesc = !panel.legend.sortDesc;\n          panel.legend.sort = stat;\n          render();\n        }\n\n        function getTableHeaderHtml(statName) {\n          if (!panel.legend[statName]) { return \"\"; }\n          var html = '<th class=\"pointer\" data-stat=\"' + statName + '\">' + statName;\n\n          if (panel.legend.sort === statName) {\n            var cssClass = panel.legend.sortDesc ? 'fa fa-caret-down' : 'fa fa-caret-up' ;\n            html += ' <span class=\"' + cssClass + '\"></span>';\n          }\n\n          return html + '</th>';\n        }\n\n        function render() {\n          if (!ctrl.panel.legend.show) {\n            elem.empty();\n            firstRender = true;\n            return;\n          }\n\n          if (firstRender) {\n            elem.append($container);\n            $container.on('click', '.graph-legend-icon', openColorSelector);\n            $container.on('click', '.graph-legend-alias', toggleSeries);\n            $container.on('click', 'th', sortLegend);\n            firstRender = false;\n          }\n\n          seriesList = data;\n\n          $container.empty();\n\n          // Set min-width if side style and there is a value, otherwise remove the CSS propery\n          var width = panel.legend.rightSide && panel.legend.sideWidth ? panel.legend.sideWidth + \"px\" : \"\";\n          $container.css(\"min-width\", width);\n\n          $container.toggleClass('graph-legend-table', panel.legend.alignAsTable === true);\n\n          var tableHeaderElem;\n          if (panel.legend.alignAsTable) {\n            var header = '<tr>';\n            header += '<th colspan=\"2\" style=\"text-align:left\"></th>';\n            if (panel.legend.values) {\n              header += getTableHeaderHtml('min');\n              header += getTableHeaderHtml('max');\n              header += getTableHeaderHtml('avg');\n              header += getTableHeaderHtml('current');\n              header += getTableHeaderHtml('total');\n            }\n            header += '</tr>';\n            tableHeaderElem = $(header);\n          }\n\n          if (panel.legend.sort) {\n            seriesList = _.sortBy(seriesList, function(series) {\n              return series.stats[panel.legend.sort];\n            });\n            if (panel.legend.sortDesc) {\n              seriesList = seriesList.reverse();\n            }\n          }\n\n          var seriesShown = 0;\n          var seriesElements = [];\n\n          for (i = 0; i < seriesList.length; i++) {\n            var series = seriesList[i];\n\n            if (series.hideFromLegend(panel.legend)) {\n              continue;\n            }\n\n            var html = '<div class=\"graph-legend-series';\n\n            if (series.yaxis === 2) { html += ' graph-legend-series--right-y'; }\n            if (ctrl.hiddenSeries[series.alias]) { html += ' graph-legend-series-hidden'; }\n            html += '\" data-series-index=\"' + i + '\">';\n            html += '<div class=\"graph-legend-icon\">';\n            html += '<i class=\"fa fa-minus pointer\" style=\"color:' + series.color + '\"></i>';\n            html += '</div>';\n\n            html += '<a class=\"graph-legend-alias pointer\" title=\"' + _.escape(series.label) + '\">' + _.escape(series.label) + '</a>';\n\n            if (panel.legend.values) {\n              var avg = series.formatValue(series.stats.avg);\n              var current = series.formatValue(series.stats.current);\n              var min = series.formatValue(series.stats.min);\n              var max = series.formatValue(series.stats.max);\n              var total = series.formatValue(series.stats.total);\n\n              if (panel.legend.min) { html += '<div class=\"graph-legend-value min\">' + min + '</div>'; }\n              if (panel.legend.max) { html += '<div class=\"graph-legend-value max\">' + max + '</div>'; }\n              if (panel.legend.avg) { html += '<div class=\"graph-legend-value avg\">' + avg + '</div>'; }\n              if (panel.legend.current) { html += '<div class=\"graph-legend-value current\">' + current + '</div>'; }\n              if (panel.legend.total) { html += '<div class=\"graph-legend-value total\">' + total + '</div>'; }\n            }\n\n            html += '</div>';\n            seriesElements.push($(html));\n\n            seriesShown++;\n          }\n\n          if (panel.legend.alignAsTable) {\n            var maxHeight = ctrl.height;\n\n            if (!panel.legend.rightSide) {\n              maxHeight = maxHeight/2;\n            }\n\n            var topPadding = 6;\n            var tbodyElem = $('<tbody></tbody>');\n            tbodyElem.css(\"max-height\", maxHeight - topPadding);\n            tbodyElem.append(tableHeaderElem);\n            tbodyElem.append(seriesElements);\n            $container.append(tbodyElem);\n          } else {\n            $container.append(seriesElements);\n          }\n        }\n      }\n    };\n  });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./legend.js","define([\n  'angular',\n  'jquery',\n  'lodash',\n], function(angular, jquery, _) {\n  'use strict';\n\n  var module = angular.module('grafana.controllers');\n\n  module.controller('SeriesOverridesCtrl', function($scope, $element, popoverSrv) {\n    $scope.overrideMenu = [];\n    $scope.currentOverrides = [];\n    $scope.override = $scope.override || {};\n\n    $scope.addOverrideOption = function(name, propertyName, values) {\n      var option = {};\n      option.text = name;\n      option.propertyName = propertyName;\n      option.index = $scope.overrideMenu.length;\n      option.values = values;\n\n      option.submenu = _.map(values, function(value) {\n        return { text: String(value), value: value };\n      });\n\n      $scope.overrideMenu.push(option);\n    };\n\n    $scope.setOverride = function(item, subItem) {\n      // handle color overrides\n      if (item.propertyName === 'color') {\n        $scope.openColorSelector($scope.override['color']);\n        return;\n      }\n\n      $scope.override[item.propertyName] = subItem.value;\n\n      // automatically disable lines for this series and the fill bellow to series\n      // can be removed by the user if they still want lines\n      if (item.propertyName === 'fillBelowTo') {\n        $scope.override['lines'] = false;\n        $scope.ctrl.addSeriesOverride({alias: subItem.value, lines: false });\n      }\n\n      $scope.updateCurrentOverrides();\n      $scope.ctrl.render();\n    };\n\n    $scope.colorSelected = function(color) {\n      $scope.override['color'] = color;\n      $scope.updateCurrentOverrides();\n      $scope.ctrl.render();\n    };\n\n    $scope.openColorSelector = function(color) {\n      var fakeSeries = {color: color};\n      popoverSrv.show({\n        element: $element.find(\".dropdown\")[0],\n        position: 'top center',\n        openOn: 'click',\n        template: '<series-color-picker series=\"series\" onColorChange=\"colorSelected\" />',\n        model: {\n          autoClose: true,\n          colorSelected: $scope.colorSelected,\n          series: fakeSeries\n        },\n        onClose: function() {\n          $scope.ctrl.render();\n        }\n      });\n    };\n\n    $scope.removeOverride = function(option) {\n      delete $scope.override[option.propertyName];\n      $scope.updateCurrentOverrides();\n      $scope.ctrl.refresh();\n    };\n\n    $scope.getSeriesNames = function() {\n      return _.map($scope.ctrl.seriesList, function(series) {\n        return series.alias;\n      });\n    };\n\n    $scope.updateCurrentOverrides = function() {\n      $scope.currentOverrides = [];\n      _.each($scope.overrideMenu, function(option) {\n        var value = $scope.override[option.propertyName];\n        if (_.isUndefined(value)) { return; }\n        $scope.currentOverrides.push({\n          name: option.text,\n          propertyName: option.propertyName,\n          value: String(value)\n        });\n      });\n    };\n\n    $scope.addOverrideOption('Bars', 'bars', [true, false]);\n    $scope.addOverrideOption('Lines', 'lines', [true, false]);\n    $scope.addOverrideOption('Line fill', 'fill', [0,1,2,3,4,5,6,7,8,9,10]);\n    $scope.addOverrideOption('Line width', 'linewidth', [0,1,2,3,4,5,6,7,8,9,10]);\n    $scope.addOverrideOption('Null point mode', 'nullPointMode', ['connected', 'null', 'null as zero']);\n    $scope.addOverrideOption('Fill below to', 'fillBelowTo', $scope.getSeriesNames());\n    $scope.addOverrideOption('Staircase line', 'steppedLine', [true, false]);\n    $scope.addOverrideOption('Dashes', 'dashes', [true, false]);\n    $scope.addOverrideOption('Dash Length', 'dashLength', [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]);\n    $scope.addOverrideOption('Dash Space', 'spaceLength', [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]);\n    $scope.addOverrideOption('Points', 'points', [true, false]);\n    $scope.addOverrideOption('Points Radius', 'pointradius', [1,2,3,4,5]);\n    $scope.addOverrideOption('Stack', 'stack', [true, false, 'A', 'B', 'C', 'D']);\n    $scope.addOverrideOption('Color', 'color', ['change']);\n    $scope.addOverrideOption('Y-axis', 'yaxis', [1, 2]);\n    $scope.addOverrideOption('Z-index', 'zindex', [-3,-2,-1,0,1,2,3]);\n    $scope.addOverrideOption('Transform', 'transform', ['negative-Y']);\n    $scope.addOverrideOption('Legend', 'legend', [true, false]);\n    $scope.updateCurrentOverrides();\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./series_overrides_ctrl.js","///<reference path=\"../../../headers/common.d.ts\" />\n\nimport coreModule from 'grafana/app/core/core_module';\n\nexport class ThresholdFormCtrl {\n  /** @ngInject */\n  constructor($scope) {\n    this.panelCtrl = $scope.panelCtrl;\n    this.panel = this.panelCtrl.panel;\n\n    if (this.panel.alert) {\n      this.disabled = true;\n    }\n\n    var unbindDestroy = $scope.$on(\"$destroy\", () => {\n      this.panelCtrl.editingThresholds = false;\n      this.panelCtrl.render();\n      unbindDestroy();\n    });\n\n    this.panelCtrl.editingThresholds = true;\n  }\n\n  addThreshold() {\n    this.panel.thresholds.push({value: undefined, colorMode: \"critical\", op: 'gt', fill: true, line: true});\n    this.panelCtrl.render();\n  }\n\n  removeThreshold(index) {\n    this.panel.thresholds.splice(index, 1);\n    this.panelCtrl.render();\n  }\n\n  render() {\n    this.panelCtrl.render();\n  }\n\n  onFillColorChange(index) {\n    return (newColor) => {\n      this.panel.thresholds[index].fillColor = newColor;\n      this.render();\n    };\n  }\n\n  onLineColorChange(index) {\n    return (newColor) => {\n      this.panel.thresholds[index].lineColor = newColor;\n      this.render();\n    };\n  }\n}\n\nvar template = `\n<div class=\"gf-form-group\">\n  <h5>Thresholds</h5>\n  <p class=\"muted\" ng-show=\"ctrl.disabled\">\n    Visual thresholds options <strong>disabled.</strong>\n    Visit the Alert tab update your thresholds. <br>\n    To re-enable thresholds, the alert rule must be deleted from this panel.\n  </p>\n  <div ng-class=\"{'thresholds-form-disabled': ctrl.disabled}\">\n    <div class=\"gf-form-inline\" ng-repeat=\"threshold in ctrl.panel.thresholds\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label\">T{{$index+1}}</label>\n      </div>\n\n      <div class=\"gf-form\">\n        <div class=\"gf-form-select-wrapper\">\n          <select class=\"gf-form-input\" ng-model=\"threshold.op\"\n                  ng-options=\"f for f in ['gt', 'lt']\" ng-change=\"ctrl.render()\" ng-disabled=\"ctrl.disabled\"></select>\n        </div>\n        <input type=\"number\" ng-model=\"threshold.value\" class=\"gf-form-input width-8\"\n               ng-change=\"ctrl.render()\" placeholder=\"value\" ng-disabled=\"ctrl.disabled\">\n      </div>\n\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label\">Color</label>\n        <div class=\"gf-form-select-wrapper\">\n          <select class=\"gf-form-input\" ng-model=\"threshold.colorMode\"\n                  ng-options=\"f for f in ['custom', 'critical', 'warning', 'ok']\" ng-change=\"ctrl.render()\" ng-disabled=\"ctrl.disabled\">\n          </select>\n        </div>\n      </div>\n\n      <gf-form-switch class=\"gf-form\" label=\"Fill\" checked=\"threshold.fill\"\n                      on-change=\"ctrl.render()\" ng-disabled=\"ctrl.disabled\"></gf-form-switch>\n\n      <div class=\"gf-form\" ng-if=\"threshold.fill && threshold.colorMode === 'custom'\">\n        <label class=\"gf-form-label\">Fill color</label>\n        <span class=\"gf-form-label\">\n          <color-picker color=\"threshold.fillColor\" onChange=\"ctrl.onFillColorChange($index)\"></color-picker>\n        </span>\n      </div>\n\n      <gf-form-switch class=\"gf-form\" label=\"Line\" checked=\"threshold.line\"\n                      on-change=\"ctrl.render()\" ng-disabled=\"ctrl.disabled\"></gf-form-switch>\n\n      <div class=\"gf-form\" ng-if=\"threshold.line && threshold.colorMode === 'custom'\">\n        <label class=\"gf-form-label\">Line color</label>\n        <span class=\"gf-form-label\">\n          <color-picker color=\"threshold.lineColor\" onChange=\"ctrl.onLineColorChange($index)\"></color-picker>\n        </span>\n      </div>\n\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label\">\n          <a class=\"pointer\" ng-click=\"ctrl.removeThreshold($index)\" ng-disabled=\"ctrl.disabled\">\n            <i class=\"fa fa-trash\"></i>\n          </a>\n        </label>\n      </div>\n    </div>\n\n    <div class=\"gf-form-button-row\">\n      <button class=\"btn btn-inverse\" ng-click=\"ctrl.addThreshold()\" ng-disabled=\"ctrl.disabled\">\n        <i class=\"fa fa-plus\"></i>&nbsp;Add Threshold\n      </button>\n    </div>\n  </div>\n</div>\n`;\n\ncoreModule.directive('lightstepGraphThresholdForm', function() {\n  return {\n    restrict: 'E',\n    template: template,\n    controller: ThresholdFormCtrl,\n    bindToController: true,\n    controllerAs: 'ctrl',\n    scope: {\n      panelCtrl: \"=\"\n    }\n  };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./thresholds_form.js","module.exports = __WEBPACK_EXTERNAL_MODULE_31__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"app/core/core_module\"\n// module id = 31\n// module chunks = 0","var template = `\n<div class=\"graph-wrapper\" ng-class=\"{'graph-legend-rightside': ctrl.panel.legend.rightSide}\">\n  <div class=\"graph-canvas-wrapper\">\n\n    <div class=\"datapoints-warning\" ng-if=\"ctrl.dataWarning\">\n      <span class=\"small\" bs-tooltip=\"ctrl.dataWarning.tip\">{{ctrl.dataWarning.title}}</span>\n    </div>\n\n    <div lightstep-graph class=\"histogram-chart\" ng-dblclick=\"ctrl.zoomOut()\">\n    </div>\n\n  </div>\n\n  <div class=\"graph-legend-wrapper\" lightstep-graph-legend></div>\n  </div>\n\n<div class=\"clearfix\"></div>\n`;\n\nexport default template;\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./template.js","module.exports = __WEBPACK_EXTERNAL_MODULE_33__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"app/core/config\"\n// module id = 33\n// module chunks = 0","import _ from 'lodash';\nimport TimeSeries from 'grafana/app/core/time_series2';\n\nlet colors = [\n  \"#7EB26D\",\"#EAB839\",\"#6ED0E0\",\"#EF843C\",\"#E24D42\",\"#1F78C1\",\"#BA43A9\",\"#705DA0\",\n  \"#508642\",\"#CCA300\",\"#447EBC\",\"#C15C17\",\"#890F02\",\"#0A437C\",\"#6D1F62\",\"#584477\",\n  \"#B7DBAB\",\"#F4D598\",\"#70DBED\",\"#F9BA8F\",\"#F29191\",\"#82B5D8\",\"#E5A8E2\",\"#AEA2E0\",\n  \"#629E51\",\"#E5AC0E\",\"#64B0C8\",\"#E0752D\",\"#BF1B00\",\"#0A50A1\",\"#962D82\",\"#614D93\",\n  \"#9AC48A\",\"#F2C96D\",\"#65C5DB\",\"#F9934E\",\"#EA6460\",\"#5195CE\",\"#D683CE\",\"#806EB7\",\n  \"#3F6833\",\"#967302\",\"#2F575E\",\"#99440A\",\"#58140C\",\"#052B51\",\"#511749\",\"#3F2B5B\",\n  \"#E0F9D7\",\"#FCEACA\",\"#CFFAFF\",\"#F9E2D2\",\"#FCE2DE\",\"#BADFF4\",\"#F9D9F9\",\"#DEDAF7\"\n];\n\nexport class DataProcessor {\n\n  constructor(panel) {\n    this.panel = panel;\n  }\n\n  getSeriesList(options) {\n    if (!options.dataList || options.dataList.length === 0) {\n      return [];\n    }\n\n    // auto detect xaxis mode\n    var firstItem;\n    if (options.dataList && options.dataList.length > 0) {\n      firstItem = options.dataList[0];\n      let autoDetectMode = this.getAutoDetectXAxisMode(firstItem);\n      if (this.panel.xaxis.mode !== autoDetectMode) {\n        this.panel.xaxis.mode = autoDetectMode;\n        this.setPanelDefaultsForNewXAxisMode();\n      }\n    }\n\n    switch (this.panel.xaxis.mode) {\n      case 'series':\n      case 'histogram':\n      case 'time': {\n        return options.dataList.map((item, index) => {\n          return this.timeSeriesHandler(item, index, options);\n        });\n      }\n      case 'field': {\n        return this.customHandler(firstItem);\n      }\n    }\n  }\n\n  getAutoDetectXAxisMode(firstItem) {\n    switch (firstItem.type) {\n      case 'docs': return 'field';\n      case 'table': return 'field';\n      default: {\n        if (this.panel.xaxis.mode === 'series') {\n          return 'series';\n        }\n        if (this.panel.xaxis.mode === 'histogram') {\n          return 'histogram';\n        }\n        return 'time';\n      }\n    }\n  }\n\n  setPanelDefaultsForNewXAxisMode() {\n    switch (this.panel.xaxis.mode) {\n      case 'time': {\n        this.panel.bars = false;\n        this.panel.lines = true;\n        this.panel.points = false;\n        this.panel.legend.show = true;\n        this.panel.tooltip.shared = true;\n        this.panel.xaxis.values = [];\n        break;\n      }\n      case 'series': {\n        this.panel.bars = true;\n        this.panel.lines = false;\n        this.panel.points = false;\n        this.panel.stack = false;\n        this.panel.legend.show = false;\n        this.panel.tooltip.shared = false;\n        this.panel.xaxis.values = ['total'];\n        break;\n      }\n      case 'histogram': {\n        this.panel.bars = true;\n        this.panel.lines = false;\n        this.panel.points = false;\n        this.panel.stack = false;\n        this.panel.legend.show = false;\n        this.panel.tooltip.shared = false;\n        break;\n      }\n    }\n  }\n\n  timeSeriesHandler(seriesData, index, options) {\n    var datapoints = seriesData.datapoints || [];\n    var alias = seriesData.target;\n\n    var colorIndex = index % colors.length;\n    var color = this.panel.aliasColors[alias] || colors[colorIndex];\n\n    var series = new TimeSeries({datapoints: datapoints, alias: alias, color: color, unit: seriesData.unit});\n\n    if (datapoints && datapoints.length > 0) {\n      var last = datapoints[datapoints.length - 1][1];\n      var from = options.range.from;\n      if (last - from < -10000) {\n        series.isOutsideRange = true;\n      }\n    }\n\n    return series;\n  }\n\n  customHandler(dataItem) {\n    let nameField = this.panel.xaxis.name;\n    if (!nameField) {\n      throw {message: 'No field name specified to use for x-axis, check your axes settings'};\n    }\n    return [];\n  }\n\n  validateXAxisSeriesValue() {\n    switch (this.panel.xaxis.mode) {\n      case 'series': {\n        if (this.panel.xaxis.values.length === 0) {\n          this.panel.xaxis.values = ['total'];\n          return;\n        }\n\n        var validOptions = this.getXAxisValueOptions({});\n        var found = _.find(validOptions, {value: this.panel.xaxis.values[0]});\n        if (!found) {\n          this.panel.xaxis.values = ['total'];\n        }\n        return;\n      }\n    }\n  }\n\n  getDataFieldNames(dataList, onlyNumbers) {\n    if (dataList.length === 0) {\n      return [];\n    }\n\n    let fields = [];\n    var firstItem = dataList[0];\n    let fieldParts = [];\n\n    function getPropertiesRecursive(obj) {\n      _.forEach(obj, (value, key) => {\n        if (_.isObject(value)) {\n          fieldParts.push(key);\n          getPropertiesRecursive(value);\n        } else {\n          if (!onlyNumbers || _.isNumber(value)) {\n            let field = fieldParts.concat(key).join('.');\n            fields.push(field);\n          }\n        }\n      });\n      fieldParts.pop();\n    }\n\n    if (firstItem.type === 'docs') {\n      if (firstItem.datapoints.length === 0) {\n        return [];\n      }\n      getPropertiesRecursive(firstItem.datapoints[0]);\n    }\n\n    return fields;\n  }\n\n  getXAxisValueOptions(options) {\n    switch (this.panel.xaxis.mode) {\n      case 'series': {\n        return [\n          {text: 'Avg', value: 'avg'},\n          {text: 'Min', value: 'min'},\n          {text: 'Max', value: 'max'},\n          {text: 'Total', value: 'total'},\n          {text: 'Count', value: 'count'},\n        ];\n      }\n    }\n\n    return [];\n  }\n\n  pluckDeep(obj, property) {\n    let propertyParts = property.split('.');\n    let value = obj;\n    for (let i = 0; i < propertyParts.length; ++i) {\n      if (value[propertyParts[i]]) {\n        value = value[propertyParts[i]];\n      } else {\n        return undefined;\n      }\n    }\n    return value;\n  }\n\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./data_processor.js","module.exports = __WEBPACK_EXTERNAL_MODULE_35__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"app/core/time_series2\"\n// module id = 35\n// module chunks = 0","import kbn from 'grafana/app/core/utils/kbn';\n\nexport class AxesEditorCtrl {\n  /** @ngInject **/\n  constructor($scope, $q) {\n    this.$scope = $scope;\n    this.$q = $q;\n    this.panelCtrl = $scope.ctrl;\n    this.panel = this.panelCtrl.panel;\n    this.$scope.ctrl = this;\n\n    this.unitFormats = kbn.getUnitFormats();\n\n    this.logScales = {\n      'linear': 1,\n      'log (base 2)': 2,\n      'log (base 10)': 10,\n      'log (base 32)': 32,\n      'log (base 1024)': 1024\n    };\n\n    this.xAxisModes = {\n      'Time': 'time',\n      'Series': 'series',\n      'Histogram': 'histogram'\n      // 'Data field': 'field',\n    };\n\n    this.xAxisStatOptions =  [\n      {text: 'Avg', value: 'avg'},\n      {text: 'Min', value: 'min'},\n      {text: 'Max', value: 'max'},\n      {text: 'Total', value: 'total'},\n      {text: 'Count', value: 'count'},\n      {text: 'Current', value: 'current'},\n    ];\n\n    if (this.panel.xaxis.mode === 'custom') {\n      if (!this.panel.xaxis.name) {\n        this.panel.xaxis.name = 'specify field';\n      }\n    }\n  }\n\n  setUnitFormat(axis, subItem) {\n    axis.format = subItem.value;\n    this.panelCtrl.render();\n  }\n\n  render() {\n    this.panelCtrl.render();\n  }\n\n  xAxisModeChanged()  {\n    this.panelCtrl.processor.setPanelDefaultsForNewXAxisMode();\n    this.panelCtrl.onDataReceived(this.panelCtrl.dataList);\n  }\n\n  xAxisValueChanged() {\n    this.panelCtrl.onDataReceived(this.panelCtrl.dataList);\n  }\n\n  getDataFieldNames(onlyNumbers) {\n    var props = this.panelCtrl.processor.getDataFieldNames(this.panelCtrl.dataList, onlyNumbers);\n    var items = props.map(prop => {\n      return {text: prop, value: prop};\n    });\n\n    return this.$q.when(items);\n  }\n\n}\n\n/** @ngInject **/\nexport function axesEditorComponent() {\n  'use strict';\n  return {\n    restrict: 'E',\n    scope: true,\n    templateUrl: 'public/plugins/grafana-lightstep-graph/axes_editor.html',\n    controller: AxesEditorCtrl,\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./axes_editor.js"],"sourceRoot":""}
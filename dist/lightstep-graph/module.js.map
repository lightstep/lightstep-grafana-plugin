{"version":3,"sources":["webpack:///webpack/bootstrap 492fd7e3492903d86c50","webpack:///external \"lodash\"","webpack:///external \"jquery\"","webpack:///external \"angular\"","webpack:///./vendor/flot/jquery.flot.js","webpack:///external \"moment\"","webpack:///external \"app/core/utils/kbn\"","webpack:///external \"app/core/core\"","webpack:////Users/bcronin/lightstep-workspace/lightstep-grafana-plugin/node_modules/tinycolor2/tinycolor.js","webpack:///external \"app/plugins/sdk\"","webpack:///(webpack)/buildin/module.js","webpack:///./module.js","webpack:///./graph.js","webpack:///./vendor/flot/jquery.flot.selection.js","webpack:///./vendor/flot/jquery.flot.time.js","webpack:///./vendor/flot/jquery.flot.stack.js","webpack:///./vendor/flot/jquery.flot.stackpercent.js","webpack:///./vendor/flot/jquery.flot.fillbelow.js","webpack:///./vendor/flot/jquery.flot.crosshair.js","webpack:///./vendor/flot/jquery.flot.dashes.js","webpack:///./jquery.flot.events.js","webpack:////Users/bcronin/lightstep-workspace/lightstep-grafana-plugin/node_modules/tether-drop/dist/js/drop.js","webpack:////Users/bcronin/lightstep-workspace/lightstep-grafana-plugin/node_modules/tether/dist/js/tether.js","webpack:///external \"app/core/utils/ticks\"","webpack:///./graph_tooltip.js","webpack:///./threshold_manager.js","webpack:///./event_manager.js","webpack:///./colors.js","webpack:///./histogram.js","webpack:///./legend.js","webpack:///./series_overrides_ctrl.js","webpack:///./thresholds_form.js","webpack:///external \"app/core/core_module\"","webpack:///./template.js","webpack:///external \"app/core/config\"","webpack:///./data_processor.js","webpack:///external \"app/core/time_series2\"","webpack:///./axes_editor.js"],"names":["$","color","make","r","g","b","a","o","add","c","d","i","length","charAt","normalize","scale","f","toString","join","clamp","min","value","max","parseInt","clone","extract","elem","css","toLowerCase","parent","nodeName","get","parse","str","res","m","exec","parseFloat","name","trim","lookupColors","aqua","azure","beige","black","blue","brown","cyan","darkblue","darkcyan","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkviolet","fuchsia","gold","green","indigo","khaki","lightblue","lightcyan","lightgreen","lightgrey","lightpink","lightyellow","lime","magenta","maroon","navy","olive","orange","pink","purple","violet","red","silver","white","yellow","jQuery","hasOwnProperty","Object","prototype","fn","detach","each","parentNode","removeChild","Canvas","cls","container","element","children","document","createElement","className","direction","position","left","top","appendTo","getContext","window","G_vmlCanvasManager","initElement","Error","context","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","pixelRatio","resize","width","height","textContainer","text","_textCache","_textSizeCache","flotTextSizeCache","style","restore","save","clear","clearRect","render","cache","layerKey","call","layer","getTextLayer","layerCache","hide","styleKey","styleCache","key","positions","active","rendered","append","splice","show","classes","bottom","right","insertAfter","addClass","getTextInfo","font","angle","textStyle","info","variant","weight","size","lineHeight","family","html","outerWidth","outerHeight","addText","x","y","halign","valign","push","Math","round","removeText","Plot","placeholder","data_","options_","plugins","series","options","colors","legend","noColumns","labelFormatter","labelBoxBorderColor","margin","backgroundColor","backgroundOpacity","sorted","xaxis","mode","tickColor","transform","inverseTransform","autoscaleMargin","ticks","tickFormatter","labelWidth","labelHeight","reserveSpace","tickLength","alignTicksWithAxis","tickDecimals","tickSize","minTickSize","yaxis","xaxes","yaxes","points","radius","lineWidth","fill","fillColor","symbol","lines","steps","bars","barWidth","align","horizontal","zero","shadowSize","highlightColor","grid","aboveData","borderColor","labelMargin","eventSectionHeight","axisMargin","borderWidth","minBorderMargin","markings","markingsColor","markingsLineWidth","clickable","hoverable","autoHighlight","mouseActiveRadius","interaction","redrawOverlayInterval","hooks","surface","overlay","eventHolder","ctx","octx","plotOffset","plotWidth","plotHeight","processOptions","processRawData","processDatapoints","processOffset","drawBackground","drawSeries","draw","bindEvents","drawOverlay","shutdown","plot","setData","setupGrid","getPlaceholder","getCanvas","getPlotOffset","offset","getData","getAxes","concat","_","axis","n","getXAxes","getYAxes","c2p","canvasToAxisCoords","p2c","axisToCanvasCoords","getOptions","highlight","unhighlight","triggerRedrawOverlay","pointOffset","point","axisNumber","destroy","removeData","empty","highlights","initPlugins","parseOptions","setupCanvases","executeHooks","hook","args","apply","p","init","extend","opts","axisOptions","axisCount","fontSize","fontSizeDefault","replace","fontDefaults","noTicks","x2axis","y2axis","coloredAreas","coloredAreasColor","getOrCreateAxis","parseData","fillInSeriesOptions","processData","s","data","obj","coord","allAxes","grep","pos","used","x1","undefined","y1","axes","number","neededColors","maxIndex","sc","colorPool","colorPoolSize","variation","colori","v","topSentry","Number","POSITIVE_INFINITY","bottomSentry","NEGATIVE_INFINITY","fakeInfinity","MAX_VALUE","j","k","ps","val","format","updateAxis","datamin","datamax","datapoints","required","autoscale","defaultValue","pointsize","insertSteps","nullify","isNaN","Infinity","xmin","ymin","xmax","ymax","delta","find","remove","unbind","existing","mousemove","onMouseMove","bind","onMouseLeave","click","onClick","redrawTimeout","clearTimeout","setTransformationHelpers","identity","t","it","abs","measureTickLabels","maxWidth","floor","legacyStyles","label","allocateAxisBoxFirstPhase","lw","lh","isXAxis","padding","eventSectionPadding","innermost","outermost","first","found","box","allocateAxisBoxSecondPhase","adjustLayoutForThingsStickingOut","minMargin","margins","ceil","showGrid","axisOpts","setRange","allocatedAxes","setupTickGeneration","setTicks","snapRangeToTicks","drawAxisLabels","insertLegend","wideFactor","widen","sqrt","dec","log","LN10","maxDec","magn","pow","norm","scaledDecimals","tickGenerator","start","floorInBase","NaN","prev","factor","formatted","decimal","indexOf","precision","substr","isFunction","otherAxis","niceTicks","extraDec","ts","test","toFixed","oticks","drawGrid","extractRange","ranges","from","to","tmp","translate","fillStyle","getColorOrGradient","fillRect","bw","bc","xrange","yrange","xequal","yequal","subPixel","beginPath","strokeStyle","moveTo","lineTo","stroke","xoff","yoff","strokeRect","tick","drawSeriesLines","drawSeriesBars","drawSeriesPoints","plotLine","xoffset","yoffset","axisx","axisy","prevx","prevy","x2","y2","plotLineArea","areaOpen","ypos","segmentStart","segmentEnd","x1old","x2old","lineJoin","sw","PI","sin","cos","getFillStyle","plotPoints","shadow","arc","closePath","w","drawBar","barLeft","barRight","fillStyleCallback","drawLeft","drawRight","drawTop","drawBottom","plotBars","filloptions","seriesColor","fragments","entries","rowStarted","lf","sort","reverse","ascending","entry","table","div","prependTo","findNearbyItem","mouseX","mouseY","seriesFilter","maxDistance","smallestDistance","item","foundPoint","mx","my","maxx","maxy","dx","dy","dist","datapoint","slice","dataIndex","seriesIndex","e","triggerClickHoverEvent","isSelecting","eventname","event","canvasX","pageX","canvasY","pageY","ctrlKey","metaKey","h","auto","trigger","setTimeout","hi","drawBarHighlight","drawPointHighlight","indexOfHighlight","pointRadius","spec","defaultColor","gradient","createLinearGradient","l","co","brightness","opacity","addColorStop","version","base","GraphCtrl","$scope","$injector","annotationsSrv","hiddenSeries","seriesList","dataList","annotations","alertState","annotationsPromise","Promise","resolve","dataWarning","subTabIndex","panelDefaults","datasource","renderer","logBase","values","buckets","linewidth","dashes","dashLength","spaceLength","pointradius","stack","percentage","current","total","avg","nullPointMode","steppedLine","tooltip","value_type","shared","timeFrom","timeShift","targets","aliasColors","seriesOverrides","alias","thresholds","defaults","panel","processor","events","on","onRender","onDataReceived","onDataError","onDataSnapshotLoad","onInitEditMode","onInitPanelActions","addEditorTab","alertingEnabled","actions","getAnnotations","dashboard","range","evt","publishAppEvent","snapshotData","err","getSeriesList","datapointsCount","reduce","title","tip","isOutsideRange","then","result","loading","applySeriesOverrides","unit","serie","shiftKey","toggleSeriesExclusiveMode","hidden","alreadyExclusive","every","override","without","refresh","scope","$new","templateHtml","modalClass","template","graphDirective","$rootScope","timeSrv","popoverSrv","contextSrv","restrict","link","ctrl","sortedSeries","legendSideLastValue","rootScope","$root","panelWidth","eventManager","thresholdManager","renderData","render_panel","appEvents","sharedTooltipModeEnabled","id","otherPanelInFullscreenMode","getLegendHeight","panelHeight","rightSide","alignAsTable","legendSeries","filter","hideFromLegend","getHeight","$parent","panelContentElement","querySelector","clientHeight","setElementHeight","console","shouldAbortRender","drawHook","formater","valueFormats","isNumber","decimals","updateLegendValues","$$phase","$digest","processOffsetHook","gridMargin","panelOptions","getMinTimeStepOfSeries","stats","timeStep","prepare","stackpercent","translateFillOption","labelMarginX","selection","crosshair","getFlotPairs","addXSeriesAxis","bucketSize","histMin","map","histMax","histogram","addXHistogramAxis","addXTableAxis","addTimeAxis","addFlotOptions","addFlotEvents","configureAxisOptions","sortBy","zindex","callPlot","incrementRenderCounter","renderError","error","inspector","message","renderingCompleted","shouldDelayDraw","isUndefined","valueOf","timezone","getTimezone","timeformat","time_format","index","defaultTicks","tickStep","ticks_num","configureAxisMode","pointIndex","tickIndex","flatten","parseNumber","secondY","applyLogScale","toNumber","minSetToZero","MIN_VALUE","logmin","isFinite","generateTicksForLogScaleYAxis","unshift","nextTick","maxNumTicks","numTicks","secPerTick","oneDay","oneYear","isEditor","updateTime","$apply","setTime","utc","isRangeSelection","$on","off","directive","second","savedhandlers","mouseUpHandler","updateSelection","getSelection","onMouseDown","which","body","focus","onselectstart","ondrag","setSelectionPos","onMouseUp","one","selectionIsSane","triggerSelectedEvent","c1","c2","noAxisInUse","anyUsed","p1","p2","clearSelection","preventEvent","setSelection","minSize","mousedown","shape","twelveHourClock","monthNames","formatDate","fmt","dayNames","strftime","leftPad","pad","escape","hours","getHours","isAM","hours12","getDay","getMonth","getDate","getMinutes","getSeconds","getFullYear","makeUtcWrapper","addProxyMethod","sourceObj","sourceMethod","targetObj","targetMethod","arguments","date","props","dateGenerator","Date","timezoneJS","setTimezone","timeUnitSize","baseSpec","specMonths","specQuarters","axisName","year","step","setSeconds","setMinutes","setHours","setMonth","setFullYear","setMilliseconds","minute","hour","day","setDate","month","quarter","carry","getTime","end","useQuarters","span","suffix","hourCode","rt","findMatchingSeries","allseries","stackData","other","otherps","otherpoints","newpoints","px","py","intery","qx","qy","withlines","withbottom","withsteps","keyOffset","accumulateOffset","fromgap","stackBases","processed","stackSums","getStackSums","num","percents","key_idx","value_idx","sum","_data","data_len","sums","newPoints","fillBelowTo","findBelowSeries","segmentIntersection","top_left_x","top_left_y","top_right_x","top_right_y","bottom_left_x","bottom_left_y","bottom_right_x","bottom_right_y","top_delta_x","top_delta_y","bottom_delta_x","bottom_delta_y","plotDifferenceArea","otherseries","openPolygon","closePolygon","validateInput","findNextStart","start_i","end_i","assert","equal","intersect","intersectionPoint","topTraversal","right_i","bottomTraversal","locked","setCrosshair","clearCrosshair","lockCrosshair","unlockCrosshair","onMouseOut","mouseout","adj","drawX","drawY","plotDashes","dashRemainder","dashOn","dashOnLength","dashOffLength","lineSegmentOffset","segmentLength","ax2","ax1","ay2","ay1","deltaX","deltaY","distance","remainder","xsign","ysign","dashOffset","angular","Drop","createAnnotationToolip","injector","content","innerHTML","invoke","$compile","manager","tmpScope","onEdit","editEvent","$destroy","drop","target","openOn","hoverCloseDelay","tetherOptions","constraints","pin","attachment","open","markerElementToAttachTo","createEditPopover","editorOpen","editorOpened","panelCtrl","close","editorClosed","DrawableEvent","object","drawFunc","clearFunc","moveFunc","_object","_drawFunc","_clearFunc","_moveFunc","_position","_width","_height","getObject","VisualEvent","drawableEvent","_parent","_options","_drawableEvent","_hidden","visual","getParent","isHidden","unhide","EventMarkers","_events","_types","_plot","eventsEnabled","getEvents","setTypes","types","setupEvents","that","parts","partition","regions","ve","_buildDiv","vre","_buildRegDiv","ao","bo","drawEvents","_insidePlot","updateEvents","_clearEvents","markerSize","markerShow","lineStyle","markerTooltip","yaxis2","eventTypeId","eventType","topOffset","line","marker","toUpperCase","mouseenter","editModel","mouseleave","hover","regionWidth","timeEnd","timeTo","region","xc","eventMarkers","hideEvents","showEvents","setEvents","defaultOptions","core","GraphTooltip","getSeriesFn","self","$tooltip","findHoverIndexFromDataPoints","posX","last","initial","len","findHoverIndexFromData","lower","upper","middle","renderAndShow","absoluteTime","innerHtml","xMode","place_tt","getMultiSeriesPlotHoverInfo","hoverIndex","hoverDistance","pointTime","results","last_value","minDistance","minTime","hideEmpty","allIsNull","hideZero","allIsZero","time","emit","panelRelY","plotData","xAxes","allSeriesMode","group","hoverInfo","seriesHtml","tooltipFormat","isVisible","scrollTop","innerHeight","sharedCrosshairModeOnly","hasMsResolution","seriesHoverInfo","highlightClass","formatValue","valueFormater","ThresholdManager","needsCleanup","hasSecondYAxis","handleIndex","model","valueStr","stateClass","colorMode","handleElem","currentTarget","parents","isMoving","lastY","posTop","dragging","clientY","diff","stopped","graphValue","threshold","defaultHandleTopPos","handleTopPos","valueCanvasPos","getHandleHtml","toggleClass","editingThresholds","shouldDrawHandles","thresholdMargin","cleanUp","renderHandle","initDragging","gtLimit","ltLimit","limit","op","lineColor","AnnotationEvent","dashboardId","panelId","userId","isRegion","type","tags","EventManager","flotOptions","$__alerting","$__ok","$__no_data","$__editing","source","newState","iconColor","getRegions","addRegionMarking","eventSectionMargin","levels","keys","addAlphaToRGB","colorString","alpha","isValid","setAlpha","toRgbString","PALETTE_ROWS","PALETTE_COLUMNS","DEFAULT_ANNOTATION_COLOR","OK_COLOR","ALERTING_COLOR","NO_DATA_COLOR","REGION_FILL_ALPHA","sortColorsByHue","hexColors","hslColors","hexToHsl","sortedHSLColors","chunk","flattenDeep","zip","hslToHex","toHsl","toHexString","sortedColors","getSeriesValues","convertValuesToHistogram","bound","getBucketBound","histogam_series","count","module","$timeout","$container","firstRender","getSeriesIndexForElement","el","openColorSelector","toggleAxis","colorSelected","changeSeriesColor","toggleSeries","seriesInfo","scrollPosition","sortLegend","stat","sortDesc","getTableHeaderHtml","statName","cssClass","sideWidth","tableHeaderElem","header","seriesShown","seriesElements","maxHeight","topPadding","tbodyElem","jquery","controller","$element","overrideMenu","currentOverrides","addOverrideOption","propertyName","option","submenu","String","setOverride","subItem","addSeriesOverride","updateCurrentOverrides","fakeSeries","autoClose","onClose","removeOverride","getSeriesNames","ThresholdFormCtrl","alert","disabled","unbindDestroy","newColor","bindToController","controllerAs","DataProcessor","firstItem","autoDetectMode","getAutoDetectXAxisMode","setPanelDefaultsForNewXAxisMode","timeSeriesHandler","customHandler","seriesData","colorIndex","dataItem","nameField","validOptions","getXAxisValueOptions","onlyNumbers","fields","fieldParts","getPropertiesRecursive","forEach","isObject","field","pop","property","propertyParts","split","AxesEditorCtrl","$q","unitFormats","getUnitFormats","logScales","xAxisModes","xAxisStatOptions","getDataFieldNames","items","prop","when","axesEditorComponent","templateUrl"],"mappings":"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AArB,EAAwB0S,IAAxB,EAA8B;AAC1B,WAAOA,IAAI,GAAG/Y,IAAI,CAACsN,KAAL,CAAWjH,CAAC,GAAG0S,IAAf,CAAd;AACH;AAEJ,CA3lGD,EA2lGGze,MA3lGH,E;;;;;;AClCA,+C;;;;;;ACAA,+C;;;;;;ACAA,+C;;;;;;ACAA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,8BAA8B;AACpD,sBAAsB,8BAA8B;AACpD,sBAAsB,8BAA8B;;AAEpD;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,mBAAmB,OAAO;AACzD,+BAA+B,mBAAmB,OAAO;AACzD,+BAA+B,mBAAmB,OAAO;AACzD;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB;AAChB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB;AAChB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,gBAAgB;AAChB,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB;AAChB,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD,wCAAwC;AACxC,wCAAwC;AACxC;;AAEA;AACA;;AAEA,YAAY;AACZ;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;AACZ;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,cAAc;AACd;AACA;AACA;AACA,sDAAsD;AACtD,wCAAwC;AACxC,wCAAwC;AACxC;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,cAAc;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,yCAAyC;AAC5D,mBAAmB,yCAAyC;AAC5D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,wCAAwC;AAC3D,mBAAmB,yCAAyC;AAC5D,mBAAmB,yCAAyC;AAC5D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,uCAAuC;AAC1D,mBAAmB,wCAAwC;AAC3D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,+DAA+D,WAAW;AAC1E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,kBAAkB;AAC9C;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2DAA2D,wBAAwB;;AAEnF;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,8EAA8E,4BAA4B,gBAAgB;AAC1H,8EAA8E,2BAA2B,gBAAgB;AACzH,qDAAqD,oDAAoD,gBAAgB;AACzH,qDAAqD,oDAAoD,gBAAgB;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,uBAAuB;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA,oDAAoD,0BAA0B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA,KAAK,kBAAkB,YAAY,kBAAkB;AACrD;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,4BAA4B,YAAY;;AAExC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,EAAE,cAAc,EAAE,cAAc,EAAE;AACjE,+BAA+B,EAAE,cAAc,EAAE,cAAc,EAAE;AACjE,+BAA+B,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AACjF,+BAA+B,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AACjF;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAwC,UAAU,OAAO,UAAU,OAAO,SAAS;AACnF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,2CAA2C;AAC3C;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAwB,kBAAkB;AAAA;AAC1C;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;AC1qCD,+C;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;IAEM0e,S;;;;;AAEJ;AACA,qBAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,cAA/B,EAA+C;AAAA;;AAAA;;AAC7C,8BAAMF,MAAN,EAAcC,SAAd;AACA,UAAKD,MAAL,GAAcA,MAAd;AACA,UAAKC,SAAL,GAAiBA,SAAjB;AACA,UAAKC,cAAL,GAAsBA,cAAtB;AAEA,UAAKC,YAAL,GAAoB,EAApB;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ACwV,MAAL;AACD,OAJD;AAKD;AA5sBI,GAAP;AA8sBD;;AAED,kEAAU,CAACyZ,SAAX,CAAqB,gBAArB,EAAuCrH,cAAvC,E;;;;;;ACzuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,CAAC,UAAUtpB,CAAV,EAAa;AACV,WAAS6S,IAAT,CAActC,IAAd,EAAoB;AAChB,QAAIqc,SAAS,GAAG;AACR7T,WAAK,EAAE;AAAEtO,SAAC,EAAE,CAAC,CAAN;AAASC,SAAC,EAAE,CAAC;AAAb,OADC;AACgBkmB,YAAM,EAAE;AAAEnmB,SAAC,EAAE,CAAC,CAAN;AAASC,SAAC,EAAE,CAAC;AAAb,OADxB;AAERrB,UAAI,EAAE,KAFE;AAGRJ,YAAM,EAAE;AAHA,KAAhB,CADgB,CAOhB;AACA;AACA;AACA;AACA;;AACA,QAAI4nB,aAAa,GAAG,EAApB;AAEA,QAAIC,cAAc,GAAG,IAArB;;AAEA,aAASxZ,WAAT,CAAqByK,CAArB,EAAwB;AACpB,UAAI6K,SAAS,CAAC3jB,MAAd,EAAsB;AAClB8nB,uBAAe,CAAChP,CAAD,CAAf;AAEAxR,YAAI,CAACG,cAAL,GAAsBkS,OAAtB,CAA8B,eAA9B,EAA+C,CAAEoO,YAAY,EAAd,CAA/C;AACH;AACJ;;AAED,aAASC,WAAT,CAAqBlP,CAArB,EAAwB;AACpB,UAAIA,CAAC,CAACmP,KAAF,IAAW,CAAf,EAAmB;AACf,eAFgB,CAIpB;;AACAhrB,cAAQ,CAACirB,IAAT,CA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B,4BAA4B,kBAAkB,EAAE,8BAA8B,EAAE,EAAE;;AAElpB,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,0CAA0C,+DAA+D,qGAAqG,EAAE,yEAAyE,eAAe,yEAAyE,EAAE,EAAE,uHAAuH;;AAE5e;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,wEAAwE;;AAExE;AACA,mEAAmE,aAAa;AAChF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,8BAA8B;AAC9B;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,0BAA0B;;AAE/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,mDAAmD;AACnF;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4CAA4C;AAC5C;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yBAAyB,wBAAwB;AACjD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB,8BAA8B;AACrD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA,CAAC;AACD;;AAEA,CAAC;;;;;;;AC/iBD;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;;AAEA,iCAAiC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEljB,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;AACA;AACA,gBAAgB;AAChB;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iEAAiE;AACjE;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,oBAAoB;AACpB;AACA;;AAEA;AACA,oEAAoE;;AAEpE;;AAEA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,yCAAyC;AAC1E;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA,0FAA0F,aAAa;AACvG;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,mCAAmC,iCAAiC,eAAe,eAAe,gBAAgB,oBAAoB,MAAM,0CAA0C,+BAA+B,aAAa,qBAAqB,mCAAmC,EAAE,EAAE,cAAc,WAAW,UAAU,EAAE,UAAU,MAAM,yCAAyC,EAAE,UAAU,kBAAkB,EAAE,EAAE,aAAa,EAAE,2BAA2B,0BAA0B,YAAY,EAAE,2CAA2C,8BAA8B,EAAE,OAAO,6EAA6E,EAAE,GAAG,EAAE;;AAEtpB,iCAAiC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEljB,wCAAwC,mBAAmB,4BAA4B,kDAAkD,gBAAgB,kDAAkD,8DAA8D,0BAA0B,4CAA4C,uBAAuB,kBAAkB,EAAE,OAAO,cAAc,gBAAgB,gBAAgB,eAAe,2BAA2B,oBAAoB,EAAE,EAAE,4BAA4B,mBAAmB,EAAE,OAAO,uBAAuB,4BAA4B,kBAAkB,EAAE,8BAA8B,EAAE,EAAE;;AAElpB,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,0CAA0C,+DAA+D,qGAAqG,EAAE,yEAAyE,eAAe,yEAAyE,EAAE,EAAE,uHAAuH;;AAE5e;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,UAAU;AACV;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,UAAU;AACV;;AAEA;AACA,aAAa;;AAEb,oEAAoE,aAAa;AACjF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,UAAU;AACV;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,yBAAyB;AACzB;;AAEA;AACA;AACA,OAAO;AACP;;AAEA;AACA,oEAAoE,+BAA+B;AACnG;;AAEA,kDAAkD,+BAA+B;AACjF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,+BAA+B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;;AAEX;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA,yBAAyB,yBAAyB;AAClD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,oBAAoB,wBAAwB;AAC5C;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;;AAEA;;AAEA;AACA;;AAEA;;AAEA,mCAAmC,iCAAiC,eAAe,eAAe,gBAAgB,oBAAoB,MAAM,0CAA0C,+BAA+B,aAAa,qBAAqB,mCAAmC,EAAE,EAAE,cAAc,WAAW,UAAU,EAAE,UAAU,MAAM,yCAAyC,EAAE,UAAU,kBAAkB,EAAE,EAAE,aAAa,EAAE,2BAA2B,0BAA0B,YAAY,EAAE,2CAA2C,8BAA8B,EAAE,OAAO,6EAA6E,EAAE,GAAG,EAAE;;AAEtpB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;;AAEA,+BAA+B;AAC/B,+BAA+B;;AAE/B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,YAAY;AACZ;AACA,CAAC;AACD;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO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","file":"module.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 492fd7e3492903d86c50","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 0\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jquery\"\n// module id = 1\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"angular\"\n// module id = 2\n// module chunks = 0","/* Javascript plotting library for jQuery, version 0.8.3.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\n*/\n\n// first an inline dependency, jquery.colorhelpers.js, we inline it here\n// for convenience\n\n/* Plugin for jQuery for working with colors.\n *\n * Version 1.1.\n *\n * Inspiration from jQuery color animation plugin by John Resig.\n *\n * Released under the MIT license by Ole Laursen, October 2009.\n *\n * Examples:\n *\n *   $.color.parse(\"#fff\").scale('rgb', 0.25).add('a', -0.5).toString()\n *   var c = $.color.extract($(\"#mydiv\"), 'background-color');\n *   console.log(c.r, c.g, c.b, c.a);\n *   $.color.make(100, 50, 25, 0.4).toString() // returns \"rgba(100,50,25,0.4)\"\n *\n * Note that .scale() and .add() return the same modified object\n * instead of making a new one.\n *\n * V. 1.1: Fix error handling so e.g. parsing an empty string does\n * produce a color rather than just crashing.\n */\n(function($){$.color={};$.color.make=function(r,g,b,a){var o={};o.r=r||0;o.g=g||0;o.b=b||0;o.a=a!=null?a:1;o.add=function(c,d){for(var i=0;i<c.length;++i)o[c.charAt(i)]+=d;return o.normalize()};o.scale=function(c,f){for(var i=0;i<c.length;++i)o[c.charAt(i)]*=f;return o.normalize()};o.toString=function(){if(o.a>=1){return\"rgb(\"+[o.r,o.g,o.b].join(\",\")+\")\"}else{return\"rgba(\"+[o.r,o.g,o.b,o.a].join(\",\")+\")\"}};o.normalize=function(){function clamp(min,value,max){return value<min?min:value>max?max:value}o.r=clamp(0,parseInt(o.r),255);o.g=clamp(0,parseInt(o.g),255);o.b=clamp(0,parseInt(o.b),255);o.a=clamp(0,o.a,1);return o};o.clone=function(){return $.color.make(o.r,o.b,o.g,o.a)};return o.normalize()};$.color.extract=function(elem,css){var c;do{c=elem.css(css).toLowerCase();if(c!=\"\"&&c!=\"transparent\")break;elem=elem.parent()}while(elem.length&&!$.nodeName(elem.get(0),\"body\"));if(c==\"rgba(0, 0, 0, 0)\")c=\"transparent\";return $.color.parse(c)};$.color.parse=function(str){var res,m=$.color.make;if(res=/rgb\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*\\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10));if(res=/rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10),parseFloat(res[4]));if(res=/rgb\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*\\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55);if(res=/rgba\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55,parseFloat(res[4]));if(res=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str))return m(parseInt(res[1],16),parseInt(res[2],16),parseInt(res[3],16));if(res=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str))return m(parseInt(res[1]+res[1],16),parseInt(res[2]+res[2],16),parseInt(res[3]+res[3],16));var name=$.trim(str).toLowerCase();if(name==\"transparent\")return m(255,255,255,0);else{res=lookupColors[name]||[0,0,0];return m(res[0],res[1],res[2])}};var lookupColors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);\n\n// the actual Flot code\n(function($) {\n\n\t// Cache the prototype hasOwnProperty for faster access\n\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    // A shim to provide 'detach' to jQuery versions prior to 1.4.  Using a DOM\n    // operation produces the same effect as detach, i.e. removing the element\n    // without touching its jQuery data.\n\n    // Do not merge this into Flot 0.9, since it requires jQuery 1.4.4+.\n\n    if (!$.fn.detach) {\n        $.fn.detach = function() {\n            return this.each(function() {\n                if (this.parentNode) {\n                    this.parentNode.removeChild( this );\n                }\n            });\n        };\n    }\n\n\t///////////////////////////////////////////////////////////////////////////\n\t// The Canvas object is a wrapper around an HTML5 <canvas> tag.\n\t//\n\t// @constructor\n\t// @param {string} cls List of classes to apply to the canvas.\n\t// @param {element} container Element onto which to append the canvas.\n\t//\n\t// Requiring a container is a little iffy, but unfortunately canvas\n\t// operations don't work unless the canvas is attached to the DOM.\n\n\tfunction Canvas(cls, container) {\n\n\t\tvar element = container.children(\".\" + cls)[0];\n\n\t\tif (element == null) {\n\n\t\t\telement = document.createElement(\"canvas\");\n\t\t\telement.className = cls;\n\n\t\t\t$(element).css({ direction: \"ltr\", position: \"absolute\", left: 0, top: 0 })\n\t\t\t\t.appendTo(container);\n\n\t\t\t// If HTML5 Canvas isn't available, fall back to [Ex|Flash]canvas\n\n\t\t\tif (!element.getContext) {\n\t\t\t\tif (window.G_vmlCanvasManager) {\n\t\t\t\t\telement = window.G_vmlCanvasManager.initElement(element);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(\"Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.element = element;\n\n\t\tvar context = this.context = element.getContext(\"2d\");\n\n\t\t// Determine the screen's ratio of physical to device-independent\n\t\t// pixels.  This is the ratio between the canvas width that the browser\n\t\t// advertises and the number of pixels actually present in that space.\n\n\t\t// The iPhone 4, for example, has a device-independent width of 320px,\n\t\t// but its screen is actually 640px wide.  It therefore has a pixel\n\t\t// ratio of 2, while most normal devices have a ratio of 1.\n\n\t\tvar devicePixelRatio = window.devicePixelRatio || 1,\n\t\t\tbackingStoreRatio =\n\t\t\t\tcontext.webkitBackingStorePixelRatio ||\n\t\t\t\tcontext.mozBackingStorePixelRatio ||\n\t\t\t\tcontext.msBackingStorePixelRatio ||\n\t\t\t\tcontext.oBackingStorePixelRatio ||\n\t\t\t\tcontext.backingStorePixelRatio || 1;\n\n\t\tthis.pixelRatio = devicePixelRatio / backingStoreRatio;\n\n\t\t// Size the canvas to match the internal dimensions of its container\n\n\t\tthis.resize(container.width(), container.height());\n\n\t\t// Collection of HTML div layers for text overlaid onto the canvas\n\n\t\tthis.textContainer = null;\n\t\tthis.text = {};\n\n\t\t// Cache of text fragments and metrics, so we can avoid expensively\n\t\t// re-calculating them when the plot is re-rendered in a loop.\n\n\t\tthis._textCache = {};\n\t\tthis._textSizeCache = window.flotTextSizeCache = window.flotTextSizeCache || {};\n\t}\n\n\t// Resizes the canvas to the given dimensions.\n\t//\n\t// @param {number} width New width of the canvas, in pixels.\n\t// @param {number} width New height of the canvas, in pixels.\n\n\tCanvas.prototype.resize = function(width, height) {\n\n\t\tif (width <= 0 || height <= 0) {\n\t\t\tthrow new Error(\"Invalid dimensions for plot, width = \" + width + \", height = \" + height);\n\t\t}\n\n\t\tvar element = this.element,\n\t\t\tcontext = this.context,\n\t\t\tpixelRatio = this.pixelRatio;\n\n\t\t// Resize the canvas, increasing its density based on the display's\n\t\t// pixel ratio; basically giving it more pixels without increasing the\n\t\t// size of its element, to take advantage of the fact that retina\n\t\t// displays have that many more pixels in the same advertised space.\n\n\t\t// Resizing should reset the state (excanvas seems to be buggy though)\n\n\t\tif (this.width != width) {\n\t\t\telement.width = width * pixelRatio;\n\t\t\telement.style.width = width + \"px\";\n\t\t\tthis.width = width;\n\t\t}\n\n\t\tif (this.height != height) {\n\t\t\telement.height = height * pixelRatio;\n\t\t\telement.style.height = height + \"px\";\n\t\t\tthis.height = height;\n\t\t}\n\n\t\t// Save the context, so we can reset in case we get replotted.  The\n\t\t// restore ensure that we're really back at the initial state, and\n\t\t// should be safe even if we haven't saved the initial state yet.\n\n\t\tcontext.restore();\n\t\tcontext.save();\n\n\t\t// Scale the coordinate space to match the display density; so even though we\n\t\t// may have twice as many pixels, we still want lines and other drawing to\n\t\t// appear at the same size; the extra pixels will just make them crisper.\n\n\t\tcontext.scale(pixelRatio, pixelRatio);\n\t};\n\n\t// Clears the entire canvas area, not including any overlaid HTML text\n\n\tCanvas.prototype.clear = function() {\n\t\tthis.context.clearRect(0, 0, this.width, this.height);\n\t};\n\n\t// Finishes rendering the canvas, including managing the text overlay.\n\n\tCanvas.prototype.render = function() {\n\n\t\tvar cache = this._textCache;\n\n\t\t// For each text layer, add elements marked as active that haven't\n\t\t// already been rendered, and remove those that are no longer active.\n\n\t\tfor (var layerKey in cache) {\n\t\t\tif (hasOwnProperty.call(cache, layerKey)) {\n\n\t\t\t\tvar layer = this.getTextLayer(layerKey),\n\t\t\t\t\tlayerCache = cache[layerKey];\n\n\t\t\t\tlayer.hide();\n\n\t\t\t\tfor (var styleKey in layerCache) {\n\t\t\t\t\tif (hasOwnProperty.call(layerCache, styleKey)) {\n\t\t\t\t\t\tvar styleCache = layerCache[styleKey];\n\t\t\t\t\t\tfor (var key in styleCache) {\n\t\t\t\t\t\t\tif (hasOwnProperty.call(styleCache, key)) {\n\n\t\t\t\t\t\t\t\tvar positions = styleCache[key].positions;\n\n\t\t\t\t\t\t\t\tfor (var i = 0, position; position = positions[i]; i++) {\n\t\t\t\t\t\t\t\t\tif (position.active) {\n\t\t\t\t\t\t\t\t\t\tif (!position.rendered) {\n\t\t\t\t\t\t\t\t\t\t\tlayer.append(position.element);\n\t\t\t\t\t\t\t\t\t\t\tposition.rendered = true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tpositions.splice(i--, 1);\n\t\t\t\t\t\t\t\t\t\tif (position.rendered) {\n\t\t\t\t\t\t\t\t\t\t\tposition.element.detach();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (positions.length == 0) {\n\t\t\t\t\t\t\t\t\tdelete styleCache[key];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlayer.show();\n\t\t\t}\n\t\t}\n\t};\n\n\t// Creates (if necessary) and returns the text overlay container.\n\t//\n\t// @param {string} classes String of space-separated CSS classes used to\n\t//     uniquely identify the text layer.\n\t// @return {object} The jQuery-wrapped text-layer div.\n\n\tCanvas.prototype.getTextLayer = function(classes) {\n\n\t\tvar layer = this.text[classes];\n\n\t\t// Create the text layer if it doesn't exist\n\n\t\tif (layer == null) {\n\n\t\t\t// Create the text layer container, if it doesn't exist\n\n\t\t\tif (this.textContainer == null) {\n\t\t\t\tthis.textContainer = $(\"<div class='flot-text flot-temp-elem'></div>\")\n\t\t\t\t\t.css({\n\t\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\tbottom: 0,\n\t\t\t\t\t\tright: 0,\n\t\t\t\t\t\t'font-size': \"smaller\",\n\t\t\t\t\t\tcolor: \"#545454\"\n\t\t\t\t\t})\n\t\t\t\t\t.insertAfter(this.element);\n\t\t\t}\n\n\t\t\tlayer = this.text[classes] = $(\"<div></div>\")\n\t\t\t\t.addClass(classes)\n\t\t\t\t.css({\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tbottom: 0,\n\t\t\t\t\tright: 0\n\t\t\t\t})\n\t\t\t\t.appendTo(this.textContainer);\n\t\t}\n\n\t\treturn layer;\n\t};\n\n\t// Creates (if necessary) and returns a text info object.\n\t//\n\t// The object looks like this:\n\t//\n\t// {\n\t//     width: Width of the text's wrapper div.\n\t//     height: Height of the text's wrapper div.\n\t//     element: The jQuery-wrapped HTML div containing the text.\n\t//     positions: Array of positions at which this text is drawn.\n\t// }\n\t//\n\t// The positions array contains objects that look like this:\n\t//\n\t// {\n\t//     active: Flag indicating whether the text should be visible.\n\t//     rendered: Flag indicating whether the text is currently visible.\n\t//     element: The jQuery-wrapped HTML div containing the text.\n\t//     x: X coordinate at which to draw the text.\n\t//     y: Y coordinate at which to draw the text.\n\t// }\n\t//\n\t// Each position after the first receives a clone of the original element.\n\t//\n\t// The idea is that that the width, height, and general 'identity' of the\n\t// text is constant no matter where it is placed; the placements are a\n\t// secondary property.\n\t//\n\t// Canvas maintains a cache of recently-used text info objects; getTextInfo\n\t// either returns the cached element or creates a new entry.\n\t//\n\t// @param {string} layer A string of space-separated CSS classes uniquely\n\t//     identifying the layer containing this text.\n\t// @param {string} text Text string to retrieve info for.\n\t// @param {(string|object)=} font Either a string of space-separated CSS\n\t//     classes or a font-spec object, defining the text's font and style.\n\t// @param {number=} angle Angle at which to rotate the text, in degrees.\n\t//     Angle is currently unused, it will be implemented in the future.\n\t// @param {number=} width Maximum width of the text before it wraps.\n\t// @return {object} a text info object.\n\n\tCanvas.prototype.getTextInfo = function(layer, text, font, angle, width) {\n\n\t\tvar textStyle, layerCache, styleCache, info;\n\n\t\t// Cast the value to a string, in case we were given a number or such\n\n\t\ttext = \"\" + text;\n\n\t\t// If the font is a font-spec object, generate a CSS font definition\n\n\t\tif (typeof font === \"object\") {\n\t\t\ttextStyle = font.style + \" \" + font.variant + \" \" + font.weight + \" \" + font.size + \"px/\" + font.lineHeight + \"px \" + font.family;\n\t\t} else {\n\t\t\ttextStyle = font;\n\t\t}\n\n\t\t// Retrieve (or create) the cache for the text's layer and styles\n\n\t\tlayerCache = this._textCache[layer];\n\n\t\tif (layerCache == null) {\n\t\t\tlayerCache = this._textCache[layer] = {};\n\t\t}\n\n\t\tstyleCache = layerCache[textStyle];\n\n\t\tif (styleCache == null) {\n\t\t\tstyleCache = layerCache[textStyle] = {};\n\t\t}\n\n\t\tinfo = styleCache[text];\n\n\t\t// If we can't find a matching element in our cache, create a new one\n\n\t\tif (info == null) {\n\n\t\t\tvar element = $(\"<div></div>\").html(text)\n\t\t\t\t.css({\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\t'max-width': width,\n\t\t\t\t\ttop: -9999\n\t\t\t\t})\n\t\t\t\t.appendTo(this.getTextLayer(layer));\n\n\t\t\tif (typeof font === \"object\") {\n\t\t\t\telement.css({\n\t\t\t\t\tfont: textStyle,\n\t\t\t\t\tcolor: font.color\n\t\t\t\t});\n\t\t\t} else if (typeof font === \"string\") {\n\t\t\t\telement.addClass(font);\n\t\t\t}\n\n      info = styleCache[text] = { element: element, positions: [] };\n\n      var size = this._textSizeCache[text];\n\t\t\tif (size) {\n        info.width = size.width;\n        info.height = size.height;\n\t\t\t} else {\n        info.width = element.outerWidth(true);\n        info.height = element.outerHeight(true);\n        this._textSizeCache[text] = { width: info.width, height: info.height };\n\t\t\t}\n\t\t\telement.detach();\n\t\t}\n\n\t\treturn info;\n\t};\n\n\t// Adds a text string to the canvas text overlay.\n\t//\n\t// The text isn't drawn immediately; it is marked as rendering, which will\n\t// result in its addition to the canvas on the next render pass.\n\t//\n\t// @param {string} layer A string of space-separated CSS classes uniquely\n\t//     identifying the layer containing this text.\n\t// @param {number} x X coordinate at which to draw the text.\n\t// @param {number} y Y coordinate at which to draw the text.\n\t// @param {string} text Text string to draw.\n\t// @param {(string|object)=} font Either a string of space-separated CSS\n\t//     classes or a font-spec object, defining the text's font and style.\n\t// @param {number=} angle Angle at which to rotate the text, in degrees.\n\t//     Angle is currently unused, it will be implemented in the future.\n\t// @param {number=} width Maximum width of the text before it wraps.\n\t// @param {string=} halign Horizontal alignment of the text; either \"left\",\n\t//     \"center\" or \"right\".\n\t// @param {string=} valign Vertical alignment of the text; either \"top\",\n\t//     \"middle\" or \"bottom\".\n\n\tCanvas.prototype.addText = function(layer, x, y, text, font, angle, width, halign, valign) {\n\n\t\tvar info = this.getTextInfo(layer, text, font, angle, width),\n\t\t\tpositions = info.positions;\n\n\t\t// Tweak the div's position to match the text's alignment\n\n\t\tif (halign == \"center\") {\n\t\t\tx -= info.width / 2;\n\t\t} else if (halign == \"right\") {\n\t\t\tx -= info.width;\n\t\t}\n\n\t\tif (valign == \"middle\") {\n\t\t\ty -= info.height / 2;\n\t\t} else if (valign == \"bottom\") {\n\t\t\ty -= info.height;\n\t\t}\n\n\t\t// Determine whether this text already exists at this position.\n\t\t// If so, mark it for inclusion in the next render pass.\n\n\t\tfor (var i = 0, position; position = positions[i]; i++) {\n\t\t\tif (position.x == x && position.y == y) {\n\t\t\t\tposition.active = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// If the text doesn't exist at this position, create a new entry\n\n\t\t// For the very first position we'll re-use the original element,\n\t\t// while for subsequent ones we'll clone it.\n\n\t\tposition = {\n\t\t\tactive: true,\n\t\t\trendered: false,\n\t\t\telement: positions.length ? info.element.clone() : info.element,\n\t\t\tx: x,\n\t\t\ty: y\n\t\t};\n\n\t\tpositions.push(position);\n\n\t\t// Move the element to its final position within the container\n\n\t\tposition.element.css({\n\t\t\ttop: Math.round(y),\n\t\t\tleft: Math.round(x),\n\t\t\t'text-align': halign\t// In case the text wraps\n\t\t});\n\t};\n\n\t// Removes one or more text strings from the canvas text overlay.\n\t//\n\t// If no parameters are given, all text within the layer is removed.\n\t//\n\t// Note that the text is not immediately removed; it is simply marked as\n\t// inactive, which will result in its removal on the next render pass.\n\t// This avoids the performance penalty for 'clear and redraw' behavior,\n\t// where we potentially get rid of all text on a layer, but will likely\n\t// add back most or all of it later, as when redrawing axes, for example.\n\t//\n\t// @param {string} layer A string of space-separated CSS classes uniquely\n\t//     identifying the layer containing this text.\n\t// @param {number=} x X coordinate of the text.\n\t// @param {number=} y Y coordinate of the text.\n\t// @param {string=} text Text string to remove.\n\t// @param {(string|object)=} font Either a string of space-separated CSS\n\t//     classes or a font-spec object, defining the text's font and style.\n\t// @param {number=} angle Angle at which the text is rotated, in degrees.\n\t//     Angle is currently unused, it will be implemented in the future.\n\n\tCanvas.prototype.removeText = function(layer, x, y, text, font, angle) {\n\t\tif (text == null) {\n\t\t\tvar layerCache = this._textCache[layer];\n\t\t\tif (layerCache != null) {\n\t\t\t\tfor (var styleKey in layerCache) {\n\t\t\t\t\tif (hasOwnProperty.call(layerCache, styleKey)) {\n\t\t\t\t\t\tvar styleCache = layerCache[styleKey];\n\t\t\t\t\t\tfor (var key in styleCache) {\n\t\t\t\t\t\t\tif (hasOwnProperty.call(styleCache, key)) {\n\t\t\t\t\t\t\t\tvar positions = styleCache[key].positions;\n\t\t\t\t\t\t\t\tfor (var i = 0, position; position = positions[i]; i++) {\n\t\t\t\t\t\t\t\t\tposition.active = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvar positions = this.getTextInfo(layer, text, font, angle).positions;\n\t\t\tfor (var i = 0, position; position = positions[i]; i++) {\n\t\t\t\tif (position.x == x && position.y == y) {\n\t\t\t\t\tposition.active = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t///////////////////////////////////////////////////////////////////////////\n\t// The top-level container for the entire plot.\n\n    function Plot(placeholder, data_, options_, plugins) {\n        // data is on the form:\n        //   [ series1, series2 ... ]\n        // where series is either just the data as [ [x1, y1], [x2, y2], ... ]\n        // or { data: [ [x1, y1], [x2, y2], ... ], label: \"some label\", ... }\n\n        var series = [],\n            options = {\n                // the color theme used for graphs\n                colors: [\"#edc240\", \"#afd8f8\", \"#cb4b4b\", \"#4da74d\", \"#9440ed\"],\n                legend: {\n                    show: true,\n                    noColumns: 1, // number of colums in legend table\n                    labelFormatter: null, // fn: string -> string\n                    labelBoxBorderColor: \"#ccc\", // border color for the little label boxes\n                    container: null, // container (as jQuery object) to put legend in, null means default on top of graph\n                    position: \"ne\", // position of default legend container within plot\n                    margin: 5, // distance from grid edge to default legend container within plot\n                    backgroundColor: null, // null means auto-detect\n                    backgroundOpacity: 0.85, // set to 0 to avoid background\n                    sorted: null    // default to no legend sorting\n                },\n                xaxis: {\n                    show: null, // null = auto-detect, true = always, false = never\n                    position: \"bottom\", // or \"top\"\n                    mode: null, // null or \"time\"\n                    font: null, // null (derived from CSS in placeholder) or object like { size: 11, lineHeight: 13, style: \"italic\", weight: \"bold\", family: \"sans-serif\", variant: \"small-caps\" }\n                    color: null, // base color, labels, ticks\n                    tickColor: null, // possibly different color of ticks, e.g. \"rgba(0,0,0,0.15)\"\n                    transform: null, // null or f: number -> number to transform axis\n                    inverseTransform: null, // if transform is set, this should be the inverse function\n                    min: null, // min. value to show, null means set automatically\n                    max: null, // max. value to show, null means set automatically\n                    autoscaleMargin: null, // margin in % to add if auto-setting min/max\n                    ticks: null, // either [1, 3] or [[1, \"a\"], 3] or (fn: axis info -> ticks) or app. number of ticks for auto-ticks\n                    tickFormatter: null, // fn: number -> string\n                    labelWidth: null, // size of tick labels in pixels\n                    labelHeight: null,\n                    reserveSpace: null, // whether to reserve space even if axis isn't shown\n                    tickLength: null, // size in pixels of ticks, or \"full\" for whole line\n                    alignTicksWithAxis: null, // axis number or null for no sync\n                    tickDecimals: null, // no. of decimals, null means auto\n                    tickSize: null, // number or [number, \"unit\"]\n                    minTickSize: null // number or [number, \"unit\"]\n                },\n                yaxis: {\n                    autoscaleMargin: 0.02,\n                    position: \"left\" // or \"right\"\n                },\n                xaxes: [],\n                yaxes: [],\n                series: {\n                    points: {\n                        show: false,\n                        radius: 3,\n                        lineWidth: 2, // in pixels\n                        fill: true,\n                        fillColor: \"#ffffff\",\n                        symbol: \"circle\" // or callback\n                    },\n                    lines: {\n                        // we don't put in show: false so we can see\n                        // whether lines were actively disabled\n                        lineWidth: 2, // in pixels\n                        fill: false,\n                        fillColor: null,\n                        steps: false\n                        // Omit 'zero', so we can later default its value to\n                        // match that of the 'fill' option.\n                    },\n                    bars: {\n                        show: false,\n                        lineWidth: 2, // in pixels\n                        barWidth: 1, // in units of the x axis\n                        fill: true,\n                        fillColor: null,\n                        align: \"left\", // \"left\", \"right\", or \"center\"\n                        horizontal: false,\n                        zero: true\n                    },\n                    shadowSize: 3,\n                    highlightColor: null\n                },\n                grid: {\n                    show: true,\n                    aboveData: false,\n                    color: \"#545454\", // primary color used for outline and labels\n                    backgroundColor: null, // null for transparent, else color\n                    borderColor: null, // set if different from the grid color\n                    tickColor: null, // color for the ticks, e.g. \"rgba(0,0,0,0.15)\"\n                    margin: 0, // distance from the canvas edge to the grid\n                    labelMargin: 5, // in pixels\n                    eventSectionHeight: 0, // space for event section\n                    axisMargin: 8, // in pixels\n                    borderWidth: 2, // in pixels\n                    minBorderMargin: null, // in pixels, null means taken from points radius\n                    markings: null, // array of ranges or fn: axes -> array of ranges\n                    markingsColor: \"#f4f4f4\",\n                    markingsLineWidth: 2,\n                    // interactive stuff\n                    clickable: false,\n                    hoverable: false,\n                    autoHighlight: true, // highlight in case mouse is near\n                    mouseActiveRadius: 10 // how far the mouse can be away to activate an item\n                },\n                interaction: {\n                    redrawOverlayInterval: 1000/60 // time between updates, -1 means in same flow\n                },\n                hooks: {}\n            },\n        surface = null,     // the canvas for the plot itself\n        overlay = null,     // canvas for interactive stuff on top of plot\n        eventHolder = null, // jQuery object that events should be bound to\n        ctx = null, octx = null,\n        xaxes = [], yaxes = [],\n        plotOffset = { left: 0, right: 0, top: 0, bottom: 0},\n        plotWidth = 0, plotHeight = 0,\n        hooks = {\n            processOptions: [],\n            processRawData: [],\n            processDatapoints: [],\n            processOffset: [],\n            drawBackground: [],\n            drawSeries: [],\n            draw: [],\n            bindEvents: [],\n            drawOverlay: [],\n            shutdown: []\n        },\n        plot = this;\n\n        // public functions\n        plot.setData = setData;\n        plot.setupGrid = setupGrid;\n        plot.draw = draw;\n        plot.getPlaceholder = function() { return placeholder; };\n        plot.getCanvas = function() { return surface.element; };\n        plot.getPlotOffset = function() { return plotOffset; };\n        plot.width = function () { return plotWidth; };\n        plot.height = function () { return plotHeight; };\n        plot.offset = function () {\n            var o = eventHolder.offset();\n            o.left += plotOffset.left;\n            o.top += plotOffset.top;\n            return o;\n        };\n        plot.getData = function () { return series; };\n        plot.getAxes = function () {\n            var res = {}, i;\n            $.each(xaxes.concat(yaxes), function (_, axis) {\n                if (axis)\n                    res[axis.direction + (axis.n != 1 ? axis.n : \"\") + \"axis\"] = axis;\n            });\n            return res;\n        };\n        plot.getXAxes = function () { return xaxes; };\n        plot.getYAxes = function () { return yaxes; };\n        plot.c2p = canvasToAxisCoords;\n        plot.p2c = axisToCanvasCoords;\n        plot.getOptions = function () { return options; };\n        plot.highlight = highlight;\n        plot.unhighlight = unhighlight;\n        plot.triggerRedrawOverlay = triggerRedrawOverlay;\n        plot.pointOffset = function(point) {\n            return {\n                left: parseInt(xaxes[axisNumber(point, \"x\") - 1].p2c(+point.x) + plotOffset.left, 10),\n                top: parseInt(yaxes[axisNumber(point, \"y\") - 1].p2c(+point.y) + plotOffset.top, 10)\n            };\n        };\n        plot.shutdown = shutdown;\n        plot.destroy = function () {\n            shutdown();\n            placeholder.removeData(\"plot\").empty();\n\n            series = [];\n            options = null;\n            surface = null;\n            overlay = null;\n            eventHolder = null;\n            ctx = null;\n            octx = null;\n            xaxes = [];\n            yaxes = [];\n            hooks = null;\n            highlights = [];\n            plot = null;\n        };\n        plot.resize = function () {\n        \tvar width = placeholder.width(),\n        \t\theight = placeholder.height();\n            surface.resize(width, height);\n            overlay.resize(width, height);\n        };\n\n        // public attributes\n        plot.hooks = hooks;\n\n        // initialize\n        initPlugins(plot);\n        parseOptions(options_);\n        setupCanvases();\n        setData(data_);\n        setupGrid();\n        draw();\n        bindEvents();\n\n\n        function executeHooks(hook, args) {\n            args = [plot].concat(args);\n            for (var i = 0; i < hook.length; ++i)\n                hook[i].apply(this, args);\n        }\n\n        function initPlugins() {\n\n            // References to key classes, allowing plugins to modify them\n\n            var classes = {\n                Canvas: Canvas\n            };\n\n            for (var i = 0; i < plugins.length; ++i) {\n                var p = plugins[i];\n                p.init(plot, classes);\n                if (p.options)\n                    $.extend(true, options, p.options);\n            }\n        }\n\n        function parseOptions(opts) {\n\n            $.extend(true, options, opts);\n\n            // $.extend merges arrays, rather than replacing them.  When less\n            // colors are provided than the size of the default palette, we\n            // end up with those colors plus the remaining defaults, which is\n            // not expected behavior; avoid it by replacing them here.\n\n            if (opts && opts.colors) {\n            \toptions.colors = opts.colors;\n            }\n\n            if (options.xaxis.color == null)\n                options.xaxis.color = $.color.parse(options.grid.color).scale('a', 0.22).toString();\n            if (options.yaxis.color == null)\n                options.yaxis.color = $.color.parse(options.grid.color).scale('a', 0.22).toString();\n\n            if (options.xaxis.tickColor == null) // grid.tickColor for back-compatibility\n                options.xaxis.tickColor = options.grid.tickColor || options.xaxis.color;\n            if (options.yaxis.tickColor == null) // grid.tickColor for back-compatibility\n                options.yaxis.tickColor = options.grid.tickColor || options.yaxis.color;\n\n            if (options.grid.borderColor == null)\n                options.grid.borderColor = options.grid.color;\n            if (options.grid.tickColor == null)\n                options.grid.tickColor = $.color.parse(options.grid.color).scale('a', 0.22).toString();\n\n            // Fill in defaults for axis options, including any unspecified\n            // font-spec fields, if a font-spec was provided.\n\n            // If no x/y axis options were provided, create one of each anyway,\n            // since the rest of the code assumes that they exist.\n\n            var i, axisOptions, axisCount,\n                fontSize = placeholder.css(\"font-size\"),\n                fontSizeDefault = fontSize ? +fontSize.replace(\"px\", \"\") : 13,\n                fontDefaults = {\n                    style: placeholder.css(\"font-style\"),\n                    size: Math.round(0.8 * fontSizeDefault),\n                    variant: placeholder.css(\"font-variant\"),\n                    weight: placeholder.css(\"font-weight\"),\n                    family: placeholder.css(\"font-family\")\n                };\n\n            axisCount = options.xaxes.length || 1;\n            for (i = 0; i < axisCount; ++i) {\n\n                axisOptions = options.xaxes[i];\n                if (axisOptions && !axisOptions.tickColor) {\n                    axisOptions.tickColor = axisOptions.color;\n                }\n\n                axisOptions = $.extend(true, {}, options.xaxis, axisOptions);\n                options.xaxes[i] = axisOptions;\n\n                if (axisOptions.font) {\n                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\n                    if (!axisOptions.font.color) {\n                        axisOptions.font.color = axisOptions.color;\n                    }\n                    if (!axisOptions.font.lineHeight) {\n                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\n                    }\n                }\n            }\n\n            axisCount = options.yaxes.length || 1;\n            for (i = 0; i < axisCount; ++i) {\n\n                axisOptions = options.yaxes[i];\n                if (axisOptions && !axisOptions.tickColor) {\n                    axisOptions.tickColor = axisOptions.color;\n                }\n\n                axisOptions = $.extend(true, {}, options.yaxis, axisOptions);\n                options.yaxes[i] = axisOptions;\n\n                if (axisOptions.font) {\n                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\n                    if (!axisOptions.font.color) {\n                        axisOptions.font.color = axisOptions.color;\n                    }\n                    if (!axisOptions.font.lineHeight) {\n                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\n                    }\n                }\n            }\n\n            // backwards compatibility, to be removed in future\n            if (options.xaxis.noTicks && options.xaxis.ticks == null)\n                options.xaxis.ticks = options.xaxis.noTicks;\n            if (options.yaxis.noTicks && options.yaxis.ticks == null)\n                options.yaxis.ticks = options.yaxis.noTicks;\n            if (options.x2axis) {\n                options.xaxes[1] = $.extend(true, {}, options.xaxis, options.x2axis);\n                options.xaxes[1].position = \"top\";\n                // Override the inherit to allow the axis to auto-scale\n                if (options.x2axis.min == null) {\n                    options.xaxes[1].min = null;\n                }\n                if (options.x2axis.max == null) {\n                    options.xaxes[1].max = null;\n                }\n            }\n            if (options.y2axis) {\n                options.yaxes[1] = $.extend(true, {}, options.yaxis, options.y2axis);\n                options.yaxes[1].position = \"right\";\n                // Override the inherit to allow the axis to auto-scale\n                if (options.y2axis.min == null) {\n                    options.yaxes[1].min = null;\n                }\n                if (options.y2axis.max == null) {\n                    options.yaxes[1].max = null;\n                }\n            }\n            if (options.grid.coloredAreas)\n                options.grid.markings = options.grid.coloredAreas;\n            if (options.grid.coloredAreasColor)\n                options.grid.markingsColor = options.grid.coloredAreasColor;\n            if (options.lines)\n                $.extend(true, options.series.lines, options.lines);\n            if (options.points)\n                $.extend(true, options.series.points, options.points);\n            if (options.bars)\n                $.extend(true, options.series.bars, options.bars);\n            if (options.shadowSize != null)\n                options.series.shadowSize = options.shadowSize;\n            if (options.highlightColor != null)\n                options.series.highlightColor = options.highlightColor;\n\n            // save options on axes for future reference\n            for (i = 0; i < options.xaxes.length; ++i)\n                getOrCreateAxis(xaxes, i + 1).options = options.xaxes[i];\n            for (i = 0; i < options.yaxes.length; ++i)\n                getOrCreateAxis(yaxes, i + 1).options = options.yaxes[i];\n\n            // add hooks from options\n            for (var n in hooks)\n                if (options.hooks[n] && options.hooks[n].length)\n                    hooks[n] = hooks[n].concat(options.hooks[n]);\n\n            executeHooks(hooks.processOptions, [options]);\n        }\n\n        function setData(d) {\n            series = parseData(d);\n            fillInSeriesOptions();\n            processData();\n        }\n\n        function parseData(d) {\n            var res = [];\n            for (var i = 0; i < d.length; ++i) {\n                var s = $.extend(true, {}, options.series);\n\n                if (d[i].data != null) {\n                    s.data = d[i].data; // move the data instead of deep-copy\n                    delete d[i].data;\n\n                    $.extend(true, s, d[i]);\n\n                    d[i].data = s.data;\n                }\n                else\n                    s.data = d[i];\n                res.push(s);\n            }\n\n            return res;\n        }\n\n        function axisNumber(obj, coord) {\n            var a = obj[coord + \"axis\"];\n            if (typeof a == \"object\") // if we got a real axis, extract number\n                a = a.n;\n            if (typeof a != \"number\")\n                a = 1; // default to first axis\n            return a;\n        }\n\n        function allAxes() {\n            // return flat array without annoying null entries\n            return $.grep(xaxes.concat(yaxes), function (a) { return a; });\n        }\n\n        function canvasToAxisCoords(pos) {\n            // return an object with x/y corresponding to all used axes\n            var res = {}, i, axis;\n            for (i = 0; i < xaxes.length; ++i) {\n                axis = xaxes[i];\n                if (axis && axis.used)\n                    res[\"x\" + axis.n] = axis.c2p(pos.left);\n            }\n\n            for (i = 0; i < yaxes.length; ++i) {\n                axis = yaxes[i];\n                if (axis && axis.used)\n                    res[\"y\" + axis.n] = axis.c2p(pos.top);\n            }\n\n            if (res.x1 !== undefined)\n                res.x = res.x1;\n            if (res.y1 !== undefined)\n                res.y = res.y1;\n\n            return res;\n        }\n\n        function axisToCanvasCoords(pos) {\n            // get canvas coords from the first pair of x/y found in pos\n            var res = {}, i, axis, key;\n\n            for (i = 0; i < xaxes.length; ++i) {\n                axis = xaxes[i];\n                if (axis && axis.used) {\n                    key = \"x\" + axis.n;\n                    if (pos[key] == null && axis.n == 1)\n                        key = \"x\";\n\n                    if (pos[key] != null) {\n                        res.left = axis.p2c(pos[key]);\n                        break;\n                    }\n                }\n            }\n\n            for (i = 0; i < yaxes.length; ++i) {\n                axis = yaxes[i];\n                if (axis && axis.used) {\n                    key = \"y\" + axis.n;\n                    if (pos[key] == null && axis.n == 1)\n                        key = \"y\";\n\n                    if (pos[key] != null) {\n                        res.top = axis.p2c(pos[key]);\n                        break;\n                    }\n                }\n            }\n\n            return res;\n        }\n\n        function getOrCreateAxis(axes, number) {\n            if (!axes[number - 1])\n                axes[number - 1] = {\n                    n: number, // save the number for future reference\n                    direction: axes == xaxes ? \"x\" : \"y\",\n                    options: $.extend(true, {}, axes == xaxes ? options.xaxis : options.yaxis)\n                };\n\n            return axes[number - 1];\n        }\n\n        function fillInSeriesOptions() {\n\n            var neededColors = series.length, maxIndex = -1, i;\n\n            // Subtract the number of series that already have fixed colors or\n            // color indexes from the number that we still need to generate.\n\n            for (i = 0; i < series.length; ++i) {\n                var sc = series[i].color;\n                if (sc != null) {\n                    neededColors--;\n                    if (typeof sc == \"number\" && sc > maxIndex) {\n                        maxIndex = sc;\n                    }\n                }\n            }\n\n            // If any of the series have fixed color indexes, then we need to\n            // generate at least as many colors as the highest index.\n\n            if (neededColors <= maxIndex) {\n                neededColors = maxIndex + 1;\n            }\n\n            // Generate all the colors, using first the option colors and then\n            // variations on those colors once they're exhausted.\n\n            var c, colors = [], colorPool = options.colors,\n                colorPoolSize = colorPool.length, variation = 0;\n\n            for (i = 0; i < neededColors; i++) {\n\n                c = $.color.parse(colorPool[i % colorPoolSize] || \"#666\");\n\n                // Each time we exhaust the colors in the pool we adjust\n                // a scaling factor used to produce more variations on\n                // those colors. The factor alternates negative/positive\n                // to produce lighter/darker colors.\n\n                // Reset the variation after every few cycles, or else\n                // it will end up producing only white or black colors.\n\n                if (i % colorPoolSize == 0 && i) {\n                    if (variation >= 0) {\n                        if (variation < 0.5) {\n                            variation = -variation - 0.2;\n                        } else variation = 0;\n                    } else variation = -variation;\n                }\n\n                colors[i] = c.scale('rgb', 1 + variation);\n            }\n\n            // Finalize the series options, filling in their colors\n\n            var colori = 0, s;\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n\n                // assign colors\n                if (s.color == null) {\n                    s.color = colors[colori].toString();\n                    ++colori;\n                }\n                else if (typeof s.color == \"number\")\n                    s.color = colors[s.color].toString();\n\n                // turn on lines automatically in case nothing is set\n                if (s.lines.show == null) {\n                    var v, show = true;\n                    for (v in s)\n                        if (s[v] && s[v].show) {\n                            show = false;\n                            break;\n                        }\n                    if (show)\n                        s.lines.show = true;\n                }\n\n                // If nothing was provided for lines.zero, default it to match\n                // lines.fill, since areas by default should extend to zero.\n\n                if (s.lines.zero == null) {\n                    s.lines.zero = !!s.lines.fill;\n                }\n\n                // setup axes\n                s.xaxis = getOrCreateAxis(xaxes, axisNumber(s, \"x\"));\n                s.yaxis = getOrCreateAxis(yaxes, axisNumber(s, \"y\"));\n            }\n        }\n\n        function processData() {\n            var topSentry = Number.POSITIVE_INFINITY,\n                bottomSentry = Number.NEGATIVE_INFINITY,\n                fakeInfinity = Number.MAX_VALUE,\n                i, j, k, m, length,\n                s, points, ps, x, y, axis, val, f, p,\n                data, format;\n\n            function updateAxis(axis, min, max) {\n                if (min < axis.datamin && min != -fakeInfinity)\n                    axis.datamin = min;\n                if (max > axis.datamax && max != fakeInfinity)\n                    axis.datamax = max;\n            }\n\n            $.each(allAxes(), function (_, axis) {\n                // init axis\n                axis.datamin = topSentry;\n                axis.datamax = bottomSentry;\n                axis.used = false;\n            });\n\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n                s.datapoints = { points: [] };\n\n                executeHooks(hooks.processRawData, [ s, s.data, s.datapoints ]);\n            }\n\n            // first pass: clean and copy data\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n\n                data = s.data;\n                format = s.datapoints.format;\n\n                if (!format) {\n                    format = [];\n                    // find out how to copy\n                    format.push({ x: true, number: true, required: true });\n                    format.push({ y: true, number: true, required: true });\n\n                    if (s.bars.show || (s.lines.show && s.lines.fill)) {\n                        var autoscale = !!((s.bars.show && s.bars.zero) || (s.lines.show && s.lines.zero));\n                        format.push({ y: true, number: true, required: false, defaultValue: 0, autoscale: autoscale });\n                        if (s.bars.horizontal) {\n                            delete format[format.length - 1].y;\n                            format[format.length - 1].x = true;\n                        }\n                    }\n\n                    s.datapoints.format = format;\n                }\n\n                if (s.datapoints.pointsize != null)\n                    continue; // already filled in\n\n                s.datapoints.pointsize = format.length;\n\n                ps = s.datapoints.pointsize;\n                points = s.datapoints.points;\n\n                var insertSteps = s.lines.show && s.lines.steps;\n                s.xaxis.used = s.yaxis.used = true;\n\n                for (j = k = 0; j < data.length; ++j, k += ps) {\n                    p = data[j];\n\n                    var nullify = p == null;\n                    if (!nullify) {\n                        for (m = 0; m < ps; ++m) {\n                            val = p[m];\n                            f = format[m];\n\n                            if (f) {\n                                if (f.number && val != null) {\n                                    val = +val; // convert to number\n                                    if (isNaN(val))\n                                        val = null;\n                                    else if (val == Infinity)\n                                        val = fakeInfinity;\n                                    else if (val == -Infinity)\n                                        val = -fakeInfinity;\n                                }\n\n                                if (val == null) {\n                                    if (f.required)\n                                        nullify = true;\n\n                                    if (f.defaultValue != null)\n                                        val = f.defaultValue;\n                                }\n                            }\n\n                            points[k + m] = val;\n                        }\n                    }\n\n                    if (nullify) {\n                        for (m = 0; m < ps; ++m) {\n                            val = points[k + m];\n                            if (val != null) {\n                                f = format[m];\n                                // extract min/max info\n                                if (f.autoscale !== false) {\n                                    if (f.x) {\n                                        updateAxis(s.xaxis, val, val);\n                                    }\n                                    if (f.y) {\n                                        updateAxis(s.yaxis, val, val);\n                                    }\n                                }\n                            }\n                            points[k + m] = null;\n                        }\n                    }\n\n                    if (insertSteps && k > 0 && (!nullify || points[k - ps] != null)) {\n                        // copy the point to make room for a middle point\n                        for (m = 0; m < ps; ++m)\n                            points[k + ps + m] = points[k + m];\n\n                        // middle point has same y\n                        points[k + 1] = points[k - ps + 1] || 0;\n\n                        // if series has null values, let's give the last !null value a nice step\n                        if(nullify)\n                        \tpoints[k] = p[0];\n\n                        // we've added a point, better reflect that\n                        k += ps;\n                    }\n                }\n            }\n\n            // give the hooks a chance to run\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n                points = s.datapoints.points;\n                ps = s.datapoints.pointsize;\n\n                // grafana\n                if (s.transform === 'negative-Y') {\n                  for (j = 0; j < points.length; j += ps) {\n                    if (points[j] == null)\n                        continue;\n\n                      val = points[j + 1];\n                      points[j + 1] = -val;\n                  }\n                }\n\n                executeHooks(hooks.processDatapoints, [ s, s.datapoints]);\n            }\n\n            // second pass: find datamax/datamin for auto-scaling\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n                points = s.datapoints.points;\n                ps = s.datapoints.pointsize;\n                format = s.datapoints.format;\n\n                var xmin = topSentry, ymin = topSentry,\n                    xmax = bottomSentry, ymax = bottomSentry;\n\n                for (j = 0; j < points.length; j += ps) {\n                    if (points[j] == null)\n                        continue;\n\n                    for (m = 0; m < ps; ++m) {\n                        val = points[j + m];\n                        f = format[m];\n                        if (!f || f.autoscale === false || val == fakeInfinity || val == -fakeInfinity)\n                            continue;\n\n                        if (f.x) {\n                            if (val < xmin)\n                                xmin = val;\n                            if (val > xmax)\n                                xmax = val;\n                        }\n                        if (f.y) {\n                            if (val < ymin)\n                                ymin = val;\n                            if (val > ymax)\n                                ymax = val;\n                        }\n                    }\n                }\n\n                if (s.bars.show) {\n                    // make sure we got room for the bar on the dancing floor\n                    var delta;\n\n                    switch (s.bars.align) {\n                        case \"left\":\n                            delta = 0;\n                            break;\n                        case \"right\":\n                            delta = -s.bars.barWidth;\n                            break;\n                        default:\n                            delta = -s.bars.barWidth / 2;\n                    }\n\n                    if (s.bars.horizontal) {\n                        ymin += delta;\n                        ymax += delta + s.bars.barWidth;\n                    }\n                    else {\n                        xmin += delta;\n                        xmax += delta + s.bars.barWidth;\n                    }\n                }\n\n                updateAxis(s.xaxis, xmin, xmax);\n                updateAxis(s.yaxis, ymin, ymax);\n            }\n\n            $.each(allAxes(), function (_, axis) {\n                if (axis.datamin == topSentry)\n                    axis.datamin = null;\n                if (axis.datamax == bottomSentry)\n                    axis.datamax = null;\n            });\n        }\n\n        function setupCanvases() {\n            // Make sure the placeholder is clear of everything except canvases\n            // from a previous plot in this container that we'll try to re-use.\n\n            placeholder.find(\".flot-temp-elem\").remove();\n\n            if (placeholder.css(\"position\") == 'static')\n                placeholder.css(\"position\", \"relative\"); // for positioning labels and overlay\n\n            surface = new Canvas(\"flot-base\", placeholder);\n            overlay = new Canvas(\"flot-overlay\", placeholder); // overlay canvas for interactive features\n\n            ctx = surface.context;\n            octx = overlay.context;\n\n            // define which element we're listening for events on\n            eventHolder = $(overlay.element).unbind();\n\n            // If we're re-using a plot object, shut down the old one\n\n            var existing = placeholder.data(\"plot\");\n\n            if (existing) {\n                existing.shutdown();\n                overlay.clear();\n            }\n\n            // save in case we get replotted\n            placeholder.data(\"plot\", plot);\n        }\n\n        function bindEvents() {\n            // bind events\n            if (options.grid.hoverable) {\n                eventHolder.mousemove(onMouseMove);\n\n                // Use bind, rather than .mouseleave, because we officially\n                // still support jQuery 1.2.6, which doesn't define a shortcut\n                // for mouseenter or mouseleave.  This was a bug/oversight that\n                // was fixed somewhere around 1.3.x.  We can return to using\n                // .mouseleave when we drop support for 1.2.6.\n\n                eventHolder.bind(\"mouseleave\", onMouseLeave);\n            }\n\n            if (options.grid.clickable)\n                eventHolder.click(onClick);\n\n            executeHooks(hooks.bindEvents, [eventHolder]);\n        }\n\n        function shutdown() {\n            if (redrawTimeout)\n                clearTimeout(redrawTimeout);\n\n            eventHolder.unbind(\"mousemove\", onMouseMove);\n            eventHolder.unbind(\"mouseleave\", onMouseLeave);\n            eventHolder.unbind(\"click\", onClick);\n\n            executeHooks(hooks.shutdown, [eventHolder]);\n        }\n\n        function setTransformationHelpers(axis) {\n            // set helper functions on the axis, assumes plot area\n            // has been computed already\n\n            function identity(x) { return x; }\n\n            var s, m, t = axis.options.transform || identity,\n                it = axis.options.inverseTransform;\n\n            // precompute how much the axis is scaling a point\n            // in canvas space\n            if (axis.direction == \"x\") {\n                s = axis.scale = plotWidth / Math.abs(t(axis.max) - t(axis.min));\n                m = Math.min(t(axis.max), t(axis.min));\n            }\n            else {\n                s = axis.scale = plotHeight / Math.abs(t(axis.max) - t(axis.min));\n                s = -s;\n                m = Math.max(t(axis.max), t(axis.min));\n            }\n\n            // data point to canvas coordinate\n            if (t == identity) // slight optimization\n                axis.p2c = function (p) { return (p - m) * s; };\n            else\n                axis.p2c = function (p) { return (t(p) - m) * s; };\n            // canvas coordinate to data point\n            if (!it)\n                axis.c2p = function (c) { return m + c / s; };\n            else\n                axis.c2p = function (c) { return it(m + c / s); };\n        }\n\n        function measureTickLabels(axis) {\n\n            var opts = axis.options,\n                ticks = axis.ticks || [],\n                labelWidth = opts.labelWidth || 0,\n                labelHeight = opts.labelHeight || 0,\n                maxWidth = labelWidth || (axis.direction == \"x\" ? Math.floor(surface.width / (ticks.length || 1)) : null),\n                legacyStyles = axis.direction + \"Axis \" + axis.direction + axis.n + \"Axis\",\n                layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + legacyStyles,\n                font = opts.font || \"flot-tick-label tickLabel\";\n\n            for (var i = 0; i < ticks.length; ++i) {\n\n                var t = ticks[i];\n\n                if (!t.label)\n                    continue;\n\n                var info = surface.getTextInfo(layer, t.label, font, null, maxWidth);\n\n                /// Grafana fix, add +1 to label width\n                labelWidth = Math.max(labelWidth, info.width + 1);\n                labelHeight = Math.max(labelHeight, info.height);\n            }\n\n            axis.labelWidth = opts.labelWidth || labelWidth;\n            axis.labelHeight = opts.labelHeight || labelHeight;\n        }\n\n        function allocateAxisBoxFirstPhase(axis) {\n            // find the bounding box of the axis by looking at label\n            // widths/heights and ticks, make room by diminishing the\n            // plotOffset; this first phase only looks at one\n            // dimension per axis, the other dimension depends on the\n            // other axes so will have to wait\n\n            var lw = axis.labelWidth,\n                lh = axis.labelHeight,\n                pos = axis.options.position,\n                isXAxis = axis.direction === \"x\",\n                tickLength = axis.options.tickLength,\n                axisMargin = options.grid.axisMargin,\n                padding = options.grid.labelMargin,\n                eventSectionPadding = options.grid.eventSectionHeight,\n                innermost = true,\n                outermost = true,\n                first = true,\n                found = false;\n\n            // Determine the axis's position in its direction and on its side\n\n            $.each(isXAxis ? xaxes : yaxes, function(i, a) {\n                if (a && (a.show || a.reserveSpace)) {\n                    if (a === axis) {\n                        found = true;\n                    } else if (a.options.position === pos) {\n                        if (found) {\n                            outermost = false;\n                        } else {\n                            innermost = false;\n                        }\n                    }\n                    if (!found) {\n                        first = false;\n                    }\n                }\n            });\n\n            // The outermost axis on each side has no margin\n\n            if (outermost) {\n                axisMargin = 0;\n            }\n\n            // The ticks for the first axis in each direction stretch across\n\n            if (tickLength == null) {\n                tickLength = first ? \"full\" : 5;\n            }\n\n            if (!isNaN(+tickLength))\n                padding += +tickLength;\n\n            if (isXAxis) {\n                // Add space for event section\n                lh += padding;\n                lh += eventSectionPadding;\n\n                if (pos == \"bottom\") {\n                    plotOffset.bottom += lh + axisMargin;\n                    axis.box = { top: surface.height - plotOffset.bottom, height: lh };\n                }\n                else {\n                    axis.box = { top: plotOffset.top + axisMargin, height: lh };\n                    plotOffset.top += lh + axisMargin;\n                }\n            }\n            else {\n                lw += padding;\n\n                if (pos == \"left\") {\n                    axis.box = { left: plotOffset.left + axisMargin, width: lw };\n                    plotOffset.left += lw + axisMargin;\n                }\n                else {\n                    plotOffset.right += lw + axisMargin;\n                    axis.box = { left: surface.width - plotOffset.right, width: lw };\n                }\n            }\n\n             // save for future reference\n            axis.position = pos;\n            axis.tickLength = tickLength;\n            axis.box.padding = padding;\n            axis.box.eventSectionPadding = eventSectionPadding;\n            axis.innermost = innermost;\n        }\n\n        function allocateAxisBoxSecondPhase(axis) {\n            // now that all axis boxes have been placed in one\n            // dimension, we can set the remaining dimension coordinates\n            if (axis.direction == \"x\") {\n                axis.box.left = plotOffset.left - axis.labelWidth / 2;\n                axis.box.width = surface.width - plotOffset.left - plotOffset.right + axis.labelWidth;\n            }\n            else {\n                axis.box.top = plotOffset.top - axis.labelHeight / 2;\n                axis.box.height = surface.height - plotOffset.bottom - plotOffset.top + axis.labelHeight;\n            }\n        }\n\n        function adjustLayoutForThingsStickingOut() {\n            // possibly adjust plot offset to ensure everything stays\n            // inside the canvas and isn't clipped off\n\n            var minMargin = options.grid.minBorderMargin,\n                axis, i;\n\n            // check stuff from the plot (FIXME: this should just read\n            // a value from the series, otherwise it's impossible to\n            // customize)\n            if (minMargin == null) {\n                minMargin = 0;\n                for (i = 0; i < series.length; ++i)\n                    minMargin = Math.max(minMargin, 2 * (series[i].points.radius + series[i].points.lineWidth/2));\n            }\n\n            var margins = {\n                left: minMargin,\n                right: minMargin,\n                top: minMargin,\n                bottom: minMargin\n            };\n\n            // check axis labels, note we don't check the actual\n            // labels but instead use the overall width/height to not\n            // jump as much around with replots\n            $.each(allAxes(), function (_, axis) {\n                if (axis.reserveSpace && axis.ticks && axis.ticks.length) {\n                    if (axis.direction === \"x\") {\n                        margins.left = Math.max(margins.left, axis.labelWidth / 2);\n                        margins.right = Math.max(margins.right, axis.labelWidth / 2);\n                    } else {\n                        margins.bottom = Math.max(margins.bottom, axis.labelHeight / 2);\n                        margins.top = Math.max(margins.top, axis.labelHeight / 2);\n                    }\n                }\n            });\n\n            plotOffset.left = Math.ceil(Math.max(margins.left, plotOffset.left));\n            plotOffset.right = Math.ceil(Math.max(margins.right, plotOffset.right));\n            plotOffset.top = Math.ceil(Math.max(margins.top, plotOffset.top));\n            plotOffset.bottom = Math.ceil(Math.max(margins.bottom, plotOffset.bottom));\n        }\n\n        function setupGrid() {\n            var i, axes = allAxes(), showGrid = options.grid.show;\n\n            // Initialize the plot's offset from the edge of the canvas\n\n            for (var a in plotOffset) {\n                var margin = options.grid.margin || 0;\n                plotOffset[a] = typeof margin == \"number\" ? margin : margin[a] || 0;\n            }\n\n            executeHooks(hooks.processOffset, [plotOffset]);\n\n            // If the grid is visible, add its border width to the offset\n\n            for (var a in plotOffset) {\n                if(typeof(options.grid.borderWidth) == \"object\") {\n                    plotOffset[a] += showGrid ? options.grid.borderWidth[a] : 0;\n                }\n                else {\n                    plotOffset[a] += showGrid ? options.grid.borderWidth : 0;\n                }\n            }\n\n            $.each(axes, function (_, axis) {\n                var axisOpts = axis.options;\n                axis.show = axisOpts.show == null ? axis.used : axisOpts.show;\n                axis.reserveSpace = axisOpts.reserveSpace == null ? axis.show : axisOpts.reserveSpace;\n                setRange(axis);\n            });\n\n            if (showGrid) {\n\n                var allocatedAxes = $.grep(axes, function (axis) {\n                    return axis.show || axis.reserveSpace;\n                });\n\n                $.each(allocatedAxes, function (_, axis) {\n                    // make the ticks\n                    setupTickGeneration(axis);\n                    setTicks(axis);\n                    snapRangeToTicks(axis, axis.ticks);\n                    // find labelWidth/Height for axis\n                    measureTickLabels(axis);\n                });\n\n                // with all dimensions calculated, we can compute the\n                // axis bounding boxes, start from the outside\n                // (reverse order)\n                for (i = allocatedAxes.length - 1; i >= 0; --i)\n                    allocateAxisBoxFirstPhase(allocatedAxes[i]);\n\n                // make sure we've got enough space for things that\n                // might stick out\n                adjustLayoutForThingsStickingOut();\n\n                $.each(allocatedAxes, function (_, axis) {\n                    allocateAxisBoxSecondPhase(axis);\n                });\n            }\n\n            plotWidth = surface.width - plotOffset.left - plotOffset.right;\n            plotHeight = surface.height - plotOffset.bottom - plotOffset.top;\n\n            // now we got the proper plot dimensions, we can compute the scaling\n            $.each(axes, function (_, axis) {\n                setTransformationHelpers(axis);\n            });\n\n            if (showGrid) {\n                drawAxisLabels();\n            }\n\n            insertLegend();\n        }\n\n        function setRange(axis) {\n            var opts = axis.options,\n                min = +(opts.min != null ? opts.min : axis.datamin),\n                max = +(opts.max != null ? opts.max : axis.datamax),\n                delta = max - min;\n\n            if (delta == 0.0) {\n                // Grafana fix: wide Y min and max using increased wideFactor\n                // when all series values are the same\n                var wideFactor = 0.25;\n                var widen = Math.abs(max == 0 ? 1 : max * wideFactor);\n\n                if (opts.min == null) {\n                  min -= widen;\n                }\n                // always widen max if we couldn't widen min to ensure we\n                // don't fall into min == max which doesn't work\n                if (opts.max == null || opts.min != null) {\n                  max += widen;\n                }\n            }\n            else {\n                // consider autoscaling\n                var margin = opts.autoscaleMargin;\n                if (margin != null) {\n                    if (opts.min == null) {\n                        min -= delta * margin;\n                        // make sure we don't go below zero if all values\n                        // are positive\n                        if (min < 0 && axis.datamin != null && axis.datamin >= 0)\n                            min = 0;\n                    }\n                    if (opts.max == null) {\n                        max += delta * margin;\n                        if (max > 0 && axis.datamax != null && axis.datamax <= 0)\n                            max = 0;\n                    }\n                }\n            }\n            axis.min = min;\n            axis.max = max;\n        }\n\n        function setupTickGeneration(axis) {\n            var opts = axis.options;\n\n            // estimate number of ticks\n            var noTicks;\n            if (typeof opts.ticks == \"number\" && opts.ticks > 0)\n                noTicks = opts.ticks;\n            else\n                // heuristic based on the model a*sqrt(x) fitted to\n                // some data points that seemed reasonable\n                noTicks = 0.3 * Math.sqrt(axis.direction == \"x\" ? surface.width : surface.height);\n\n            var delta = (axis.max - axis.min) / noTicks,\n                dec = -Math.floor(Math.log(delta) / Math.LN10),\n                maxDec = opts.tickDecimals;\n\n            if (maxDec != null && dec > maxDec) {\n                dec = maxDec;\n            }\n\n            var magn = Math.pow(10, -dec),\n                norm = delta / magn, // norm is between 1.0 and 10.0\n                size;\n\n            if (norm < 1.5) {\n                size = 1;\n            } else if (norm < 3) {\n                size = 2;\n                // special case for 2.5, requires an extra decimal\n                if (norm > 2.25 && (maxDec == null || dec + 1 <= maxDec)) {\n                    size = 2.5;\n                    ++dec;\n                }\n            } else if (norm < 7.5) {\n                size = 5;\n            } else {\n                size = 10;\n            }\n\n            size *= magn;\n\n            if (opts.minTickSize != null && size < opts.minTickSize) {\n                size = opts.minTickSize;\n            }\n\n            axis.delta = delta;\n            axis.tickDecimals = Math.max(0, maxDec != null ? maxDec : dec);\n            axis.tickSize = opts.tickSize || size;\n            // grafana addition\n            axis.scaledDecimals = axis.tickDecimals - Math.floor(Math.log(axis.tickSize) / Math.LN10);\n\n            // Time mode was moved to a plug-in in 0.8, and since so many people use it\n            // we'll add an especially friendly reminder to make sure they included it.\n\n            if (opts.mode == \"time\" && !axis.tickGenerator) {\n                throw new Error(\"Time mode requires the flot.time plugin.\");\n            }\n\n            // Flot supports base-10 axes; any other mode else is handled by a plug-in,\n            // like flot.time.js.\n\n            if (!axis.tickGenerator) {\n\n                axis.tickGenerator = function (axis) {\n\n                    var ticks = [],\n                        start = floorInBase(axis.min, axis.tickSize),\n                        i = 0,\n                        v = Number.NaN,\n                        prev;\n\n                    do {\n                        prev = v;\n                        v = start + i * axis.tickSize;\n                        ticks.push(v);\n                        ++i;\n                    } while (v < axis.max && v != prev);\n                    return ticks;\n                };\n\n\t\t\t\taxis.tickFormatter = function (value, axis) {\n\n\t\t\t\t\tvar factor = axis.tickDecimals ? Math.pow(10, axis.tickDecimals) : 1;\n\t\t\t\t\tvar formatted = \"\" + Math.round(value * factor) / factor;\n\n\t\t\t\t\t// If tickDecimals was specified, ensure that we have exactly that\n\t\t\t\t\t// much precision; otherwise default to the value's own precision.\n\n\t\t\t\t\tif (axis.tickDecimals != null) {\n\t\t\t\t\t\tvar decimal = formatted.indexOf(\".\");\n\t\t\t\t\t\tvar precision = decimal == -1 ? 0 : formatted.length - decimal - 1;\n\t\t\t\t\t\tif (precision < axis.tickDecimals) {\n\t\t\t\t\t\t\treturn (precision ? formatted : formatted + \".\") + (\"\" + factor).substr(1, axis.tickDecimals - precision);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n                    return formatted;\n                };\n            }\n\n            if ($.isFunction(opts.tickFormatter))\n                axis.tickFormatter = function (v, axis) { return \"\" + opts.tickFormatter(v, axis); };\n\n            if (opts.alignTicksWithAxis != null) {\n                var otherAxis = (axis.direction == \"x\" ? xaxes : yaxes)[opts.alignTicksWithAxis - 1];\n                if (otherAxis && otherAxis.used && otherAxis != axis) {\n                    // consider snapping min/max to outermost nice ticks\n                    var niceTicks = axis.tickGenerator(axis);\n                    if (niceTicks.length > 0) {\n                        if (opts.min == null)\n                            axis.min = Math.min(axis.min, niceTicks[0]);\n                        if (opts.max == null && niceTicks.length > 1)\n                            axis.max = Math.max(axis.max, niceTicks[niceTicks.length - 1]);\n                    }\n\n                    axis.tickGenerator = function (axis) {\n                        // copy ticks, scaled to this axis\n                        var ticks = [], v, i;\n                        for (i = 0; i < otherAxis.ticks.length; ++i) {\n                            v = (otherAxis.ticks[i].v - otherAxis.min) / (otherAxis.max - otherAxis.min);\n                            v = axis.min + v * (axis.max - axis.min);\n                            ticks.push(v);\n                        }\n                        return ticks;\n                    };\n\n                    // we might need an extra decimal since forced\n                    // ticks don't necessarily fit naturally\n                    if (!axis.mode && opts.tickDecimals == null) {\n                        var extraDec = Math.max(0, -Math.floor(Math.log(axis.delta) / Math.LN10) + 1),\n                            ts = axis.tickGenerator(axis);\n\n                        // only proceed if the tick interval rounded\n                        // with an extra decimal doesn't give us a\n                        // zero at end\n                        if (!(ts.length > 1 && /\\..*0$/.test((ts[1] - ts[0]).toFixed(extraDec))))\n                            axis.tickDecimals = extraDec;\n                    }\n                }\n            }\n        }\n\n        function setTicks(axis) {\n            var oticks = axis.options.ticks, ticks = [];\n            if (oticks == null || (typeof oticks == \"number\" && oticks > 0))\n                ticks = axis.tickGenerator(axis);\n            else if (oticks) {\n                if ($.isFunction(oticks))\n                    // generate the ticks\n                    ticks = oticks(axis);\n                else\n                    ticks = oticks;\n            }\n\n            // clean up/labelify the supplied ticks, copy them over\n            var i, v;\n            axis.ticks = [];\n            for (i = 0; i < ticks.length; ++i) {\n                var label = null;\n                var t = ticks[i];\n                if (typeof t == \"object\") {\n                    v = +t[0];\n                    if (t.length > 1)\n                        label = t[1];\n                }\n                else\n                    v = +t;\n                if (label == null)\n                    label = axis.tickFormatter(v, axis);\n                if (!isNaN(v))\n                    axis.ticks.push({ v: v, label: label });\n            }\n        }\n\n        function snapRangeToTicks(axis, ticks) {\n            if (axis.options.autoscaleMargin && ticks.length > 0) {\n                // snap to ticks\n                if (axis.options.min == null)\n                    axis.min = Math.min(axis.min, ticks[0].v);\n                if (axis.options.max == null && ticks.length > 1)\n                    axis.max = Math.max(axis.max, ticks[ticks.length - 1].v);\n            }\n        }\n\n        function draw() {\n\n            surface.clear();\n\n            executeHooks(hooks.drawBackground, [ctx]);\n\n            var grid = options.grid;\n\n            // draw background, if any\n            if (grid.show && grid.backgroundColor)\n                drawBackground();\n\n            if (grid.show && !grid.aboveData) {\n                drawGrid();\n            }\n\n            for (var i = 0; i < series.length; ++i) {\n                executeHooks(hooks.drawSeries, [ctx, series[i]]);\n                drawSeries(series[i]);\n            }\n\n            executeHooks(hooks.draw, [ctx]);\n\n            if (grid.show && grid.aboveData) {\n                drawGrid();\n            }\n\n            surface.render();\n\n            // A draw implies that either the axes or data have changed, so we\n            // should probably update the overlay highlights as well.\n\n            triggerRedrawOverlay();\n        }\n\n        function extractRange(ranges, coord) {\n            var axis, from, to, key, axes = allAxes();\n\n            for (var i = 0; i < axes.length; ++i) {\n                axis = axes[i];\n                if (axis.direction == coord) {\n                    key = coord + axis.n + \"axis\";\n                    if (!ranges[key] && axis.n == 1)\n                        key = coord + \"axis\"; // support x1axis as xaxis\n                    if (ranges[key]) {\n                        from = ranges[key].from;\n                        to = ranges[key].to;\n                        break;\n                    }\n                }\n            }\n\n            // backwards-compat stuff - to be removed in future\n            if (!ranges[key]) {\n                axis = coord == \"x\" ? xaxes[0] : yaxes[0];\n                from = ranges[coord + \"1\"];\n                to = ranges[coord + \"2\"];\n            }\n\n            // auto-reverse as an added bonus\n            if (from != null && to != null && from > to) {\n                var tmp = from;\n                from = to;\n                to = tmp;\n            }\n\n            return { from: from, to: to, axis: axis };\n        }\n\n        function drawBackground() {\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            ctx.fillStyle = getColorOrGradient(options.grid.backgroundColor, plotHeight, 0, \"rgba(255, 255, 255, 0)\");\n            ctx.fillRect(0, 0, plotWidth, plotHeight);\n            ctx.restore();\n        }\n\n        function drawGrid() {\n            var i, axes, bw, bc;\n\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            // draw markings\n            var markings = options.grid.markings;\n            if (markings) {\n                if ($.isFunction(markings)) {\n                    axes = plot.getAxes();\n                    // xmin etc. is backwards compatibility, to be\n                    // removed in the future\n                    axes.xmin = axes.xaxis.min;\n                    axes.xmax = axes.xaxis.max;\n                    axes.ymin = axes.yaxis.min;\n                    axes.ymax = axes.yaxis.max;\n\n                    markings = markings(axes);\n                }\n\n                for (i = 0; i < markings.length; ++i) {\n                    var m = markings[i],\n                        xrange = extractRange(m, \"x\"),\n                        yrange = extractRange(m, \"y\");\n\n                    // fill in missing\n                    if (xrange.from == null)\n                        xrange.from = xrange.axis.min;\n                    if (xrange.to == null)\n                        xrange.to = xrange.axis.max;\n                    if (yrange.from == null)\n                        yrange.from = yrange.axis.min;\n                    if (yrange.to == null)\n                        yrange.to = yrange.axis.max;\n\n                    // clip\n                    if (xrange.to < xrange.axis.min || xrange.from > xrange.axis.max ||\n                        yrange.to < yrange.axis.min || yrange.from > yrange.axis.max)\n                        continue;\n\n                    xrange.from = Math.max(xrange.from, xrange.axis.min);\n                    xrange.to = Math.min(xrange.to, xrange.axis.max);\n                    yrange.from = Math.max(yrange.from, yrange.axis.min);\n                    yrange.to = Math.min(yrange.to, yrange.axis.max);\n\n                    var xequal = xrange.from === xrange.to,\n                        yequal = yrange.from === yrange.to;\n\n                    if (xequal && yequal) {\n                        continue;\n                    }\n\n                    // then draw\n                    xrange.from = Math.floor(xrange.axis.p2c(xrange.from));\n                    xrange.to = Math.floor(xrange.axis.p2c(xrange.to));\n                    yrange.from = Math.floor(yrange.axis.p2c(yrange.from));\n                    yrange.to = Math.floor(yrange.axis.p2c(yrange.to));\n\n                    if (xequal || yequal) {\n                        var lineWidth = m.lineWidth || options.grid.markingsLineWidth,\n                            subPixel = lineWidth % 2 ? 0.5 : 0;\n                        ctx.beginPath();\n                        ctx.strokeStyle = m.color || options.grid.markingsColor;\n                        ctx.lineWidth = lineWidth;\n                        if (xequal) {\n                            ctx.moveTo(xrange.to + subPixel, yrange.from);\n                            ctx.lineTo(xrange.to + subPixel, yrange.to);\n                        } else {\n                            ctx.moveTo(xrange.from, yrange.to + subPixel);\n                            ctx.lineTo(xrange.to, yrange.to + subPixel);\n                        }\n                        ctx.stroke();\n                    } else {\n                        ctx.fillStyle = m.color || options.grid.markingsColor;\n                        ctx.fillRect(xrange.from, yrange.to,\n                                     xrange.to - xrange.from,\n                                     yrange.from - yrange.to);\n                    }\n                }\n            }\n\n            // draw the ticks\n            axes = allAxes();\n            bw = options.grid.borderWidth;\n\n            for (var j = 0; j < axes.length; ++j) {\n                var axis = axes[j], box = axis.box,\n                    t = axis.tickLength, x, y, xoff, yoff;\n                if (!axis.show || axis.ticks.length == 0)\n                    continue;\n\n                ctx.lineWidth = 1;\n\n                // find the edges\n                if (axis.direction == \"x\") {\n                    x = 0;\n                    if (t == \"full\")\n                        y = (axis.position == \"top\" ? 0 : plotHeight);\n                    else\n                        y = box.top - plotOffset.top + (axis.position == \"top\" ? box.height : 0);\n                }\n                else {\n                    y = 0;\n                    if (t == \"full\")\n                        x = (axis.position == \"left\" ? 0 : plotWidth);\n                    else\n                        x = box.left - plotOffset.left + (axis.position == \"left\" ? box.width : 0);\n                }\n\n                // draw tick bar\n                if (!axis.innermost) {\n                    ctx.strokeStyle = axis.options.color;\n                    ctx.beginPath();\n                    xoff = yoff = 0;\n                    if (axis.direction == \"x\")\n                        xoff = plotWidth + 1;\n                    else\n                        yoff = plotHeight + 1;\n\n                    if (ctx.lineWidth == 1) {\n                        if (axis.direction == \"x\") {\n                            y = Math.floor(y) + 0.5;\n                        } else {\n                            x = Math.floor(x) + 0.5;\n                        }\n                    }\n\n                    ctx.moveTo(x, y);\n                    ctx.lineTo(x + xoff, y + yoff);\n                    ctx.stroke();\n                }\n\n                // draw ticks\n\n                ctx.strokeStyle = axis.options.tickColor;\n\n                ctx.beginPath();\n                for (i = 0; i < axis.ticks.length; ++i) {\n                    var v = axis.ticks[i].v;\n\n                    xoff = yoff = 0;\n\n                    if (isNaN(v) || v < axis.min || v > axis.max\n                        // skip those lying on the axes if we got a border\n                        || (t == \"full\"\n                            && ((typeof bw == \"object\" && bw[axis.position] > 0) || bw > 0)\n                            && (v == axis.min || v == axis.max)))\n                        continue;\n\n                    if (axis.direction == \"x\") {\n                        x = axis.p2c(v);\n                        yoff = t == \"full\" ? -plotHeight : t;\n\n                        if (axis.position == \"top\")\n                            yoff = -yoff;\n                    }\n                    else {\n                        y = axis.p2c(v);\n                        xoff = t == \"full\" ? -plotWidth : t;\n\n                        if (axis.position == \"left\")\n                            xoff = -xoff;\n                    }\n\n                    if (ctx.lineWidth == 1) {\n                        if (axis.direction == \"x\")\n                            x = Math.floor(x) + 0.5;\n                        else\n                            y = Math.floor(y) + 0.5;\n                    }\n\n                    ctx.moveTo(x, y);\n                    ctx.lineTo(x + xoff, y + yoff);\n                }\n\n                ctx.stroke();\n            }\n\n\n            // draw border\n            if (bw) {\n                // If either borderWidth or borderColor is an object, then draw the border\n                // line by line instead of as one rectangle\n                bc = options.grid.borderColor;\n                if(typeof bw == \"object\" || typeof bc == \"object\") {\n                    if (typeof bw !== \"object\") {\n                        bw = {top: bw, right: bw, bottom: bw, left: bw};\n                    }\n                    if (typeof bc !== \"object\") {\n                        bc = {top: bc, right: bc, bottom: bc, left: bc};\n                    }\n\n                    if (bw.top > 0) {\n                        ctx.strokeStyle = bc.top;\n                        ctx.lineWidth = bw.top;\n                        ctx.beginPath();\n                        ctx.moveTo(0 - bw.left, 0 - bw.top/2);\n                        ctx.lineTo(plotWidth, 0 - bw.top/2);\n                        ctx.stroke();\n                    }\n\n                    if (bw.right > 0) {\n                        ctx.strokeStyle = bc.right;\n                        ctx.lineWidth = bw.right;\n                        ctx.beginPath();\n                        ctx.moveTo(plotWidth + bw.right / 2, 0 - bw.top);\n                        ctx.lineTo(plotWidth + bw.right / 2, plotHeight);\n                        ctx.stroke();\n                    }\n\n                    if (bw.bottom > 0) {\n                        ctx.strokeStyle = bc.bottom;\n                        ctx.lineWidth = bw.bottom;\n                        ctx.beginPath();\n                        ctx.moveTo(plotWidth + bw.right, plotHeight + bw.bottom / 2);\n                        ctx.lineTo(0, plotHeight + bw.bottom / 2);\n                        ctx.stroke();\n                    }\n\n                    if (bw.left > 0) {\n                        ctx.strokeStyle = bc.left;\n                        ctx.lineWidth = bw.left;\n                        ctx.beginPath();\n                        ctx.moveTo(0 - bw.left/2, plotHeight + bw.bottom);\n                        ctx.lineTo(0- bw.left/2, 0);\n                        ctx.stroke();\n                    }\n                }\n                else {\n                    ctx.lineWidth = bw;\n                    ctx.strokeStyle = options.grid.borderColor;\n                    ctx.strokeRect(-bw/2, -bw/2, plotWidth + bw, plotHeight + bw);\n                }\n            }\n\n            ctx.restore();\n        }\n\n        function drawAxisLabels() {\n\n            $.each(allAxes(), function (_, axis) {\n                var box = axis.box,\n                    legacyStyles = axis.direction + \"Axis \" + axis.direction + axis.n + \"Axis\",\n                    layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + legacyStyles,\n                    font = axis.options.font || \"flot-tick-label tickLabel\",\n                    tick, x, y, halign, valign;\n\n                // Remove text before checking for axis.show and ticks.length;\n                // otherwise plugins, like flot-tickrotor, that draw their own\n                // tick labels will end up with both theirs and the defaults.\n\n                surface.removeText(layer);\n\n                if (!axis.show || axis.ticks.length == 0)\n                    return;\n\n                for (var i = 0; i < axis.ticks.length; ++i) {\n\n                    tick = axis.ticks[i];\n                    if (!tick.label || tick.v < axis.min || tick.v > axis.max)\n                        continue;\n\n                    if (axis.direction == \"x\") {\n                        halign = \"center\";\n                        x = plotOffset.left + axis.p2c(tick.v);\n                        if (axis.position == \"bottom\") {\n                            y = box.top + box.padding + box.eventSectionPadding;\n                        } else {\n                            y = box.top + box.height - box.padding;\n                            valign = \"bottom\";\n                        }\n                    } else {\n                        valign = \"middle\";\n                        y = plotOffset.top + axis.p2c(tick.v);\n                        if (axis.position == \"left\") {\n                            x = box.left + box.width - box.padding;\n                            halign = \"right\";\n                        } else {\n                            x = box.left + box.padding;\n                        }\n                    }\n\n                    surface.addText(layer, x, y, tick.label, font, null, null, halign, valign);\n                }\n            });\n        }\n\n        function drawSeries(series) {\n            if (series.lines.show)\n                drawSeriesLines(series);\n            if (series.bars.show)\n                drawSeriesBars(series);\n            if (series.points.show)\n                drawSeriesPoints(series);\n        }\n\n        function drawSeriesLines(series) {\n            function plotLine(datapoints, xoffset, yoffset, axisx, axisy) {\n                var points = datapoints.points,\n                    ps = datapoints.pointsize,\n                    prevx = null, prevy = null;\n\n                ctx.beginPath();\n                for (var i = ps; i < points.length; i += ps) {\n                    var x1 = points[i - ps], y1 = points[i - ps + 1],\n                        x2 = points[i], y2 = points[i + 1];\n\n                    if (x1 == null || x2 == null)\n                        continue;\n\n                    // clip with ymin\n                    if (y1 <= y2 && y1 < axisy.min) {\n                        if (y2 < axisy.min)\n                            continue;   // line segment is outside\n                        // compute new intersection point\n                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y1 = axisy.min;\n                    }\n                    else if (y2 <= y1 && y2 < axisy.min) {\n                        if (y1 < axisy.min)\n                            continue;\n                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y2 = axisy.min;\n                    }\n\n                    // clip with ymax\n                    if (y1 >= y2 && y1 > axisy.max) {\n                        if (y2 > axisy.max)\n                            continue;\n                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y1 = axisy.max;\n                    }\n                    else if (y2 >= y1 && y2 > axisy.max) {\n                        if (y1 > axisy.max)\n                            continue;\n                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y2 = axisy.max;\n                    }\n\n                    // clip with xmin\n                    if (x1 <= x2 && x1 < axisx.min) {\n                        if (x2 < axisx.min)\n                            continue;\n                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x1 = axisx.min;\n                    }\n                    else if (x2 <= x1 && x2 < axisx.min) {\n                        if (x1 < axisx.min)\n                            continue;\n                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x2 = axisx.min;\n                    }\n\n                    // clip with xmax\n                    if (x1 >= x2 && x1 > axisx.max) {\n                        if (x2 > axisx.max)\n                            continue;\n                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x1 = axisx.max;\n                    }\n                    else if (x2 >= x1 && x2 > axisx.max) {\n                        if (x1 > axisx.max)\n                            continue;\n                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x2 = axisx.max;\n                    }\n\n                    if (x1 != prevx || y1 != prevy)\n                        ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);\n\n                    prevx = x2;\n                    prevy = y2;\n                    ctx.lineTo(axisx.p2c(x2) + xoffset, axisy.p2c(y2) + yoffset);\n                }\n                ctx.stroke();\n            }\n\n            function plotLineArea(datapoints, axisx, axisy) {\n                var points = datapoints.points,\n                    ps = datapoints.pointsize,\n                    bottom = Math.min(Math.max(0, axisy.min), axisy.max),\n                    i = 0, top, areaOpen = false,\n                    ypos = 1, segmentStart = 0, segmentEnd = 0;\n\n                // we process each segment in two turns, first forward\n                // direction to sketch out top, then once we hit the\n                // end we go backwards to sketch the bottom\n                while (true) {\n                    if (ps > 0 && i > points.length + ps)\n                        break;\n\n                    i += ps; // ps is negative if going backwards\n\n                    var x1 = points[i - ps],\n                        y1 = points[i - ps + ypos],\n                        x2 = points[i], y2 = points[i + ypos];\n\n                    if (areaOpen) {\n                        if (ps > 0 && x1 != null && x2 == null) {\n                            // at turning point\n                            segmentEnd = i;\n                            ps = -ps;\n                            ypos = 2;\n                            continue;\n                        }\n\n                        if (ps < 0 && i == segmentStart + ps) {\n                            // done with the reverse sweep\n                            ctx.fill();\n                            areaOpen = false;\n                            ps = -ps;\n                            ypos = 1;\n                            i = segmentStart = segmentEnd + ps;\n                            continue;\n                        }\n                    }\n\n                    if (x1 == null || x2 == null)\n                        continue;\n\n                    // clip x values\n\n                    // clip with xmin\n                    if (x1 <= x2 && x1 < axisx.min) {\n                        if (x2 < axisx.min)\n                            continue;\n                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x1 = axisx.min;\n                    }\n                    else if (x2 <= x1 && x2 < axisx.min) {\n                        if (x1 < axisx.min)\n                            continue;\n                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x2 = axisx.min;\n                    }\n\n                    // clip with xmax\n                    if (x1 >= x2 && x1 > axisx.max) {\n                        if (x2 > axisx.max)\n                            continue;\n                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x1 = axisx.max;\n                    }\n                    else if (x2 >= x1 && x2 > axisx.max) {\n                        if (x1 > axisx.max)\n                            continue;\n                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x2 = axisx.max;\n                    }\n\n                    if (!areaOpen) {\n                        // open area\n                        ctx.beginPath();\n                        ctx.moveTo(axisx.p2c(x1), axisy.p2c(bottom));\n                        areaOpen = true;\n                    }\n\n                    // now first check the case where both is outside\n                    if (y1 >= axisy.max && y2 >= axisy.max) {\n                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.max));\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.max));\n                        continue;\n                    }\n                    else if (y1 <= axisy.min && y2 <= axisy.min) {\n                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.min));\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.min));\n                        continue;\n                    }\n\n                    // else it's a bit more complicated, there might\n                    // be a flat maxed out rectangle first, then a\n                    // triangular cutout or reverse; to find these\n                    // keep track of the current x values\n                    var x1old = x1, x2old = x2;\n\n                    // clip the y values, without shortcutting, we\n                    // go through all cases in turn\n\n                    // clip with ymin\n                    if (y1 <= y2 && y1 < axisy.min && y2 >= axisy.min) {\n                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y1 = axisy.min;\n                    }\n                    else if (y2 <= y1 && y2 < axisy.min && y1 >= axisy.min) {\n                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y2 = axisy.min;\n                    }\n\n                    // clip with ymax\n                    if (y1 >= y2 && y1 > axisy.max && y2 <= axisy.max) {\n                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y1 = axisy.max;\n                    }\n                    else if (y2 >= y1 && y2 > axisy.max && y1 <= axisy.max) {\n                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y2 = axisy.max;\n                    }\n\n                    // if the x value was changed we got a rectangle\n                    // to fill\n                    if (x1 != x1old) {\n                        ctx.lineTo(axisx.p2c(x1old), axisy.p2c(y1));\n                        // it goes to (x1, y1), but we fill that below\n                    }\n\n                    // fill triangular section, this sometimes result\n                    // in redundant points if (x1, y1) hasn't changed\n                    // from previous line to, but we just ignore that\n                    ctx.lineTo(axisx.p2c(x1), axisy.p2c(y1));\n                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\n\n                    // fill the other rectangle if it's there\n                    if (x2 != x2old) {\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\n                        ctx.lineTo(axisx.p2c(x2old), axisy.p2c(y2));\n                    }\n                }\n            }\n\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n            ctx.lineJoin = \"round\";\n\n            var lw = series.lines.lineWidth,\n                sw = series.shadowSize;\n            // FIXME: consider another form of shadow when filling is turned on\n            if (lw > 0 && sw > 0) {\n                // draw shadow as a thick and thin line with transparency\n                ctx.lineWidth = sw;\n                ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\n                // position shadow at angle from the mid of line\n                var angle = Math.PI/18;\n                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/2), Math.cos(angle) * (lw/2 + sw/2), series.xaxis, series.yaxis);\n                ctx.lineWidth = sw/2;\n                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/4), Math.cos(angle) * (lw/2 + sw/4), series.xaxis, series.yaxis);\n            }\n\n            ctx.lineWidth = lw;\n            ctx.strokeStyle = series.color;\n            var fillStyle = getFillStyle(series.lines, series.color, 0, plotHeight);\n            if (fillStyle) {\n                ctx.fillStyle = fillStyle;\n                plotLineArea(series.datapoints, series.xaxis, series.yaxis);\n            }\n\n            if (lw > 0)\n                plotLine(series.datapoints, 0, 0, series.xaxis, series.yaxis);\n            ctx.restore();\n        }\n\n        function drawSeriesPoints(series) {\n            function plotPoints(datapoints, radius, fillStyle, offset, shadow, axisx, axisy, symbol) {\n                var points = datapoints.points, ps = datapoints.pointsize;\n\n                for (var i = 0; i < points.length; i += ps) {\n                    var x = points[i], y = points[i + 1];\n                    if (x == null || x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)\n                        continue;\n\n                    ctx.beginPath();\n                    x = axisx.p2c(x);\n                    y = axisy.p2c(y) + offset;\n                    if (symbol == \"circle\")\n                        ctx.arc(x, y, radius, 0, shadow ? Math.PI : Math.PI * 2, false);\n                    else\n                        symbol(ctx, x, y, radius, shadow);\n                    ctx.closePath();\n\n                    if (fillStyle) {\n                        ctx.fillStyle = fillStyle;\n                        ctx.fill();\n                    }\n                    ctx.stroke();\n                }\n            }\n\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            var lw = series.points.lineWidth,\n                sw = series.shadowSize,\n                radius = series.points.radius,\n                symbol = series.points.symbol;\n\n            // If the user sets the line width to 0, we change it to a very\n            // small value. A line width of 0 seems to force the default of 1.\n            // Doing the conditional here allows the shadow setting to still be\n            // optional even with a lineWidth of 0.\n\n            if( lw == 0 )\n                lw = 0.0001;\n\n            if (lw > 0 && sw > 0) {\n                // draw shadow in two steps\n                var w = sw / 2;\n                ctx.lineWidth = w;\n                ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\n                plotPoints(series.datapoints, radius, null, w + w/2, true,\n                           series.xaxis, series.yaxis, symbol);\n\n                ctx.strokeStyle = \"rgba(0,0,0,0.2)\";\n                plotPoints(series.datapoints, radius, null, w/2, true,\n                           series.xaxis, series.yaxis, symbol);\n            }\n\n            ctx.lineWidth = lw;\n            ctx.strokeStyle = series.color;\n            plotPoints(series.datapoints, radius,\n                       getFillStyle(series.points, series.color), 0, false,\n                       series.xaxis, series.yaxis, symbol);\n            ctx.restore();\n        }\n\n        function drawBar(x, y, b, barLeft, barRight, fillStyleCallback, axisx, axisy, c, horizontal, lineWidth) {\n            var left, right, bottom, top,\n                drawLeft, drawRight, drawTop, drawBottom,\n                tmp;\n\n            // in horizontal mode, we start the bar from the left\n            // instead of from the bottom so it appears to be\n            // horizontal rather than vertical\n            if (horizontal) {\n                drawBottom = drawRight = drawTop = true;\n                drawLeft = false;\n                left = b;\n                right = x;\n                top = y + barLeft;\n                bottom = y + barRight;\n\n                // account for negative bars\n                if (right < left) {\n                    tmp = right;\n                    right = left;\n                    left = tmp;\n                    drawLeft = true;\n                    drawRight = false;\n                }\n            }\n            else {\n                drawLeft = drawRight = drawTop = true;\n                drawBottom = false;\n                left = x + barLeft;\n                right = x + barRight;\n                bottom = b;\n                top = y;\n\n                // account for negative bars\n                if (top < bottom) {\n                    tmp = top;\n                    top = bottom;\n                    bottom = tmp;\n                    drawBottom = true;\n                    drawTop = false;\n                }\n            }\n\n            // clip\n            if (right < axisx.min || left > axisx.max ||\n                top < axisy.min || bottom > axisy.max)\n                return;\n\n            if (left < axisx.min) {\n                left = axisx.min;\n                drawLeft = false;\n            }\n\n            if (right > axisx.max) {\n                right = axisx.max;\n                drawRight = false;\n            }\n\n            if (bottom < axisy.min) {\n                bottom = axisy.min;\n                drawBottom = false;\n            }\n\n            if (top > axisy.max) {\n                top = axisy.max;\n                drawTop = false;\n            }\n\n            left = axisx.p2c(left);\n            bottom = axisy.p2c(bottom);\n            right = axisx.p2c(right);\n            top = axisy.p2c(top);\n\n            // fill the bar\n            if (fillStyleCallback) {\n                c.fillStyle = fillStyleCallback(bottom, top);\n                c.fillRect(left, top, right - left, bottom - top)\n            }\n\n            // draw outline\n            if (lineWidth > 0 && (drawLeft || drawRight || drawTop || drawBottom)) {\n                c.beginPath();\n\n                // FIXME: inline moveTo is buggy with excanvas\n                c.moveTo(left, bottom);\n                if (drawLeft)\n                    c.lineTo(left, top);\n                else\n                    c.moveTo(left, top);\n                if (drawTop)\n                    c.lineTo(right, top);\n                else\n                    c.moveTo(right, top);\n                if (drawRight)\n                    c.lineTo(right, bottom);\n                else\n                    c.moveTo(right, bottom);\n                if (drawBottom)\n                    c.lineTo(left, bottom);\n                else\n                    c.moveTo(left, bottom);\n                c.stroke();\n            }\n        }\n\n        function drawSeriesBars(series) {\n            function plotBars(datapoints, barLeft, barRight, fillStyleCallback, axisx, axisy) {\n                var points = datapoints.points, ps = datapoints.pointsize;\n\n                for (var i = 0; i < points.length; i += ps) {\n                    if (points[i] == null)\n                        continue;\n                    drawBar(points[i], points[i + 1], points[i + 2], barLeft, barRight, fillStyleCallback, axisx, axisy, ctx, series.bars.horizontal, series.bars.lineWidth);\n                }\n            }\n\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            // FIXME: figure out a way to add shadows (for instance along the right edge)\n            ctx.lineWidth = series.bars.lineWidth;\n            ctx.strokeStyle = series.color;\n\n            var barLeft;\n\n            switch (series.bars.align) {\n                case \"left\":\n                    barLeft = 0;\n                    break;\n                case \"right\":\n                    barLeft = -series.bars.barWidth;\n                    break;\n                default:\n                    barLeft = -series.bars.barWidth / 2;\n            }\n\n            var fillStyleCallback = series.bars.fill ? function (bottom, top) { return getFillStyle(series.bars, series.color, bottom, top); } : null;\n            plotBars(series.datapoints, barLeft, barLeft + series.bars.barWidth, fillStyleCallback, series.xaxis, series.yaxis);\n            ctx.restore();\n        }\n\n        function getFillStyle(filloptions, seriesColor, bottom, top) {\n            var fill = filloptions.fill;\n            if (!fill)\n                return null;\n\n            if (filloptions.fillColor)\n                return getColorOrGradient(filloptions.fillColor, bottom, top, seriesColor);\n\n            var c = $.color.parse(seriesColor);\n            c.a = typeof fill == \"number\" ? fill : 0.4;\n            c.normalize();\n            return c.toString();\n        }\n\n        function insertLegend() {\n\n            if (options.legend.container != null) {\n                $(options.legend.container).html(\"\");\n            } else {\n                placeholder.find(\".legend\").remove();\n            }\n\n            if (!options.legend.show) {\n                return;\n            }\n\n            var fragments = [], entries = [], rowStarted = false,\n                lf = options.legend.labelFormatter, s, label;\n\n            // Build a list of legend entries, with each having a label and a color\n\n            for (var i = 0; i < series.length; ++i) {\n                s = series[i];\n                if (s.label) {\n                    label = lf ? lf(s.label, s) : s.label;\n                    if (label) {\n                        entries.push({\n                            label: label,\n                            color: s.color\n                        });\n                    }\n                }\n            }\n\n            // Sort the legend using either the default or a custom comparator\n\n            if (options.legend.sorted) {\n                if ($.isFunction(options.legend.sorted)) {\n                    entries.sort(options.legend.sorted);\n                } else if (options.legend.sorted == \"reverse\") {\n                \tentries.reverse();\n                } else {\n                    var ascending = options.legend.sorted != \"descending\";\n                    entries.sort(function(a, b) {\n                        return a.label == b.label ? 0 : (\n                            (a.label < b.label) != ascending ? 1 : -1   // Logical XOR\n                        );\n                    });\n                }\n            }\n\n            // Generate markup for the list of entries, in their final order\n\n            for (var i = 0; i < entries.length; ++i) {\n\n                var entry = entries[i];\n\n                if (i % options.legend.noColumns == 0) {\n                    if (rowStarted)\n                        fragments.push('</tr>');\n                    fragments.push('<tr>');\n                    rowStarted = true;\n                }\n\n                fragments.push(\n                    '<td class=\"legendColorBox\"><div style=\"border:1px solid ' + options.legend.labelBoxBorderColor + ';padding:1px\"><div style=\"width:4px;height:0;border:5px solid ' + entry.color + ';overflow:hidden\"></div></div></td>' +\n                    '<td class=\"legendLabel\">' + entry.label + '</td>'\n                );\n            }\n\n            if (rowStarted)\n                fragments.push('</tr>');\n\n            if (fragments.length == 0)\n                return;\n\n            var table = '<table style=\"font-size:smaller;color:' + options.grid.color + '\">' + fragments.join(\"\") + '</table>';\n            if (options.legend.container != null)\n                $(options.legend.container).html(table);\n            else {\n                var pos = \"\",\n                    p = options.legend.position,\n                    m = options.legend.margin;\n                if (m[0] == null)\n                    m = [m, m];\n                if (p.charAt(0) == \"n\")\n                    pos += 'top:' + (m[1] + plotOffset.top) + 'px;';\n                else if (p.charAt(0) == \"s\")\n                    pos += 'bottom:' + (m[1] + plotOffset.bottom) + 'px;';\n                if (p.charAt(1) == \"e\")\n                    pos += 'right:' + (m[0] + plotOffset.right) + 'px;';\n                else if (p.charAt(1) == \"w\")\n                    pos += 'left:' + (m[0] + plotOffset.left) + 'px;';\n                var legend = $('<div class=\"legend\">' + table.replace('style=\"', 'style=\"position:absolute;' + pos +';') + '</div>').appendTo(placeholder);\n                if (options.legend.backgroundOpacity != 0.0) {\n                    // put in the transparent background\n                    // separately to avoid blended labels and\n                    // label boxes\n                    var c = options.legend.backgroundColor;\n                    if (c == null) {\n                        c = options.grid.backgroundColor;\n                        if (c && typeof c == \"string\")\n                            c = $.color.parse(c);\n                        else\n                            c = $.color.extract(legend, 'background-color');\n                        c.a = 1;\n                        c = c.toString();\n                    }\n                    var div = legend.children();\n                    $('<div style=\"position:absolute;width:' + div.width() + 'px;height:' + div.height() + 'px;' + pos +'background-color:' + c + ';\"> </div>').prependTo(legend).css('opacity', options.legend.backgroundOpacity);\n                }\n            }\n        }\n\n\n        // interactive features\n\n        var highlights = [],\n            redrawTimeout = null;\n\n        // returns the data item the mouse is over, or null if none is found\n        function findNearbyItem(mouseX, mouseY, seriesFilter) {\n            var maxDistance = options.grid.mouseActiveRadius,\n                smallestDistance = maxDistance * maxDistance + 1,\n                item = null, foundPoint = false, i, j, ps;\n\n            for (i = series.length - 1; i >= 0; --i) {\n                if (!seriesFilter(series[i]))\n                    continue;\n\n                var s = series[i],\n                    axisx = s.xaxis,\n                    axisy = s.yaxis,\n                    points = s.datapoints.points,\n                    mx = axisx.c2p(mouseX), // precompute some stuff to make the loop faster\n                    my = axisy.c2p(mouseY),\n                    maxx = maxDistance / axisx.scale,\n                    maxy = maxDistance / axisy.scale;\n\n                ps = s.datapoints.pointsize;\n                // with inverse transforms, we can't use the maxx/maxy\n                // optimization, sadly\n                if (axisx.options.inverseTransform)\n                    maxx = Number.MAX_VALUE;\n                if (axisy.options.inverseTransform)\n                    maxy = Number.MAX_VALUE;\n\n                if (s.lines.show || s.points.show) {\n                    for (j = 0; j < points.length; j += ps) {\n                        var x = points[j], y = points[j + 1];\n                        if (x == null)\n                            continue;\n\n                        // For points and lines, the cursor must be within a\n                        // certain distance to the data point\n                        if (x - mx > maxx || x - mx < -maxx ||\n                            y - my > maxy || y - my < -maxy)\n                            continue;\n\n                        // We have to calculate distances in pixels, not in\n                        // data units, because the scales of the axes may be different\n                        var dx = Math.abs(axisx.p2c(x) - mouseX),\n                            dy = Math.abs(axisy.p2c(y) - mouseY),\n                            dist = dx * dx + dy * dy; // we save the sqrt\n\n                        // use <= to ensure last point takes precedence\n                        // (last generally means on top of)\n                        if (dist < smallestDistance) {\n                            smallestDistance = dist;\n                            item = [i, j / ps];\n                        }\n                    }\n                }\n\n                if (s.bars.show && !item) { // no other point can be nearby\n\n                    var barLeft, barRight;\n\n                    switch (s.bars.align) {\n                        case \"left\":\n                            barLeft = 0;\n                            break;\n                        case \"right\":\n                            barLeft = -s.bars.barWidth;\n                            break;\n                        default:\n                            barLeft = -s.bars.barWidth / 2;\n                    }\n\n                    barRight = barLeft + s.bars.barWidth;\n\n                    for (j = 0; j < points.length; j += ps) {\n                        var x = points[j], y = points[j + 1], b = points[j + 2];\n                        if (x == null)\n                            continue;\n\n                        // for a bar graph, the cursor must be inside the bar\n                        if (series[i].bars.horizontal ?\n                            (mx <= Math.max(b, x) && mx >= Math.min(b, x) &&\n                             my >= y + barLeft && my <= y + barRight) :\n                            (mx >= x + barLeft && mx <= x + barRight &&\n                             my >= Math.min(b, y) && my <= Math.max(b, y)))\n                                item = [i, j / ps];\n                    }\n                }\n            }\n\n            if (item) {\n                i = item[0];\n                j = item[1];\n                ps = series[i].datapoints.pointsize;\n\n                return { datapoint: series[i].datapoints.points.slice(j * ps, (j + 1) * ps),\n                         dataIndex: j,\n                         series: series[i],\n                         seriesIndex: i };\n            }\n\n            return null;\n        }\n\n        function onMouseMove(e) {\n            if (options.grid.hoverable)\n                triggerClickHoverEvent(\"plothover\", e,\n                                       function (s) { return s[\"hoverable\"] != false; });\n        }\n\n        function onMouseLeave(e) {\n            if (options.grid.hoverable)\n                triggerClickHoverEvent(\"plothover\", e,\n                                       function (s) { return false; });\n        }\n\n        function onClick(e) {\n          if (plot.isSelecting) {\n            return;\n          }\n\n          triggerClickHoverEvent(\"plotclick\", e, function (s) { return s[\"clickable\"] != false; });\n        }\n\n        // trigger click or hover event (they send the same parameters\n        // so we share their code)\n        function triggerClickHoverEvent(eventname, event, seriesFilter) {\n            var offset = eventHolder.offset(),\n                canvasX = event.pageX - offset.left - plotOffset.left,\n                canvasY = event.pageY - offset.top - plotOffset.top,\n            pos = canvasToAxisCoords({ left: canvasX, top: canvasY });\n\n            pos.pageX = event.pageX;\n            pos.pageY = event.pageY;\n\n            // Add ctrlKey and metaKey to event\n            pos.ctrlKey = event.ctrlKey;\n            pos.metaKey = event.metaKey;\n\n            var item = findNearbyItem(canvasX, canvasY, seriesFilter);\n\n            if (item) {\n                // fill in mouse pos for any listeners out there\n                item.pageX = parseInt(item.series.xaxis.p2c(item.datapoint[0]) + offset.left + plotOffset.left, 10);\n                item.pageY = parseInt(item.series.yaxis.p2c(item.datapoint[1]) + offset.top + plotOffset.top, 10);\n            }\n\n            if (options.grid.autoHighlight) {\n                // clear auto-highlights\n                for (var i = 0; i < highlights.length; ++i) {\n                    var h = highlights[i];\n                    if (h.auto == eventname &&\n                        !(item && h.series == item.series &&\n                          h.point[0] == item.datapoint[0] &&\n                          h.point[1] == item.datapoint[1]))\n                        unhighlight(h.series, h.point);\n                }\n\n                if (item)\n                    highlight(item.series, item.datapoint, eventname);\n            }\n\n            placeholder.trigger(eventname, [ pos, item ]);\n        }\n\n        function triggerRedrawOverlay() {\n            var t = options.interaction.redrawOverlayInterval;\n            if (t == -1) {      // skip event queue\n                drawOverlay();\n                return;\n            }\n\n            if (!redrawTimeout)\n                redrawTimeout = setTimeout(drawOverlay, t);\n        }\n\n        function drawOverlay() {\n            redrawTimeout = null;\n\n            // draw highlights\n            octx.save();\n            overlay.clear();\n            octx.translate(plotOffset.left, plotOffset.top);\n\n            var i, hi;\n            for (i = 0; i < highlights.length; ++i) {\n                hi = highlights[i];\n\n                if (hi.series.bars.show)\n                    drawBarHighlight(hi.series, hi.point);\n                else\n                    drawPointHighlight(hi.series, hi.point);\n            }\n            octx.restore();\n\n            executeHooks(hooks.drawOverlay, [octx]);\n        }\n\n        function highlight(s, point, auto) {\n            if (typeof s == \"number\")\n                s = series[s];\n\n            if (typeof point == \"number\") {\n                var ps = s.datapoints.pointsize;\n                point = s.datapoints.points.slice(ps * point, ps * (point + 1));\n            }\n\n            var i = indexOfHighlight(s, point);\n            if (i == -1) {\n                highlights.push({ series: s, point: point, auto: auto });\n\n                triggerRedrawOverlay();\n            }\n            else if (!auto)\n                highlights[i].auto = false;\n        }\n\n        function unhighlight(s, point) {\n            if (s == null && point == null) {\n                highlights = [];\n                triggerRedrawOverlay();\n                return;\n            }\n\n            if (typeof s == \"number\")\n                s = series[s];\n\n            if (typeof point == \"number\") {\n                var ps = s.datapoints.pointsize;\n                point = s.datapoints.points.slice(ps * point, ps * (point + 1));\n            }\n\n            var i = indexOfHighlight(s, point);\n            if (i != -1) {\n                highlights.splice(i, 1);\n\n                triggerRedrawOverlay();\n            }\n        }\n\n        function indexOfHighlight(s, p) {\n            for (var i = 0; i < highlights.length; ++i) {\n                var h = highlights[i];\n                if (h.series == s && h.point[0] == p[0]\n                    && h.point[1] == p[1])\n                    return i;\n            }\n            return -1;\n        }\n\n        function drawPointHighlight(series, point) {\n            var x = point[0], y = point[1],\n                axisx = series.xaxis, axisy = series.yaxis,\n                highlightColor = (typeof series.highlightColor === \"string\") ? series.highlightColor : $.color.parse(series.color).scale('a', 0.5).toString();\n\n            if (x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)\n                return;\n\n            var pointRadius = series.points.radius + series.points.lineWidth / 2;\n            octx.lineWidth = pointRadius;\n            octx.strokeStyle = highlightColor;\n            var radius = 1.5 * pointRadius;\n            x = axisx.p2c(x);\n            y = axisy.p2c(y);\n\n            octx.beginPath();\n            if (series.points.symbol == \"circle\")\n                octx.arc(x, y, radius, 0, 2 * Math.PI, false);\n            else\n                series.points.symbol(octx, x, y, radius, false);\n            octx.closePath();\n            octx.stroke();\n        }\n\n        function drawBarHighlight(series, point) {\n            var highlightColor = (typeof series.highlightColor === \"string\") ? series.highlightColor : $.color.parse(series.color).scale('a', 0.5).toString(),\n                fillStyle = highlightColor,\n                barLeft;\n\n            switch (series.bars.align) {\n                case \"left\":\n                    barLeft = 0;\n                    break;\n                case \"right\":\n                    barLeft = -series.bars.barWidth;\n                    break;\n                default:\n                    barLeft = -series.bars.barWidth / 2;\n            }\n\n            octx.lineWidth = series.bars.lineWidth;\n            octx.strokeStyle = highlightColor;\n\n            drawBar(point[0], point[1], point[2] || 0, barLeft, barLeft + series.bars.barWidth,\n                    function () { return fillStyle; }, series.xaxis, series.yaxis, octx, series.bars.horizontal, series.bars.lineWidth);\n        }\n\n        function getColorOrGradient(spec, bottom, top, defaultColor) {\n            if (typeof spec == \"string\")\n                return spec;\n            else {\n                // assume this is a gradient spec; IE currently only\n                // supports a simple vertical gradient properly, so that's\n                // what we support too\n                var gradient = ctx.createLinearGradient(0, top, 0, bottom);\n\n                for (var i = 0, l = spec.colors.length; i < l; ++i) {\n                    var c = spec.colors[i];\n                    if (typeof c != \"string\") {\n                        var co = $.color.parse(defaultColor);\n                        if (c.brightness != null)\n                            co = co.scale('rgb', c.brightness);\n                        if (c.opacity != null)\n                            co.a *= c.opacity;\n                        c = co.toString();\n                    }\n                    gradient.addColorStop(i / (l - 1), c);\n                }\n\n                return gradient;\n            }\n        }\n    }\n\n    // Add the plot function to the top level of the jQuery object\n\n    $.plot = function(placeholder, data, options) {\n        //var t0 = new Date();\n        var plot = new Plot($(placeholder), data, options, $.plot.plugins);\n        //(window.console ? console.log : alert)(\"time used (msecs): \" + ((new Date()).getTime() - t0.getTime()));\n        return plot;\n    };\n\n    $.plot.version = \"0.8.3\";\n\n    $.plot.plugins = [];\n\n    // Also add the plot function as a chainable property\n\n    $.fn.plot = function(data, options) {\n        return this.each(function() {\n            $.plot(this, data, options);\n        });\n    };\n\n    // round to nearby lower multiple of base\n    function floorInBase(n, base) {\n        return base * Math.floor(n / base);\n    }\n\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/flot/jquery.flot.js","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment\"\n// module id = 4\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"app/core/utils/kbn\"\n// module id = 5\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"app/core/core\"\n// module id = 6\n// module chunks = 0","// TinyColor v1.4.2\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\n(function(Math) {\n\nvar trimLeft = /^\\s+/,\n    trimRight = /\\s+$/,\n    tinyCounter = 0,\n    mathRound = Math.round,\n    mathMin = Math.min,\n    mathMax = Math.max,\n    mathRandom = Math.random;\n\nfunction tinycolor (color, opts) {\n\n    color = (color) ? color : '';\n    opts = opts || { };\n\n    // If input is already a tinycolor, return itself\n    if (color instanceof tinycolor) {\n       return color;\n    }\n    // If we are called as a function, call using new instead\n    if (!(this instanceof tinycolor)) {\n        return new tinycolor(color, opts);\n    }\n\n    var rgb = inputToRGB(color);\n    this._originalInput = color,\n    this._r = rgb.r,\n    this._g = rgb.g,\n    this._b = rgb.b,\n    this._a = rgb.a,\n    this._roundA = mathRound(100*this._a) / 100,\n    this._format = opts.format || rgb.format;\n    this._gradientType = opts.gradientType;\n\n    // Don't let the range of [0,255] come back in [0,1].\n    // Potentially lose a little bit of precision here, but will fix issues where\n    // .5 gets interpreted as half of the total, instead of half of 1\n    // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n    if (this._r < 1) { this._r = mathRound(this._r); }\n    if (this._g < 1) { this._g = mathRound(this._g); }\n    if (this._b < 1) { this._b = mathRound(this._b); }\n\n    this._ok = rgb.ok;\n    this._tc_id = tinyCounter++;\n}\n\ntinycolor.prototype = {\n    isDark: function() {\n        return this.getBrightness() < 128;\n    },\n    isLight: function() {\n        return !this.isDark();\n    },\n    isValid: function() {\n        return this._ok;\n    },\n    getOriginalInput: function() {\n      return this._originalInput;\n    },\n    getFormat: function() {\n        return this._format;\n    },\n    getAlpha: function() {\n        return this._a;\n    },\n    getBrightness: function() {\n        //http://www.w3.org/TR/AERT#color-contrast\n        var rgb = this.toRgb();\n        return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n    },\n    getLuminance: function() {\n        //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n        var rgb = this.toRgb();\n        var RsRGB, GsRGB, BsRGB, R, G, B;\n        RsRGB = rgb.r/255;\n        GsRGB = rgb.g/255;\n        BsRGB = rgb.b/255;\n\n        if (RsRGB <= 0.03928) {R = RsRGB / 12.92;} else {R = Math.pow(((RsRGB + 0.055) / 1.055), 2.4);}\n        if (GsRGB <= 0.03928) {G = GsRGB / 12.92;} else {G = Math.pow(((GsRGB + 0.055) / 1.055), 2.4);}\n        if (BsRGB <= 0.03928) {B = BsRGB / 12.92;} else {B = Math.pow(((BsRGB + 0.055) / 1.055), 2.4);}\n        return (0.2126 * R) + (0.7152 * G) + (0.0722 * B);\n    },\n    setAlpha: function(value) {\n        this._a = boundAlpha(value);\n        this._roundA = mathRound(100*this._a) / 100;\n        return this;\n    },\n    toHsv: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n    },\n    toHsvString: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\n        return (this._a == 1) ?\n          \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\n          \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ this._roundA + \")\";\n    },\n    toHsl: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n    },\n    toHslString: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\n        return (this._a == 1) ?\n          \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\n          \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ this._roundA + \")\";\n    },\n    toHex: function(allow3Char) {\n        return rgbToHex(this._r, this._g, this._b, allow3Char);\n    },\n    toHexString: function(allow3Char) {\n        return '#' + this.toHex(allow3Char);\n    },\n    toHex8: function(allow4Char) {\n        return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n    },\n    toHex8String: function(allow4Char) {\n        return '#' + this.toHex8(allow4Char);\n    },\n    toRgb: function() {\n        return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\n    },\n    toRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" :\n          \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\n    },\n    toPercentageRgb: function() {\n        return { r: mathRound(bound01(this._r, 255) * 100) + \"%\", g: mathRound(bound01(this._g, 255) * 100) + \"%\", b: mathRound(bound01(this._b, 255) * 100) + \"%\", a: this._a };\n    },\n    toPercentageRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" :\n          \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n    },\n    toName: function() {\n        if (this._a === 0) {\n            return \"transparent\";\n        }\n\n        if (this._a < 1) {\n            return false;\n        }\n\n        return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n    },\n    toFilter: function(secondColor) {\n        var hex8String = '#' + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n        var secondHex8String = hex8String;\n        var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n        if (secondColor) {\n            var s = tinycolor(secondColor);\n            secondHex8String = '#' + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n        }\n\n        return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\";\n    },\n    toString: function(format) {\n        var formatSet = !!format;\n        format = format || this._format;\n\n        var formattedString = false;\n        var hasAlpha = this._a < 1 && this._a >= 0;\n        var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n\n        if (needsAlphaFormat) {\n            // Special case for \"transparent\", all other non-alpha formats\n            // will return rgba when there is transparency.\n            if (format === \"name\" && this._a === 0) {\n                return this.toName();\n            }\n            return this.toRgbString();\n        }\n        if (format === \"rgb\") {\n            formattedString = this.toRgbString();\n        }\n        if (format === \"prgb\") {\n            formattedString = this.toPercentageRgbString();\n        }\n        if (format === \"hex\" || format === \"hex6\") {\n            formattedString = this.toHexString();\n        }\n        if (format === \"hex3\") {\n            formattedString = this.toHexString(true);\n        }\n        if (format === \"hex4\") {\n            formattedString = this.toHex8String(true);\n        }\n        if (format === \"hex8\") {\n            formattedString = this.toHex8String();\n        }\n        if (format === \"name\") {\n            formattedString = this.toName();\n        }\n        if (format === \"hsl\") {\n            formattedString = this.toHslString();\n        }\n        if (format === \"hsv\") {\n            formattedString = this.toHsvString();\n        }\n\n        return formattedString || this.toHexString();\n    },\n    clone: function() {\n        return tinycolor(this.toString());\n    },\n\n    _applyModification: function(fn, args) {\n        var color = fn.apply(null, [this].concat([].slice.call(args)));\n        this._r = color._r;\n        this._g = color._g;\n        this._b = color._b;\n        this.setAlpha(color._a);\n        return this;\n    },\n    lighten: function() {\n        return this._applyModification(lighten, arguments);\n    },\n    brighten: function() {\n        return this._applyModification(brighten, arguments);\n    },\n    darken: function() {\n        return this._applyModification(darken, arguments);\n    },\n    desaturate: function() {\n        return this._applyModification(desaturate, arguments);\n    },\n    saturate: function() {\n        return this._applyModification(saturate, arguments);\n    },\n    greyscale: function() {\n        return this._applyModification(greyscale, arguments);\n    },\n    spin: function() {\n        return this._applyModification(spin, arguments);\n    },\n\n    _applyCombination: function(fn, args) {\n        return fn.apply(null, [this].concat([].slice.call(args)));\n    },\n    analogous: function() {\n        return this._applyCombination(analogous, arguments);\n    },\n    complement: function() {\n        return this._applyCombination(complement, arguments);\n    },\n    monochromatic: function() {\n        return this._applyCombination(monochromatic, arguments);\n    },\n    splitcomplement: function() {\n        return this._applyCombination(splitcomplement, arguments);\n    },\n    triad: function() {\n        return this._applyCombination(triad, arguments);\n    },\n    tetrad: function() {\n        return this._applyCombination(tetrad, arguments);\n    }\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function(color, opts) {\n    if (typeof color == \"object\") {\n        var newColor = {};\n        for (var i in color) {\n            if (color.hasOwnProperty(i)) {\n                if (i === \"a\") {\n                    newColor[i] = color[i];\n                }\n                else {\n                    newColor[i] = convertToPercentage(color[i]);\n                }\n            }\n        }\n        color = newColor;\n    }\n\n    return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n\n    var rgb = { r: 0, g: 0, b: 0 };\n    var a = 1;\n    var s = null;\n    var v = null;\n    var l = null;\n    var ok = false;\n    var format = false;\n\n    if (typeof color == \"string\") {\n        color = stringInputToObject(color);\n    }\n\n    if (typeof color == \"object\") {\n        if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n            rgb = rgbToRgb(color.r, color.g, color.b);\n            ok = true;\n            format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n            s = convertToPercentage(color.s);\n            v = convertToPercentage(color.v);\n            rgb = hsvToRgb(color.h, s, v);\n            ok = true;\n            format = \"hsv\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n            s = convertToPercentage(color.s);\n            l = convertToPercentage(color.l);\n            rgb = hslToRgb(color.h, s, l);\n            ok = true;\n            format = \"hsl\";\n        }\n\n        if (color.hasOwnProperty(\"a\")) {\n            a = color.a;\n        }\n    }\n\n    a = boundAlpha(a);\n\n    return {\n        ok: ok,\n        format: color.format || format,\n        r: mathMin(255, mathMax(rgb.r, 0)),\n        g: mathMin(255, mathMax(rgb.g, 0)),\n        b: mathMin(255, mathMax(rgb.b, 0)),\n        a: a\n    };\n}\n\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b){\n    return {\n        r: bound01(r, 255) * 255,\n        g: bound01(g, 255) * 255,\n        b: bound01(b, 255) * 255\n    };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if(max == min) {\n        h = s = 0; // achromatic\n    }\n    else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n\n        h /= 6;\n    }\n\n    return { h: h, s: s, l: l };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n    var r, g, b;\n\n    h = bound01(h, 360);\n    s = bound01(s, 100);\n    l = bound01(l, 100);\n\n    function hue2rgb(p, q, t) {\n        if(t < 0) t += 1;\n        if(t > 1) t -= 1;\n        if(t < 1/6) return p + (q - p) * 6 * t;\n        if(t < 1/2) return q;\n        if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n        return p;\n    }\n\n    if(s === 0) {\n        r = g = b = l; // achromatic\n    }\n    else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1/3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1/3);\n    }\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, v = max;\n\n    var d = max - min;\n    s = max === 0 ? 0 : d / max;\n\n    if(max == min) {\n        h = 0; // achromatic\n    }\n    else {\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n        h /= 6;\n    }\n    return { h: h, s: s, v: v };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\n function hsvToRgb(h, s, v) {\n\n    h = bound01(h, 360) * 6;\n    s = bound01(s, 100);\n    v = bound01(v, 100);\n\n    var i = Math.floor(h),\n        f = h - i,\n        p = v * (1 - s),\n        q = v * (1 - f * s),\n        t = v * (1 - (1 - f) * s),\n        mod = i % 6,\n        r = [v, q, p, p, t, v][mod],\n        g = [t, v, v, q, p, p][mod],\n        b = [p, p, t, v, v, q][mod];\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    // Return a 3 character hex if possible\n    if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16)),\n        pad2(convertDecimalToHex(a))\n    ];\n\n    // Return a 4 character hex if possible\n    if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n\n    var hex = [\n        pad2(convertDecimalToHex(a)),\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n    if (!color1 || !color2) { return false; }\n    return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\n\ntinycolor.random = function() {\n    return tinycolor.fromRatio({\n        r: mathRandom(),\n        g: mathRandom(),\n        b: mathRandom()\n    });\n};\n\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction desaturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s -= amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction saturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s += amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction greyscale(color) {\n    return tinycolor(color).desaturate(100);\n}\n\nfunction lighten (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l += amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\nfunction brighten(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var rgb = tinycolor(color).toRgb();\n    rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\n    rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\n    rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\n    return tinycolor(rgb);\n}\n\nfunction darken (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l -= amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction spin(color, amount) {\n    var hsl = tinycolor(color).toHsl();\n    var hue = (hsl.h + amount) % 360;\n    hsl.h = hue < 0 ? 360 + hue : hue;\n    return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction complement(color) {\n    var hsl = tinycolor(color).toHsl();\n    hsl.h = (hsl.h + 180) % 360;\n    return tinycolor(hsl);\n}\n\nfunction triad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction tetrad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction splitcomplement(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\n        tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\n    ];\n}\n\nfunction analogous(color, results, slices) {\n    results = results || 6;\n    slices = slices || 30;\n\n    var hsl = tinycolor(color).toHsl();\n    var part = 360 / slices;\n    var ret = [tinycolor(color)];\n\n    for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\n        hsl.h = (hsl.h + part) % 360;\n        ret.push(tinycolor(hsl));\n    }\n    return ret;\n}\n\nfunction monochromatic(color, results) {\n    results = results || 6;\n    var hsv = tinycolor(color).toHsv();\n    var h = hsv.h, s = hsv.s, v = hsv.v;\n    var ret = [];\n    var modification = 1 / results;\n\n    while (results--) {\n        ret.push(tinycolor({ h: h, s: s, v: v}));\n        v = (v + modification) % 1;\n    }\n\n    return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function(color1, color2, amount) {\n    amount = (amount === 0) ? 0 : (amount || 50);\n\n    var rgb1 = tinycolor(color1).toRgb();\n    var rgb2 = tinycolor(color2).toRgb();\n\n    var p = amount / 100;\n\n    var rgba = {\n        r: ((rgb2.r - rgb1.r) * p) + rgb1.r,\n        g: ((rgb2.g - rgb1.g) * p) + rgb1.g,\n        b: ((rgb2.b - rgb1.b) * p) + rgb1.b,\n        a: ((rgb2.a - rgb1.a) * p) + rgb1.a\n    };\n\n    return tinycolor(rgba);\n};\n\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function(color1, color2) {\n    var c1 = tinycolor(color1);\n    var c2 = tinycolor(color2);\n    return (Math.max(c1.getLuminance(),c2.getLuminance())+0.05) / (Math.min(c1.getLuminance(),c2.getLuminance())+0.05);\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function(color1, color2, wcag2) {\n    var readability = tinycolor.readability(color1, color2);\n    var wcag2Parms, out;\n\n    out = false;\n\n    wcag2Parms = validateWCAG2Parms(wcag2);\n    switch (wcag2Parms.level + wcag2Parms.size) {\n        case \"AAsmall\":\n        case \"AAAlarge\":\n            out = readability >= 4.5;\n            break;\n        case \"AAlarge\":\n            out = readability >= 3;\n            break;\n        case \"AAAsmall\":\n            out = readability >= 7;\n            break;\n    }\n    return out;\n\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function(baseColor, colorList, args) {\n    var bestColor = null;\n    var bestScore = 0;\n    var readability;\n    var includeFallbackColors, level, size ;\n    args = args || {};\n    includeFallbackColors = args.includeFallbackColors ;\n    level = args.level;\n    size = args.size;\n\n    for (var i= 0; i < colorList.length ; i++) {\n        readability = tinycolor.readability(baseColor, colorList[i]);\n        if (readability > bestScore) {\n            bestScore = readability;\n            bestColor = tinycolor(colorList[i]);\n        }\n    }\n\n    if (tinycolor.isReadable(baseColor, bestColor, {\"level\":level,\"size\":size}) || !includeFallbackColors) {\n        return bestColor;\n    }\n    else {\n        args.includeFallbackColors=false;\n        return tinycolor.mostReadable(baseColor,[\"#fff\", \"#000\"],args);\n    }\n};\n\n\n// Big List of Colors\n// ------------------\n// <http://www.w3.org/TR/css3-color/#svg-color>\nvar names = tinycolor.names = {\n    aliceblue: \"f0f8ff\",\n    antiquewhite: \"faebd7\",\n    aqua: \"0ff\",\n    aquamarine: \"7fffd4\",\n    azure: \"f0ffff\",\n    beige: \"f5f5dc\",\n    bisque: \"ffe4c4\",\n    black: \"000\",\n    blanchedalmond: \"ffebcd\",\n    blue: \"00f\",\n    blueviolet: \"8a2be2\",\n    brown: \"a52a2a\",\n    burlywood: \"deb887\",\n    burntsienna: \"ea7e5d\",\n    cadetblue: \"5f9ea0\",\n    chartreuse: \"7fff00\",\n    chocolate: \"d2691e\",\n    coral: \"ff7f50\",\n    cornflowerblue: \"6495ed\",\n    cornsilk: \"fff8dc\",\n    crimson: \"dc143c\",\n    cyan: \"0ff\",\n    darkblue: \"00008b\",\n    darkcyan: \"008b8b\",\n    darkgoldenrod: \"b8860b\",\n    darkgray: \"a9a9a9\",\n    darkgreen: \"006400\",\n    darkgrey: \"a9a9a9\",\n    darkkhaki: \"bdb76b\",\n    darkmagenta: \"8b008b\",\n    darkolivegreen: \"556b2f\",\n    darkorange: \"ff8c00\",\n    darkorchid: \"9932cc\",\n    darkred: \"8b0000\",\n    darksalmon: \"e9967a\",\n    darkseagreen: \"8fbc8f\",\n    darkslateblue: \"483d8b\",\n    darkslategray: \"2f4f4f\",\n    darkslategrey: \"2f4f4f\",\n    darkturquoise: \"00ced1\",\n    darkviolet: \"9400d3\",\n    deeppink: \"ff1493\",\n    deepskyblue: \"00bfff\",\n    dimgray: \"696969\",\n    dimgrey: \"696969\",\n    dodgerblue: \"1e90ff\",\n    firebrick: \"b22222\",\n    floralwhite: \"fffaf0\",\n    forestgreen: \"228b22\",\n    fuchsia: \"f0f\",\n    gainsboro: \"dcdcdc\",\n    ghostwhite: \"f8f8ff\",\n    gold: \"ffd700\",\n    goldenrod: \"daa520\",\n    gray: \"808080\",\n    green: \"008000\",\n    greenyellow: \"adff2f\",\n    grey: \"808080\",\n    honeydew: \"f0fff0\",\n    hotpink: \"ff69b4\",\n    indianred: \"cd5c5c\",\n    indigo: \"4b0082\",\n    ivory: \"fffff0\",\n    khaki: \"f0e68c\",\n    lavender: \"e6e6fa\",\n    lavenderblush: \"fff0f5\",\n    lawngreen: \"7cfc00\",\n    lemonchiffon: \"fffacd\",\n    lightblue: \"add8e6\",\n    lightcoral: \"f08080\",\n    lightcyan: \"e0ffff\",\n    lightgoldenrodyellow: \"fafad2\",\n    lightgray: \"d3d3d3\",\n    lightgreen: \"90ee90\",\n    lightgrey: \"d3d3d3\",\n    lightpink: \"ffb6c1\",\n    lightsalmon: \"ffa07a\",\n    lightseagreen: \"20b2aa\",\n    lightskyblue: \"87cefa\",\n    lightslategray: \"789\",\n    lightslategrey: \"789\",\n    lightsteelblue: \"b0c4de\",\n    lightyellow: \"ffffe0\",\n    lime: \"0f0\",\n    limegreen: \"32cd32\",\n    linen: \"faf0e6\",\n    magenta: \"f0f\",\n    maroon: \"800000\",\n    mediumaquamarine: \"66cdaa\",\n    mediumblue: \"0000cd\",\n    mediumorchid: \"ba55d3\",\n    mediumpurple: \"9370db\",\n    mediumseagreen: \"3cb371\",\n    mediumslateblue: \"7b68ee\",\n    mediumspringgreen: \"00fa9a\",\n    mediumturquoise: \"48d1cc\",\n    mediumvioletred: \"c71585\",\n    midnightblue: \"191970\",\n    mintcream: \"f5fffa\",\n    mistyrose: \"ffe4e1\",\n    moccasin: \"ffe4b5\",\n    navajowhite: \"ffdead\",\n    navy: \"000080\",\n    oldlace: \"fdf5e6\",\n    olive: \"808000\",\n    olivedrab: \"6b8e23\",\n    orange: \"ffa500\",\n    orangered: \"ff4500\",\n    orchid: \"da70d6\",\n    palegoldenrod: \"eee8aa\",\n    palegreen: \"98fb98\",\n    paleturquoise: \"afeeee\",\n    palevioletred: \"db7093\",\n    papayawhip: \"ffefd5\",\n    peachpuff: \"ffdab9\",\n    peru: \"cd853f\",\n    pink: \"ffc0cb\",\n    plum: \"dda0dd\",\n    powderblue: \"b0e0e6\",\n    purple: \"800080\",\n    rebeccapurple: \"663399\",\n    red: \"f00\",\n    rosybrown: \"bc8f8f\",\n    royalblue: \"4169e1\",\n    saddlebrown: \"8b4513\",\n    salmon: \"fa8072\",\n    sandybrown: \"f4a460\",\n    seagreen: \"2e8b57\",\n    seashell: \"fff5ee\",\n    sienna: \"a0522d\",\n    silver: \"c0c0c0\",\n    skyblue: \"87ceeb\",\n    slateblue: \"6a5acd\",\n    slategray: \"708090\",\n    slategrey: \"708090\",\n    snow: \"fffafa\",\n    springgreen: \"00ff7f\",\n    steelblue: \"4682b4\",\n    tan: \"d2b48c\",\n    teal: \"008080\",\n    thistle: \"d8bfd8\",\n    tomato: \"ff6347\",\n    turquoise: \"40e0d0\",\n    violet: \"ee82ee\",\n    wheat: \"f5deb3\",\n    white: \"fff\",\n    whitesmoke: \"f5f5f5\",\n    yellow: \"ff0\",\n    yellowgreen: \"9acd32\"\n};\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = tinycolor.hexNames = flip(names);\n\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n    var flipped = { };\n    for (var i in o) {\n        if (o.hasOwnProperty(i)) {\n            flipped[o[i]] = i;\n        }\n    }\n    return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n    a = parseFloat(a);\n\n    if (isNaN(a) || a < 0 || a > 1) {\n        a = 1;\n    }\n\n    return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n    if (isOnePointZero(n)) { n = \"100%\"; }\n\n    var processPercent = isPercentage(n);\n    n = mathMin(max, mathMax(0, parseFloat(n)));\n\n    // Automatically convert percentage into number\n    if (processPercent) {\n        n = parseInt(n * max, 10) / 100;\n    }\n\n    // Handle floating point rounding errors\n    if ((Math.abs(n - max) < 0.000001)) {\n        return 1;\n    }\n\n    // Convert into [0, 1] range if it isn't already\n    return (n % max) / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n    return mathMin(1, mathMax(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n    return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n    return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n    return typeof n === \"string\" && n.indexOf('%') != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n    return c.length == 1 ? '0' + c : '' + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n    if (n <= 1) {\n        n = (n * 100) + \"%\";\n    }\n\n    return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n    return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n    return (parseIntFromHex(h) / 255);\n}\n\nvar matchers = (function() {\n\n    // <http://www.w3.org/TR/css3-values/#integers>\n    var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n    // <http://www.w3.org/TR/css3-values/#number-value>\n    var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n    // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n    var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n    // Actual matching.\n    // Parentheses and commas are optional, but not required.\n    // Whitespace can take the place of commas or opening paren\n    var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n    var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n\n    return {\n        CSS_UNIT: new RegExp(CSS_UNIT),\n        rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n        rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n        hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n        hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n        hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n        hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n        hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n        hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n    };\n})();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n    return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n\n    color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\n    var named = false;\n    if (names[color]) {\n        color = names[color];\n        named = true;\n    }\n    else if (color == 'transparent') {\n        return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n    }\n\n    // Try to match string input using regular expressions.\n    // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n    // Just return an object and let the conversion functions handle that.\n    // This way the result will be the same whether the tinycolor is initialized with string or object.\n    var match;\n    if ((match = matchers.rgb.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3] };\n    }\n    if ((match = matchers.rgba.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsl.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3] };\n    }\n    if ((match = matchers.hsla.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsv.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3] };\n    }\n    if ((match = matchers.hsva.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3], a: match[4] };\n    }\n    if ((match = matchers.hex8.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            a: convertHexToDecimal(match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex6.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n    if ((match = matchers.hex4.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            a: convertHexToDecimal(match[4] + '' + match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex3.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n\n    return false;\n}\n\nfunction validateWCAG2Parms(parms) {\n    // return valid WCAG2 parms for isReadable.\n    // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n    var level, size;\n    parms = parms || {\"level\":\"AA\", \"size\":\"small\"};\n    level = (parms.level || \"AA\").toUpperCase();\n    size = (parms.size || \"small\").toLowerCase();\n    if (level !== \"AA\" && level !== \"AAA\") {\n        level = \"AA\";\n    }\n    if (size !== \"small\" && size !== \"large\") {\n        size = \"small\";\n    }\n    return {\"level\":level, \"size\":size};\n}\n\n// Node: Export function\nif (typeof module !== \"undefined\" && module.exports) {\n    module.exports = tinycolor;\n}\n// AMD/requirejs: Define the module\nelse if (typeof define === 'function' && define.amd) {\n    define(function () {return tinycolor;});\n}\n// Browser: Expose to window\nelse {\n    window.tinycolor = tinycolor;\n}\n\n})(Math);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/bcronin/lightstep-workspace/lightstep-grafana-plugin/node_modules/tinycolor2/tinycolor.js\n// module id = 7\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"app/plugins/sdk\"\n// module id = 8\n// module chunks = 0","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 9\n// module chunks = 0","///<reference path=\"../../../headers/common.d.ts\" />\n\nimport './graph';\nimport './legend';\nimport './series_overrides_ctrl';\nimport './thresholds_form';\n\nimport template from './template';\nimport _ from 'lodash';\nimport config from 'grafana/app/core/config';\nimport {MetricsPanelCtrl, alertTab} from 'grafana/app/plugins/sdk';\nimport {DataProcessor} from './data_processor';\nimport {axesEditorComponent} from './axes_editor';\n\nclass GraphCtrl extends MetricsPanelCtrl {\n\n  /** @ngInject */\n  constructor($scope, $injector, annotationsSrv) {\n    super($scope, $injector);\n    this.$scope = $scope\n    this.$injector = $injector;\n    this.annotationsSrv = annotationsSrv;\n\n    this.hiddenSeries = {};\n    this.seriesList = [];\n    this.dataList = [];\n    this.annotations = [];\n    this.alertState = null;\n\n    this.annotationsPromise = Promise.resolve({ annotations: [] });\n    this.dataWarning = null;\n    this.colors = [];\n    this.subTabIndex = 0;\n\n    this.panelDefaults = {\n      // datasource name, null = default datasource\n      datasource: null,\n      // sets client side (flot) or native graphite png renderer (png)\n      renderer: 'flot',\n      yaxes: [\n        {\n          label: null,\n          show: true,\n          logBase: 1,\n          min: null,\n          max: null,\n          format: 'short'\n        },\n        {\n          label: null,\n          show: true,\n          logBase: 1,\n          min: null,\n          max: null,\n          format: 'short'\n        }\n      ],\n      xaxis: {\n        show: true,\n        mode: 'time',\n        name: null,\n        values: [],\n        buckets: null\n      },\n      // show/hide lines\n      lines         : true,\n      // fill factor\n      fill          : 1,\n      // line width in pixels\n      linewidth     : 1,\n      // show/hide dashed line\n      dashes        : false,\n      // length of a dash\n      dashLength    : 10,\n      // length of space between two dashes\n      spaceLength   : 10,\n      // show hide points\n      points        : false,\n      // point radius in pixels\n      pointradius   : 5,\n      // show hide bars\n      bars          : false,\n      // enable/disable stacking\n      stack         : false,\n      // stack percentage mode\n      percentage    : false,\n      // legend options\n      legend: {\n        show: true, // disable/enable legend\n        values: false, // disable/enable legend values\n        min: false,\n        max: false,\n        current: false,\n        total: false,\n        avg: false\n      },\n      // how null points should be handled\n      nullPointMode : 'null',\n      // staircase line mode\n      steppedLine: false,\n      // tooltip options\n      tooltip       : {\n        value_type: 'individual',\n        shared: true,\n        sort: 0,\n      },\n      // time overrides\n      timeFrom: null,\n      timeShift: null,\n      // metric queries\n      targets: [{}],\n      // series color overrides\n      aliasColors: {},\n      // other style overrides\n      seriesOverrides: [{\n        alias: '/traces/',\n        lines: false,\n        points: true,\n        pointradius: 1,\n      }],\n      thresholds: [],\n    };\n\n\n    _.defaults(this.panel, this.panelDefaults);\n    _.defaults(this.panel.tooltip, this.panelDefaults.tooltip);\n    _.defaults(this.panel.legend, this.panelDefaults.legend);\n    _.defaults(this.panel.xaxis, this.panelDefaults.xaxis);\n\n    this.processor = new DataProcessor(this.panel);\n\n    this.events.on('render', this.onRender.bind(this));\n    this.events.on('data-received', this.onDataReceived.bind(this));\n    this.events.on('data-error', this.onDataError.bind(this));\n    this.events.on('data-snapshot-load', this.onDataSnapshotLoad.bind(this));\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n    this.events.on('init-panel-actions', this.onInitPanelActions.bind(this));\n  }\n\n  onInitEditMode() {\n    this.addEditorTab('Axes', axesEditorComponent, 2);\n    this.addEditorTab('Legend', 'public/app/plugins/panel/graph/tab_legend.html', 3);\n    this.addEditorTab('Display', 'public/app/plugins/panel/graph/tab_display.html', 4);\n\n    if (config.alertingEnabled) {\n      this.addEditorTab('Alert', alertTab, 5);\n    }\n\n    this.subTabIndex = 0;\n  }\n\n  onInitPanelActions(actions) {\n    actions.push({text: 'Export CSV', click: 'ctrl.exportCsv()'});\n    actions.push({text: 'Toggle legend', click: 'ctrl.toggleLegend()'});\n  }\n\n  issueQueries(datasource) {\n    this.annotationsPromise = this.annotationsSrv.getAnnotations({\n      dashboard: this.dashboard,\n      panel: this.panel,\n      range: this.range,\n    });\n    return super.issueQueries(datasource);\n  }\n\n  zoomOut(evt) {\n    this.publishAppEvent('zoom-out', 2);\n  }\n\n  onDataSnapshotLoad(snapshotData) {\n    this.annotationsPromise = this.annotationsSrv.getAnnotations({\n      dashboard: this.dashboard,\n      panel: this.panel,\n      range: this.range,\n    });\n    this.onDataReceived(snapshotData);\n  }\n\n  onDataError(err) {\n    this.seriesList = [];\n    this.annotations = [];\n    this.render([]);\n  }\n\n  onDataReceived(dataList) {\n    this.dataList = dataList;\n    this.seriesList = this.processor.getSeriesList({dataList: dataList, range: this.range});\n\n    this.dataWarning = null;\n    const datapointsCount = this.seriesList.reduce((prev, series) => {\n      return prev + series.datapoints.length;\n    }, 0);\n\n    if (datapointsCount === 0) {\n      this.dataWarning = {\n        title: 'No data points',\n        tip: 'No datapoints returned from data query'\n      };\n    } else {\n\n      for (let series of this.seriesList) {\n        if (series.isOutsideRange) {\n          this.dataWarning = {\n            title: 'Data points outside time range',\n            tip: 'Can be caused by timezone mismatch or missing time filter in query',\n          };\n          break;\n        }\n      }\n    }\n\n    this.annotationsPromise.then(result => {\n      this.loading = false;\n      this.alertState = result.alertState;\n      this.annotations = result.annotations;\n      this.render(this.seriesList);\n    }, () => {\n      this.loading = false;\n      this.render(this.seriesList);\n    });\n  }\n\n  onRender() {\n    if (!this.seriesList) { return; }\n\n    for (let series of this.seriesList) {\n      series.applySeriesOverrides(this.panel.seriesOverrides);\n\n      if (series.unit) {\n        this.panel.yaxes[series.yaxis-1].format = series.unit;\n      }\n    }\n  }\n\n  changeSeriesColor(series, color) {\n    series.color = color;\n    this.panel.aliasColors[series.alias] = series.color;\n    this.render();\n  }\n\n  toggleSeries(serie, event) {\n    if (event.ctrlKey || event.metaKey || event.shiftKey) {\n      if (this.hiddenSeries[serie.alias]) {\n        delete this.hiddenSeries[serie.alias];\n      } else {\n        this.hiddenSeries[serie.alias] = true;\n      }\n    } else {\n      this.toggleSeriesExclusiveMode(serie);\n    }\n    this.render();\n  }\n\n  toggleSeriesExclusiveMode (serie) {\n    var hidden = this.hiddenSeries;\n\n    if (hidden[serie.alias]) {\n      delete hidden[serie.alias];\n    }\n\n    // check if every other series is hidden\n    var alreadyExclusive = _.every(this.seriesList, value => {\n      if (value.alias === serie.alias) {\n        return true;\n      }\n\n      return hidden[value.alias];\n    });\n\n    if (alreadyExclusive) {\n      // remove all hidden series\n      _.each(this.seriesList, value => {\n        delete this.hiddenSeries[value.alias];\n      });\n    } else {\n      // hide all but this serie\n      _.each(this.seriesList, value => {\n        if (value.alias === serie.alias) {\n          return;\n        }\n\n        this.hiddenSeries[value.alias] = true;\n      });\n    }\n  }\n\n  toggleAxis(info) {\n    var override = _.find(this.panel.seriesOverrides, {alias: info.alias});\n    if (!override) {\n      override = { alias: info.alias };\n      this.panel.seriesOverrides.push(override);\n    }\n    info.yaxis = override.yaxis = info.yaxis === 2 ? 1 : 2;\n    this.render();\n  }\n\n  addSeriesOverride(override) {\n    this.panel.seriesOverrides.push(override || {});\n  }\n\n  removeSeriesOverride(override) {\n    this.panel.seriesOverrides = _.without(this.panel.seriesOverrides, override);\n    this.render();\n  }\n\n  toggleLegend() {\n    this.panel.legend.show = !this.panel.legend.show;\n    this.refresh();\n  }\n\n  legendValuesOptionChanged() {\n    var legend = this.panel.legend;\n    legend.values = legend.min || legend.max || legend.avg || legend.current || legend.total;\n    this.render();\n  }\n\n  exportCsv() {\n    var scope = this.$scope.$new(true);\n    scope.seriesList = this.seriesList;\n    this.publishAppEvent('show-modal', {\n      templateHtml: '<export-data-modal data=\"seriesList\"></export-data-modal>',\n      scope,\n      modalClass: 'modal--narrow'\n    });\n  }\n}\n\nGraphCtrl.template = template;\n\nexport {GraphCtrl, GraphCtrl as PanelCtrl};\n\n\n\n// WEBPACK FOOTER //\n// ./module.js","///<reference path=\"../../../headers/common.d.ts\" />\n\nimport './vendor/flot/jquery.flot';\nimport './vendor/flot/jquery.flot.selection';\nimport './vendor/flot/jquery.flot.time';\nimport './vendor/flot/jquery.flot.stack';\nimport './vendor/flot/jquery.flot.stackpercent';\nimport './vendor/flot/jquery.flot.fillbelow';\nimport './vendor/flot/jquery.flot.crosshair';\nimport './vendor/flot/jquery.flot.dashes';\nimport './jquery.flot.events';\n\nimport $ from 'jquery';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport kbn from 'grafana/app/core/utils/kbn';\nimport {tickStep} from 'grafana/app/core/utils/ticks';\nimport {appEvents, coreModule} from 'grafana/app/core/core';\nimport GraphTooltip from './graph_tooltip';\nimport {ThresholdManager} from './threshold_manager';\nimport {EventManager} from './event_manager';\nimport {convertValuesToHistogram, getSeriesValues} from './histogram';\n\n/** @ngInject **/\nfunction graphDirective($rootScope, timeSrv, popoverSrv, contextSrv) {\n  return {\n    restrict: 'A',\n    template: '',\n    link: function(scope, elem) {\n      var ctrl = scope.ctrl;\n      var dashboard = ctrl.dashboard;\n      var panel = ctrl.panel;\n      var annotations = [];\n      var data;\n      var plot;\n      var sortedSeries;\n      var legendSideLastValue = null;\n      var rootScope = scope.$root;\n      var panelWidth = 0;\n      var eventManager = new EventManager(ctrl);\n      var thresholdManager = new ThresholdManager(ctrl);\n      var tooltip = new GraphTooltip(elem, dashboard, scope, function() {\n        return sortedSeries;\n      });\n\n      // panel events\n      ctrl.events.on('panel-teardown', () => {\n        thresholdManager = null;\n\n        if (plot) {\n          plot.destroy();\n          plot = null;\n        }\n      });\n\n      ctrl.events.on('render', function (renderData) {\n        data = renderData || data;\n        if (!data) {\n          return;\n        }\n        annotations = ctrl.annotations || [];\n        render_panel();\n      });\n\n      // global events\n      appEvents.on('graph-hover', function(evt) {\n        // ignore other graph hover events if shared tooltip is disabled\n        if (!dashboard.sharedTooltipModeEnabled()) {\n          return;\n        }\n\n          // ignore if we are the emitter\n        if (!plot || evt.panel.id === panel.id || ctrl.otherPanelInFullscreenMode()) {\n          return;\n        }\n\n          tooltip.show(evt.pos);\n        },\n        scope\n      );\n\n      appEvents.on(\n        \"graph-hover-clear\",\n        function (event, info) {\n          if (plot) {\n            tooltip.clear(plot);\n          }\n        },\n        scope\n      );\n\n      function getLegendHeight(panelHeight) {\n        if (!panel.legend.show || panel.legend.rightSide) {\n          return 0;\n        }\n\n        if (panel.legend.alignAsTable) {\n          var legendSeries = _.filter(data, function (series) {\n            return series.hideFromLegend(panel.legend) === false;\n          });\n          var total = 23 + 21 * legendSeries.length;\n          return Math.min(total, Math.floor(panelHeight / 2));\n        } else {\n          return 26;\n        }\n      }\n\n      function getHeight() {\n        if (ctrl.height) {\n          return ctrl.height;\n        }\n        if (ctrl.scope.$parent && ctrl.scope.$parent.size) {\n          return ctrl.scope.$parent.size.height;\n        }\n\n        // for backward compatibility (grafana 6.6.0 and earlier)\n        const panelContentElement = document.querySelector('.panel-content');\n        if (panelContentElement.clientHeight) {\n          return panelContentElement.clientHeight\n        }\n        throw new Error('Unable to calculate height of graph');\n      }\n\n      function setElementHeight() {\n        try {\n          var height = getHeight() - getLegendHeight(getHeight());\n          elem.css('height', height + 'px');\n\n          return true;\n        } catch (e) { // IE throws errors sometimes\n          console.log(e);\n          return false;\n        }\n      }\n\n      function shouldAbortRender() {\n        if (!data) {\n          return true;\n        }\n\n        if (!setElementHeight()) { return true; }\n\n        if (panelWidth === 0) {\n          return true;\n        }\n\n        return false;\n      }\n\n      function drawHook(plot) {\n        // Update legend values\n        var yaxis = plot.getYAxes();\n        for (var i = 0; i < data.length; i++) {\n          var series = data[i];\n          var axis = yaxis[series.yaxis - 1];\n          var formater = kbn.valueFormats[panel.yaxes[series.yaxis - 1].format];\n\n          // decimal override\n          if (_.isNumber(panel.decimals)) {\n            series.updateLegendValues(formater, panel.decimals, null);\n          } else {\n            // auto decimals\n            // legend and tooltip gets one more decimal precision\n            // than graph legend ticks\n            var tickDecimals = (axis.tickDecimals || -1) + 1;\n            series.updateLegendValues(formater, tickDecimals, axis.scaledDecimals + 2);\n          }\n\n          if (!rootScope.$$phase) { scope.$digest(); }\n        }\n\n        // add left axis labels\n        if (panel.yaxes[0].label && panel.yaxes[0].show) {\n          $(\"<div class='axisLabel left-yaxis-label flot-temp-elem'></div>\").text(panel.yaxes[0].label).appendTo(elem);\n        }\n\n        // add right axis labels\n        if (panel.yaxes[1].label && panel.yaxes[1].show) {\n          $(\"<div class='axisLabel right-yaxis-label flot-temp-elem'></div>\").text(panel.yaxes[1].label).appendTo(elem);\n        }\n\n        thresholdManager.draw(plot);\n      }\n\n      function processOffsetHook(plot, gridMargin) {\n        var left = panel.yaxes[0];\n        var right = panel.yaxes[1];\n        if (left.show && left.label) { gridMargin.left = 20; }\n        if (right.show && right.label) { gridMargin.right = 20; }\n\n        // apply y-axis min/max options\n        var yaxis = plot.getYAxes();\n        for (var i = 0; i < yaxis.length; i++) {\n          var axis = yaxis[i];\n          var panelOptions = panel.yaxes[i];\n          axis.options.max = axis.options.max !== null ? axis.options.max : panelOptions.max;\n          axis.options.min = axis.options.min !== null ? axis.options.min : panelOptions.min;\n        }\n      }\n\n      // Series could have different timeSteps,\n      // let's find the smallest one so that bars are correctly rendered.\n      // In addition, only take series which are rendered as bars for this.\n      function getMinTimeStepOfSeries(data) {\n        var min = Number.MAX_VALUE;\n\n        for (let i = 0; i < data.length; i++) {\n          if (!data[i].stats.timeStep) {\n            continue;\n          }\n          if (panel.bars) {\n            if (data[i].bars && data[i].bars.show === false) {\n              continue;\n            }\n          } else {\n            if (typeof data[i].bars === 'undefined' || typeof data[i].bars.show === 'undefined' || !data[i].bars.show) {\n              continue;\n            }\n          }\n\n          if (data[i].stats.timeStep < min) {\n            min = data[i].stats.timeStep;\n          }\n        }\n\n        return min;\n      }\n\n      // Function for rendering panel\n      function render_panel() {\n        panelWidth =  elem.width();\n\n        if (shouldAbortRender()) {\n          return;\n        }\n\n        // give space to alert editing\n        thresholdManager.prepare(elem, data);\n\n        // un-check dashes if lines are unchecked\n        panel.dashes = panel.lines ? panel.dashes : false;\n\n        var stack = panel.stack ? true : null;\n\n        // Populate element\n        var options = {\n          hooks: {\n            draw: [drawHook],\n            processOffset: [processOffsetHook],\n          },\n          legend: { show: false },\n          series: {\n            stackpercent: panel.stack ? panel.percentage : false,\n            stack: panel.percentage ? null : stack,\n            lines:  {\n              show: panel.lines,\n              zero: false,\n              fill: translateFillOption(panel.fill),\n              lineWidth: panel.dashes ? 0 : panel.linewidth,\n              steps: panel.steppedLine\n            },\n            dashes: {\n              show: panel.dashes,\n              lineWidth: panel.linewidth,\n              dashLength: [panel.dashLength, panel.spaceLength]\n            },\n            bars: {\n              show: panel.bars,\n              fill: 1,\n              barWidth: 1,\n              zero: false,\n              lineWidth: 0\n            },\n            points: {\n              show: panel.points,\n              fill: 1,\n              fillColor: false,\n              radius: panel.points ? panel.pointradius : 2,\n            },\n            shadowSize: 0,\n          },\n          yaxes: [],\n          xaxis: {},\n          grid: {\n            minBorderMargin: 0,\n            markings: [],\n            backgroundColor: null,\n            borderWidth: 0,\n            hoverable: true,\n            clickable: true,\n            color: \"#c8c8c8\",\n            margin: { left: 0, right: 0 },\n            labelMarginX: 0,\n          },\n          selection: {\n            mode: \"x\",\n            color: \"#666\",\n          },\n          crosshair: {\n            mode: \"x\",\n          },\n        };\n\n        for (let i = 0; i < data.length; i++) {\n          let series = data[i];\n          series.data = series.getFlotPairs(\n            series.nullPointMode || panel.nullPointMode\n          );\n\n          // if hidden remove points and disable stack\n          if (ctrl.hiddenSeries[series.alias]) {\n            series.data = [];\n            series.stack = false;\n          }\n        }\n\n        switch (panel.xaxis.mode) {\n          case \"series\": {\n            options.series.bars.barWidth = 0.7;\n            options.series.bars.align = \"center\";\n\n            for (let i = 0; i < data.length; i++) {\n              let series = data[i];\n              series.data = [[i + 1, series.stats[panel.xaxis.values[0]]]];\n            }\n\n            addXSeriesAxis(options);\n            break;\n          }\n          case \"histogram\": {\n            let bucketSize = 0;\n            let values = getSeriesValues(data);\n\n            if (data.length && values.length) {\n              let histMin = _.min(_.map(data, (s) => s.stats.min));\n              let histMax = _.max(_.map(data, (s) => s.stats.max));\n              let ticks = panel.xaxis.buckets || panelWidth / 50;\n              bucketSize = tickStep(histMin, histMax, ticks);\n              let histogram = convertValuesToHistogram(values, bucketSize);\n\n              data[0].data = histogram;\n              data[0].alias = data[0].label = data[0].id = \"count\";\n              data = [data[0]];\n\n              options.series.bars.barWidth = bucketSize * 0.8;\n            } else {\n              bucketSize = 0;\n            }\n\n            addXHistogramAxis(options, bucketSize);\n            break;\n          }\n          case \"table\": {\n            options.series.bars.barWidth = 0.7;\n            options.series.bars.align = \"center\";\n            addXTableAxis(options);\n            break;\n          }\n          default: {\n            options.series.bars.barWidth = getMinTimeStepOfSeries(data) / 1.5;\n            addTimeAxis(options);\n            break;\n          }\n        }\n\n        thresholdManager.addFlotOptions(options, panel);\n        eventManager.addFlotEvents(annotations, options);\n        configureAxisOptions(data, options);\n\n        sortedSeries = _.sortBy(data, function (series) {\n          return series.zindex;\n        });\n\n        function callPlot(incrementRenderCounter) {\n          try {\n            plot = $.plot(elem, sortedSeries, options);\n            if (ctrl.renderError) {\n              delete ctrl.error;\n              delete ctrl.inspector;\n            }\n          } catch (e) {\n            console.log('flotcharts error', e);\n            ctrl.error = e.message || \"Render Error\";\n            ctrl.renderError = true;\n            ctrl.inspector = { error: e };\n          }\n\n          if (incrementRenderCounter) {\n            ctrl.renderingCompleted();\n          }\n        }\n\n        if (shouldDelayDraw(panel)) {\n          // temp fix for legends on the side, need to render twice to get dimensions right\n          callPlot(false);\n          setTimeout(function () {\n            callPlot(true);\n          }, 50);\n          legendSideLastValue = panel.legend.rightSide;\n        } else {\n          callPlot(true);\n        }\n      }\n\n      function translateFillOption(fill) {\n        if (panel.percentage && panel.stack) {\n          return fill === 0 ? 0.001 : fill / 10;\n        } else {\n          return fill / 10;\n        }\n      }\n\n      function shouldDelayDraw(panel) {\n        if (panel.legend.rightSide) {\n          return true;\n        }\n        if (\n          legendSideLastValue !== null &&\n          panel.legend.rightSide !== legendSideLastValue\n        ) {\n          return true;\n        }\n        return false;\n      }\n\n      function addTimeAxis(options) {\n        var ticks = panelWidth / 100;\n        var min = _.isUndefined(ctrl.range.from)\n          ? null\n          : ctrl.range.from.valueOf();\n        var max = _.isUndefined(ctrl.range.to) ? null : ctrl.range.to.valueOf();\n\n        options.xaxis = {\n          timezone: dashboard.getTimezone(),\n          show: panel.xaxis.show,\n          mode: \"time\",\n          min: min,\n          max: max,\n          label: \"Datetime\",\n          ticks: ticks,\n          timeformat: time_format(ticks, min, max),\n        };\n      }\n\n      function addXSeriesAxis(options) {\n        var ticks = _.map(data, function (series, index) {\n          return [index + 1, series.alias];\n        });\n\n        options.xaxis = {\n          timezone: dashboard.getTimezone(),\n          show: panel.xaxis.show,\n          mode: null,\n          min: 0,\n          max: ticks.length + 1,\n          label: \"Datetime\",\n          ticks: ticks,\n        };\n      }\n\n      function addXHistogramAxis(options, bucketSize) {\n        let ticks, min, max;\n        let defaultTicks = panelWidth / 50;\n\n        if (data.length && bucketSize) {\n          ticks = _.map(data[0].data, (point) => point[0]);\n          min = _.min(ticks);\n          max = _.max(ticks);\n\n          // Adjust tick step\n          let tickStep = bucketSize;\n          let ticks_num = Math.floor((max - min) / tickStep);\n          while (ticks_num > defaultTicks) {\n            tickStep = tickStep * 2;\n            ticks_num = Math.ceil((max - min) / tickStep);\n          }\n\n          // Expand ticks for pretty view\n          min = Math.floor(min / tickStep) * tickStep;\n          max = Math.ceil(max / tickStep) * tickStep;\n\n          ticks = [];\n          for (let i = min; i <= max; i += tickStep) {\n            ticks.push(i);\n          }\n        } else {\n          // Set defaults if no data\n          ticks = defaultTicks / 2;\n          min = 0;\n          max = 1;\n        }\n\n        options.xaxis = {\n          timezone: dashboard.getTimezone(),\n          show: panel.xaxis.show,\n          mode: null,\n          min: min,\n          max: max,\n          label: \"Histogram\",\n          ticks: ticks,\n        };\n\n        // Use 'short' format for histogram values\n        configureAxisMode(options.xaxis, 'short');\n      }\n\n      function addXTableAxis(options) {\n        var ticks = _.map(data, function (series, seriesIndex) {\n          return _.map(series.datapoints, function (point, pointIndex) {\n            var tickIndex = seriesIndex * series.datapoints.length + pointIndex;\n            return [tickIndex + 1, point[1]];\n          });\n        });\n        ticks = _.flatten(ticks, true);\n\n        options.xaxis = {\n          timezone: dashboard.getTimezone(),\n          show: panel.xaxis.show,\n          mode: null,\n          min: 0,\n          max: ticks.length + 1,\n          label: \"Datetime\",\n          ticks: ticks\n        };\n      }\n\n      function configureAxisOptions(data, options) {\n        var defaults = {\n          position: 'left',\n          show: panel.yaxes[0].show,\n          index: 1,\n          logBase: panel.yaxes[0].logBase || 1,\n          min: parseNumber(panel.yaxes[0].min),\n          max: parseNumber(panel.yaxes[0].max),\n          tickDecimals: panel.yaxes[0].decimals,\n        };\n\n        options.yaxes.push(defaults);\n\n        if (_.find(data, { yaxis: 2 })) {\n          var secondY = _.clone(defaults);\n          secondY.index = 2;\n          secondY.show = panel.yaxes[1].show;\n          secondY.logBase = panel.yaxes[1].logBase || 1;\n          secondY.position = 'right';\n          secondY.min = parseNumber(panel.yaxes[1].min);\n          secondY.max = parseNumber(panel.yaxes[1].max);\n          secondY.tickDecimals = panel.yaxes[1].decimals;\n          options.yaxes.push(secondY);\n\n          applyLogScale(options.yaxes[1], data);\n          configureAxisMode(options.yaxes[1], panel.percentage && panel.stack ? \"percent\" : panel.yaxes[1].format);\n        }\n        applyLogScale(options.yaxes[0], data);\n        configureAxisMode(options.yaxes[0], panel.percentage && panel.stack ? \"percent\" : panel.yaxes[0].format);\n      }\n\n      function parseNumber(value) {\n        if (value === null || typeof value === \"undefined\") {\n          return null;\n        }\n\n        return _.toNumber(value);\n      }\n\n      function applyLogScale(axis, data) {\n        if (axis.logBase === 1) {\n          return;\n        }\n\n        const minSetToZero = axis.min === 0;\n\n        if (axis.min < Number.MIN_VALUE) {\n          axis.min = null;\n        }\n        if (axis.max < Number.MIN_VALUE) {\n          axis.max = null;\n        }\n\n        var series, i;\n        var max = axis.max,\n          min = axis.min;\n\n        for (i = 0; i < data.length; i++) {\n          series = data[i];\n          if (series.yaxis === axis.index) {\n            if (!max || max < series.stats.max) {\n              max = series.stats.max;\n            }\n            if (!min || min > series.stats.logmin) {\n              min = series.stats.logmin;\n            }\n          }\n        }\n\n        axis.transform = function (v) {\n          return v < Number.MIN_VALUE\n            ? null\n            : Math.log(v) / Math.log(axis.logBase);\n        };\n        axis.inverseTransform = function (v) {\n          return Math.pow(axis.logBase, v);\n        };\n\n        if (!max && !min) {\n          max = axis.inverseTransform(+2);\n          min = axis.inverseTransform(-2);\n        } else if (!max) {\n          max = min * axis.inverseTransform(+4);\n        } else if (!min) {\n          min = max * axis.inverseTransform(-4);\n        }\n\n        if (axis.min) {\n          min = axis.inverseTransform(Math.ceil(axis.transform(axis.min)));\n        } else {\n          min = axis.min = axis.inverseTransform(\n            Math.floor(axis.transform(min))\n          );\n        }\n        if (axis.max) {\n          max = axis.inverseTransform(Math.floor(axis.transform(axis.max)));\n        } else {\n          max = axis.max = axis.inverseTransform(\n            Math.ceil(axis.transform(max))\n          );\n        }\n\n        if (!min || min < Number.MIN_VALUE || !max || max < Number.MIN_VALUE) {\n          return;\n        }\n\n        if (Number.isFinite(min) && Number.isFinite(max)) {\n          if (minSetToZero) {\n            axis.min = 0.1;\n            min = 1;\n          }\n\n          axis.ticks = generateTicksForLogScaleYAxis(min, max, axis.logBase);\n          if (minSetToZero) {\n            axis.ticks.unshift(0.1);\n          }\n          if (axis.ticks[axis.ticks.length - 1] > axis.max) {\n            axis.max = axis.ticks[axis.ticks.length - 1];\n          }\n        } else {\n          axis.ticks = [1, 2];\n          delete axis.min;\n          delete axis.max;\n        }\n      }\n\n      function generateTicksForLogScaleYAxis(min, max, logBase) {\n        let ticks = [];\n\n        var nextTick;\n        for (nextTick = min; nextTick <= max; nextTick *= logBase) {\n          ticks.push(nextTick);\n        }\n\n        const maxNumTicks = Math.ceil(ctrl.height / 25);\n        const numTicks = ticks.length;\n        if (numTicks > maxNumTicks) {\n          const factor = Math.ceil(numTicks / maxNumTicks) * logBase;\n          ticks = [];\n\n          for (nextTick = min; nextTick <= max * factor; nextTick *= factor) {\n            ticks.push(nextTick);\n          }\n        }\n\n        return ticks;\n      }\n\n      function configureAxisMode(axis, format) {\n        axis.tickFormatter = function (val, axis) {\n          return kbn.valueFormats[format](\n            val,\n            axis.tickDecimals,\n            axis.scaledDecimals\n          );\n        };\n      }\n\n      function time_format(ticks, min, max) {\n        if (min && max && ticks) {\n          var range = max - min;\n          var secPerTick = range / ticks / 1000;\n          var oneDay = 86400000;\n          var oneYear = 31536000000;\n\n          if (secPerTick <= 45) {\n            return \"%H:%M:%S\";\n          }\n          if (secPerTick <= 7200 || range <= oneDay) {\n            return \"%H:%M\";\n          }\n          if (secPerTick <= 80000) {\n            return \"%m/%d %H:%M\";\n          }\n          if (secPerTick <= 2419200 || range <= oneYear) {\n            return \"%m/%d\";\n          }\n          return \"%Y-%m\";\n        }\n\n        return \"%H:%M\";\n      }\n\n      elem.bind(\"plotselected\", function (event, ranges) {\n        if ((ranges.ctrlKey || ranges.metaKey) && contextSrv.isEditor) {\n          setTimeout(() => {\n            eventManager.updateTime(ranges.xaxis);\n          }, 100);\n        } else {\n          scope.$apply(function () {\n            timeSrv.setTime({\n              from: moment.utc(ranges.xaxis.from),\n              to: moment.utc(ranges.xaxis.to),\n            });\n          });\n        }\n      });\n\n      elem.bind(\"plotclick\", function (event, pos, item) {\n        if ((pos.ctrlKey || pos.metaKey) && contextSrv.isEditor) {\n          // Skip if range selected (added in \"plotselected\" event handler)\n          let isRangeSelection = pos.x !== pos.x1;\n          if (!isRangeSelection) {\n            setTimeout(() => {\n              eventManager.updateTime({ from: pos.x, to: null });\n            }, 100);\n          }\n        }\n      });\n\n      scope.$on('$destroy', function() {\n        tooltip.destroy();\n        elem.off();\n        elem.remove();\n      });\n    }\n  };\n}\n\ncoreModule.directive('lightstepGraph', graphDirective);\n\n\n\n// WEBPACK FOOTER //\n// ./graph.js","/* Flot plugin for selecting regions of a plot.\n\nCopyright (c) 2007-2013 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nThe plugin supports these options:\n\nselection: {\n\tmode: null or \"x\" or \"y\" or \"xy\",\n\tcolor: color,\n\tshape: \"round\" or \"miter\" or \"bevel\",\n\tminSize: number of pixels\n}\n\nSelection support is enabled by setting the mode to one of \"x\", \"y\" or \"xy\".\nIn \"x\" mode, the user will only be able to specify the x range, similarly for\n\"y\" mode. For \"xy\", the selection becomes a rectangle where both ranges can be\nspecified. \"color\" is color of the selection (if you need to change the color\nlater on, you can get to it with plot.getOptions().selection.color). \"shape\"\nis the shape of the corners of the selection.\n\n\"minSize\" is the minimum size a selection can be in pixels. This value can\nbe customized to determine the smallest size a selection can be and still\nhave the selection rectangle be displayed. When customizing this value, the\nfact that it refers to pixels, not axis units must be taken into account.\nThus, for example, if there is a bar graph in time mode with BarWidth set to 1\nminute, setting \"minSize\" to 1 will not make the minimum selection size 1\nminute, but rather 1 pixel. Note also that setting \"minSize\" to 0 will prevent\n\"plotunselected\" events from being fired when the user clicks the mouse without\ndragging.\n\nWhen selection support is enabled, a \"plotselected\" event will be emitted on\nthe DOM element you passed into the plot function. The event handler gets a\nparameter with the ranges selected on the axes, like this:\n\n\tplaceholder.bind( \"plotselected\", function( event, ranges ) {\n\t\talert(\"You selected \" + ranges.xaxis.from + \" to \" + ranges.xaxis.to)\n\t\t// similar for yaxis - with multiple axes, the extra ones are in\n\t\t// x2axis, x3axis, ...\n\t});\n\nThe \"plotselected\" event is only fired when the user has finished making the\nselection. A \"plotselecting\" event is fired during the process with the same\nparameters as the \"plotselected\" event, in case you want to know what's\nhappening while it's happening,\n\nA \"plotunselected\" event with no arguments is emitted when the user clicks the\nmouse to remove the selection. As stated above, setting \"minSize\" to 0 will\ndestroy this behavior.\n\nThe plugin allso adds the following methods to the plot object:\n\n- setSelection( ranges, preventEvent )\n\n  Set the selection rectangle. The passed in ranges is on the same form as\n  returned in the \"plotselected\" event. If the selection mode is \"x\", you\n  should put in either an xaxis range, if the mode is \"y\" you need to put in\n  an yaxis range and both xaxis and yaxis if the selection mode is \"xy\", like\n  this:\n\n\tsetSelection({ xaxis: { from: 0, to: 10 }, yaxis: { from: 40, to: 60 } });\n\n  setSelection will trigger the \"plotselected\" event when called. If you don't\n  want that to happen, e.g. if you're inside a \"plotselected\" handler, pass\n  true as the second parameter. If you are using multiple axes, you can\n  specify the ranges on any of those, e.g. as x2axis/x3axis/... instead of\n  xaxis, the plugin picks the first one it sees.\n\n- clearSelection( preventEvent )\n\n  Clear the selection rectangle. Pass in true to avoid getting a\n  \"plotunselected\" event.\n\n- getSelection()\n\n  Returns the current selection in the same format as the \"plotselected\"\n  event. If there's currently no selection, the function returns null.\n\n*/\n\n(function ($) {\n    function init(plot) {\n        var selection = {\n                first: { x: -1, y: -1}, second: { x: -1, y: -1},\n                show: false,\n                active: false\n            };\n\n        // FIXME: The drag handling implemented here should be\n        // abstracted out, there's some similar code from a library in\n        // the navigation plugin, this should be massaged a bit to fit\n        // the Flot cases here better and reused. Doing this would\n        // make this plugin much slimmer.\n        var savedhandlers = {};\n\n        var mouseUpHandler = null;\n\n        function onMouseMove(e) {\n            if (selection.active) {\n                updateSelection(e);\n\n                plot.getPlaceholder().trigger(\"plotselecting\", [ getSelection() ]);\n            }\n        }\n\n        function onMouseDown(e) {\n            if (e.which != 1)  // only accept left-click\n                return;\n\n            // cancel out any text selections\n            document.body.focus();\n\n            // prevent text selection and drag in old-school browsers\n            if (document.onselectstart !== undefined && savedhandlers.onselectstart == null) {\n                savedhandlers.onselectstart = document.onselectstart;\n                document.onselectstart = function () { return false; };\n            }\n            if (document.ondrag !== undefined && savedhandlers.ondrag == null) {\n                savedhandlers.ondrag = document.ondrag;\n                document.ondrag = function () { return false; };\n            }\n\n            setSelectionPos(selection.first, e);\n\n            selection.active = true;\n\n            // this is a bit silly, but we have to use a closure to be\n            // able to whack the same handler again\n            mouseUpHandler = function (e) { onMouseUp(e); };\n\n            $(document).one(\"mouseup\", mouseUpHandler);\n        }\n\n        function onMouseUp(e) {\n            mouseUpHandler = null;\n\n            // revert drag stuff for old-school browsers\n            if (document.onselectstart !== undefined)\n                document.onselectstart = savedhandlers.onselectstart;\n            if (document.ondrag !== undefined)\n                document.ondrag = savedhandlers.ondrag;\n\n            // no more dragging\n            selection.active = false;\n            updateSelection(e);\n\n            if (selectionIsSane())\n                triggerSelectedEvent(e);\n            else {\n                // this counts as a clear\n                plot.getPlaceholder().trigger(\"plotunselected\", [ ]);\n                plot.getPlaceholder().trigger(\"plotselecting\", [ null ]);\n            }\n\n            setTimeout(function() {\n              plot.isSelecting = false;\n            }, 10);\n\n            return false;\n        }\n\n        function getSelection() {\n            if (!selectionIsSane())\n                return null;\n\n            if (!selection.show) return null;\n\n            var r = {}, c1 = selection.first, c2 = selection.second;\n            var axes = plot.getAxes();\n            // look if no axis is used\n            var noAxisInUse = true;\n            $.each(axes, function (name, axis) {\n              if (axis.used) {\n                anyUsed = false;\n              }\n            })\n\n            $.each(axes, function (name, axis) {\n                if (axis.used || noAxisInUse) {\n                    var p1 = axis.c2p(c1[axis.direction]), p2 = axis.c2p(c2[axis.direction]);\n                    r[name] = { from: Math.min(p1, p2), to: Math.max(p1, p2) };\n                }\n            });\n            return r;\n        }\n\n        function triggerSelectedEvent(event) {\n            var r = getSelection();\n\n            // Add ctrlKey and metaKey to event\n            r.ctrlKey = event.ctrlKey;\n            r.metaKey = event.metaKey;\n\n            plot.getPlaceholder().trigger(\"plotselected\", [ r ]);\n\n            // backwards-compat stuff, to be removed in future\n            if (r.xaxis && r.yaxis)\n                plot.getPlaceholder().trigger(\"selected\", [ { x1: r.xaxis.from, y1: r.yaxis.from, x2: r.xaxis.to, y2: r.yaxis.to } ]);\n        }\n\n        function clamp(min, value, max) {\n            return value < min ? min: (value > max ? max: value);\n        }\n\n        function setSelectionPos(pos, e) {\n            var o = plot.getOptions();\n            var offset = plot.getPlaceholder().offset();\n            var plotOffset = plot.getPlotOffset();\n            pos.x = clamp(0, e.pageX - offset.left - plotOffset.left, plot.width());\n            pos.y = clamp(0, e.pageY - offset.top - plotOffset.top, plot.height());\n\n            if (o.selection.mode == \"y\")\n                pos.x = pos == selection.first ? 0 : plot.width();\n\n            if (o.selection.mode == \"x\")\n                pos.y = pos == selection.first ? 0 : plot.height();\n        }\n\n        function updateSelection(pos) {\n            if (pos.pageX == null)\n                return;\n\n            setSelectionPos(selection.second, pos);\n            if (selectionIsSane()) {\n                plot.isSelecting = true;\n                selection.show = true;\n                plot.triggerRedrawOverlay();\n            }\n            else\n                clearSelection(true);\n        }\n\n        function clearSelection(preventEvent) {\n            if (selection.show) {\n                selection.show = false;\n                plot.triggerRedrawOverlay();\n                if (!preventEvent)\n                    plot.getPlaceholder().trigger(\"plotunselected\", [ ]);\n            }\n        }\n\n        // function taken from markings support in Flot\n        function extractRange(ranges, coord) {\n            var axis, from, to, key, axes = plot.getAxes();\n\n            for (var k in axes) {\n                axis = axes[k];\n                if (axis.direction == coord) {\n                    key = coord + axis.n + \"axis\";\n                    if (!ranges[key] && axis.n == 1)\n                        key = coord + \"axis\"; // support x1axis as xaxis\n                    if (ranges[key]) {\n                        from = ranges[key].from;\n                        to = ranges[key].to;\n                        break;\n                    }\n                }\n            }\n\n            // backwards-compat stuff - to be removed in future\n            if (!ranges[key]) {\n                axis = coord == \"x\" ? plot.getXAxes()[0] : plot.getYAxes()[0];\n                from = ranges[coord + \"1\"];\n                to = ranges[coord + \"2\"];\n            }\n\n            // auto-reverse as an added bonus\n            if (from != null && to != null && from > to) {\n                var tmp = from;\n                from = to;\n                to = tmp;\n            }\n\n            return { from: from, to: to, axis: axis };\n        }\n\n        function setSelection(ranges, preventEvent) {\n            var axis, range, o = plot.getOptions();\n\n            if (o.selection.mode == \"y\") {\n                selection.first.x = 0;\n                selection.second.x = plot.width();\n            }\n            else {\n                range = extractRange(ranges, \"x\");\n\n                selection.first.x = range.axis.p2c(range.from);\n                selection.second.x = range.axis.p2c(range.to);\n            }\n\n            if (o.selection.mode == \"x\") {\n                selection.first.y = 0;\n                selection.second.y = plot.height();\n            }\n            else {\n                range = extractRange(ranges, \"y\");\n\n                selection.first.y = range.axis.p2c(range.from);\n                selection.second.y = range.axis.p2c(range.to);\n            }\n\n            selection.show = true;\n            plot.triggerRedrawOverlay();\n            if (!preventEvent && selectionIsSane())\n                triggerSelectedEvent();\n        }\n\n        function selectionIsSane() {\n            var minSize = plot.getOptions().selection.minSize;\n            return Math.abs(selection.second.x - selection.first.x) >= minSize &&\n                Math.abs(selection.second.y - selection.first.y) >= minSize;\n        }\n\n        plot.clearSelection = clearSelection;\n        plot.setSelection = setSelection;\n        plot.getSelection = getSelection;\n\n        plot.hooks.bindEvents.push(function(plot, eventHolder) {\n            var o = plot.getOptions();\n            if (o.selection.mode != null) {\n                eventHolder.mousemove(onMouseMove);\n                eventHolder.mousedown(onMouseDown);\n            }\n        });\n\n\n        plot.hooks.drawOverlay.push(function (plot, ctx) {\n            // draw selection\n            if (selection.show && selectionIsSane()) {\n                var plotOffset = plot.getPlotOffset();\n                var o = plot.getOptions();\n\n                ctx.save();\n                ctx.translate(plotOffset.left, plotOffset.top);\n\n                var c = $.color.parse(o.selection.color);\n\n                ctx.strokeStyle = c.scale('a', 0.8).toString();\n                ctx.lineWidth = 1;\n                ctx.lineJoin = o.selection.shape;\n                ctx.fillStyle = c.scale('a', 0.4).toString();\n\n                var x = Math.min(selection.first.x, selection.second.x) + 0.5,\n                    y = Math.min(selection.first.y, selection.second.y) + 0.5,\n                    w = Math.abs(selection.second.x - selection.first.x) - 1,\n                    h = Math.abs(selection.second.y - selection.first.y) - 1;\n\n                ctx.fillRect(x, y, w, h);\n                ctx.strokeRect(x, y, w, h);\n\n                ctx.restore();\n            }\n        });\n\n        plot.hooks.shutdown.push(function (plot, eventHolder) {\n            eventHolder.unbind(\"mousemove\", onMouseMove);\n            eventHolder.unbind(\"mousedown\", onMouseDown);\n\n            if (mouseUpHandler)\n                $(document).unbind(\"mouseup\", mouseUpHandler);\n        });\n\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: {\n            selection: {\n                mode: null, // one of null, \"x\", \"y\" or \"xy\"\n                color: \"#e8cfac\",\n                shape: \"round\", // one of \"round\", \"miter\", or \"bevel\"\n                minSize: 5 // minimum number of pixels\n            }\n        },\n        name: 'selection',\n        version: '1.1'\n    });\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/flot/jquery.flot.selection.js","/* Pretty handling of time axes.\n\nCopyright (c) 2007-2013 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nSet axis.mode to \"time\" to enable. See the section \"Time series data\" in\nAPI.txt for details.\n\n*/\n\n(function($) {\n\n\tvar options = {\n\t\txaxis: {\n\t\t\ttimezone: null,\t\t// \"browser\" for local to the client or timezone for timezone-js\n\t\t\ttimeformat: null,\t// format string to use\n\t\t\ttwelveHourClock: false,\t// 12 or 24 time in time mode\n\t\t\tmonthNames: null\t// list of names of months\n\t\t}\n\t};\n\n\t// round to nearby lower multiple of base\n\n\tfunction floorInBase(n, base) {\n\t\treturn base * Math.floor(n / base);\n\t}\n\n\t// Returns a string with the date d formatted according to fmt.\n\t// A subset of the Open Group's strftime format is supported.\n\n\tfunction formatDate(d, fmt, monthNames, dayNames) {\n\n\t\tif (typeof d.strftime == \"function\") {\n\t\t\treturn d.strftime(fmt);\n\t\t}\n\n\t\tvar leftPad = function(n, pad) {\n\t\t\tn = \"\" + n;\n\t\t\tpad = \"\" + (pad == null ? \"0\" : pad);\n\t\t\treturn n.length == 1 ? pad + n : n;\n\t\t};\n\n\t\tvar r = [];\n\t\tvar escape = false;\n\t\tvar hours = d.getHours();\n\t\tvar isAM = hours < 12;\n\n\t\tif (monthNames == null) {\n\t\t\tmonthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\t\t}\n\n\t\tif (dayNames == null) {\n\t\t\tdayNames = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n\t\t}\n\n\t\tvar hours12;\n\n\t\tif (hours > 12) {\n\t\t\thours12 = hours - 12;\n\t\t} else if (hours == 0) {\n\t\t\thours12 = 12;\n\t\t} else {\n\t\t\thours12 = hours;\n\t\t}\n\n\t\tfor (var i = 0; i < fmt.length; ++i) {\n\n\t\t\tvar c = fmt.charAt(i);\n\n\t\t\tif (escape) {\n\t\t\t\tswitch (c) {\n\t\t\t\t\tcase 'a': c = \"\" + dayNames[d.getDay()]; break;\n\t\t\t\t\tcase 'b': c = \"\" + monthNames[d.getMonth()]; break;\n\t\t\t\t\tcase 'd': c = leftPad(d.getDate(), \"\"); break;\n\t\t\t\t\tcase 'e': c = leftPad(d.getDate(), \" \"); break;\n\t\t\t\t\tcase 'h':\t// For back-compat with 0.7; remove in 1.0\n\t\t\t\t\tcase 'H': c = leftPad(hours); break;\n\t\t\t\t\tcase 'I': c = leftPad(hours12); break;\n\t\t\t\t\tcase 'l': c = leftPad(hours12, \" \"); break;\n\t\t\t\t\tcase 'm': c = leftPad(d.getMonth() + 1, \"\"); break;\n\t\t\t\t\tcase 'M': c = leftPad(d.getMinutes()); break;\n\t\t\t\t\t// quarters not in Open Group's strftime specification\n\t\t\t\t\tcase 'q':\n\t\t\t\t\t\tc = \"\" + (Math.floor(d.getMonth() / 3) + 1); break;\n\t\t\t\t\tcase 'S': c = leftPad(d.getSeconds()); break;\n\t\t\t\t\tcase 'y': c = leftPad(d.getFullYear() % 100); break;\n\t\t\t\t\tcase 'Y': c = \"\" + d.getFullYear(); break;\n\t\t\t\t\tcase 'p': c = (isAM) ? (\"\" + \"am\") : (\"\" + \"pm\"); break;\n\t\t\t\t\tcase 'P': c = (isAM) ? (\"\" + \"AM\") : (\"\" + \"PM\"); break;\n\t\t\t\t\tcase 'w': c = \"\" + d.getDay(); break;\n\t\t\t\t}\n\t\t\t\tr.push(c);\n\t\t\t\tescape = false;\n\t\t\t} else {\n\t\t\t\tif (c == \"%\") {\n\t\t\t\t\tescape = true;\n\t\t\t\t} else {\n\t\t\t\t\tr.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn r.join(\"\");\n\t}\n\n\t// To have a consistent view of time-based data independent of which time\n\t// zone the client happens to be in we need a date-like object independent\n\t// of time zones.  This is done through a wrapper that only calls the UTC\n\t// versions of the accessor methods.\n\n\tfunction makeUtcWrapper(d) {\n\n\t\tfunction addProxyMethod(sourceObj, sourceMethod, targetObj, targetMethod) {\n\t\t\tsourceObj[sourceMethod] = function() {\n\t\t\t\treturn targetObj[targetMethod].apply(targetObj, arguments);\n\t\t\t};\n\t\t};\n\n\t\tvar utc = {\n\t\t\tdate: d\n\t\t};\n\n\t\t// support strftime, if found\n\n\t\tif (d.strftime != undefined) {\n\t\t\taddProxyMethod(utc, \"strftime\", d, \"strftime\");\n\t\t}\n\n\t\taddProxyMethod(utc, \"getTime\", d, \"getTime\");\n\t\taddProxyMethod(utc, \"setTime\", d, \"setTime\");\n\n\t\tvar props = [\"Date\", \"Day\", \"FullYear\", \"Hours\", \"Milliseconds\", \"Minutes\", \"Month\", \"Seconds\"];\n\n\t\tfor (var p = 0; p < props.length; p++) {\n\t\t\taddProxyMethod(utc, \"get\" + props[p], d, \"getUTC\" + props[p]);\n\t\t\taddProxyMethod(utc, \"set\" + props[p], d, \"setUTC\" + props[p]);\n\t\t}\n\n\t\treturn utc;\n\t};\n\n\t// select time zone strategy.  This returns a date-like object tied to the\n\t// desired timezone\n\n\tfunction dateGenerator(ts, opts) {\n\t\tif (opts.timezone == \"browser\") {\n\t\t\treturn new Date(ts);\n\t\t} else if (!opts.timezone || opts.timezone == \"utc\") {\n\t\t\treturn makeUtcWrapper(new Date(ts));\n\t\t} else if (typeof timezoneJS != \"undefined\" && typeof timezoneJS.Date != \"undefined\") {\n\t\t\tvar d = new timezoneJS.Date();\n\t\t\t// timezone-js is fickle, so be sure to set the time zone before\n\t\t\t// setting the time.\n\t\t\td.setTimezone(opts.timezone);\n\t\t\td.setTime(ts);\n\t\t\treturn d;\n\t\t} else {\n\t\t\treturn makeUtcWrapper(new Date(ts));\n\t\t}\n\t}\n\n\t// map of app. size of time units in milliseconds\n\n\tvar timeUnitSize = {\n\t\t\"second\": 1000,\n\t\t\"minute\": 60 * 1000,\n\t\t\"hour\": 60 * 60 * 1000,\n\t\t\"day\": 24 * 60 * 60 * 1000,\n\t\t\"month\": 30 * 24 * 60 * 60 * 1000,\n\t\t\"quarter\": 3 * 30 * 24 * 60 * 60 * 1000,\n\t\t\"year\": 365.2425 * 24 * 60 * 60 * 1000\n\t};\n\n\t// the allowed tick sizes, after 1 year we use\n\t// an integer algorithm\n\n\tvar baseSpec = [\n\t\t[1, \"second\"], [2, \"second\"], [5, \"second\"], [10, \"second\"],\n\t\t[30, \"second\"],\n\t\t[1, \"minute\"], [2, \"minute\"], [5, \"minute\"], [10, \"minute\"],\n\t\t[30, \"minute\"],\n\t\t[1, \"hour\"], [2, \"hour\"], [4, \"hour\"],\n\t\t[8, \"hour\"], [12, \"hour\"],\n\t\t[1, \"day\"], [2, \"day\"], [3, \"day\"],\n\t\t[0.25, \"month\"], [0.5, \"month\"], [1, \"month\"],\n\t\t[2, \"month\"]\n\t];\n\n\t// we don't know which variant(s) we'll need yet, but generating both is\n\t// cheap\n\n\tvar specMonths = baseSpec.concat([[3, \"month\"], [6, \"month\"],\n\t\t[1, \"year\"]]);\n\tvar specQuarters = baseSpec.concat([[1, \"quarter\"], [2, \"quarter\"],\n\t\t[1, \"year\"]]);\n\n\tfunction init(plot) {\n\t\tplot.hooks.processOptions.push(function (plot, options) {\n\t\t\t$.each(plot.getAxes(), function(axisName, axis) {\n\n\t\t\t\tvar opts = axis.options;\n\n\t\t\t\tif (opts.mode == \"time\") {\n\t\t\t\t\taxis.tickGenerator = function(axis) {\n\n\t\t\t\t\t\tvar ticks = [];\n\t\t\t\t\t\tvar d = dateGenerator(axis.min, opts);\n\t\t\t\t\t\tvar minSize = 0;\n\n\t\t\t\t\t\t// make quarter use a possibility if quarters are\n\t\t\t\t\t\t// mentioned in either of these options\n\n\t\t\t\t\t\tvar spec = (opts.tickSize && opts.tickSize[1] ===\n\t\t\t\t\t\t\t\"quarter\") ||\n\t\t\t\t\t\t\t(opts.minTickSize && opts.minTickSize[1] ===\n\t\t\t\t\t\t\t\"quarter\") ? specQuarters : specMonths;\n\n\t\t\t\t\t\tif (opts.minTickSize != null) {\n\t\t\t\t\t\t\tif (typeof opts.tickSize == \"number\") {\n\t\t\t\t\t\t\t\tminSize = opts.tickSize;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tminSize = opts.minTickSize[0] * timeUnitSize[opts.minTickSize[1]];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (var i = 0; i < spec.length - 1; ++i) {\n\t\t\t\t\t\t\tif (axis.delta < (spec[i][0] * timeUnitSize[spec[i][1]]\n\t\t\t\t\t\t\t\t\t\t\t  + spec[i + 1][0] * timeUnitSize[spec[i + 1][1]]) / 2\n\t\t\t\t\t\t\t\t&& spec[i][0] * timeUnitSize[spec[i][1]] >= minSize) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar size = spec[i][0];\n\t\t\t\t\t\tvar unit = spec[i][1];\n\n\t\t\t\t\t\t// special-case the possibility of several years\n\n\t\t\t\t\t\tif (unit == \"year\") {\n\n\t\t\t\t\t\t\t// if given a minTickSize in years, just use it,\n\t\t\t\t\t\t\t// ensuring that it's an integer\n\n\t\t\t\t\t\t\tif (opts.minTickSize != null && opts.minTickSize[1] == \"year\") {\n\t\t\t\t\t\t\t\tsize = Math.floor(opts.minTickSize[0]);\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tvar magn = Math.pow(10, Math.floor(Math.log(axis.delta / timeUnitSize.year) / Math.LN10));\n\t\t\t\t\t\t\t\tvar norm = (axis.delta / timeUnitSize.year) / magn;\n\n\t\t\t\t\t\t\t\tif (norm < 1.5) {\n\t\t\t\t\t\t\t\t\tsize = 1;\n\t\t\t\t\t\t\t\t} else if (norm < 3) {\n\t\t\t\t\t\t\t\t\tsize = 2;\n\t\t\t\t\t\t\t\t} else if (norm < 7.5) {\n\t\t\t\t\t\t\t\t\tsize = 5;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsize = 10;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tsize *= magn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// minimum size for years is 1\n\n\t\t\t\t\t\t\tif (size < 1) {\n\t\t\t\t\t\t\t\tsize = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\taxis.tickSize = opts.tickSize || [size, unit];\n\t\t\t\t\t\tvar tickSize = axis.tickSize[0];\n\t\t\t\t\t\tunit = axis.tickSize[1];\n\n\t\t\t\t\t\tvar step = tickSize * timeUnitSize[unit];\n\n\t\t\t\t\t\tif (unit == \"second\") {\n\t\t\t\t\t\t\td.setSeconds(floorInBase(d.getSeconds(), tickSize));\n\t\t\t\t\t\t} else if (unit == \"minute\") {\n\t\t\t\t\t\t\td.setMinutes(floorInBase(d.getMinutes(), tickSize));\n\t\t\t\t\t\t} else if (unit == \"hour\") {\n\t\t\t\t\t\t\td.setHours(floorInBase(d.getHours(), tickSize));\n\t\t\t\t\t\t} else if (unit == \"month\") {\n\t\t\t\t\t\t\td.setMonth(floorInBase(d.getMonth(), tickSize));\n\t\t\t\t\t\t} else if (unit == \"quarter\") {\n\t\t\t\t\t\t\td.setMonth(3 * floorInBase(d.getMonth() / 3,\n\t\t\t\t\t\t\t\ttickSize));\n\t\t\t\t\t\t} else if (unit == \"year\") {\n\t\t\t\t\t\t\td.setFullYear(floorInBase(d.getFullYear(), tickSize));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// reset smaller components\n\n\t\t\t\t\t\td.setMilliseconds(0);\n\n\t\t\t\t\t\tif (step >= timeUnitSize.minute) {\n\t\t\t\t\t\t\td.setSeconds(0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (step >= timeUnitSize.hour) {\n\t\t\t\t\t\t\td.setMinutes(0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (step >= timeUnitSize.day) {\n\t\t\t\t\t\t\td.setHours(0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (step >= timeUnitSize.day * 4) {\n\t\t\t\t\t\t\td.setDate(1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (step >= timeUnitSize.month * 2) {\n\t\t\t\t\t\t\td.setMonth(floorInBase(d.getMonth(), 3));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (step >= timeUnitSize.quarter * 2) {\n\t\t\t\t\t\t\td.setMonth(floorInBase(d.getMonth(), 6));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (step >= timeUnitSize.year) {\n\t\t\t\t\t\t\td.setMonth(0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar carry = 0;\n\t\t\t\t\t\tvar v = Number.NaN;\n\t\t\t\t\t\tvar prev;\n\n\t\t\t\t\t\tdo {\n\n\t\t\t\t\t\t\tprev = v;\n\t\t\t\t\t\t\tv = d.getTime();\n\t\t\t\t\t\t\tticks.push(v);\n\n\t\t\t\t\t\t\tif (unit == \"month\" || unit == \"quarter\") {\n\t\t\t\t\t\t\t\tif (tickSize < 1) {\n\n\t\t\t\t\t\t\t\t\t// a bit complicated - we'll divide the\n\t\t\t\t\t\t\t\t\t// month/quarter up but we need to take\n\t\t\t\t\t\t\t\t\t// care of fractions so we don't end up in\n\t\t\t\t\t\t\t\t\t// the middle of a day\n\n\t\t\t\t\t\t\t\t\td.setDate(1);\n\t\t\t\t\t\t\t\t\tvar start = d.getTime();\n\t\t\t\t\t\t\t\t\td.setMonth(d.getMonth() +\n\t\t\t\t\t\t\t\t\t\t(unit == \"quarter\" ? 3 : 1));\n\t\t\t\t\t\t\t\t\tvar end = d.getTime();\n\t\t\t\t\t\t\t\t\td.setTime(v + carry * timeUnitSize.hour + (end - start) * tickSize);\n\t\t\t\t\t\t\t\t\tcarry = d.getHours();\n\t\t\t\t\t\t\t\t\td.setHours(0);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\td.setMonth(d.getMonth() +\n\t\t\t\t\t\t\t\t\t\ttickSize * (unit == \"quarter\" ? 3 : 1));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (unit == \"year\") {\n\t\t\t\t\t\t\t\td.setFullYear(d.getFullYear() + tickSize);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\td.setTime(v + step);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} while (v < axis.max && v != prev);\n\n\t\t\t\t\t\treturn ticks;\n\t\t\t\t\t};\n\n\t\t\t\t\taxis.tickFormatter = function (v, axis) {\n\n\t\t\t\t\t\tvar d = dateGenerator(v, axis.options);\n\n\t\t\t\t\t\t// first check global format\n\n\t\t\t\t\t\tif (opts.timeformat != null) {\n\t\t\t\t\t\t\treturn formatDate(d, opts.timeformat, opts.monthNames, opts.dayNames);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// possibly use quarters if quarters are mentioned in\n\t\t\t\t\t\t// any of these places\n\n\t\t\t\t\t\tvar useQuarters = (axis.options.tickSize &&\n\t\t\t\t\t\t\t\taxis.options.tickSize[1] == \"quarter\") ||\n\t\t\t\t\t\t\t(axis.options.minTickSize &&\n\t\t\t\t\t\t\t\taxis.options.minTickSize[1] == \"quarter\");\n\n\t\t\t\t\t\tvar t = axis.tickSize[0] * timeUnitSize[axis.tickSize[1]];\n\t\t\t\t\t\tvar span = axis.max - axis.min;\n\t\t\t\t\t\tvar suffix = (opts.twelveHourClock) ? \" %p\" : \"\";\n\t\t\t\t\t\tvar hourCode = (opts.twelveHourClock) ? \"%I\" : \"%H\";\n\t\t\t\t\t\tvar fmt;\n\n\t\t\t\t\t\tif (t < timeUnitSize.minute) {\n\t\t\t\t\t\t\tfmt = hourCode + \":%M:%S\" + suffix;\n\t\t\t\t\t\t} else if (t < timeUnitSize.day) {\n\t\t\t\t\t\t\tif (span < 2 * timeUnitSize.day) {\n\t\t\t\t\t\t\t\tfmt = hourCode + \":%M\" + suffix;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfmt = \"%b %d \" + hourCode + \":%M\" + suffix;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (t < timeUnitSize.month) {\n\t\t\t\t\t\t\tfmt = \"%b %d\";\n\t\t\t\t\t\t} else if ((useQuarters && t < timeUnitSize.quarter) ||\n\t\t\t\t\t\t\t(!useQuarters && t < timeUnitSize.year)) {\n\t\t\t\t\t\t\tif (span < timeUnitSize.year) {\n\t\t\t\t\t\t\t\tfmt = \"%b\";\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfmt = \"%b %Y\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (useQuarters && t < timeUnitSize.year) {\n\t\t\t\t\t\t\tif (span < timeUnitSize.year) {\n\t\t\t\t\t\t\t\tfmt = \"Q%q\";\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfmt = \"Q%q %Y\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfmt = \"%Y\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar rt = formatDate(d, fmt, opts.monthNames, opts.dayNames);\n\n\t\t\t\t\t\treturn rt;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t$.plot.plugins.push({\n\t\tinit: init,\n\t\toptions: options,\n\t\tname: 'time',\n\t\tversion: '1.0'\n\t});\n\n\t// Time-axis support used to be in Flot core, which exposed the\n\t// formatDate function on the plot object.  Various plugins depend\n\t// on the function, so we need to re-expose it here.\n\n\t$.plot.formatDate = formatDate;\n\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/flot/jquery.flot.time.js","/* Flot plugin for stacking data sets rather than overlyaing them.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nThe plugin assumes the data is sorted on x (or y if stacking horizontally).\nFor line charts, it is assumed that if a line has an undefined gap (from a\nnull point), then the line above it should have the same gap - insert zeros\ninstead of \"null\" if you want another behaviour. This also holds for the start\nand end of the chart. Note that stacking a mix of positive and negative values\nin most instances doesn't make sense (so it looks weird).\n\nTwo or more series are stacked when their \"stack\" attribute is set to the same\nkey (which can be any number or string or just \"true\"). To specify the default\nstack, you can set the stack option like this:\n\n    series: {\n        stack: null/false, true, or a key (number/string)\n    }\n\nYou can also specify it for a single series, like this:\n\n    $.plot( $(\"#placeholder\"), [{\n        data: [ ... ],\n        stack: true\n    }])\n\nThe stacking order is determined by the order of the data series in the array\n(later series end up on top of the previous).\n\nInternally, the plugin modifies the datapoints in each series, adding an\noffset to the y value. For line series, extra data points are inserted through\ninterpolation. If there's a second y value, it's also adjusted (e.g for bar\ncharts or filled areas).\n\n*/\n\n(function ($) {\n    var options = {\n        series: { stack: null } // or number/string\n    };\n\n    function init(plot) {\n        function findMatchingSeries(s, allseries) {\n            var res = null;\n            for (var i = 0; i < allseries.length; ++i) {\n                if (s == allseries[i])\n                    break;\n\n                if (allseries[i].stack == s.stack)\n                    res = allseries[i];\n            }\n\n            return res;\n        }\n\n        function stackData(plot, s, datapoints) {\n            if (s.stack == null || s.stack === false)\n                return;\n\n            var other = findMatchingSeries(s, plot.getData());\n            if (!other)\n                return;\n\n            var ps = datapoints.pointsize,\n                points = datapoints.points,\n                otherps = other.datapoints.pointsize,\n                otherpoints = other.datapoints.points,\n                newpoints = [],\n                px, py, intery, qx, qy, bottom,\n                withlines = s.lines.show,\n                horizontal = s.bars.horizontal,\n                withbottom = ps > 2 && (horizontal ? datapoints.format[2].x : datapoints.format[2].y),\n                withsteps = withlines && s.lines.steps,\n                keyOffset = horizontal ? 1 : 0,\n                accumulateOffset = horizontal ? 0 : 1,\n                i = 0, j = 0, l, m;\n\n            while (true) {\n                if (i >= points.length && j >= otherpoints.length)\n                    break;\n\n                l = newpoints.length;\n\n                if (i < points.length && points[i] == null) {\n                    // copy gaps\n                    for (m = 0; m < ps; ++m)\n                        newpoints.push(points[i + m]);\n                    i += ps;\n                }\n                else if (i >= points.length) {\n                    // take the remaining points from the previous series\n                    for (m = 0; m < ps; ++m)\n                        newpoints.push(otherpoints[j + m]);\n                    if (withbottom)\n                        newpoints[l + 2] = otherpoints[j + accumulateOffset];\n                    j += otherps;\n                }\n                else if (j >= otherpoints.length) {\n                    // take the remaining points from the current series\n                    for (m = 0; m < ps; ++m)\n                        newpoints.push(points[i + m]);\n                    i += ps;\n                }\n                else if (j < otherpoints.length && otherpoints[j] == null) {\n                    // ignore point\n                    j += otherps;\n                }\n                else {\n                    // cases where we actually got two points\n                    px = points[i + keyOffset];\n                    py = points[i + accumulateOffset];\n                    qx = otherpoints[j + keyOffset];\n                    qy = otherpoints[j + accumulateOffset];\n                    bottom = 0;\n\n                    if (px == qx) {\n                        for (m = 0; m < ps; ++m)\n                            newpoints.push(points[i + m]);\n\n                        newpoints[l + accumulateOffset] += qy;\n                        bottom = qy;\n\n                        i += ps;\n                        j += otherps;\n                    }\n                    else if (px > qx) {\n                        // take the point from the previous series so that next series will correctly stack\n                        if (i == 0) {\n                            for (m = 0; m < ps; ++m)\n                                newpoints.push(otherpoints[j + m]);\n                            bottom = qy;\n                        }\n                        // we got past point below, might need to\n                        // insert interpolated extra point\n                        if (i > 0 && points[i - ps] != null) {\n                            intery = py + (points[i - ps + accumulateOffset] - py) * (qx - px) / (points[i - ps + keyOffset] - px);\n                            newpoints.push(qx);\n                            newpoints.push(intery + qy);\n                            for (m = 2; m < ps; ++m)\n                                newpoints.push(points[i + m]);\n                            bottom = qy;\n                        }\n\n                        j += otherps;\n                    }\n                    else { // px < qx\n                        for (m = 0; m < ps; ++m)\n                            newpoints.push(points[i + m]);\n\n                        // we might be able to interpolate a point below,\n                        // this can give us a better y\n                        if (j > 0 && otherpoints[j - otherps] != null)\n                            bottom = qy + (otherpoints[j - otherps + accumulateOffset] - qy) * (px - qx) / (otherpoints[j - otherps + keyOffset] - qx);\n\n                        newpoints[l + accumulateOffset] += bottom;\n\n                        i += ps;\n                    }\n\n                    fromgap = false;\n\n                    if (l != newpoints.length && withbottom)\n                        newpoints[l + 2] = bottom;\n                }\n\n                // maintain the line steps invariant\n                if (withsteps && l != newpoints.length && l > 0\n                    && newpoints[l] != null\n                    && newpoints[l] != newpoints[l - ps]\n                    && newpoints[l + 1] != newpoints[l - ps + 1]) {\n                    for (m = 0; m < ps; ++m)\n                        newpoints[l + ps + m] = newpoints[l + m];\n                    newpoints[l + 1] = newpoints[l - ps + 1];\n                }\n            }\n\n            datapoints.points = newpoints;\n        }\n\n        plot.hooks.processDatapoints.push(stackData);\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: options,\n        name: 'stack',\n        version: '1.2'\n    });\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/flot/jquery.flot.stack.js","(function ($) {\n    var options = {\n        series: {\n            stackpercent: null\n        } // or number/string\n    };\n\n    function init(plot) {\n\n        // will be built up dynamically as a hash from x-value, or y-value if horizontal\n        var stackBases = {};\n        var processed = false;\n        var stackSums = {};\n\n        //set percentage for stacked chart\n        function processRawData(plot, series, data, datapoints) {\n            if (!processed) {\n                processed = true;\n                stackSums = getStackSums(plot.getData());\n            }\n\t\t\tif (series.stackpercent == true) {\n\t\t\t\tvar num = data.length;\n\t\t\t\tseries.percents = [];\n\t\t\t\tvar key_idx = 0;\n\t\t\t\tvar value_idx = 1;\n\t\t\t\tif (series.bars && series.bars.horizontal && series.bars.horizontal === true) {\n\t\t\t\t\tkey_idx = 1;\n\t\t\t\t\tvalue_idx = 0;\n\t\t\t\t}\n\t\t\t\tfor (var j = 0; j < num; j++) {\n\t\t\t\t\tvar sum = stackSums[data[j][key_idx] + \"\"];\n\t\t\t\t\tif (sum > 0) {\n\t\t\t\t\t\tseries.percents.push(data[j][value_idx] * 100 / sum);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseries.percents.push(0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n        }\n\n        //calculate summary\n        function getStackSums(_data) {\n            var data_len = _data.length;\n            var sums = {};\n            if (data_len > 0) {\n                //caculate summary\n                for (var i = 0; i < data_len; i++) {\n                    if (_data[i].stackpercent) {\n\t\t\t\t\t\tvar key_idx = 0;\n\t\t\t\t\t\tvar value_idx = 1;\n\t\t\t\t\t\tif (_data[i].bars && _data[i].bars.horizontal && _data[i].bars.horizontal === true) {\n\t\t\t\t\t\t\tkey_idx = 1;\n\t\t\t\t\t\t\tvalue_idx = 0;\n\t\t\t\t\t\t}\n                        var num = _data[i].data.length;\n                        for (var j = 0; j < num; j++) {\n                            var value = 0;\n                            if (_data[i].data[j][1] != null) {\n                                value = _data[i].data[j][value_idx];\n                            }\n                            if (sums[_data[i].data[j][key_idx] + \"\"]) {\n                                sums[_data[i].data[j][key_idx] + \"\"] += value;\n                            } else {\n                                sums[_data[i].data[j][key_idx] + \"\"] = value;\n                            }\n\n                        }\n                    }\n                }\n            }\n            return sums;\n        }\n\n        function stackData(plot, s, datapoints) {\n            if (!s.stackpercent) return;\n            if (!processed) {\n                stackSums = getStackSums(plot.getData());\n            }\n            var newPoints = [];\n\n\n\t\t\tvar key_idx = 0;\n\t\t\tvar value_idx = 1;\n\t\t\tif (s.bars && s.bars.horizontal && s.bars.horizontal === true) {\n\t\t\t\tkey_idx = 1;\n\t\t\t\tvalue_idx = 0;\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < datapoints.points.length; i += 3) {\n\t\t\t\t// note that the values need to be turned into absolute y-values.\n\t\t\t\t// in other words, if you were to stack (x, y1), (x, y2), and (x, y3),\n\t\t\t\t// (each from different series, which is where stackBases comes in),\n\t\t\t\t// you'd want the new points to be (x, y1, 0), (x, y1+y2, y1), (x, y1+y2+y3, y1+y2)\n\t\t\t\t// generally, (x, thisValue + (base up to this point), + (base up to this point))\n\t\t\t\tif (!stackBases[datapoints.points[i + key_idx]]) {\n\t\t\t\t\tstackBases[datapoints.points[i + key_idx]] = 0;\n\t\t\t\t}\n\t\t\t\tnewPoints[i + key_idx] = datapoints.points[i + key_idx];\n\t\t\t\tnewPoints[i + value_idx] = datapoints.points[i + value_idx] + stackBases[datapoints.points[i + key_idx]];\n\t\t\t\tnewPoints[i + 2] = stackBases[datapoints.points[i + key_idx]];\n\t\t\t\tstackBases[datapoints.points[i + key_idx]] += datapoints.points[i + value_idx];\n\t\t\t\t// change points to percentage values\n\t\t\t\t// you may need to set yaxis:{ max = 100 }\n\t\t\t\tif ( stackSums[newPoints[i+key_idx]+\"\"] > 0 ){\n\t\t\t\t\tnewPoints[i + value_idx] = newPoints[i + value_idx] * 100 / stackSums[newPoints[i + key_idx] + \"\"];\n\t\t\t\t\tnewPoints[i + 2] = newPoints[i + 2] * 100 / stackSums[newPoints[i + key_idx] + \"\"];\n\t\t\t\t} else {\n\t\t\t\t\tnewPoints[i + value_idx] = 0;\n\t\t\t\t\tnewPoints[i + 2] = 0;\n\t\t\t\t}\n\t\t\t}\n\n            datapoints.points = newPoints;\n        }\n\n\t\tplot.hooks.processRawData.push(processRawData);\n        plot.hooks.processDatapoints.push(stackData);\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: options,\n        name: 'stackpercent',\n        version: '0.1'\n    });\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/flot/jquery.flot.stackpercent.js","(function($) {\n    \"use strict\";\n\n    var options = {\n        series: {\n            fillBelowTo: null\n        }\n    };\n\n    function init(plot) {\n        function findBelowSeries( series, allseries ) {\n\n            var i;\n\n            for ( i = 0; i < allseries.length; ++i ) {\n                if ( allseries[ i ].id === series.fillBelowTo ) {\n                    return allseries[ i ];\n                }\n            }\n\n            return null;\n        }\n\n        /* top and bottom doesn't actually matter for this, we're just using it to help make this easier to think about */\n        /* this is a vector cross product operation */\n        function segmentIntersection(top_left_x, top_left_y, top_right_x, top_right_y, bottom_left_x, bottom_left_y, bottom_right_x, bottom_right_y) {\n            var top_delta_x, top_delta_y, bottom_delta_x, bottom_delta_y,\n                s, t;\n\n            top_delta_x = top_right_x - top_left_x;\n            top_delta_y = top_right_y - top_left_y;\n            bottom_delta_x = bottom_right_x - bottom_left_x;\n            bottom_delta_y = bottom_right_y - bottom_left_y;\n\n            s = (\n                (-top_delta_y * (top_left_x - bottom_left_x)) + (top_delta_x * (top_left_y - bottom_left_y))\n            ) / (\n                -bottom_delta_x * top_delta_y + top_delta_x * bottom_delta_y\n            );\n\n            t = (\n                (bottom_delta_x * (top_left_y - bottom_left_y)) - (bottom_delta_y * (top_left_x - bottom_left_x))\n            ) / (\n                -bottom_delta_x * top_delta_y + top_delta_x * bottom_delta_y\n            );\n\n            // Collision detected\n            if (s >= 0 && s <= 1 && t >= 0 && t <= 1) {\n                return [\n                    top_left_x + (t * top_delta_x), // X\n                    top_left_y + (t * top_delta_y) // Y\n                ];\n            }\n\n            // No collision\n            return null;\n        }\n\n        function plotDifferenceArea(plot, ctx, series) {\n            if ( series.fillBelowTo === null ) {\n                return;\n            }\n\n            var otherseries,\n\n                ps,\n                points,\n\n                otherps,\n                otherpoints,\n\n                plotOffset,\n                fillStyle;\n\n            function openPolygon(x, y) {\n                ctx.beginPath();\n                ctx.moveTo(\n                    series.xaxis.p2c(x) + plotOffset.left,\n                    series.yaxis.p2c(y) + plotOffset.top\n                );\n\n            }\n\n            function closePolygon() {\n                ctx.closePath();\n                ctx.fill();\n            }\n\n            function validateInput() {\n                if (points.length/ps !== otherpoints.length/otherps) {\n                    console.error(\"Refusing to graph inconsistent number of points\");\n                    return false;\n                }\n\n                var i;\n                for (i = 0; i < (points.length / ps); i++) {\n                    if (\n                        points[i * ps] !== null &&\n                        otherpoints[i * otherps] !== null &&\n                        points[i * ps] !== otherpoints[i * otherps]\n                    ) {\n                        console.error(\"Refusing to graph points without matching value\");\n                        return false;\n                    }\n                }\n\n                return true;\n            }\n\n            function findNextStart(start_i, end_i) {\n                console.assert(end_i > start_i, \"expects the end index to be greater than the start index\");\n\n                var start = (\n                        start_i === 0 ||\n                        points[start_i - 1] === null ||\n                        otherpoints[start_i - 1] === null\n                    ),\n                    equal = false,\n                    i,\n                    intersect;\n\n                for (i = start_i; i < end_i; i++) {\n                    // Take note of null points\n                    if (\n                        points[(i * ps) + 1] === null ||\n                        otherpoints[(i * ps) + 1] === null\n                    ) {\n                        equal = false;\n                        start = true;\n                    }\n\n                    // Take note of equal points\n                    else if (points[(i * ps) + 1] === otherpoints[(i * otherps) + 1]) {\n                        equal = true;\n                        start = false;\n                    }\n\n\n                    else if (points[(i * ps) + 1] > otherpoints[(i * otherps) + 1]) {\n                        // If we begin above the desired point\n                        if (start) {\n                            openPolygon(points[i * ps], points[(i * ps) + 1]);\n                        }\n\n                        // If an equal point preceeds this, start the polygon at that equal point\n                        else if (equal) {\n                            openPolygon(points[(i - 1) * ps], points[((i - 1) * ps) + 1]);\n                        }\n\n                        // Otherwise, find the intersection point, and start it there\n                        else {\n                            intersect = intersectionPoint(i);\n                            openPolygon(intersect[0], intersect[1]);\n                        }\n\n                        topTraversal(i, end_i);\n                        return;\n                    }\n\n                    // If we go below equal, equal at any preceeding point is irrelevant\n                    else {\n                        start = false;\n                        equal = false;\n                    }\n                }\n            }\n\n            function intersectionPoint(right_i) {\n                console.assert(right_i > 0, \"expects the second point in the series line segment\");\n\n                var i, intersect;\n\n                for (i = 1; i < (otherpoints.length/otherps); i++) {\n                    intersect = segmentIntersection(\n                        points[(right_i - 1) * ps], points[((right_i - 1) * ps) + 1],\n                        points[right_i * ps], points[(right_i * ps) + 1],\n\n                        otherpoints[(i - 1) * otherps], otherpoints[((i - 1) * otherps) + 1],\n                        otherpoints[i * otherps], otherpoints[(i * otherps) + 1]\n                    );\n\n                    if (intersect !== null) {\n                        return intersect;\n                    }\n                }\n\n                console.error(\"intersectionPoint() should only be called when an intersection happens\");\n            }\n\n            function bottomTraversal(start_i, end_i) {\n                console.assert(start_i >= end_i, \"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)\");\n\n                var i;\n\n                for (i = start_i; i >= end_i; i--) {\n                    ctx.lineTo(\n                        otherseries.xaxis.p2c(otherpoints[i * otherps]) + plotOffset.left,\n                        otherseries.yaxis.p2c(otherpoints[(i * otherps) + 1]) + plotOffset.top\n                    );\n                }\n\n                closePolygon();\n            }\n\n            function topTraversal(start_i, end_i) {\n                console.assert(start_i <= end_i, \"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)\");\n\n                var i,\n                    intersect;\n\n                for (i = start_i; i < end_i; i++) {\n                    if (points[(i * ps) + 1] === null && i > start_i) {\n                        bottomTraversal(i - 1, start_i);\n                        findNextStart(i, end_i);\n                        return;\n                    }\n\n                    else if (points[(i * ps) + 1] === otherpoints[(i * otherps) + 1]) {\n                        bottomTraversal(i, start_i);\n                        findNextStart(i, end_i);\n                        return;\n                    }\n\n                    else if (points[(i * ps) + 1] < otherpoints[(i * otherps) + 1]) {\n                        intersect = intersectionPoint(i);\n                        ctx.lineTo(\n                            series.xaxis.p2c(intersect[0]) + plotOffset.left,\n                            series.yaxis.p2c(intersect[1]) + plotOffset.top\n                        );\n                        bottomTraversal(i, start_i);\n                        findNextStart(i, end_i);\n                        return;\n\n                    }\n\n                    else {\n                        ctx.lineTo(\n                            series.xaxis.p2c(points[i * ps]) + plotOffset.left,\n                            series.yaxis.p2c(points[(i * ps) + 1]) + plotOffset.top\n                        );\n                    }\n                }\n\n                bottomTraversal(end_i, start_i);\n            }\n\n\n            // Begin processing\n\n            otherseries = findBelowSeries( series, plot.getData() );\n\n            if ( !otherseries ) {\n                return;\n            }\n\n            ps = series.datapoints.pointsize;\n            points = series.datapoints.points;\n            otherps = otherseries.datapoints.pointsize;\n            otherpoints = otherseries.datapoints.points;\n            plotOffset = plot.getPlotOffset();\n\n            if (!validateInput()) {\n                return;\n            }\n\n\n            // Flot's getFillStyle() should probably be exposed somewhere\n            fillStyle = $.color.parse(series.color);\n            fillStyle.a = 0.4;\n            fillStyle.normalize();\n            ctx.fillStyle = fillStyle.toString();\n\n\n            // Begin recursive bi-directional traversal\n            findNextStart(0, points.length/ps);\n        }\n\n        plot.hooks.drawSeries.push(plotDifferenceArea);\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: options,\n        name: \"fillbelow\",\n        version: \"0.1.0\"\n    });\n\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/flot/jquery.flot.fillbelow.js","/* Flot plugin for showing crosshairs when the mouse hovers over the plot.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nThe plugin supports these options:\n\n\tcrosshair: {\n\t\tmode: null or \"x\" or \"y\" or \"xy\"\n\t\tcolor: color\n\t\tlineWidth: number\n\t}\n\nSet the mode to one of \"x\", \"y\" or \"xy\". The \"x\" mode enables a vertical\ncrosshair that lets you trace the values on the x axis, \"y\" enables a\nhorizontal crosshair and \"xy\" enables them both. \"color\" is the color of the\ncrosshair (default is \"rgba(170, 0, 0, 0.80)\"), \"lineWidth\" is the width of\nthe drawn lines (default is 1).\n\nThe plugin also adds four public methods:\n\n  - setCrosshair( pos )\n\n    Set the position of the crosshair. Note that this is cleared if the user\n    moves the mouse. \"pos\" is in coordinates of the plot and should be on the\n    form { x: xpos, y: ypos } (you can use x2/x3/... if you're using multiple\n    axes), which is coincidentally the same format as what you get from a\n    \"plothover\" event. If \"pos\" is null, the crosshair is cleared.\n\n  - clearCrosshair()\n\n    Clear the crosshair.\n\n  - lockCrosshair(pos)\n\n    Cause the crosshair to lock to the current location, no longer updating if\n    the user moves the mouse. Optionally supply a position (passed on to\n    setCrosshair()) to move it to.\n\n    Example usage:\n\n\tvar myFlot = $.plot( $(\"#graph\"), ..., { crosshair: { mode: \"x\" } } };\n\t$(\"#graph\").bind( \"plothover\", function ( evt, position, item ) {\n\t\tif ( item ) {\n\t\t\t// Lock the crosshair to the data point being hovered\n\t\t\tmyFlot.lockCrosshair({\n\t\t\t\tx: item.datapoint[ 0 ],\n\t\t\t\ty: item.datapoint[ 1 ]\n\t\t\t});\n\t\t} else {\n\t\t\t// Return normal crosshair operation\n\t\t\tmyFlot.unlockCrosshair();\n\t\t}\n\t});\n\n  - unlockCrosshair()\n\n    Free the crosshair to move again after locking it.\n*/\n\n(function ($) {\n    var options = {\n        crosshair: {\n            mode: null, // one of null, \"x\", \"y\" or \"xy\",\n            color: \"rgba(170, 0, 0, 0.80)\",\n            lineWidth: 1\n        }\n    };\n    \n    function init(plot) {\n        // position of crosshair in pixels\n        var crosshair = { x: -1, y: -1, locked: false };\n\n        plot.setCrosshair = function setCrosshair(pos) {\n            if (!pos)\n                crosshair.x = -1;\n            else {\n                var o = plot.p2c(pos);\n                crosshair.x = Math.max(0, Math.min(o.left, plot.width()));\n                crosshair.y = Math.max(0, Math.min(o.top, plot.height()));\n            }\n            \n            plot.triggerRedrawOverlay();\n        };\n        \n        plot.clearCrosshair = plot.setCrosshair; // passes null for pos\n        \n        plot.lockCrosshair = function lockCrosshair(pos) {\n            if (pos)\n                plot.setCrosshair(pos);\n            crosshair.locked = true;\n        };\n\n        plot.unlockCrosshair = function unlockCrosshair() {\n            crosshair.locked = false;\n        };\n\n        function onMouseOut(e) {\n            if (crosshair.locked)\n                return;\n\n            if (crosshair.x != -1) {\n                crosshair.x = -1;\n                plot.triggerRedrawOverlay();\n            }\n        }\n\n        function onMouseMove(e) {\n            if (crosshair.locked)\n                return;\n                \n            if (plot.getSelection && plot.getSelection()) {\n                crosshair.x = -1; // hide the crosshair while selecting\n                return;\n            }\n                \n            var offset = plot.offset();\n            crosshair.x = Math.max(0, Math.min(e.pageX - offset.left, plot.width()));\n            crosshair.y = Math.max(0, Math.min(e.pageY - offset.top, plot.height()));\n            plot.triggerRedrawOverlay();\n        }\n        \n        plot.hooks.bindEvents.push(function (plot, eventHolder) {\n            if (!plot.getOptions().crosshair.mode)\n                return;\n\n            eventHolder.mouseout(onMouseOut);\n            eventHolder.mousemove(onMouseMove);\n        });\n\n        plot.hooks.drawOverlay.push(function (plot, ctx) {\n            var c = plot.getOptions().crosshair;\n            if (!c.mode)\n                return;\n\n            var plotOffset = plot.getPlotOffset();\n            \n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            if (crosshair.x != -1) {\n                var adj = plot.getOptions().crosshair.lineWidth % 2 ? 0.5 : 0;\n\n                ctx.strokeStyle = c.color;\n                ctx.lineWidth = c.lineWidth;\n                ctx.lineJoin = \"round\";\n\n                ctx.beginPath();\n                if (c.mode.indexOf(\"x\") != -1) {\n                    var drawX = Math.floor(crosshair.x) + adj;\n                    ctx.moveTo(drawX, 0);\n                    ctx.lineTo(drawX, plot.height());\n                }\n                if (c.mode.indexOf(\"y\") != -1) {\n                    var drawY = Math.floor(crosshair.y) + adj;\n                    ctx.moveTo(0, drawY);\n                    ctx.lineTo(plot.width(), drawY);\n                }\n                ctx.stroke();\n            }\n            ctx.restore();\n        });\n\n        plot.hooks.shutdown.push(function (plot, eventHolder) {\n            eventHolder.unbind(\"mouseout\", onMouseOut);\n            eventHolder.unbind(\"mousemove\", onMouseMove);\n        });\n    }\n    \n    $.plot.plugins.push({\n        init: init,\n        options: options,\n        name: 'crosshair',\n        version: '1.0'\n    });\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/flot/jquery.flot.crosshair.js","/*\n * jQuery.flot.dashes\n *\n * options = {\n *   series: {\n *     dashes: {\n *\n *       // show\n *       // default: false\n *       // Whether to show dashes for the series.\n *       show: <boolean>,\n *\n *       // lineWidth\n *       // default: 2\n *       // The width of the dashed line in pixels.\n *       lineWidth: <number>,\n *\n *       // dashLength\n *       // default: 10\n *       // Controls the length of the individual dashes and the amount of\n *       // space between them.\n *       // If this is a number, the dashes and spaces will have that length.\n *       // If this is an array, it is read as [ dashLength, spaceLength ]\n *       dashLength: <number> or <array[2]>\n *     }\n *   }\n * }\n */\n(function($){\n\n  function init(plot) {\n\n    plot.hooks.processDatapoints.push(function(plot, series, datapoints) {\n\n      if (!series.dashes.show) return;\n\n      plot.hooks.draw.push(function(plot, ctx) {\n\n        var plotOffset = plot.getPlotOffset(),\n          axisx = series.xaxis,\n          axisy = series.yaxis;\n\n        function plotDashes(xoffset, yoffset) {\n\n          var points = datapoints.points,\n            ps = datapoints.pointsize,\n            prevx = null,\n            prevy = null,\n            dashRemainder = 0,\n            dashOn = true,\n            dashOnLength,\n            dashOffLength;\n\n          if (series.dashes.dashLength[0]) {\n            dashOnLength = series.dashes.dashLength[0];\n            if (series.dashes.dashLength[1]) {\n              dashOffLength = series.dashes.dashLength[1];\n            } else {\n              dashOffLength = dashOnLength;\n            }\n          } else {\n            dashOffLength = dashOnLength = series.dashes.dashLength;\n          }\n\n          ctx.beginPath();\n\n          for (var i = ps; i < points.length; i += ps) {\n\n            var x1 = points[i - ps],\n              y1 = points[i - ps + 1],\n              x2 = points[i],\n              y2 = points[i + 1];\n\n            if (x1 == null || x2 == null) continue;\n\n            // clip with ymin\n            if (y1 <= y2 && y1 < axisy.min) {\n              if (y2 < axisy.min) continue;   // line segment is outside\n              // compute new intersection point\n              x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n              y1 = axisy.min;\n            } else if (y2 <= y1 && y2 < axisy.min) {\n              if (y1 < axisy.min) continue;\n              x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n              y2 = axisy.min;\n            }\n\n            // clip with ymax\n            if (y1 >= y2 && y1 > axisy.max) {\n              if (y2 > axisy.max) continue;\n              x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n              y1 = axisy.max;\n            } else if (y2 >= y1 && y2 > axisy.max) {\n              if (y1 > axisy.max) continue;\n              x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n              y2 = axisy.max;\n            }\n\n            // clip with xmin\n            if (x1 <= x2 && x1 < axisx.min) {\n              if (x2 < axisx.min) continue;\n              y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n              x1 = axisx.min;\n            } else if (x2 <= x1 && x2 < axisx.min) {\n              if (x1 < axisx.min) continue;\n              y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n              x2 = axisx.min;\n            }\n\n            // clip with xmax\n            if (x1 >= x2 && x1 > axisx.max) {\n              if (x2 > axisx.max) continue;\n              y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n              x1 = axisx.max;\n            } else if (x2 >= x1 && x2 > axisx.max) {\n              if (x1 > axisx.max) continue;\n              y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n              x2 = axisx.max;\n            }\n\n            if (x1 != prevx || y1 != prevy) {\n              ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);\n            }\n\n            var ax1 = axisx.p2c(x1) + xoffset,\n              ay1 = axisy.p2c(y1) + yoffset,\n              ax2 = axisx.p2c(x2) + xoffset,\n              ay2 = axisy.p2c(y2) + yoffset,\n              dashOffset;\n\n            function lineSegmentOffset(segmentLength) {\n\n              var c = Math.sqrt(Math.pow(ax2 - ax1, 2) + Math.pow(ay2 - ay1, 2));\n\n              if (c <= segmentLength) {\n                return {\n                  deltaX: ax2 - ax1,\n                  deltaY: ay2 - ay1,\n                  distance: c,\n                  remainder: segmentLength - c\n                }\n              } else {\n                var xsign = ax2 > ax1 ? 1 : -1,\n                  ysign = ay2 > ay1 ? 1 : -1;\n                return {\n                  deltaX: xsign * Math.sqrt(Math.pow(segmentLength, 2) / (1 + Math.pow((ay2 - ay1)/(ax2 - ax1), 2))),\n                  deltaY: ysign * Math.sqrt(Math.pow(segmentLength, 2) - Math.pow(segmentLength, 2) / (1 + Math.pow((ay2 - ay1)/(ax2 - ax1), 2))),\n                  distance: segmentLength,\n                  remainder: 0\n                };\n              }\n            }\n            //-end lineSegmentOffset\n\n            do {\n\n              dashOffset = lineSegmentOffset(\n                dashRemainder > 0 ? dashRemainder :\n                  dashOn ? dashOnLength : dashOffLength);\n\n              if (dashOffset.deltaX != 0 || dashOffset.deltaY != 0) {\n                if (dashOn) {\n                  ctx.lineTo(ax1 + dashOffset.deltaX, ay1 + dashOffset.deltaY);\n                } else {\n                  ctx.moveTo(ax1 + dashOffset.deltaX, ay1 + dashOffset.deltaY);\n                }\n              }\n\n              dashOn = !dashOn;\n              dashRemainder = dashOffset.remainder;\n              ax1 += dashOffset.deltaX;\n              ay1 += dashOffset.deltaY;\n\n            } while (dashOffset.distance > 0);\n\n            prevx = x2;\n            prevy = y2;\n          }\n\n          ctx.stroke();\n        }\n        //-end plotDashes\n\n        ctx.save();\n        ctx.translate(plotOffset.left, plotOffset.top);\n        ctx.lineJoin = 'round';\n\n        var lw = series.dashes.lineWidth,\n          sw = series.shadowSize;\n\n        // FIXME: consider another form of shadow when filling is turned on\n        if (lw > 0 && sw > 0) {\n          // draw shadow as a thick and thin line with transparency\n          ctx.lineWidth = sw;\n          ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\n          // position shadow at angle from the mid of line\n          var angle = Math.PI/18;\n          plotDashes(Math.sin(angle) * (lw/2 + sw/2), Math.cos(angle) * (lw/2 + sw/2));\n          ctx.lineWidth = sw/2;\n          plotDashes(Math.sin(angle) * (lw/2 + sw/4), Math.cos(angle) * (lw/2 + sw/4));\n        }\n\n        ctx.lineWidth = lw;\n        ctx.strokeStyle = series.color;\n\n        if (lw > 0) {\n          plotDashes(0, 0);\n        }\n\n        ctx.restore();\n\n      });\n      //-end draw hook\n\n    });\n    //-end processDatapoints hook\n\n  }\n  //-end init\n\n  $.plot.plugins.push({\n    init: init,\n    options: {\n      series: {\n        dashes: {\n          show: false,\n          lineWidth: 2,\n          dashLength: 10\n        }\n      }\n    },\n    name: 'dashes',\n    version: '0.1'\n  });\n\n})(jQuery)\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/flot/jquery.flot.dashes.js","define([\n  'jquery',\n  'lodash',\n  'angular',\n  'tether-drop',\n],\nfunction ($, _, angular, Drop) {\n  'use strict';\n\n  function createAnnotationToolip(element, event, plot) {\n    var injector = angular.element(document).injector();\n    var content = document.createElement('div');\n    content.innerHTML = '<annotation-tooltip event=\"event\" on-edit=\"onEdit()\"></annotation-tooltip>';\n\n    injector.invoke([\"$compile\", \"$rootScope\", function($compile, $rootScope) {\n      var eventManager = plot.getOptions().events.manager;\n      var tmpScope = $rootScope.$new(true);\n      tmpScope.event = event;\n      tmpScope.onEdit = function() {\n        eventManager.editEvent(event);\n      };\n\n      $compile(content)(tmpScope);\n      tmpScope.$digest();\n      tmpScope.$destroy();\n\n      var drop = new Drop({\n        target: element[0],\n        content: content,\n        position: \"bottom center\",\n        classes: 'drop-popover drop-popover--annotation',\n        openOn: 'hover',\n        hoverCloseDelay: 200,\n        tetherOptions: {\n          constraints: [{to: 'window', pin: true, attachment: \"both\"}]\n        }\n      });\n\n      drop.open();\n\n      drop.on('close', function() {\n        setTimeout(function() {\n          drop.destroy();\n        });\n      });\n    }]);\n  }\n\n  var markerElementToAttachTo = null;\n\n  function createEditPopover(element, event, plot) {\n    var eventManager = plot.getOptions().events.manager;\n    if (eventManager.editorOpen) {\n      // update marker element to attach to (needed in case of legend on the right\n      // when there is a double render pass and the inital marker element is removed)\n      markerElementToAttachTo = element;\n      return;\n    }\n\n    // mark as openend\n    eventManager.editorOpened();\n    // set marker elment to attache to\n    markerElementToAttachTo = element;\n\n    // wait for element to be attached and positioned\n    setTimeout(function() {\n\n      var injector = angular.element(document).injector();\n      var content = document.createElement('div');\n      content.innerHTML = '<event-editor panel-ctrl=\"panelCtrl\" event=\"event\" close=\"close()\"></event-editor>';\n\n      injector.invoke([\"$compile\", \"$rootScope\", function($compile, $rootScope) {\n        var scope = $rootScope.$new(true);\n        var drop;\n\n        scope.event = event;\n        scope.panelCtrl = eventManager.panelCtrl;\n        scope.close = function() {\n          drop.close();\n        };\n\n        $compile(content)(scope);\n        scope.$digest();\n\n        drop = new Drop({\n          target: markerElementToAttachTo[0],\n          content: content,\n          position: \"bottom center\",\n          classes: 'drop-popover drop-popover--form',\n          openOn: 'click',\n          tetherOptions: {\n            constraints: [{to: 'window', pin: true, attachment: \"both\"}]\n          }\n        });\n\n        drop.open();\n        eventManager.editorOpened();\n\n        drop.on('close', function() {\n          // need timeout here in order call drop.destroy\n          setTimeout(function() {\n            eventManager.editorClosed();\n            scope.$destroy();\n            drop.destroy();\n          });\n        });\n      }]);\n\n    }, 100);\n  }\n\n  /*\n   * jquery.flot.events\n   *\n   * description: Flot plugin for adding events/markers to the plot\n   * version: 0.2.5\n   * authors:\n   *    Alexander Wunschik <alex@wunschik.net>\n   *    Joel Oughton <joeloughton@gmail.com>\n   *    Nicolas Joseph <www.nicolasjoseph.com>\n   *\n   * website: https://github.com/mojoaxel/flot-events\n   *\n   * released under MIT License and GPLv2+\n   */\n\n  /**\n   * A class that allows for the drawing an remove of some object\n   */\n  var DrawableEvent = function(object, drawFunc, clearFunc, moveFunc, left, top, width, height) {\n    var _object = object;\n    var\t_drawFunc = drawFunc;\n    var\t_clearFunc = clearFunc;\n    var\t_moveFunc = moveFunc;\n    var\t_position = { left: left, top: top };\n    var\t_width = width;\n    var\t_height = height;\n\n    this.width = function() { return _width; };\n    this.height = function() { return _height; };\n    this.position = function() { return _position; };\n    this.draw = function() { _drawFunc(_object); };\n    this.clear = function() { _clearFunc(_object); };\n    this.getObject = function() { return _object; };\n    this.moveTo = function(position) {\n      _position = position;\n      _moveFunc(_object, _position);\n    };\n  };\n\n  /**\n   * Event class that stores options (eventType, min, max, title, description) and the object to draw.\n   */\n  var VisualEvent = function(options, drawableEvent) {\n    var _parent;\n    var _options = options;\n    var _drawableEvent = drawableEvent;\n    var _hidden = false;\n\n    this.visual = function() { return _drawableEvent; };\n    this.getOptions = function() { return _options; };\n    this.getParent = function() { return _parent; };\n    this.isHidden = function() { return _hidden; };\n    this.hide = function() { _hidden = true; };\n    this.unhide = function() { _hidden = false; };\n  };\n\n  /**\n   * A Class that handles the event-markers inside the given plot\n   */\n  var EventMarkers = function(plot) {\n    var _events = [];\n\n    this._types = [];\n    this._plot = plot;\n    this.eventsEnabled = false;\n\n    this.getEvents = function() {\n      return _events;\n    };\n\n    this.setTypes = function(types) {\n      return this._types = types;\n    };\n\n    /**\n     * create internal objects for the given events\n     */\n    this.setupEvents = function(events) {\n      var that = this;\n      var parts = _.partition(events, 'isRegion');\n      var regions = parts[0];\n      events = parts[1];\n\n      $.each(events, function(index, event) {\n        var ve = new VisualEvent(event, that._buildDiv(event));\n        _events.push(ve);\n      });\n\n      $.each(regions, function (index, event) {\n        var vre = new VisualEvent(event, that._buildRegDiv(event));\n        _events.push(vre);\n      });\n\n      _events.sort(function(a, b) {\n        var ao = a.getOptions(), bo = b.getOptions();\n        if (ao.min > bo.min) { return 1; }\n        if (ao.min < bo.min) { return -1; }\n        return 0;\n      });\n    };\n\n    /**\n     * draw the events to the plot\n     */\n    this.drawEvents = function() {\n      var that = this;\n      // var o = this._plot.getPlotOffset();\n\n      $.each(_events, function(index, event) {\n        // check event is inside the graph range\n        if (that._insidePlot(event.getOptions().min) && !event.isHidden()) {\n          event.visual().draw();\n        }  else {\n          event.visual().getObject().hide();\n        }\n      });\n    };\n\n    /**\n     * update the position of the event-markers (e.g. after scrolling or zooming)\n     */\n    this.updateEvents = function() {\n      var that = this;\n      var o = this._plot.getPlotOffset(), left, top;\n      var xaxis = this._plot.getXAxes()[this._plot.getOptions().events.xaxis - 1];\n\n      $.each(_events, function(index, event) {\n        top = o.top + that._plot.height() - event.visual().height();\n        left = xaxis.p2c(event.getOptions().min) + o.left - event.visual().width() / 2;\n        event.visual().moveTo({ top: top, left: left });\n      });\n    };\n\n    /**\n     * remove all events from the plot\n     */\n    this._clearEvents = function() {\n      $.each(_events, function(index, val) {\n        val.visual().clear();\n      });\n      _events = [];\n    };\n\n    /**\n     * create a DOM element for the given event\n     */\n    this._buildDiv = function(event) {\n      var that = this;\n\n      var container = this._plot.getPlaceholder();\n      var o = this._plot.getPlotOffset();\n      var axes = this._plot.getAxes();\n      var xaxis = this._plot.getXAxes()[this._plot.getOptions().events.xaxis - 1];\n      var yaxis, top, left, color, markerSize, markerShow, lineStyle, lineWidth;\n      var markerTooltip;\n\n      // determine the y axis used\n      if (axes.yaxis && axes.yaxis.used) { yaxis = axes.yaxis; }\n      if (axes.yaxis2 && axes.yaxis2.used) { yaxis = axes.yaxis2; }\n\n      // map the eventType to a types object\n      var eventTypeId = event.eventType;\n\n      if (this._types === null || !this._types[eventTypeId] || !this._types[eventTypeId].color) {\n        color = '#666';\n      } else {\n        color = this._types[eventTypeId].color;\n      }\n\n      if (this._types === null || !this._types[eventTypeId] || !this._types[eventTypeId].markerSize) {\n        markerSize = 8; //default marker size\n      } else {\n        markerSize = this._types[eventTypeId].markerSize;\n      }\n\n      if (this._types === null || !this._types[eventTypeId] || this._types[eventTypeId].markerShow === undefined) {\n        markerShow = true;\n      } else {\n        markerShow = this._types[eventTypeId].markerShow;\n      }\n\n      if (this._types === null || !this._types[eventTypeId] || this._types[eventTypeId].markerTooltip === undefined) {\n        markerTooltip = true;\n      } else {\n        markerTooltip = this._types[eventTypeId].markerTooltip;\n      }\n\n      if (this._types == null || !this._types[eventTypeId] || !this._types[eventTypeId].lineStyle) {\n        lineStyle = 'dashed'; //default line style\n      } else {\n        lineStyle = this._types[eventTypeId].lineStyle.toLowerCase();\n      }\n\n      if (this._types == null || !this._types[eventTypeId] || this._types[eventTypeId].lineWidth === undefined) {\n        lineWidth = 1; //default line width\n      } else {\n        lineWidth = this._types[eventTypeId].lineWidth;\n      }\n\n      var topOffset = xaxis.options.eventSectionHeight || 0;\n      topOffset = topOffset / 3;\n\n      top = o.top + this._plot.height() + topOffset;\n      left = xaxis.p2c(event.min) + o.left;\n\n      var line = $('<div class=\"events_line flot-temp-elem\"></div>').css({\n        \"position\": \"absolute\",\n        \"opacity\": 0.8,\n        \"left\": left + 'px',\n        \"top\": 8,\n        \"width\": lineWidth + \"px\",\n        \"height\": this._plot.height() + topOffset * 0.8,\n        \"border-left-width\": lineWidth + \"px\",\n        \"border-left-style\": lineStyle,\n        \"border-left-color\": color,\n        \"color\": color\n      })\n      .appendTo(container);\n\n      if (markerShow) {\n        var marker = $('<div class=\"events_marker\"></div>').css({\n          \"position\": \"absolute\",\n          \"left\": (-markerSize - Math.round(lineWidth / 2)) + \"px\",\n          \"font-size\": 0,\n          \"line-height\": 0,\n          \"width\": 0,\n          \"height\": 0,\n          \"border-left\": markerSize+\"px solid transparent\",\n          \"border-right\": markerSize+\"px solid transparent\"\n        });\n\n        marker.appendTo(line);\n\n        if (this._types[eventTypeId] && this._types[eventTypeId].position && this._types[eventTypeId].position.toUpperCase() === 'BOTTOM') {\n          marker.css({\n            \"top\": top-markerSize-8 +\"px\",\n            \"border-top\": \"none\",\n            \"border-bottom\": markerSize+\"px solid \" + color\n          });\n        } else {\n          marker.css({\n            \"top\": \"0px\",\n            \"border-top\": markerSize+\"px solid \" + color,\n            \"border-bottom\": \"none\"\n          });\n        }\n\n        marker.data({\n          \"event\": event\n        });\n\n        var mouseenter = function() {\n          createAnnotationToolip(marker, $(this).data(\"event\"), that._plot);\n        };\n\n        if (event.editModel) {\n          createEditPopover(marker, event.editModel, that._plot);\n        }\n\n        var mouseleave = function() {\n          that._plot.clearSelection();\n        };\n\n        if (markerTooltip) {\n          marker.css({ \"cursor\": \"help\" });\n          marker.hover(mouseenter, mouseleave);\n        }\n      }\n\n      var drawableEvent = new DrawableEvent(\n        line,\n        function drawFunc(obj) { obj.show(); },\n        function(obj) { obj.remove(); },\n        function(obj, position) {\n          obj.css({\n            top: position.top,\n            left: position.left\n          });\n        },\n        left,\n        top,\n        line.width(),\n        line.height()\n      );\n\n      return drawableEvent;\n    };\n\n    /**\n     * create a DOM element for the given region\n     */\n    this._buildRegDiv = function (event) {\n      var that = this;\n\n      var container = this._plot.getPlaceholder();\n      var o = this._plot.getPlotOffset();\n      var axes = this._plot.getAxes();\n      var xaxis = this._plot.getXAxes()[this._plot.getOptions().events.xaxis - 1];\n      var yaxis, top, left, lineWidth, regionWidth, lineStyle, color, markerTooltip;\n\n      // determine the y axis used\n      if (axes.yaxis && axes.yaxis.used) { yaxis = axes.yaxis; }\n      if (axes.yaxis2 && axes.yaxis2.used) { yaxis = axes.yaxis2; }\n\n      // map the eventType to a types object\n      var eventTypeId = event.eventType;\n\n      if (this._types === null || !this._types[eventTypeId] || !this._types[eventTypeId].color) {\n        color = '#666';\n      } else {\n        color = this._types[eventTypeId].color;\n      }\n\n      if (this._types === null || !this._types[eventTypeId] || this._types[eventTypeId].markerTooltip === undefined) {\n        markerTooltip = true;\n      } else {\n        markerTooltip = this._types[eventTypeId].markerTooltip;\n      }\n\n      if (this._types == null || !this._types[eventTypeId] || this._types[eventTypeId].lineWidth === undefined) {\n        lineWidth = 1; //default line width\n      } else {\n        lineWidth = this._types[eventTypeId].lineWidth;\n      }\n\n      if (this._types == null || !this._types[eventTypeId] || !this._types[eventTypeId].lineStyle) {\n        lineStyle = 'dashed'; //default line style\n      } else {\n        lineStyle = this._types[eventTypeId].lineStyle.toLowerCase();\n      }\n\n      var topOffset = 2;\n      top = o.top + this._plot.height() + topOffset;\n\n      var timeFrom = Math.min(event.min, event.timeEnd);\n      var timeTo = Math.max(event.min, event.timeEnd);\n      left = xaxis.p2c(timeFrom) + o.left;\n      var right = xaxis.p2c(timeTo) + o.left;\n      regionWidth = right - left;\n\n      _.each([left, right], function(position) {\n        var line = $('<div class=\"events_line flot-temp-elem\"></div>').css({\n          \"position\": \"absolute\",\n          \"opacity\": 0.8,\n          \"left\": position + 'px',\n          \"top\": 8,\n          \"width\": lineWidth + \"px\",\n          \"height\": that._plot.height() + topOffset,\n          \"border-left-width\": lineWidth + \"px\",\n          \"border-left-style\": lineStyle,\n          \"border-left-color\": color,\n          \"color\": color\n        });\n        line.appendTo(container);\n      });\n\n      var region = $('<div class=\"events_marker region_marker flot-temp-elem\"></div>').css({\n        \"position\": \"absolute\",\n        \"opacity\": 0.5,\n        \"left\": left + 'px',\n        \"top\": top,\n        \"width\": Math.round(regionWidth + lineWidth) + \"px\",\n        \"height\": \"0.5rem\",\n        \"border-left-color\": color,\n        \"color\": color,\n        \"background-color\": color\n      });\n      region.appendTo(container);\n\n      region.data({\n        \"event\": event\n      });\n\n      var mouseenter = function () {\n        createAnnotationToolip(region, $(this).data(\"event\"), that._plot);\n      };\n\n      if (event.editModel) {\n        createEditPopover(region, event.editModel, that._plot);\n      }\n\n      var mouseleave = function () {\n        that._plot.clearSelection();\n      };\n\n      if (markerTooltip) {\n        region.css({ \"cursor\": \"help\" });\n        region.hover(mouseenter, mouseleave);\n      }\n\n      var drawableEvent = new DrawableEvent(\n        region,\n        function drawFunc(obj) { obj.show(); },\n        function (obj) { obj.remove(); },\n        function (obj, position) {\n          obj.css({\n            top: position.top,\n            left: position.left\n          });\n        },\n        left,\n        top,\n        region.width(),\n        region.height()\n      );\n\n      return drawableEvent;\n    };\n\n    /**\n     * check if the event is inside visible range\n     */\n    this._insidePlot = function(x) {\n      var xaxis = this._plot.getXAxes()[this._plot.getOptions().events.xaxis - 1];\n      var xc = xaxis.p2c(x);\n      return xc > 0 && xc < xaxis.p2c(xaxis.max);\n    };\n  };\n\n  /**\n   * initialize the plugin for the given plot\n   */\n  function init(plot) {\n    /*jshint validthis:true */\n    var that = this;\n    var eventMarkers = new EventMarkers(plot);\n\n    plot.getEvents = function() {\n      return eventMarkers._events;\n    };\n\n    plot.hideEvents = function() {\n      $.each(eventMarkers._events, function(index, event) {\n        event.visual().getObject().hide();\n      });\n    };\n\n    plot.showEvents = function() {\n      plot.hideEvents();\n      $.each(eventMarkers._events, function(index, event) {\n        event.hide();\n      });\n\n      that.eventMarkers.drawEvents();\n    };\n\n    // change events on an existing plot\n    plot.setEvents = function(events) {\n      if (eventMarkers.eventsEnabled) {\n        eventMarkers.setupEvents(events);\n      }\n    };\n\n    plot.hooks.processOptions.push(function(plot, options) {\n      // enable the plugin\n      if (options.events.data != null) {\n        eventMarkers.eventsEnabled = true;\n      }\n    });\n\n    plot.hooks.draw.push(function(plot) {\n      var options = plot.getOptions();\n\n      if (eventMarkers.eventsEnabled) {\n        // check for first run\n        if (eventMarkers.getEvents().length < 1) {\n          eventMarkers.setTypes(options.events.types);\n          eventMarkers.setupEvents(options.events.data);\n        } else {\n          eventMarkers.updateEvents();\n        }\n      }\n\n      eventMarkers.drawEvents();\n    });\n  }\n\n  var defaultOptions = {\n    events: {\n      data: null,\n      types: null,\n      xaxis: 1,\n      position: 'BOTTOM'\n    }\n  };\n\n  $.plot.plugins.push({\n    init: init,\n    options: defaultOptions,\n    name: \"events\",\n    version: \"0.2.5\"\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./jquery.flot.events.js","/*! tether-drop 1.4.1 */\n\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([\"tether\"], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory(require('tether'));\n  } else {\n    root.Drop = factory(root.Tether);\n  }\n}(this, function(Tether) {\n\n/* global Tether */\n'use strict';\n\nvar _bind = Function.prototype.bind;\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _Tether$Utils = Tether.Utils;\nvar extend = _Tether$Utils.extend;\nvar addClass = _Tether$Utils.addClass;\nvar removeClass = _Tether$Utils.removeClass;\nvar hasClass = _Tether$Utils.hasClass;\nvar Evented = _Tether$Utils.Evented;\n\nfunction sortAttach(str) {\n  var _str$split = str.split(' ');\n\n  var _str$split2 = _slicedToArray(_str$split, 2);\n\n  var first = _str$split2[0];\n  var second = _str$split2[1];\n\n  if (['left', 'right'].indexOf(first) >= 0) {\n    var _ref = [second, first];\n    first = _ref[0];\n    second = _ref[1];\n  }\n  return [first, second].join(' ');\n}\n\nfunction removeFromArray(arr, item) {\n  var index = undefined;\n  var results = [];\n  while ((index = arr.indexOf(item)) !== -1) {\n    results.push(arr.splice(index, 1));\n  }\n  return results;\n}\n\nvar clickEvents = ['click'];\nif ('ontouchstart' in document.documentElement) {\n  clickEvents.push('touchstart');\n}\n\nvar transitionEndEvents = {\n  'WebkitTransition': 'webkitTransitionEnd',\n  'MozTransition': 'transitionend',\n  'OTransition': 'otransitionend',\n  'transition': 'transitionend'\n};\n\nvar transitionEndEvent = '';\nfor (var _name in transitionEndEvents) {\n  if (({}).hasOwnProperty.call(transitionEndEvents, _name)) {\n    var tempEl = document.createElement('p');\n    if (typeof tempEl.style[_name] !== 'undefined') {\n      transitionEndEvent = transitionEndEvents[_name];\n    }\n  }\n}\n\nvar MIRROR_ATTACH = {\n  left: 'right',\n  right: 'left',\n  top: 'bottom',\n  bottom: 'top',\n  middle: 'middle',\n  center: 'center'\n};\n\nvar allDrops = {};\n\n// Drop can be included in external libraries.  Calling createContext gives you a fresh\n// copy of drop which won't interact with other copies on the page (beyond calling the document events).\n\nfunction createContext() {\n  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n  var drop = function drop() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return new (_bind.apply(DropInstance, [null].concat(args)))();\n  };\n\n  extend(drop, {\n    createContext: createContext,\n    drops: [],\n    defaults: {}\n  });\n\n  var defaultOptions = {\n    classPrefix: 'drop',\n    defaults: {\n      position: 'bottom left',\n      openOn: 'click',\n      beforeClose: null,\n      constrainToScrollParent: true,\n      constrainToWindow: true,\n      classes: '',\n      remove: false,\n      openDelay: 0,\n      closeDelay: 50,\n      // inherited from openDelay and closeDelay if not explicitly defined\n      focusDelay: null,\n      blurDelay: null,\n      hoverOpenDelay: null,\n      hoverCloseDelay: null,\n      tetherOptions: {}\n    }\n  };\n\n  extend(drop, defaultOptions, options);\n  extend(drop.defaults, defaultOptions.defaults, options.defaults);\n\n  if (typeof allDrops[drop.classPrefix] === 'undefined') {\n    allDrops[drop.classPrefix] = [];\n  }\n\n  drop.updateBodyClasses = function () {\n    // There is only one body, so despite the context concept, we still iterate through all\n    // drops which share our classPrefix.\n\n    var anyOpen = false;\n    var drops = allDrops[drop.classPrefix];\n    var len = drops.length;\n    for (var i = 0; i < len; ++i) {\n      if (drops[i].isOpened()) {\n        anyOpen = true;\n        break;\n      }\n    }\n\n    if (anyOpen) {\n      addClass(document.body, drop.classPrefix + '-open');\n    } else {\n      removeClass(document.body, drop.classPrefix + '-open');\n    }\n  };\n\n  var DropInstance = (function (_Evented) {\n    _inherits(DropInstance, _Evented);\n\n    function DropInstance(opts) {\n      _classCallCheck(this, DropInstance);\n\n      _get(Object.getPrototypeOf(DropInstance.prototype), 'constructor', this).call(this);\n      this.options = extend({}, drop.defaults, opts);\n      this.target = this.options.target;\n\n      if (typeof this.target === 'undefined') {\n        throw new Error('Drop Error: You must provide a target.');\n      }\n\n      var dataPrefix = 'data-' + drop.classPrefix;\n\n      var contentAttr = this.target.getAttribute(dataPrefix);\n      if (contentAttr && this.options.content == null) {\n        this.options.content = contentAttr;\n      }\n\n      var attrsOverride = ['position', 'openOn'];\n      for (var i = 0; i < attrsOverride.length; ++i) {\n\n        var override = this.target.getAttribute(dataPrefix + '-' + attrsOverride[i]);\n        if (override && this.options[attrsOverride[i]] == null) {\n          this.options[attrsOverride[i]] = override;\n        }\n      }\n\n      if (this.options.classes && this.options.addTargetClasses !== false) {\n        addClass(this.target, this.options.classes);\n      }\n\n      drop.drops.push(this);\n      allDrops[drop.classPrefix].push(this);\n\n      this._boundEvents = [];\n      this.bindMethods();\n      this.setupElements();\n      this.setupEvents();\n      this.setupTether();\n    }\n\n    _createClass(DropInstance, [{\n      key: '_on',\n      value: function _on(element, event, handler) {\n        this._boundEvents.push({ element: element, event: event, handler: handler });\n        element.addEventListener(event, handler);\n      }\n    }, {\n      key: 'bindMethods',\n      value: function bindMethods() {\n        this.transitionEndHandler = this._transitionEndHandler.bind(this);\n      }\n    }, {\n      key: 'setupElements',\n      value: function setupElements() {\n        var _this = this;\n\n        this.drop = document.createElement('div');\n        addClass(this.drop, drop.classPrefix);\n\n        if (this.options.classes) {\n          addClass(this.drop, this.options.classes);\n        }\n\n        this.content = document.createElement('div');\n        addClass(this.content, drop.classPrefix + '-content');\n\n        if (typeof this.options.content === 'function') {\n          var generateAndSetContent = function generateAndSetContent() {\n            // content function might return a string or an element\n            var contentElementOrHTML = _this.options.content.call(_this, _this);\n\n            if (typeof contentElementOrHTML === 'string') {\n              _this.content.innerHTML = contentElementOrHTML;\n            } else if (typeof contentElementOrHTML === 'object') {\n              _this.content.innerHTML = '';\n              _this.content.appendChild(contentElementOrHTML);\n            } else {\n              throw new Error('Drop Error: Content function should return a string or HTMLElement.');\n            }\n          };\n\n          generateAndSetContent();\n          this.on('open', generateAndSetContent.bind(this));\n        } else if (typeof this.options.content === 'object') {\n          this.content.appendChild(this.options.content);\n        } else {\n          this.content.innerHTML = this.options.content;\n        }\n\n        this.drop.appendChild(this.content);\n      }\n    }, {\n      key: 'setupTether',\n      value: function setupTether() {\n        // Tether expects two attachment points, one in the target element, one in the\n        // drop.  We use a single one, and use the order as well, to allow us to put\n        // the drop on either side of any of the four corners.  This magic converts between\n        // the two:\n        var dropAttach = this.options.position.split(' ');\n        dropAttach[0] = MIRROR_ATTACH[dropAttach[0]];\n        dropAttach = dropAttach.join(' ');\n\n        var constraints = [];\n        if (this.options.constrainToScrollParent) {\n          constraints.push({\n            to: 'scrollParent',\n            pin: 'top, bottom',\n            attachment: 'together none'\n          });\n        } else {\n          // To get 'out of bounds' classes\n          constraints.push({\n            to: 'scrollParent'\n          });\n        }\n\n        if (this.options.constrainToWindow !== false) {\n          constraints.push({\n            to: 'window',\n            attachment: 'together'\n          });\n        } else {\n          // To get 'out of bounds' classes\n          constraints.push({\n            to: 'window'\n          });\n        }\n\n        var opts = {\n          element: this.drop,\n          target: this.target,\n          attachment: sortAttach(dropAttach),\n          targetAttachment: sortAttach(this.options.position),\n          classPrefix: drop.classPrefix,\n          offset: '0 0',\n          targetOffset: '0 0',\n          enabled: false,\n          constraints: constraints,\n          addTargetClasses: this.options.addTargetClasses\n        };\n\n        if (this.options.tetherOptions !== false) {\n          this.tether = new Tether(extend({}, opts, this.options.tetherOptions));\n        }\n      }\n    }, {\n      key: 'setupEvents',\n      value: function setupEvents() {\n        var _this2 = this;\n\n        if (!this.options.openOn) {\n          return;\n        }\n\n        if (this.options.openOn === 'always') {\n          setTimeout(this.open.bind(this));\n          return;\n        }\n\n        var events = this.options.openOn.split(' ');\n\n        if (events.indexOf('click') >= 0) {\n          var openHandler = function openHandler(event) {\n            _this2.toggle(event);\n            event.preventDefault();\n          };\n\n          var closeHandler = function closeHandler(event) {\n            if (!_this2.isOpened()) {\n              return;\n            }\n\n            // Clicking inside dropdown\n            if (event.target === _this2.drop || _this2.drop.contains(event.target)) {\n              return;\n            }\n\n            // Clicking target\n            if (event.target === _this2.target || _this2.target.contains(event.target)) {\n              return;\n            }\n\n            _this2.close(event);\n          };\n\n          for (var i = 0; i < clickEvents.length; ++i) {\n            var clickEvent = clickEvents[i];\n            this._on(this.target, clickEvent, openHandler);\n            this._on(document, clickEvent, closeHandler);\n          }\n        }\n\n        var inTimeout = null;\n        var outTimeout = null;\n\n        var inHandler = function inHandler(event) {\n          if (outTimeout !== null) {\n            clearTimeout(outTimeout);\n          } else {\n            inTimeout = setTimeout(function () {\n              _this2.open(event);\n              inTimeout = null;\n            }, (event.type === 'focus' ? _this2.options.focusDelay : _this2.options.hoverOpenDelay) || _this2.options.openDelay);\n          }\n        };\n\n        var outHandler = function outHandler(event) {\n          if (inTimeout !== null) {\n            clearTimeout(inTimeout);\n          } else {\n            outTimeout = setTimeout(function () {\n              _this2.close(event);\n              outTimeout = null;\n            }, (event.type === 'blur' ? _this2.options.blurDelay : _this2.options.hoverCloseDelay) || _this2.options.closeDelay);\n          }\n        };\n\n        if (events.indexOf('hover') >= 0) {\n          this._on(this.target, 'mouseover', inHandler);\n          this._on(this.drop, 'mouseover', inHandler);\n          this._on(this.target, 'mouseout', outHandler);\n          this._on(this.drop, 'mouseout', outHandler);\n        }\n\n        if (events.indexOf('focus') >= 0) {\n          this._on(this.target, 'focus', inHandler);\n          this._on(this.drop, 'focus', inHandler);\n          this._on(this.target, 'blur', outHandler);\n          this._on(this.drop, 'blur', outHandler);\n        }\n      }\n    }, {\n      key: 'isOpened',\n      value: function isOpened() {\n        if (this.drop) {\n          return hasClass(this.drop, drop.classPrefix + '-open');\n        }\n      }\n    }, {\n      key: 'toggle',\n      value: function toggle(event) {\n        if (this.isOpened()) {\n          this.close(event);\n        } else {\n          this.open(event);\n        }\n      }\n    }, {\n      key: 'open',\n      value: function open(event) {\n        var _this3 = this;\n\n        /* eslint no-unused-vars: 0 */\n        if (this.isOpened()) {\n          return;\n        }\n\n        if (!this.drop.parentNode) {\n          document.body.appendChild(this.drop);\n        }\n\n        if (typeof this.tether !== 'undefined') {\n          this.tether.enable();\n        }\n\n        addClass(this.drop, drop.classPrefix + '-open');\n        addClass(this.drop, drop.classPrefix + '-open-transitionend');\n\n        setTimeout(function () {\n          if (_this3.drop) {\n            addClass(_this3.drop, drop.classPrefix + '-after-open');\n          }\n        });\n\n        if (typeof this.tether !== 'undefined') {\n          this.tether.position();\n        }\n\n        this.trigger('open');\n\n        drop.updateBodyClasses();\n      }\n    }, {\n      key: '_transitionEndHandler',\n      value: function _transitionEndHandler(e) {\n        if (e.target !== e.currentTarget) {\n          return;\n        }\n\n        if (!hasClass(this.drop, drop.classPrefix + '-open')) {\n          removeClass(this.drop, drop.classPrefix + '-open-transitionend');\n        }\n        this.drop.removeEventListener(transitionEndEvent, this.transitionEndHandler);\n      }\n    }, {\n      key: 'beforeCloseHandler',\n      value: function beforeCloseHandler(event) {\n        var shouldClose = true;\n\n        if (!this.isClosing && typeof this.options.beforeClose === 'function') {\n          this.isClosing = true;\n          shouldClose = this.options.beforeClose(event, this) !== false;\n        }\n\n        this.isClosing = false;\n\n        return shouldClose;\n      }\n    }, {\n      key: 'close',\n      value: function close(event) {\n        if (!this.isOpened()) {\n          return;\n        }\n\n        if (!this.beforeCloseHandler(event)) {\n          return;\n        }\n\n        removeClass(this.drop, drop.classPrefix + '-open');\n        removeClass(this.drop, drop.classPrefix + '-after-open');\n\n        this.drop.addEventListener(transitionEndEvent, this.transitionEndHandler);\n\n        this.trigger('close');\n\n        if (typeof this.tether !== 'undefined') {\n          this.tether.disable();\n        }\n\n        drop.updateBodyClasses();\n\n        if (this.options.remove) {\n          this.remove(event);\n        }\n      }\n    }, {\n      key: 'remove',\n      value: function remove(event) {\n        this.close(event);\n        if (this.drop.parentNode) {\n          this.drop.parentNode.removeChild(this.drop);\n        }\n      }\n    }, {\n      key: 'position',\n      value: function position() {\n        if (this.isOpened() && typeof this.tether !== 'undefined') {\n          this.tether.position();\n        }\n      }\n    }, {\n      key: 'destroy',\n      value: function destroy() {\n        this.remove();\n\n        if (typeof this.tether !== 'undefined') {\n          this.tether.destroy();\n        }\n\n        for (var i = 0; i < this._boundEvents.length; ++i) {\n          var _boundEvents$i = this._boundEvents[i];\n          var element = _boundEvents$i.element;\n          var _event = _boundEvents$i.event;\n          var handler = _boundEvents$i.handler;\n\n          element.removeEventListener(_event, handler);\n        }\n\n        this._boundEvents = [];\n\n        this.tether = null;\n        this.drop = null;\n        this.content = null;\n        this.target = null;\n\n        removeFromArray(allDrops[drop.classPrefix], this);\n        removeFromArray(drop.drops, this);\n      }\n    }]);\n\n    return DropInstance;\n  })(Evented);\n\n  return drop;\n}\n\nvar Drop = createContext();\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  Drop.updateBodyClasses();\n});\nreturn Drop;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/bcronin/lightstep-workspace/lightstep-grafana-plugin/node_modules/tether-drop/dist/js/drop.js\n// module id = 20\n// module chunks = 0","/*! tether 1.4.3 */\n\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory(require, exports, module);\n  } else {\n    root.Tether = factory();\n  }\n}(this, function(require, exports, module) {\n\n'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar TetherBase = undefined;\nif (typeof TetherBase === 'undefined') {\n  TetherBase = { modules: [] };\n}\n\nvar zeroElement = null;\n\n// Same as native getBoundingClientRect, except it takes into account parent <frame> offsets\n// if the element lies within a nested document (<frame> or <iframe>-like).\nfunction getActualBoundingClientRect(node) {\n  var boundingRect = node.getBoundingClientRect();\n\n  // The original object returned by getBoundingClientRect is immutable, so we clone it\n  // We can't use extend because the properties are not considered part of the object by hasOwnProperty in IE9\n  var rect = {};\n  for (var k in boundingRect) {\n    rect[k] = boundingRect[k];\n  }\n\n  if (node.ownerDocument !== document) {\n    var _frameElement = node.ownerDocument.defaultView.frameElement;\n    if (_frameElement) {\n      var frameRect = getActualBoundingClientRect(_frameElement);\n      rect.top += frameRect.top;\n      rect.bottom += frameRect.top;\n      rect.left += frameRect.left;\n      rect.right += frameRect.left;\n    }\n  }\n\n  return rect;\n}\n\nfunction getScrollParents(el) {\n  // In firefox if the el is inside an iframe with display: none; window.getComputedStyle() will return null;\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n  var computedStyle = getComputedStyle(el) || {};\n  var position = computedStyle.position;\n  var parents = [];\n\n  if (position === 'fixed') {\n    return [el];\n  }\n\n  var parent = el;\n  while ((parent = parent.parentNode) && parent && parent.nodeType === 1) {\n    var style = undefined;\n    try {\n      style = getComputedStyle(parent);\n    } catch (err) {}\n\n    if (typeof style === 'undefined' || style === null) {\n      parents.push(parent);\n      return parents;\n    }\n\n    var _style = style;\n    var overflow = _style.overflow;\n    var overflowX = _style.overflowX;\n    var overflowY = _style.overflowY;\n\n    if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n      if (position !== 'absolute' || ['relative', 'absolute', 'fixed'].indexOf(style.position) >= 0) {\n        parents.push(parent);\n      }\n    }\n  }\n\n  parents.push(el.ownerDocument.body);\n\n  // If the node is within a frame, account for the parent window scroll\n  if (el.ownerDocument !== document) {\n    parents.push(el.ownerDocument.defaultView);\n  }\n\n  return parents;\n}\n\nvar uniqueId = (function () {\n  var id = 0;\n  return function () {\n    return ++id;\n  };\n})();\n\nvar zeroPosCache = {};\nvar getOrigin = function getOrigin() {\n  // getBoundingClientRect is unfortunately too accurate.  It introduces a pixel or two of\n  // jitter as the user scrolls that messes with our ability to detect if two positions\n  // are equivilant or not.  We place an element at the top left of the page that will\n  // get the same jitter, so we can cancel the two out.\n  var node = zeroElement;\n  if (!node || !document.body.contains(node)) {\n    node = document.createElement('div');\n    node.setAttribute('data-tether-id', uniqueId());\n    extend(node.style, {\n      top: 0,\n      left: 0,\n      position: 'absolute'\n    });\n\n    document.body.appendChild(node);\n\n    zeroElement = node;\n  }\n\n  var id = node.getAttribute('data-tether-id');\n  if (typeof zeroPosCache[id] === 'undefined') {\n    zeroPosCache[id] = getActualBoundingClientRect(node);\n\n    // Clear the cache when this position call is done\n    defer(function () {\n      delete zeroPosCache[id];\n    });\n  }\n\n  return zeroPosCache[id];\n};\n\nfunction removeUtilElements() {\n  if (zeroElement) {\n    document.body.removeChild(zeroElement);\n  }\n  zeroElement = null;\n};\n\nfunction getBounds(el) {\n  var doc = undefined;\n  if (el === document) {\n    doc = document;\n    el = document.documentElement;\n  } else {\n    doc = el.ownerDocument;\n  }\n\n  var docEl = doc.documentElement;\n\n  var box = getActualBoundingClientRect(el);\n\n  var origin = getOrigin();\n\n  box.top -= origin.top;\n  box.left -= origin.left;\n\n  if (typeof box.width === 'undefined') {\n    box.width = document.body.scrollWidth - box.left - box.right;\n  }\n  if (typeof box.height === 'undefined') {\n    box.height = document.body.scrollHeight - box.top - box.bottom;\n  }\n\n  box.top = box.top - docEl.clientTop;\n  box.left = box.left - docEl.clientLeft;\n  box.right = doc.body.clientWidth - box.width - box.left;\n  box.bottom = doc.body.clientHeight - box.height - box.top;\n\n  return box;\n}\n\nfunction getOffsetParent(el) {\n  return el.offsetParent || document.documentElement;\n}\n\nvar _scrollBarSize = null;\nfunction getScrollBarSize() {\n  if (_scrollBarSize) {\n    return _scrollBarSize;\n  }\n  var inner = document.createElement('div');\n  inner.style.width = '100%';\n  inner.style.height = '200px';\n\n  var outer = document.createElement('div');\n  extend(outer.style, {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    pointerEvents: 'none',\n    visibility: 'hidden',\n    width: '200px',\n    height: '150px',\n    overflow: 'hidden'\n  });\n\n  outer.appendChild(inner);\n\n  document.body.appendChild(outer);\n\n  var widthContained = inner.offsetWidth;\n  outer.style.overflow = 'scroll';\n  var widthScroll = inner.offsetWidth;\n\n  if (widthContained === widthScroll) {\n    widthScroll = outer.clientWidth;\n  }\n\n  document.body.removeChild(outer);\n\n  var width = widthContained - widthScroll;\n\n  _scrollBarSize = { width: width, height: width };\n  return _scrollBarSize;\n}\n\nfunction extend() {\n  var out = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n  var args = [];\n\n  Array.prototype.push.apply(args, arguments);\n\n  args.slice(1).forEach(function (obj) {\n    if (obj) {\n      for (var key in obj) {\n        if (({}).hasOwnProperty.call(obj, key)) {\n          out[key] = obj[key];\n        }\n      }\n    }\n  });\n\n  return out;\n}\n\nfunction removeClass(el, name) {\n  if (typeof el.classList !== 'undefined') {\n    name.split(' ').forEach(function (cls) {\n      if (cls.trim()) {\n        el.classList.remove(cls);\n      }\n    });\n  } else {\n    var regex = new RegExp('(^| )' + name.split(' ').join('|') + '( |$)', 'gi');\n    var className = getClassName(el).replace(regex, ' ');\n    setClassName(el, className);\n  }\n}\n\nfunction addClass(el, name) {\n  if (typeof el.classList !== 'undefined') {\n    name.split(' ').forEach(function (cls) {\n      if (cls.trim()) {\n        el.classList.add(cls);\n      }\n    });\n  } else {\n    removeClass(el, name);\n    var cls = getClassName(el) + (' ' + name);\n    setClassName(el, cls);\n  }\n}\n\nfunction hasClass(el, name) {\n  if (typeof el.classList !== 'undefined') {\n    return el.classList.contains(name);\n  }\n  var className = getClassName(el);\n  return new RegExp('(^| )' + name + '( |$)', 'gi').test(className);\n}\n\nfunction getClassName(el) {\n  // Can't use just SVGAnimatedString here since nodes within a Frame in IE have\n  // completely separately SVGAnimatedString base classes\n  if (el.className instanceof el.ownerDocument.defaultView.SVGAnimatedString) {\n    return el.className.baseVal;\n  }\n  return el.className;\n}\n\nfunction setClassName(el, className) {\n  el.setAttribute('class', className);\n}\n\nfunction updateClasses(el, add, all) {\n  // Of the set of 'all' classes, we need the 'add' classes, and only the\n  // 'add' classes to be set.\n  all.forEach(function (cls) {\n    if (add.indexOf(cls) === -1 && hasClass(el, cls)) {\n      removeClass(el, cls);\n    }\n  });\n\n  add.forEach(function (cls) {\n    if (!hasClass(el, cls)) {\n      addClass(el, cls);\n    }\n  });\n}\n\nvar deferred = [];\n\nvar defer = function defer(fn) {\n  deferred.push(fn);\n};\n\nvar flush = function flush() {\n  var fn = undefined;\n  while (fn = deferred.pop()) {\n    fn();\n  }\n};\n\nvar Evented = (function () {\n  function Evented() {\n    _classCallCheck(this, Evented);\n  }\n\n  _createClass(Evented, [{\n    key: 'on',\n    value: function on(event, handler, ctx) {\n      var once = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\n      if (typeof this.bindings === 'undefined') {\n        this.bindings = {};\n      }\n      if (typeof this.bindings[event] === 'undefined') {\n        this.bindings[event] = [];\n      }\n      this.bindings[event].push({ handler: handler, ctx: ctx, once: once });\n    }\n  }, {\n    key: 'once',\n    value: function once(event, handler, ctx) {\n      this.on(event, handler, ctx, true);\n    }\n  }, {\n    key: 'off',\n    value: function off(event, handler) {\n      if (typeof this.bindings === 'undefined' || typeof this.bindings[event] === 'undefined') {\n        return;\n      }\n\n      if (typeof handler === 'undefined') {\n        delete this.bindings[event];\n      } else {\n        var i = 0;\n        while (i < this.bindings[event].length) {\n          if (this.bindings[event][i].handler === handler) {\n            this.bindings[event].splice(i, 1);\n          } else {\n            ++i;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'trigger',\n    value: function trigger(event) {\n      if (typeof this.bindings !== 'undefined' && this.bindings[event]) {\n        var i = 0;\n\n        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        while (i < this.bindings[event].length) {\n          var _bindings$event$i = this.bindings[event][i];\n          var handler = _bindings$event$i.handler;\n          var ctx = _bindings$event$i.ctx;\n          var once = _bindings$event$i.once;\n\n          var context = ctx;\n          if (typeof context === 'undefined') {\n            context = this;\n          }\n\n          handler.apply(context, args);\n\n          if (once) {\n            this.bindings[event].splice(i, 1);\n          } else {\n            ++i;\n          }\n        }\n      }\n    }\n  }]);\n\n  return Evented;\n})();\n\nTetherBase.Utils = {\n  getActualBoundingClientRect: getActualBoundingClientRect,\n  getScrollParents: getScrollParents,\n  getBounds: getBounds,\n  getOffsetParent: getOffsetParent,\n  extend: extend,\n  addClass: addClass,\n  removeClass: removeClass,\n  hasClass: hasClass,\n  updateClasses: updateClasses,\n  defer: defer,\n  flush: flush,\n  uniqueId: uniqueId,\n  Evented: Evented,\n  getScrollBarSize: getScrollBarSize,\n  removeUtilElements: removeUtilElements\n};\n/* globals TetherBase, performance */\n\n'use strict';\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x6, _x7, _x8) { var _again = true; _function: while (_again) { var object = _x6, property = _x7, receiver = _x8; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x6 = parent; _x7 = property; _x8 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nif (typeof TetherBase === 'undefined') {\n  throw new Error('You must include the utils.js file before tether.js');\n}\n\nvar _TetherBase$Utils = TetherBase.Utils;\nvar getScrollParents = _TetherBase$Utils.getScrollParents;\nvar getBounds = _TetherBase$Utils.getBounds;\nvar getOffsetParent = _TetherBase$Utils.getOffsetParent;\nvar extend = _TetherBase$Utils.extend;\nvar addClass = _TetherBase$Utils.addClass;\nvar removeClass = _TetherBase$Utils.removeClass;\nvar updateClasses = _TetherBase$Utils.updateClasses;\nvar defer = _TetherBase$Utils.defer;\nvar flush = _TetherBase$Utils.flush;\nvar getScrollBarSize = _TetherBase$Utils.getScrollBarSize;\nvar removeUtilElements = _TetherBase$Utils.removeUtilElements;\n\nfunction within(a, b) {\n  var diff = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];\n\n  return a + diff >= b && b >= a - diff;\n}\n\nvar transformKey = (function () {\n  if (typeof document === 'undefined') {\n    return '';\n  }\n  var el = document.createElement('div');\n\n  var transforms = ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform'];\n  for (var i = 0; i < transforms.length; ++i) {\n    var key = transforms[i];\n    if (el.style[key] !== undefined) {\n      return key;\n    }\n  }\n})();\n\nvar tethers = [];\n\nvar position = function position() {\n  tethers.forEach(function (tether) {\n    tether.position(false);\n  });\n  flush();\n};\n\nfunction now() {\n  if (typeof performance === 'object' && typeof performance.now === 'function') {\n    return performance.now();\n  }\n  return +new Date();\n}\n\n(function () {\n  var lastCall = null;\n  var lastDuration = null;\n  var pendingTimeout = null;\n\n  var tick = function tick() {\n    if (typeof lastDuration !== 'undefined' && lastDuration > 16) {\n      // We voluntarily throttle ourselves if we can't manage 60fps\n      lastDuration = Math.min(lastDuration - 16, 250);\n\n      // Just in case this is the last event, remember to position just once more\n      pendingTimeout = setTimeout(tick, 250);\n      return;\n    }\n\n    if (typeof lastCall !== 'undefined' && now() - lastCall < 10) {\n      // Some browsers call events a little too frequently, refuse to run more than is reasonable\n      return;\n    }\n\n    if (pendingTimeout != null) {\n      clearTimeout(pendingTimeout);\n      pendingTimeout = null;\n    }\n\n    lastCall = now();\n    position();\n    lastDuration = now() - lastCall;\n  };\n\n  if (typeof window !== 'undefined' && typeof window.addEventListener !== 'undefined') {\n    ['resize', 'scroll', 'touchmove'].forEach(function (event) {\n      window.addEventListener(event, tick);\n    });\n  }\n})();\n\nvar MIRROR_LR = {\n  center: 'center',\n  left: 'right',\n  right: 'left'\n};\n\nvar MIRROR_TB = {\n  middle: 'middle',\n  top: 'bottom',\n  bottom: 'top'\n};\n\nvar OFFSET_MAP = {\n  top: 0,\n  left: 0,\n  middle: '50%',\n  center: '50%',\n  bottom: '100%',\n  right: '100%'\n};\n\nvar autoToFixedAttachment = function autoToFixedAttachment(attachment, relativeToAttachment) {\n  var left = attachment.left;\n  var top = attachment.top;\n\n  if (left === 'auto') {\n    left = MIRROR_LR[relativeToAttachment.left];\n  }\n\n  if (top === 'auto') {\n    top = MIRROR_TB[relativeToAttachment.top];\n  }\n\n  return { left: left, top: top };\n};\n\nvar attachmentToOffset = function attachmentToOffset(attachment) {\n  var left = attachment.left;\n  var top = attachment.top;\n\n  if (typeof OFFSET_MAP[attachment.left] !== 'undefined') {\n    left = OFFSET_MAP[attachment.left];\n  }\n\n  if (typeof OFFSET_MAP[attachment.top] !== 'undefined') {\n    top = OFFSET_MAP[attachment.top];\n  }\n\n  return { left: left, top: top };\n};\n\nfunction addOffset() {\n  var out = { top: 0, left: 0 };\n\n  for (var _len = arguments.length, offsets = Array(_len), _key = 0; _key < _len; _key++) {\n    offsets[_key] = arguments[_key];\n  }\n\n  offsets.forEach(function (_ref) {\n    var top = _ref.top;\n    var left = _ref.left;\n\n    if (typeof top === 'string') {\n      top = parseFloat(top, 10);\n    }\n    if (typeof left === 'string') {\n      left = parseFloat(left, 10);\n    }\n\n    out.top += top;\n    out.left += left;\n  });\n\n  return out;\n}\n\nfunction offsetToPx(offset, size) {\n  if (typeof offset.left === 'string' && offset.left.indexOf('%') !== -1) {\n    offset.left = parseFloat(offset.left, 10) / 100 * size.width;\n  }\n  if (typeof offset.top === 'string' && offset.top.indexOf('%') !== -1) {\n    offset.top = parseFloat(offset.top, 10) / 100 * size.height;\n  }\n\n  return offset;\n}\n\nvar parseOffset = function parseOffset(value) {\n  var _value$split = value.split(' ');\n\n  var _value$split2 = _slicedToArray(_value$split, 2);\n\n  var top = _value$split2[0];\n  var left = _value$split2[1];\n\n  return { top: top, left: left };\n};\nvar parseAttachment = parseOffset;\n\nvar TetherClass = (function (_Evented) {\n  _inherits(TetherClass, _Evented);\n\n  function TetherClass(options) {\n    var _this = this;\n\n    _classCallCheck(this, TetherClass);\n\n    _get(Object.getPrototypeOf(TetherClass.prototype), 'constructor', this).call(this);\n    this.position = this.position.bind(this);\n\n    tethers.push(this);\n\n    this.history = [];\n\n    this.setOptions(options, false);\n\n    TetherBase.modules.forEach(function (module) {\n      if (typeof module.initialize !== 'undefined') {\n        module.initialize.call(_this);\n      }\n    });\n\n    this.position();\n  }\n\n  _createClass(TetherClass, [{\n    key: 'getClass',\n    value: function getClass() {\n      var key = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n      var classes = this.options.classes;\n\n      if (typeof classes !== 'undefined' && classes[key]) {\n        return this.options.classes[key];\n      } else if (this.options.classPrefix) {\n        return this.options.classPrefix + '-' + key;\n      } else {\n        return key;\n      }\n    }\n  }, {\n    key: 'setOptions',\n    value: function setOptions(options) {\n      var _this2 = this;\n\n      var pos = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];\n\n      var defaults = {\n        offset: '0 0',\n        targetOffset: '0 0',\n        targetAttachment: 'auto auto',\n        classPrefix: 'tether'\n      };\n\n      this.options = extend(defaults, options);\n\n      var _options = this.options;\n      var element = _options.element;\n      var target = _options.target;\n      var targetModifier = _options.targetModifier;\n\n      this.element = element;\n      this.target = target;\n      this.targetModifier = targetModifier;\n\n      if (this.target === 'viewport') {\n        this.target = document.body;\n        this.targetModifier = 'visible';\n      } else if (this.target === 'scroll-handle') {\n        this.target = document.body;\n        this.targetModifier = 'scroll-handle';\n      }\n\n      ['element', 'target'].forEach(function (key) {\n        if (typeof _this2[key] === 'undefined') {\n          throw new Error('Tether Error: Both element and target must be defined');\n        }\n\n        if (typeof _this2[key].jquery !== 'undefined') {\n          _this2[key] = _this2[key][0];\n        } else if (typeof _this2[key] === 'string') {\n          _this2[key] = document.querySelector(_this2[key]);\n        }\n      });\n\n      addClass(this.element, this.getClass('element'));\n      if (!(this.options.addTargetClasses === false)) {\n        addClass(this.target, this.getClass('target'));\n      }\n\n      if (!this.options.attachment) {\n        throw new Error('Tether Error: You must provide an attachment');\n      }\n\n      this.targetAttachment = parseAttachment(this.options.targetAttachment);\n      this.attachment = parseAttachment(this.options.attachment);\n      this.offset = parseOffset(this.options.offset);\n      this.targetOffset = parseOffset(this.options.targetOffset);\n\n      if (typeof this.scrollParents !== 'undefined') {\n        this.disable();\n      }\n\n      if (this.targetModifier === 'scroll-handle') {\n        this.scrollParents = [this.target];\n      } else {\n        this.scrollParents = getScrollParents(this.target);\n      }\n\n      if (!(this.options.enabled === false)) {\n        this.enable(pos);\n      }\n    }\n  }, {\n    key: 'getTargetBounds',\n    value: function getTargetBounds() {\n      if (typeof this.targetModifier !== 'undefined') {\n        if (this.targetModifier === 'visible') {\n          if (this.target === document.body) {\n            return { top: pageYOffset, left: pageXOffset, height: innerHeight, width: innerWidth };\n          } else {\n            var bounds = getBounds(this.target);\n\n            var out = {\n              height: bounds.height,\n              width: bounds.width,\n              top: bounds.top,\n              left: bounds.left\n            };\n\n            out.height = Math.min(out.height, bounds.height - (pageYOffset - bounds.top));\n            out.height = Math.min(out.height, bounds.height - (bounds.top + bounds.height - (pageYOffset + innerHeight)));\n            out.height = Math.min(innerHeight, out.height);\n            out.height -= 2;\n\n            out.width = Math.min(out.width, bounds.width - (pageXOffset - bounds.left));\n            out.width = Math.min(out.width, bounds.width - (bounds.left + bounds.width - (pageXOffset + innerWidth)));\n            out.width = Math.min(innerWidth, out.width);\n            out.width -= 2;\n\n            if (out.top < pageYOffset) {\n              out.top = pageYOffset;\n            }\n            if (out.left < pageXOffset) {\n              out.left = pageXOffset;\n            }\n\n            return out;\n          }\n        } else if (this.targetModifier === 'scroll-handle') {\n          var bounds = undefined;\n          var target = this.target;\n          if (target === document.body) {\n            target = document.documentElement;\n\n            bounds = {\n              left: pageXOffset,\n              top: pageYOffset,\n              height: innerHeight,\n              width: innerWidth\n            };\n          } else {\n            bounds = getBounds(target);\n          }\n\n          var style = getComputedStyle(target);\n\n          var hasBottomScroll = target.scrollWidth > target.clientWidth || [style.overflow, style.overflowX].indexOf('scroll') >= 0 || this.target !== document.body;\n\n          var scrollBottom = 0;\n          if (hasBottomScroll) {\n            scrollBottom = 15;\n          }\n\n          var height = bounds.height - parseFloat(style.borderTopWidth) - parseFloat(style.borderBottomWidth) - scrollBottom;\n\n          var out = {\n            width: 15,\n            height: height * 0.975 * (height / target.scrollHeight),\n            left: bounds.left + bounds.width - parseFloat(style.borderLeftWidth) - 15\n          };\n\n          var fitAdj = 0;\n          if (height < 408 && this.target === document.body) {\n            fitAdj = -0.00011 * Math.pow(height, 2) - 0.00727 * height + 22.58;\n          }\n\n          if (this.target !== document.body) {\n            out.height = Math.max(out.height, 24);\n          }\n\n          var scrollPercentage = this.target.scrollTop / (target.scrollHeight - height);\n          out.top = scrollPercentage * (height - out.height - fitAdj) + bounds.top + parseFloat(style.borderTopWidth);\n\n          if (this.target === document.body) {\n            out.height = Math.max(out.height, 24);\n          }\n\n          return out;\n        }\n      } else {\n        return getBounds(this.target);\n      }\n    }\n  }, {\n    key: 'clearCache',\n    value: function clearCache() {\n      this._cache = {};\n    }\n  }, {\n    key: 'cache',\n    value: function cache(k, getter) {\n      // More than one module will often need the same DOM info, so\n      // we keep a cache which is cleared on each position call\n      if (typeof this._cache === 'undefined') {\n        this._cache = {};\n      }\n\n      if (typeof this._cache[k] === 'undefined') {\n        this._cache[k] = getter.call(this);\n      }\n\n      return this._cache[k];\n    }\n  }, {\n    key: 'enable',\n    value: function enable() {\n      var _this3 = this;\n\n      var pos = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n      if (!(this.options.addTargetClasses === false)) {\n        addClass(this.target, this.getClass('enabled'));\n      }\n      addClass(this.element, this.getClass('enabled'));\n      this.enabled = true;\n\n      this.scrollParents.forEach(function (parent) {\n        if (parent !== _this3.target.ownerDocument) {\n          parent.addEventListener('scroll', _this3.position);\n        }\n      });\n\n      if (pos) {\n        this.position();\n      }\n    }\n  }, {\n    key: 'disable',\n    value: function disable() {\n      var _this4 = this;\n\n      removeClass(this.target, this.getClass('enabled'));\n      removeClass(this.element, this.getClass('enabled'));\n      this.enabled = false;\n\n      if (typeof this.scrollParents !== 'undefined') {\n        this.scrollParents.forEach(function (parent) {\n          parent.removeEventListener('scroll', _this4.position);\n        });\n      }\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      var _this5 = this;\n\n      this.disable();\n\n      tethers.forEach(function (tether, i) {\n        if (tether === _this5) {\n          tethers.splice(i, 1);\n        }\n      });\n\n      // Remove any elements we were using for convenience from the DOM\n      if (tethers.length === 0) {\n        removeUtilElements();\n      }\n    }\n  }, {\n    key: 'updateAttachClasses',\n    value: function updateAttachClasses(elementAttach, targetAttach) {\n      var _this6 = this;\n\n      elementAttach = elementAttach || this.attachment;\n      targetAttach = targetAttach || this.targetAttachment;\n      var sides = ['left', 'top', 'bottom', 'right', 'middle', 'center'];\n\n      if (typeof this._addAttachClasses !== 'undefined' && this._addAttachClasses.length) {\n        // updateAttachClasses can be called more than once in a position call, so\n        // we need to clean up after ourselves such that when the last defer gets\n        // ran it doesn't add any extra classes from previous calls.\n        this._addAttachClasses.splice(0, this._addAttachClasses.length);\n      }\n\n      if (typeof this._addAttachClasses === 'undefined') {\n        this._addAttachClasses = [];\n      }\n      var add = this._addAttachClasses;\n\n      if (elementAttach.top) {\n        add.push(this.getClass('element-attached') + '-' + elementAttach.top);\n      }\n      if (elementAttach.left) {\n        add.push(this.getClass('element-attached') + '-' + elementAttach.left);\n      }\n      if (targetAttach.top) {\n        add.push(this.getClass('target-attached') + '-' + targetAttach.top);\n      }\n      if (targetAttach.left) {\n        add.push(this.getClass('target-attached') + '-' + targetAttach.left);\n      }\n\n      var all = [];\n      sides.forEach(function (side) {\n        all.push(_this6.getClass('element-attached') + '-' + side);\n        all.push(_this6.getClass('target-attached') + '-' + side);\n      });\n\n      defer(function () {\n        if (!(typeof _this6._addAttachClasses !== 'undefined')) {\n          return;\n        }\n\n        updateClasses(_this6.element, _this6._addAttachClasses, all);\n        if (!(_this6.options.addTargetClasses === false)) {\n          updateClasses(_this6.target, _this6._addAttachClasses, all);\n        }\n\n        delete _this6._addAttachClasses;\n      });\n    }\n  }, {\n    key: 'position',\n    value: function position() {\n      var _this7 = this;\n\n      var flushChanges = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n      // flushChanges commits the changes immediately, leave true unless you are positioning multiple\n      // tethers (in which case call Tether.Utils.flush yourself when you're done)\n\n      if (!this.enabled) {\n        return;\n      }\n\n      this.clearCache();\n\n      // Turn 'auto' attachments into the appropriate corner or edge\n      var targetAttachment = autoToFixedAttachment(this.targetAttachment, this.attachment);\n\n      this.updateAttachClasses(this.attachment, targetAttachment);\n\n      var elementPos = this.cache('element-bounds', function () {\n        return getBounds(_this7.element);\n      });\n\n      var width = elementPos.width;\n      var height = elementPos.height;\n\n      if (width === 0 && height === 0 && typeof this.lastSize !== 'undefined') {\n        var _lastSize = this.lastSize;\n\n        // We cache the height and width to make it possible to position elements that are\n        // getting hidden.\n        width = _lastSize.width;\n        height = _lastSize.height;\n      } else {\n        this.lastSize = { width: width, height: height };\n      }\n\n      var targetPos = this.cache('target-bounds', function () {\n        return _this7.getTargetBounds();\n      });\n      var targetSize = targetPos;\n\n      // Get an actual px offset from the attachment\n      var offset = offsetToPx(attachmentToOffset(this.attachment), { width: width, height: height });\n      var targetOffset = offsetToPx(attachmentToOffset(targetAttachment), targetSize);\n\n      var manualOffset = offsetToPx(this.offset, { width: width, height: height });\n      var manualTargetOffset = offsetToPx(this.targetOffset, targetSize);\n\n      // Add the manually provided offset\n      offset = addOffset(offset, manualOffset);\n      targetOffset = addOffset(targetOffset, manualTargetOffset);\n\n      // It's now our goal to make (element position + offset) == (target position + target offset)\n      var left = targetPos.left + targetOffset.left - offset.left;\n      var top = targetPos.top + targetOffset.top - offset.top;\n\n      for (var i = 0; i < TetherBase.modules.length; ++i) {\n        var _module2 = TetherBase.modules[i];\n        var ret = _module2.position.call(this, {\n          left: left,\n          top: top,\n          targetAttachment: targetAttachment,\n          targetPos: targetPos,\n          elementPos: elementPos,\n          offset: offset,\n          targetOffset: targetOffset,\n          manualOffset: manualOffset,\n          manualTargetOffset: manualTargetOffset,\n          scrollbarSize: scrollbarSize,\n          attachment: this.attachment\n        });\n\n        if (ret === false) {\n          return false;\n        } else if (typeof ret === 'undefined' || typeof ret !== 'object') {\n          continue;\n        } else {\n          top = ret.top;\n          left = ret.left;\n        }\n      }\n\n      // We describe the position three different ways to give the optimizer\n      // a chance to decide the best possible way to position the element\n      // with the fewest repaints.\n      var next = {\n        // It's position relative to the page (absolute positioning when\n        // the element is a child of the body)\n        page: {\n          top: top,\n          left: left\n        },\n\n        // It's position relative to the viewport (fixed positioning)\n        viewport: {\n          top: top - pageYOffset,\n          bottom: pageYOffset - top - height + innerHeight,\n          left: left - pageXOffset,\n          right: pageXOffset - left - width + innerWidth\n        }\n      };\n\n      var doc = this.target.ownerDocument;\n      var win = doc.defaultView;\n\n      var scrollbarSize = undefined;\n      if (win.innerHeight > doc.documentElement.clientHeight) {\n        scrollbarSize = this.cache('scrollbar-size', getScrollBarSize);\n        next.viewport.bottom -= scrollbarSize.height;\n      }\n\n      if (win.innerWidth > doc.documentElement.clientWidth) {\n        scrollbarSize = this.cache('scrollbar-size', getScrollBarSize);\n        next.viewport.right -= scrollbarSize.width;\n      }\n\n      if (['', 'static'].indexOf(doc.body.style.position) === -1 || ['', 'static'].indexOf(doc.body.parentElement.style.position) === -1) {\n        // Absolute positioning in the body will be relative to the page, not the 'initial containing block'\n        next.page.bottom = doc.body.scrollHeight - top - height;\n        next.page.right = doc.body.scrollWidth - left - width;\n      }\n\n      if (typeof this.options.optimizations !== 'undefined' && this.options.optimizations.moveElement !== false && !(typeof this.targetModifier !== 'undefined')) {\n        (function () {\n          var offsetParent = _this7.cache('target-offsetparent', function () {\n            return getOffsetParent(_this7.target);\n          });\n          var offsetPosition = _this7.cache('target-offsetparent-bounds', function () {\n            return getBounds(offsetParent);\n          });\n          var offsetParentStyle = getComputedStyle(offsetParent);\n          var offsetParentSize = offsetPosition;\n\n          var offsetBorder = {};\n          ['Top', 'Left', 'Bottom', 'Right'].forEach(function (side) {\n            offsetBorder[side.toLowerCase()] = parseFloat(offsetParentStyle['border' + side + 'Width']);\n          });\n\n          offsetPosition.right = doc.body.scrollWidth - offsetPosition.left - offsetParentSize.width + offsetBorder.right;\n          offsetPosition.bottom = doc.body.scrollHeight - offsetPosition.top - offsetParentSize.height + offsetBorder.bottom;\n\n          if (next.page.top >= offsetPosition.top + offsetBorder.top && next.page.bottom >= offsetPosition.bottom) {\n            if (next.page.left >= offsetPosition.left + offsetBorder.left && next.page.right >= offsetPosition.right) {\n              // We're within the visible part of the target's scroll parent\n              var scrollTop = offsetParent.scrollTop;\n              var scrollLeft = offsetParent.scrollLeft;\n\n              // It's position relative to the target's offset parent (absolute positioning when\n              // the element is moved to be a child of the target's offset parent).\n              next.offset = {\n                top: next.page.top - offsetPosition.top + scrollTop - offsetBorder.top,\n                left: next.page.left - offsetPosition.left + scrollLeft - offsetBorder.left\n              };\n            }\n          }\n        })();\n      }\n\n      // We could also travel up the DOM and try each containing context, rather than only\n      // looking at the body, but we're gonna get diminishing returns.\n\n      this.move(next);\n\n      this.history.unshift(next);\n\n      if (this.history.length > 3) {\n        this.history.pop();\n      }\n\n      if (flushChanges) {\n        flush();\n      }\n\n      return true;\n    }\n\n    // THE ISSUE\n  }, {\n    key: 'move',\n    value: function move(pos) {\n      var _this8 = this;\n\n      if (!(typeof this.element.parentNode !== 'undefined')) {\n        return;\n      }\n\n      var same = {};\n\n      for (var type in pos) {\n        same[type] = {};\n\n        for (var key in pos[type]) {\n          var found = false;\n\n          for (var i = 0; i < this.history.length; ++i) {\n            var point = this.history[i];\n            if (typeof point[type] !== 'undefined' && !within(point[type][key], pos[type][key])) {\n              found = true;\n              break;\n            }\n          }\n\n          if (!found) {\n            same[type][key] = true;\n          }\n        }\n      }\n\n      var css = { top: '', left: '', right: '', bottom: '' };\n\n      var transcribe = function transcribe(_same, _pos) {\n        var hasOptimizations = typeof _this8.options.optimizations !== 'undefined';\n        var gpu = hasOptimizations ? _this8.options.optimizations.gpu : null;\n        if (gpu !== false) {\n          var yPos = undefined,\n              xPos = undefined;\n          if (_same.top) {\n            css.top = 0;\n            yPos = _pos.top;\n          } else {\n            css.bottom = 0;\n            yPos = -_pos.bottom;\n          }\n\n          if (_same.left) {\n            css.left = 0;\n            xPos = _pos.left;\n          } else {\n            css.right = 0;\n            xPos = -_pos.right;\n          }\n\n          if (window.matchMedia) {\n            // HubSpot/tether#207\n            var retina = window.matchMedia('only screen and (min-resolution: 1.3dppx)').matches || window.matchMedia('only screen and (-webkit-min-device-pixel-ratio: 1.3)').matches;\n            if (!retina) {\n              xPos = Math.round(xPos);\n              yPos = Math.round(yPos);\n            }\n          }\n\n          css[transformKey] = 'translateX(' + xPos + 'px) translateY(' + yPos + 'px)';\n\n          if (transformKey !== 'msTransform') {\n            // The Z transform will keep this in the GPU (faster, and prevents artifacts),\n            // but IE9 doesn't support 3d transforms and will choke.\n            css[transformKey] += \" translateZ(0)\";\n          }\n        } else {\n          if (_same.top) {\n            css.top = _pos.top + 'px';\n          } else {\n            css.bottom = _pos.bottom + 'px';\n          }\n\n          if (_same.left) {\n            css.left = _pos.left + 'px';\n          } else {\n            css.right = _pos.right + 'px';\n          }\n        }\n      };\n\n      var moved = false;\n      if ((same.page.top || same.page.bottom) && (same.page.left || same.page.right)) {\n        css.position = 'absolute';\n        transcribe(same.page, pos.page);\n      } else if ((same.viewport.top || same.viewport.bottom) && (same.viewport.left || same.viewport.right)) {\n        css.position = 'fixed';\n        transcribe(same.viewport, pos.viewport);\n      } else if (typeof same.offset !== 'undefined' && same.offset.top && same.offset.left) {\n        (function () {\n          css.position = 'absolute';\n          var offsetParent = _this8.cache('target-offsetparent', function () {\n            return getOffsetParent(_this8.target);\n          });\n\n          if (getOffsetParent(_this8.element) !== offsetParent) {\n            defer(function () {\n              _this8.element.parentNode.removeChild(_this8.element);\n              offsetParent.appendChild(_this8.element);\n            });\n          }\n\n          transcribe(same.offset, pos.offset);\n          moved = true;\n        })();\n      } else {\n        css.position = 'absolute';\n        transcribe({ top: true, left: true }, pos.page);\n      }\n\n      if (!moved) {\n        if (this.options.bodyElement) {\n          if (this.element.parentNode !== this.options.bodyElement) {\n            this.options.bodyElement.appendChild(this.element);\n          }\n        } else {\n          var offsetParentIsBody = true;\n          var currentNode = this.element.parentNode;\n          while (currentNode && currentNode.nodeType === 1 && currentNode.tagName !== 'BODY') {\n            if (getComputedStyle(currentNode).position !== 'static') {\n              offsetParentIsBody = false;\n              break;\n            }\n\n            currentNode = currentNode.parentNode;\n          }\n\n          if (!offsetParentIsBody) {\n            this.element.parentNode.removeChild(this.element);\n            this.element.ownerDocument.body.appendChild(this.element);\n          }\n        }\n      }\n\n      // Any css change will trigger a repaint, so let's avoid one if nothing changed\n      var writeCSS = {};\n      var write = false;\n      for (var key in css) {\n        var val = css[key];\n        var elVal = this.element.style[key];\n\n        if (elVal !== val) {\n          write = true;\n          writeCSS[key] = val;\n        }\n      }\n\n      if (write) {\n        defer(function () {\n          extend(_this8.element.style, writeCSS);\n          _this8.trigger('repositioned');\n        });\n      }\n    }\n  }]);\n\n  return TetherClass;\n})(Evented);\n\nTetherClass.modules = [];\n\nTetherBase.position = position;\n\nvar Tether = extend(TetherClass, TetherBase);\n/* globals TetherBase */\n\n'use strict';\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nvar _TetherBase$Utils = TetherBase.Utils;\nvar getBounds = _TetherBase$Utils.getBounds;\nvar extend = _TetherBase$Utils.extend;\nvar updateClasses = _TetherBase$Utils.updateClasses;\nvar defer = _TetherBase$Utils.defer;\n\nvar BOUNDS_FORMAT = ['left', 'top', 'right', 'bottom'];\n\nfunction getBoundingRect(tether, to) {\n  if (to === 'scrollParent') {\n    to = tether.scrollParents[0];\n  } else if (to === 'window') {\n    to = [pageXOffset, pageYOffset, innerWidth + pageXOffset, innerHeight + pageYOffset];\n  }\n\n  if (to === document) {\n    to = to.documentElement;\n  }\n\n  if (typeof to.nodeType !== 'undefined') {\n    (function () {\n      var node = to;\n      var size = getBounds(to);\n      var pos = size;\n      var style = getComputedStyle(to);\n\n      to = [pos.left, pos.top, size.width + pos.left, size.height + pos.top];\n\n      // Account any parent Frames scroll offset\n      if (node.ownerDocument !== document) {\n        var win = node.ownerDocument.defaultView;\n        to[0] += win.pageXOffset;\n        to[1] += win.pageYOffset;\n        to[2] += win.pageXOffset;\n        to[3] += win.pageYOffset;\n      }\n\n      BOUNDS_FORMAT.forEach(function (side, i) {\n        side = side[0].toUpperCase() + side.substr(1);\n        if (side === 'Top' || side === 'Left') {\n          to[i] += parseFloat(style['border' + side + 'Width']);\n        } else {\n          to[i] -= parseFloat(style['border' + side + 'Width']);\n        }\n      });\n    })();\n  }\n\n  return to;\n}\n\nTetherBase.modules.push({\n  position: function position(_ref) {\n    var _this = this;\n\n    var top = _ref.top;\n    var left = _ref.left;\n    var targetAttachment = _ref.targetAttachment;\n\n    if (!this.options.constraints) {\n      return true;\n    }\n\n    var _cache = this.cache('element-bounds', function () {\n      return getBounds(_this.element);\n    });\n\n    var height = _cache.height;\n    var width = _cache.width;\n\n    if (width === 0 && height === 0 && typeof this.lastSize !== 'undefined') {\n      var _lastSize = this.lastSize;\n\n      // Handle the item getting hidden as a result of our positioning without glitching\n      // the classes in and out\n      width = _lastSize.width;\n      height = _lastSize.height;\n    }\n\n    var targetSize = this.cache('target-bounds', function () {\n      return _this.getTargetBounds();\n    });\n\n    var targetHeight = targetSize.height;\n    var targetWidth = targetSize.width;\n\n    var allClasses = [this.getClass('pinned'), this.getClass('out-of-bounds')];\n\n    this.options.constraints.forEach(function (constraint) {\n      var outOfBoundsClass = constraint.outOfBoundsClass;\n      var pinnedClass = constraint.pinnedClass;\n\n      if (outOfBoundsClass) {\n        allClasses.push(outOfBoundsClass);\n      }\n      if (pinnedClass) {\n        allClasses.push(pinnedClass);\n      }\n    });\n\n    allClasses.forEach(function (cls) {\n      ['left', 'top', 'right', 'bottom'].forEach(function (side) {\n        allClasses.push(cls + '-' + side);\n      });\n    });\n\n    var addClasses = [];\n\n    var tAttachment = extend({}, targetAttachment);\n    var eAttachment = extend({}, this.attachment);\n\n    this.options.constraints.forEach(function (constraint) {\n      var to = constraint.to;\n      var attachment = constraint.attachment;\n      var pin = constraint.pin;\n\n      if (typeof attachment === 'undefined') {\n        attachment = '';\n      }\n\n      var changeAttachX = undefined,\n          changeAttachY = undefined;\n      if (attachment.indexOf(' ') >= 0) {\n        var _attachment$split = attachment.split(' ');\n\n        var _attachment$split2 = _slicedToArray(_attachment$split, 2);\n\n        changeAttachY = _attachment$split2[0];\n        changeAttachX = _attachment$split2[1];\n      } else {\n        changeAttachX = changeAttachY = attachment;\n      }\n\n      var bounds = getBoundingRect(_this, to);\n\n      if (changeAttachY === 'target' || changeAttachY === 'both') {\n        if (top < bounds[1] && tAttachment.top === 'top') {\n          top += targetHeight;\n          tAttachment.top = 'bottom';\n        }\n\n        if (top + height > bounds[3] && tAttachment.top === 'bottom') {\n          top -= targetHeight;\n          tAttachment.top = 'top';\n        }\n      }\n\n      if (changeAttachY === 'together') {\n        if (tAttachment.top === 'top') {\n          if (eAttachment.top === 'bottom' && top < bounds[1]) {\n            top += targetHeight;\n            tAttachment.top = 'bottom';\n\n            top += height;\n            eAttachment.top = 'top';\n          } else if (eAttachment.top === 'top' && top + height > bounds[3] && top - (height - targetHeight) >= bounds[1]) {\n            top -= height - targetHeight;\n            tAttachment.top = 'bottom';\n\n            eAttachment.top = 'bottom';\n          }\n        }\n\n        if (tAttachment.top === 'bottom') {\n          if (eAttachment.top === 'top' && top + height > bounds[3]) {\n            top -= targetHeight;\n            tAttachment.top = 'top';\n\n            top -= height;\n            eAttachment.top = 'bottom';\n          } else if (eAttachment.top === 'bottom' && top < bounds[1] && top + (height * 2 - targetHeight) <= bounds[3]) {\n            top += height - targetHeight;\n            tAttachment.top = 'top';\n\n            eAttachment.top = 'top';\n          }\n        }\n\n        if (tAttachment.top === 'middle') {\n          if (top + height > bounds[3] && eAttachment.top === 'top') {\n            top -= height;\n            eAttachment.top = 'bottom';\n          } else if (top < bounds[1] && eAttachment.top === 'bottom') {\n            top += height;\n            eAttachment.top = 'top';\n          }\n        }\n      }\n\n      if (changeAttachX === 'target' || changeAttachX === 'both') {\n        if (left < bounds[0] && tAttachment.left === 'left') {\n          left += targetWidth;\n          tAttachment.left = 'right';\n        }\n\n        if (left + width > bounds[2] && tAttachment.left === 'right') {\n          left -= targetWidth;\n          tAttachment.left = 'left';\n        }\n      }\n\n      if (changeAttachX === 'together') {\n        if (left < bounds[0] && tAttachment.left === 'left') {\n          if (eAttachment.left === 'right') {\n            left += targetWidth;\n            tAttachment.left = 'right';\n\n            left += width;\n            eAttachment.left = 'left';\n          } else if (eAttachment.left === 'left') {\n            left += targetWidth;\n            tAttachment.left = 'right';\n\n            left -= width;\n            eAttachment.left = 'right';\n          }\n        } else if (left + width > bounds[2] && tAttachment.left === 'right') {\n          if (eAttachment.left === 'left') {\n            left -= targetWidth;\n            tAttachment.left = 'left';\n\n            left -= width;\n            eAttachment.left = 'right';\n          } else if (eAttachment.left === 'right') {\n            left -= targetWidth;\n            tAttachment.left = 'left';\n\n            left += width;\n            eAttachment.left = 'left';\n          }\n        } else if (tAttachment.left === 'center') {\n          if (left + width > bounds[2] && eAttachment.left === 'left') {\n            left -= width;\n            eAttachment.left = 'right';\n          } else if (left < bounds[0] && eAttachment.left === 'right') {\n            left += width;\n            eAttachment.left = 'left';\n          }\n        }\n      }\n\n      if (changeAttachY === 'element' || changeAttachY === 'both') {\n        if (top < bounds[1] && eAttachment.top === 'bottom') {\n          top += height;\n          eAttachment.top = 'top';\n        }\n\n        if (top + height > bounds[3] && eAttachment.top === 'top') {\n          top -= height;\n          eAttachment.top = 'bottom';\n        }\n      }\n\n      if (changeAttachX === 'element' || changeAttachX === 'both') {\n        if (left < bounds[0]) {\n          if (eAttachment.left === 'right') {\n            left += width;\n            eAttachment.left = 'left';\n          } else if (eAttachment.left === 'center') {\n            left += width / 2;\n            eAttachment.left = 'left';\n          }\n        }\n\n        if (left + width > bounds[2]) {\n          if (eAttachment.left === 'left') {\n            left -= width;\n            eAttachment.left = 'right';\n          } else if (eAttachment.left === 'center') {\n            left -= width / 2;\n            eAttachment.left = 'right';\n          }\n        }\n      }\n\n      if (typeof pin === 'string') {\n        pin = pin.split(',').map(function (p) {\n          return p.trim();\n        });\n      } else if (pin === true) {\n        pin = ['top', 'left', 'right', 'bottom'];\n      }\n\n      pin = pin || [];\n\n      var pinned = [];\n      var oob = [];\n\n      if (top < bounds[1]) {\n        if (pin.indexOf('top') >= 0) {\n          top = bounds[1];\n          pinned.push('top');\n        } else {\n          oob.push('top');\n        }\n      }\n\n      if (top + height > bounds[3]) {\n        if (pin.indexOf('bottom') >= 0) {\n          top = bounds[3] - height;\n          pinned.push('bottom');\n        } else {\n          oob.push('bottom');\n        }\n      }\n\n      if (left < bounds[0]) {\n        if (pin.indexOf('left') >= 0) {\n          left = bounds[0];\n          pinned.push('left');\n        } else {\n          oob.push('left');\n        }\n      }\n\n      if (left + width > bounds[2]) {\n        if (pin.indexOf('right') >= 0) {\n          left = bounds[2] - width;\n          pinned.push('right');\n        } else {\n          oob.push('right');\n        }\n      }\n\n      if (pinned.length) {\n        (function () {\n          var pinnedClass = undefined;\n          if (typeof _this.options.pinnedClass !== 'undefined') {\n            pinnedClass = _this.options.pinnedClass;\n          } else {\n            pinnedClass = _this.getClass('pinned');\n          }\n\n          addClasses.push(pinnedClass);\n          pinned.forEach(function (side) {\n            addClasses.push(pinnedClass + '-' + side);\n          });\n        })();\n      }\n\n      if (oob.length) {\n        (function () {\n          var oobClass = undefined;\n          if (typeof _this.options.outOfBoundsClass !== 'undefined') {\n            oobClass = _this.options.outOfBoundsClass;\n          } else {\n            oobClass = _this.getClass('out-of-bounds');\n          }\n\n          addClasses.push(oobClass);\n          oob.forEach(function (side) {\n            addClasses.push(oobClass + '-' + side);\n          });\n        })();\n      }\n\n      if (pinned.indexOf('left') >= 0 || pinned.indexOf('right') >= 0) {\n        eAttachment.left = tAttachment.left = false;\n      }\n      if (pinned.indexOf('top') >= 0 || pinned.indexOf('bottom') >= 0) {\n        eAttachment.top = tAttachment.top = false;\n      }\n\n      if (tAttachment.top !== targetAttachment.top || tAttachment.left !== targetAttachment.left || eAttachment.top !== _this.attachment.top || eAttachment.left !== _this.attachment.left) {\n        _this.updateAttachClasses(eAttachment, tAttachment);\n        _this.trigger('update', {\n          attachment: eAttachment,\n          targetAttachment: tAttachment\n        });\n      }\n    });\n\n    defer(function () {\n      if (!(_this.options.addTargetClasses === false)) {\n        updateClasses(_this.target, addClasses, allClasses);\n      }\n      updateClasses(_this.element, addClasses, allClasses);\n    });\n\n    return { top: top, left: left };\n  }\n});\n/* globals TetherBase */\n\n'use strict';\n\nvar _TetherBase$Utils = TetherBase.Utils;\nvar getBounds = _TetherBase$Utils.getBounds;\nvar updateClasses = _TetherBase$Utils.updateClasses;\nvar defer = _TetherBase$Utils.defer;\n\nTetherBase.modules.push({\n  position: function position(_ref) {\n    var _this = this;\n\n    var top = _ref.top;\n    var left = _ref.left;\n\n    var _cache = this.cache('element-bounds', function () {\n      return getBounds(_this.element);\n    });\n\n    var height = _cache.height;\n    var width = _cache.width;\n\n    var targetPos = this.getTargetBounds();\n\n    var bottom = top + height;\n    var right = left + width;\n\n    var abutted = [];\n    if (top <= targetPos.bottom && bottom >= targetPos.top) {\n      ['left', 'right'].forEach(function (side) {\n        var targetPosSide = targetPos[side];\n        if (targetPosSide === left || targetPosSide === right) {\n          abutted.push(side);\n        }\n      });\n    }\n\n    if (left <= targetPos.right && right >= targetPos.left) {\n      ['top', 'bottom'].forEach(function (side) {\n        var targetPosSide = targetPos[side];\n        if (targetPosSide === top || targetPosSide === bottom) {\n          abutted.push(side);\n        }\n      });\n    }\n\n    var allClasses = [];\n    var addClasses = [];\n\n    var sides = ['left', 'top', 'right', 'bottom'];\n    allClasses.push(this.getClass('abutted'));\n    sides.forEach(function (side) {\n      allClasses.push(_this.getClass('abutted') + '-' + side);\n    });\n\n    if (abutted.length) {\n      addClasses.push(this.getClass('abutted'));\n    }\n\n    abutted.forEach(function (side) {\n      addClasses.push(_this.getClass('abutted') + '-' + side);\n    });\n\n    defer(function () {\n      if (!(_this.options.addTargetClasses === false)) {\n        updateClasses(_this.target, addClasses, allClasses);\n      }\n      updateClasses(_this.element, addClasses, allClasses);\n    });\n\n    return true;\n  }\n});\n/* globals TetherBase */\n\n'use strict';\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nTetherBase.modules.push({\n  position: function position(_ref) {\n    var top = _ref.top;\n    var left = _ref.left;\n\n    if (!this.options.shift) {\n      return;\n    }\n\n    var shift = this.options.shift;\n    if (typeof this.options.shift === 'function') {\n      shift = this.options.shift.call(this, { top: top, left: left });\n    }\n\n    var shiftTop = undefined,\n        shiftLeft = undefined;\n    if (typeof shift === 'string') {\n      shift = shift.split(' ');\n      shift[1] = shift[1] || shift[0];\n\n      var _shift = shift;\n\n      var _shift2 = _slicedToArray(_shift, 2);\n\n      shiftTop = _shift2[0];\n      shiftLeft = _shift2[1];\n\n      shiftTop = parseFloat(shiftTop, 10);\n      shiftLeft = parseFloat(shiftLeft, 10);\n    } else {\n      shiftTop = shift.top;\n      shiftLeft = shift.left;\n    }\n\n    top += shiftTop;\n    left += shiftLeft;\n\n    return { top: top, left: left };\n  }\n});\nreturn Tether;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/bcronin/lightstep-workspace/lightstep-grafana-plugin/node_modules/tether/dist/js/tether.js\n// module id = 21\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_22__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"app/core/utils/ticks\"\n// module id = 22\n// module chunks = 0","define([\n  'jquery',\n  'grafana/app/core/core',\n],\nfunction ($, core) {\n  'use strict';\n\n  var appEvents = core.appEvents;\n\n  function GraphTooltip(elem, dashboard, scope, getSeriesFn) {\n    var self = this;\n    var ctrl = scope.ctrl;\n    var panel = ctrl.panel;\n\n    var $tooltip = $('<div class=\"graph-tooltip\">');\n\n    this.destroy = function() {\n      $tooltip.remove();\n    };\n\n    this.findHoverIndexFromDataPoints = function(posX, series, last) {\n      var ps = series.datapoints.pointsize;\n      var initial = last*ps;\n      var len = series.datapoints.points.length;\n      for (var j = initial; j < len; j += ps) {\n        // Special case of a non stepped line, highlight the very last point just before a null point\n        if ((!series.lines.steps && series.datapoints.points[initial] != null && series.datapoints.points[j] == null)\n            //normal case\n            || series.datapoints.points[j] > posX) {\n          return Math.max(j - ps,  0)/ps;\n        }\n      }\n      return j/ps - 1;\n    };\n\n    this.findHoverIndexFromData = function(posX, series) {\n      var lower = 0;\n      var upper = series.data.length - 1;\n      var middle;\n      while (true) {\n        if (lower > upper) {\n          return Math.max(upper, 0);\n        }\n        middle = Math.floor((lower + upper) / 2);\n        if (series.data[middle][0] === posX) {\n          return middle;\n        } else if (series.data[middle][0] < posX) {\n          lower = middle + 1;\n        } else {\n          upper = middle - 1;\n        }\n      }\n    };\n\n    this.renderAndShow = function(absoluteTime, innerHtml, pos, xMode) {\n      if (xMode === 'time') {\n        innerHtml = '<div class=\"graph-tooltip-time\">'+ absoluteTime + '</div>' + innerHtml;\n      }\n      $tooltip.html(innerHtml).place_tt(pos.pageX + 20, pos.pageY);\n    };\n\n    this.getMultiSeriesPlotHoverInfo = function(seriesList, pos) {\n      var value, i, series, hoverIndex, hoverDistance, pointTime, yaxis;\n      // 3 sub-arrays, 1st for hidden series, 2nd for left yaxis, 3rd for right yaxis.\n      var results = [[],[],[]];\n\n      //now we know the current X (j) position for X and Y values\n      var last_value = 0; //needed for stacked values\n\n      var minDistance, minTime;\n\n      for (i = 0; i < seriesList.length; i++) {\n        series = seriesList[i];\n\n        if (!series.data.length || (panel.legend.hideEmpty && series.allIsNull)) {\n          // Init value so that it does not brake series sorting\n          results[0].push({ hidden: true, value: 0 });\n          continue;\n        }\n\n        if (!series.data.length || (panel.legend.hideZero && series.allIsZero)) {\n          // Init value so that it does not brake series sorting\n          results[0].push({ hidden: true, value: 0 });\n          continue;\n        }\n\n        hoverIndex = this.findHoverIndexFromData(pos.x, series);\n        hoverDistance = pos.x - series.data[hoverIndex][0];\n        pointTime = series.data[hoverIndex][0];\n\n        // Take the closest point before the cursor, or if it does not exist, the closest after\n        if (! minDistance\n            || (hoverDistance >=0 && (hoverDistance < minDistance || minDistance < 0))\n            || (hoverDistance < 0 && hoverDistance > minDistance)) {\n          minDistance = hoverDistance;\n          minTime = pointTime;\n        }\n\n        if (series.stack) {\n          if (panel.tooltip.value_type === 'individual') {\n            value = series.data[hoverIndex][1];\n          } else if (!series.stack) {\n            value = series.data[hoverIndex][1];\n          } else {\n            last_value += series.data[hoverIndex][1];\n            value = last_value;\n          }\n        } else {\n          value = series.data[hoverIndex][1];\n        }\n\n        // Highlighting multiple Points depending on the plot type\n        if (series.lines.steps || series.stack) {\n          // stacked and steppedLine plots can have series with different length.\n          // Stacked series can increase its length on each new stacked serie if null points found,\n          // to speed the index search we begin always on the last found hoverIndex.\n          hoverIndex = this.findHoverIndexFromDataPoints(pos.x, series, hoverIndex);\n        }\n\n        // Be sure we have a yaxis so that it does not brake series sorting\n        yaxis = 0;\n        if (series.yaxis) {\n          yaxis = series.yaxis.n;\n        }\n\n        results[yaxis].push({\n          value: value,\n          hoverIndex: hoverIndex,\n          color: series.color,\n          label: series.label,\n          time: pointTime,\n          distance: hoverDistance,\n          index: i\n        });\n      }\n\n      // Contat the 3 sub-arrays\n      results = results[0].concat(results[1],results[2]);\n\n      // Time of the point closer to pointer\n      results.time = minTime;\n\n      return results;\n    };\n\n    elem.mouseleave(function () {\n      if (panel.tooltip.shared) {\n        var plot = elem.data().plot;\n        if (plot) {\n          $tooltip.detach();\n          plot.unhighlight();\n        }\n      }\n      appEvents.emit('graph-hover-clear');\n    });\n\n    elem.bind(\"plothover\", function (event, pos, item) {\n      self.show(pos, item);\n\n      // broadcast to other graph panels that we are hovering!\n      pos.panelRelY = (pos.pageY - elem.offset().top) / elem.height();\n      appEvents.emit('graph-hover', {pos: pos, panel: panel});\n    });\n\n    elem.bind(\"plotclick\", function (event, pos, item) {\n      appEvents.emit('graph-click', {pos: pos, panel: panel, item: item, ctrl: ctrl});\n    });\n\n    this.clear = function(plot) {\n      $tooltip.detach();\n      plot.clearCrosshair();\n      plot.unhighlight();\n    };\n\n    this.show = function(pos, item) {\n      var plot = elem.data().plot;\n      var plotData = plot.getData();\n      var xAxes = plot.getXAxes();\n      var xMode = xAxes[0].options.mode;\n      var seriesList = getSeriesFn();\n      var allSeriesMode = panel.tooltip.shared;\n      var group, value, absoluteTime, hoverInfo, i, series, seriesHtml, tooltipFormat;\n\n      // if panelRelY is defined another panel wants us to show a tooltip\n      // get pageX from position on x axis and pageY from relative position in original panel\n      if (pos.panelRelY) {\n        var pointOffset = plot.pointOffset({x: pos.x});\n        if (Number.isNaN(pointOffset.left) || pointOffset.left < 0 || pointOffset.left > elem.width()) {\n          self.clear(plot);\n          return;\n        }\n        pos.pageX = elem.offset().left + pointOffset.left;\n        pos.pageY = elem.offset().top + elem.height() * pos.panelRelY;\n        var isVisible = pos.pageY >= $(window).scrollTop() && pos.pageY <= $(window).innerHeight() + $(window).scrollTop();\n        if (!isVisible) {\n          self.clear(plot);\n          return;\n        }\n        plot.setCrosshair(pos);\n        allSeriesMode = true;\n\n        if (dashboard.sharedCrosshairModeOnly()) {\n          // if only crosshair mode we are done\n          return;\n        }\n      }\n\n      if (seriesList.length === 0) {\n        return;\n      }\n\n      if (seriesList[0].hasMsResolution) {\n        tooltipFormat = 'YYYY-MM-DD HH:mm:ss.SSS';\n      } else {\n        tooltipFormat = 'YYYY-MM-DD HH:mm:ss';\n      }\n\n      if (allSeriesMode) {\n        plot.unhighlight();\n\n        var seriesHoverInfo = self.getMultiSeriesPlotHoverInfo(plotData, pos);\n\n        seriesHtml = '';\n\n        absoluteTime = dashboard.formatDate(seriesHoverInfo.time, tooltipFormat);\n\n        // Dynamically reorder the hovercard for the current time point if the\n        // option is enabled.\n        if (panel.tooltip.sort === 2) {\n          seriesHoverInfo.sort(function(a, b) {\n            return b.value - a.value;\n          });\n        } else if (panel.tooltip.sort === 1) {\n          seriesHoverInfo.sort(function(a, b) {\n            return a.value - b.value;\n          });\n        }\n\n        for (i = 0; i < seriesHoverInfo.length; i++) {\n          hoverInfo = seriesHoverInfo[i];\n\n          if (hoverInfo.hidden) {\n            continue;\n          }\n\n          var highlightClass = '';\n          if (item && hoverInfo.index === item.seriesIndex) {\n            highlightClass = 'graph-tooltip-list-item--highlight';\n          }\n\n          series = seriesList[hoverInfo.index];\n\n          value = series.formatValue(hoverInfo.value);\n          if (value === \"undefined\" || !value) {\n            value = series.valueFormater(hoverInfo.value);\n          }\n\n          seriesHtml += '<div class=\"graph-tooltip-list-item ' + highlightClass + '\"><div class=\"graph-tooltip-series-name\">';\n          seriesHtml += '<i class=\"fa fa-minus\" style=\"color:' + hoverInfo.color +';\"></i> ' + hoverInfo.label + ':</div>';\n          seriesHtml += '<div class=\"graph-tooltip-value\">' + value + '</div></div>';\n          plot.highlight(hoverInfo.index, hoverInfo.hoverIndex);\n        }\n\n        self.renderAndShow(absoluteTime, seriesHtml, pos, xMode);\n      }\n      // single series tooltip\n      else if (item) {\n        series = seriesList[item.seriesIndex];\n        group = '<div class=\"graph-tooltip-list-item\"><div class=\"graph-tooltip-series-name\">';\n        group += '<i class=\"fa fa-minus\" style=\"color:' + item.series.color +';\"></i> ' + series.label + ':</div>';\n\n        if (panel.stack && panel.tooltip.value_type === 'individual') {\n          value = item.datapoint[1] - item.datapoint[2];\n        }\n        else {\n          value = item.datapoint[1];\n        }\n\n        value = series.formatValue(value);\n\n        absoluteTime = dashboard.formatDate(item.datapoint[0], tooltipFormat);\n\n        group += '<div class=\"graph-tooltip-value\">' + value + '</div>';\n\n        self.renderAndShow(absoluteTime, group, pos, xMode);\n      }\n      // no hit\n      else {\n        $tooltip.detach();\n      }\n    };\n  }\n\n  return GraphTooltip;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./graph_tooltip.js","import './vendor/flot/jquery.flot';\nimport $ from 'jquery';\nimport _ from 'lodash';\n\nexport class ThresholdManager {\n  constructor(panelCtrl) {\n    this.panelCtrl = panelCtrl;\n    this.plot = null;\n    this.placeholder = null;\n    this.height = null;\n    this.thresholds = null;\n    this.needsCleanup = false;\n    this.hasSecondYAxis = null;\n\n  }\n\n  getHandleHtml(handleIndex, model, valueStr) {\n    var stateClass = model.colorMode;\n    if (model.colorMode === 'custom') {\n      stateClass = 'critical';\n    }\n\n    return `\n    <div class=\"alert-handle-wrapper alert-handle-wrapper--T${handleIndex}\">\n      <div class=\"alert-handle-line alert-handle-line--${stateClass}\">\n      </div>\n      <div class=\"alert-handle\" data-handle-index=\"${handleIndex}\">\n        <i class=\"icon-gf icon-gf-${stateClass} alert-state-${stateClass}\"></i>\n        <span class=\"alert-handle-value\">${valueStr}<i class=\"alert-handle-grip\"></i></span>\n      </div>\n    </div>`;\n\n  }\n\n  initDragging(evt) {\n    var handleElem = $(evt.currentTarget).parents(\".alert-handle-wrapper\");\n    var handleIndex = $(evt.currentTarget).data(\"handleIndex\");\n\n    var isMoving = false;\n    var lastY = null;\n    var posTop;\n    var plot = this.plot;\n    var panelCtrl = this.panelCtrl;\n    var model = this.thresholds[handleIndex];\n\n    function dragging(evt) {\n      if (lastY === null) {\n        lastY = evt.clientY;\n      } else {\n        var diff = evt.clientY - lastY;\n        posTop = posTop + diff;\n        lastY = evt.clientY;\n        handleElem.css({top: posTop + diff});\n      }\n    }\n\n    function stopped() {\n      isMoving = false;\n      // calculate graph level\n      var graphValue = plot.c2p({left: 0, top: posTop}).y;\n      graphValue = parseInt(graphValue.toFixed(0));\n      model.value = graphValue;\n\n      handleElem.off(\"mousemove\", dragging);\n      handleElem.off(\"mouseup\", dragging);\n      handleElem.off(\"mouseleave\", dragging);\n\n      // trigger digest and render\n      panelCtrl.$scope.$apply(function() {\n        panelCtrl.render();\n        panelCtrl.events.emit('threshold-changed', {threshold: model, handleIndex: handleIndex});\n      });\n    }\n\n    isMoving = true;\n    lastY = null;\n    posTop = handleElem.position().top;\n\n    handleElem.on(\"mousemove\", dragging);\n    handleElem.on(\"mouseup\", stopped);\n    handleElem.on(\"mouseleave\", stopped);\n  }\n\n  cleanUp() {\n    this.placeholder.find(\".alert-handle-wrapper\").remove();\n    this.needsCleanup = false;\n  }\n\n  renderHandle(handleIndex, defaultHandleTopPos) {\n    var model = this.thresholds[handleIndex];\n    var value = model.value;\n    var valueStr = value;\n    var handleTopPos = 0;\n\n    // handle no value\n    if (!_.isNumber(value)) {\n      valueStr = '';\n      handleTopPos = defaultHandleTopPos;\n    } else {\n      var valueCanvasPos = this.plot.p2c({x: 0, y: value});\n      handleTopPos = Math.round(Math.min(Math.max(valueCanvasPos.top, 0), this.height) - 6);\n    }\n\n    var handleElem = $(this.getHandleHtml(handleIndex, model, valueStr));\n    this.placeholder.append(handleElem);\n\n    handleElem.toggleClass('alert-handle-wrapper--no-value', valueStr === '');\n    handleElem.css({top: handleTopPos});\n  }\n\n  shouldDrawHandles() {\n    return !this.hasSecondYAxis && this.panelCtrl.editingThresholds && this.panelCtrl.panel.thresholds.length > 0;\n  }\n\n  prepare(elem, data) {\n    this.hasSecondYAxis = false;\n    for (var i = 0; i < data.length; i++) {\n      if (data[i].yaxis > 1) {\n        this.hasSecondYAxis = true;\n        break;\n      }\n    }\n\n    if (this.shouldDrawHandles()) {\n      var thresholdMargin = this.panelCtrl.panel.thresholds.length > 1 ? '220px' : '110px';\n      elem.css('margin-right', thresholdMargin);\n    } else if (this.needsCleanup) {\n      elem.css('margin-right', '0');\n    }\n  }\n\n  draw(plot) {\n    this.thresholds = this.panelCtrl.panel.thresholds;\n    this.plot = plot;\n    this.placeholder = plot.getPlaceholder();\n\n    if (this.needsCleanup) {\n      this.cleanUp();\n    }\n\n    if (!this.shouldDrawHandles()) {\n      return;\n    }\n\n    this.height = plot.height();\n\n    if (this.thresholds.length > 0) {\n      this.renderHandle(0, 10);\n    }\n    if (this.thresholds.length > 1) {\n      this.renderHandle(1, this.height-30);\n    }\n\n    this.placeholder.off('mousedown', '.alert-handle');\n    this.placeholder.on('mousedown', '.alert-handle', this.initDragging.bind(this));\n    this.needsCleanup = true;\n  }\n\n  addFlotOptions(options, panel) {\n    if (!panel.thresholds || panel.thresholds.length === 0) {\n      return;\n    }\n\n    var gtLimit = Infinity;\n    var ltLimit = -Infinity;\n    var i, threshold, other;\n\n    for (i = 0; i < panel.thresholds.length; i++) {\n      threshold = panel.thresholds[i];\n      if (!_.isNumber(threshold.value)) {\n        continue;\n      }\n\n      var limit;\n      switch (threshold.op) {\n        case 'gt': {\n          limit = gtLimit;\n          // if next threshold is less then op and greater value, then use that as limit\n          if (panel.thresholds.length > i+1) {\n            other = panel.thresholds[i+1];\n            if (other.value > threshold.value) {\n              limit = other.value;\n              ltLimit = limit;\n            }\n          }\n          break;\n        }\n        case 'lt': {\n          limit = ltLimit;\n          // if next threshold is less then op and greater value, then use that as limit\n          if (panel.thresholds.length > i+1) {\n            other = panel.thresholds[i+1];\n            if (other.value < threshold.value) {\n              limit = other.value;\n              gtLimit = limit;\n            }\n          }\n          break;\n        }\n      }\n\n      var fillColor, lineColor;\n      switch (threshold.colorMode) {\n        case 'critical': {\n          fillColor = 'rgba(234, 112, 112, 0.12)';\n          lineColor = 'rgba(237, 46, 24, 0.60)';\n          break;\n        }\n        case 'warning': {\n          fillColor = 'rgba(235, 138, 14, 0.12)';\n          lineColor = 'rgba(247, 149, 32, 0.60)';\n          break;\n        }\n        case 'ok': {\n          fillColor = 'rgba(11, 237, 50, 0.090)';\n          lineColor = 'rgba(6,163,69, 0.60)';\n          break;\n        }\n        case 'custom': {\n          fillColor = threshold.fillColor;\n          lineColor = threshold.lineColor;\n          break;\n        }\n      }\n\n      // fill\n      if (threshold.fill) {\n        options.grid.markings.push({yaxis: {from: threshold.value, to: limit}, color: fillColor});\n      }\n      if (threshold.line) {\n        options.grid.markings.push({yaxis: {from: threshold.value, to: threshold.value}, color: lineColor});\n      }\n    }\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./threshold_manager.js","import _ from 'lodash';\nimport moment from 'moment';\nimport tinycolor from 'tinycolor2';\nimport {MetricsPanelCtrl} from 'grafana/app/plugins/sdk';\nimport {OK_COLOR, ALERTING_COLOR, NO_DATA_COLOR, DEFAULT_ANNOTATION_COLOR, REGION_FILL_ALPHA} from './colors';\n\n// From app/features/annotation/event.ts\nclass AnnotationEvent {\n  constructor() {\n    this.dashboardId=  0;\n    this.panelId = 0;\n    this.userId = 0;\n    this.time = null;\n    this.timeEnd = null;\n    this.isRegion = false;\n    this.text = null;\n    this.type = null;\n    this.tags = null;\n  }\n}\n\nexport class EventManager {\n  constructor(panelCtrl) {\n    this.panelCtrl = panelCtrl\n    this.event = null;\n    this.editorOpen = null;\n\n  }\n\n  editorClosed() {\n    this.event = null;\n    this.editorOpen = false;\n    this.panelCtrl.render();\n  }\n\n  editorOpened() {\n    this.editorOpen = true;\n  }\n\n  updateTime(range) {\n    if (!this.event) {\n      this.event = new AnnotationEvent();\n      this.event.dashboardId = this.panelCtrl.dashboard.id;\n      this.event.panelId = this.panelCtrl.panel.id;\n    }\n\n    // update time\n    this.event.time = moment(range.from);\n    this.event.isRegion = false;\n    if (range.to) {\n      this.event.timeEnd = moment(range.to);\n      this.event.isRegion = true;\n    }\n\n    this.panelCtrl.render();\n  }\n\n  editEvent(event, elem) {\n    this.event = event;\n    this.panelCtrl.render();\n  }\n\n  addFlotEvents(annotations, flotOptions) {\n    if (!this.event && annotations.length === 0) {\n      return;\n    }\n\n    var types = {\n      $__alerting: {\n        color: ALERTING_COLOR,\n        position: 'BOTTOM',\n        markerSize: 5,\n      },\n      $__ok: {\n        color: OK_COLOR,\n        position: 'BOTTOM',\n        markerSize: 5,\n      },\n      $__no_data: {\n        color: NO_DATA_COLOR,\n        position: 'BOTTOM',\n        markerSize: 5,\n      },\n      $__editing: {\n        color: DEFAULT_ANNOTATION_COLOR,\n        position: 'BOTTOM',\n        markerSize: 5,\n      },\n    };\n\n    if (this.event) {\n      if (this.event.isRegion) {\n        annotations = [\n          {\n            isRegion: true,\n            min: this.event.time.valueOf(),\n            timeEnd: this.event.timeEnd.valueOf(),\n            text: this.event.text,\n            eventType: '$__editing',\n            editModel: this.event,\n          },\n        ];\n      } else {\n        annotations = [\n          {\n            min: this.event.time.valueOf(),\n            text: this.event.text,\n            editModel: this.event,\n            eventType: '$__editing',\n          },\n        ];\n      }\n    } else {\n      // annotations from query\n      for (var i = 0; i < annotations.length; i++) {\n        var item = annotations[i];\n\n        // add properties used by jquery flot events\n        item.min = item.time;\n        item.max = item.time;\n        item.eventType = item.source.name;\n\n        if (item.newState) {\n          item.eventType = '$__' + item.newState;\n          continue;\n        }\n\n        if (!types[item.source.name]) {\n          types[item.source.name] = {\n            color: item.source.iconColor,\n            position: 'BOTTOM',\n            markerSize: 5,\n          };\n        }\n      }\n    }\n\n    let regions = getRegions(annotations);\n    addRegionMarking(regions, flotOptions);\n\n    let eventSectionHeight = 20;\n    let eventSectionMargin = 7;\n    flotOptions.grid.eventSectionHeight = eventSectionMargin;\n    flotOptions.xaxis.eventSectionHeight = eventSectionHeight;\n\n    flotOptions.events = {\n      levels: _.keys(types).length + 1,\n      data: annotations,\n      types: types,\n      manager: this,\n    };\n  }\n}\n\nfunction getRegions(events) {\n  return _.filter(events, 'isRegion');\n}\n\nfunction addRegionMarking(regions, flotOptions) {\n  let markings = flotOptions.grid.markings;\n  let defaultColor = DEFAULT_ANNOTATION_COLOR;\n  let fillColor;\n\n  _.each(regions, region => {\n    if (region.source) {\n      fillColor = region.source.iconColor || defaultColor;\n    } else {\n      fillColor = defaultColor;\n    }\n\n    fillColor = addAlphaToRGB(fillColor, REGION_FILL_ALPHA);\n    markings.push({xaxis: {from: region.min, to: region.timeEnd}, color: fillColor});\n  });\n}\n\nfunction addAlphaToRGB(colorString, alpha) {\n  let color = tinycolor(colorString);\n  if (color.isValid()) {\n    color.setAlpha(alpha);\n    return color.toRgbString();\n  } else {\n    return colorString;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./event_manager.js","import _ from 'lodash';\nimport tinycolor from 'tinycolor2';\n\nexport const PALETTE_ROWS = 4;\nexport const PALETTE_COLUMNS = 14;\nexport const DEFAULT_ANNOTATION_COLOR = 'rgba(0, 211, 255, 1)';\nexport const OK_COLOR = \"rgba(11, 237, 50, 1)\";\nexport const ALERTING_COLOR = \"rgba(237, 46, 24, 1)\";\nexport const NO_DATA_COLOR = \"rgba(150, 150, 150, 1)\";\nexport const REGION_FILL_ALPHA = 0.09;\n\nlet colors = [\n  \"#7EB26D\",\"#EAB839\",\"#6ED0E0\",\"#EF843C\",\"#E24D42\",\"#1F78C1\",\"#BA43A9\",\"#705DA0\",\n  \"#508642\",\"#CCA300\",\"#447EBC\",\"#C15C17\",\"#890F02\",\"#0A437C\",\"#6D1F62\",\"#584477\",\n  \"#B7DBAB\",\"#F4D598\",\"#70DBED\",\"#F9BA8F\",\"#F29191\",\"#82B5D8\",\"#E5A8E2\",\"#AEA2E0\",\n  \"#629E51\",\"#E5AC0E\",\"#64B0C8\",\"#E0752D\",\"#BF1B00\",\"#0A50A1\",\"#962D82\",\"#614D93\",\n  \"#9AC48A\",\"#F2C96D\",\"#65C5DB\",\"#F9934E\",\"#EA6460\",\"#5195CE\",\"#D683CE\",\"#806EB7\",\n  \"#3F6833\",\"#967302\",\"#2F575E\",\"#99440A\",\"#58140C\",\"#052B51\",\"#511749\",\"#3F2B5B\",\n  \"#E0F9D7\",\"#FCEACA\",\"#CFFAFF\",\"#F9E2D2\",\"#FCE2DE\",\"#BADFF4\",\"#F9D9F9\",\"#DEDAF7\"\n];\n\nexport default colors;\n\nexport function sortColorsByHue(hexColors) {\n  let hslColors = _.map(hexColors, hexToHsl);\n\n  let sortedHSLColors = _.sortBy(hslColors, ['h']);\n  sortedHSLColors = _.chunk(sortedHSLColors, PALETTE_ROWS);\n  sortedHSLColors = _.map(sortedHSLColors, chunk => {\n    return _.sortBy(chunk, 'l');\n  });\n  sortedHSLColors = _.flattenDeep(_.zip(...sortedHSLColors));\n\n  return _.map(sortedHSLColors, hslToHex);\n}\n\nexport function hexToHsl(color) {\n  return tinycolor(color).toHsl();\n}\n\nexport function hslToHex(color) {\n  return tinycolor(color).toHexString();\n}\n\nexport let sortedColors = sortColorsByHue(colors);\n\n\n\n// WEBPACK FOOTER //\n// ./colors.js","import _ from 'lodash';\n\n/**\n * Convert series into array of series values.\n * @param data Array of series\n */\nexport function getSeriesValues(data) {\n  let values = [];\n\n  // Count histogam stats\n  for (let i = 0; i < data.length; i++) {\n    let series = data[i];\n    for (let j = 0; j < series.data.length; j++) {\n      if (series.data[j][1] !== null) {\n        values.push(series.data[j][1]);\n      }\n    }\n  }\n\n  return values;\n}\n\n/**\n * Convert array of values into timeseries-like histogram:\n * [[val_1, count_1], [val_2, count_2], ..., [val_n, count_n]]\n * @param values\n * @param bucketSize\n */\nexport function convertValuesToHistogram(values, bucketSize) {\n  let histogram = {};\n\n  for (let i = 0; i < values.length; i++) {\n    let bound = getBucketBound(values[i], bucketSize);\n    if (histogram[bound]) {\n      histogram[bound] = histogram[bound] + 1;\n    } else {\n      histogram[bound] = 1;\n    }\n  }\n\n  let histogam_series = _.map(histogram, (count, bound) => {\n    return [Number(bound), count];\n  });\n\n  // Sort by Y axis values\n  return _.sortBy(histogam_series, point => point[0]);\n}\n\nfunction getBucketBound(value, bucketSize) {\n  return Math.floor(value / bucketSize) * bucketSize;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./histogram.js","define([\n  'angular',\n  'lodash',\n  'jquery',\n],\nfunction (angular, _, $) {\n  'use strict';\n\n  var module = angular.module('grafana.directives');\n\n  module.directive('lightstepGraphLegend', function(popoverSrv, $timeout) {\n\n    return {\n      link: function(scope, elem) {\n        var $container = $('<section class=\"graph-legend\"></section>');\n        var firstRender = true;\n        var ctrl = scope.ctrl;\n        var panel = ctrl.panel;\n        var data;\n        var seriesList;\n        var i;\n\n        ctrl.events.on('render', function() {\n          data = ctrl.seriesList;\n          if (data) {\n            render();\n          }\n        });\n\n        function getSeriesIndexForElement(el) {\n          return el.parents('[data-series-index]').data('series-index');\n        }\n\n        function openColorSelector(e) {\n          // if we clicked inside poup container ignore click\n          if ($(e.target).parents('.popover').length) {\n            return;\n          }\n\n          var el = $(e.currentTarget).find('.fa-minus');\n          var index = getSeriesIndexForElement(el);\n          var series = seriesList[index];\n\n          $timeout(function() {\n            popoverSrv.show({\n              element: el[0],\n              position: 'bottom center',\n              template: '<series-color-picker series=\"series\" onToggleAxis=\"toggleAxis\" onColorChange=\"colorSelected\">' +\n                '</series-color-picker>',\n              openOn: 'hover',\n              model: {\n                series: series,\n                toggleAxis: function() {\n                  ctrl.toggleAxis(series);\n                },\n                colorSelected: function(color) {\n                  ctrl.changeSeriesColor(series, color);\n                }\n              },\n            });\n          });\n        }\n\n        function toggleSeries(e) {\n          var el = $(e.currentTarget);\n          var index = getSeriesIndexForElement(el);\n          var seriesInfo = seriesList[index];\n          var scrollPosition = $($container.children('tbody')).scrollTop();\n          ctrl.toggleSeries(seriesInfo, e);\n          $($container.children('tbody')).scrollTop(scrollPosition);\n        }\n\n        function sortLegend(e) {\n          var el = $(e.currentTarget);\n          var stat = el.data('stat');\n\n          if (stat !== panel.legend.sort) { panel.legend.sortDesc = null; }\n\n          // if already sort ascending, disable sorting\n          if (panel.legend.sortDesc === false) {\n            panel.legend.sort = null;\n            panel.legend.sortDesc = null;\n            render();\n            return;\n          }\n\n          panel.legend.sortDesc = !panel.legend.sortDesc;\n          panel.legend.sort = stat;\n          render();\n        }\n\n        function getTableHeaderHtml(statName) {\n          if (!panel.legend[statName]) { return \"\"; }\n          var html = '<th class=\"pointer\" data-stat=\"' + statName + '\">' + statName;\n\n          if (panel.legend.sort === statName) {\n            var cssClass = panel.legend.sortDesc ? 'fa fa-caret-down' : 'fa fa-caret-up' ;\n            html += ' <span class=\"' + cssClass + '\"></span>';\n          }\n\n          return html + '</th>';\n        }\n\n        function render() {\n          if (!ctrl.panel.legend.show) {\n            elem.empty();\n            firstRender = true;\n            return;\n          }\n\n          if (firstRender) {\n            elem.append($container);\n            $container.on('click', '.graph-legend-icon', openColorSelector);\n            $container.on('click', '.graph-legend-alias', toggleSeries);\n            $container.on('click', 'th', sortLegend);\n            firstRender = false;\n          }\n\n          seriesList = data;\n\n          $container.empty();\n\n          // Set min-width if side style and there is a value, otherwise remove the CSS propery\n          var width = panel.legend.rightSide && panel.legend.sideWidth ? panel.legend.sideWidth + \"px\" : \"\";\n          $container.css(\"min-width\", width);\n\n          $container.toggleClass('graph-legend-table', panel.legend.alignAsTable === true);\n\n          var tableHeaderElem;\n          if (panel.legend.alignAsTable) {\n            var header = '<tr>';\n            header += '<th colspan=\"2\" style=\"text-align:left\"></th>';\n            if (panel.legend.values) {\n              header += getTableHeaderHtml('min');\n              header += getTableHeaderHtml('max');\n              header += getTableHeaderHtml('avg');\n              header += getTableHeaderHtml('current');\n              header += getTableHeaderHtml('total');\n            }\n            header += '</tr>';\n            tableHeaderElem = $(header);\n          }\n\n          if (panel.legend.sort) {\n            seriesList = _.sortBy(seriesList, function(series) {\n              return series.stats[panel.legend.sort];\n            });\n            if (panel.legend.sortDesc) {\n              seriesList = seriesList.reverse();\n            }\n          }\n\n          var seriesShown = 0;\n          var seriesElements = [];\n\n          for (i = 0; i < seriesList.length; i++) {\n            var series = seriesList[i];\n\n            if (series.hideFromLegend(panel.legend)) {\n              continue;\n            }\n\n            var html = '<div class=\"graph-legend-series';\n\n            if (series.yaxis === 2) { html += ' graph-legend-series--right-y'; }\n            if (ctrl.hiddenSeries[series.alias]) { html += ' graph-legend-series-hidden'; }\n            html += '\" data-series-index=\"' + i + '\">';\n            html += '<div class=\"graph-legend-icon\">';\n            html += '<i class=\"fa fa-minus pointer\" style=\"color:' + series.color + '\"></i>';\n            html += '</div>';\n\n            html += '<a class=\"graph-legend-alias pointer\" title=\"' + _.escape(series.label) + '\">' + _.escape(series.label) + '</a>';\n\n            if (panel.legend.values) {\n              var avg = series.formatValue(series.stats.avg);\n              var current = series.formatValue(series.stats.current);\n              var min = series.formatValue(series.stats.min);\n              var max = series.formatValue(series.stats.max);\n              var total = series.formatValue(series.stats.total);\n\n              if (panel.legend.min) { html += '<div class=\"graph-legend-value min\">' + min + '</div>'; }\n              if (panel.legend.max) { html += '<div class=\"graph-legend-value max\">' + max + '</div>'; }\n              if (panel.legend.avg) { html += '<div class=\"graph-legend-value avg\">' + avg + '</div>'; }\n              if (panel.legend.current) { html += '<div class=\"graph-legend-value current\">' + current + '</div>'; }\n              if (panel.legend.total) { html += '<div class=\"graph-legend-value total\">' + total + '</div>'; }\n            }\n\n            html += '</div>';\n            seriesElements.push($(html));\n\n            seriesShown++;\n          }\n\n          if (panel.legend.alignAsTable) {\n            var maxHeight = ctrl.height;\n\n            if (!panel.legend.rightSide) {\n              maxHeight = maxHeight/2;\n            }\n\n            var topPadding = 6;\n            var tbodyElem = $('<tbody></tbody>');\n            tbodyElem.css(\"max-height\", maxHeight - topPadding);\n            tbodyElem.append(tableHeaderElem);\n            tbodyElem.append(seriesElements);\n            $container.append(tbodyElem);\n          } else {\n            $container.append(seriesElements);\n          }\n        }\n      }\n    };\n  });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./legend.js","define([\n  'angular',\n  'jquery',\n  'lodash',\n], function(angular, jquery, _) {\n  'use strict';\n\n  var module = angular.module('grafana.controllers');\n\n  module.controller('SeriesOverridesCtrl', function($scope, $element, popoverSrv) {\n    $scope.overrideMenu = [];\n    $scope.currentOverrides = [];\n    $scope.override = $scope.override || {};\n\n    $scope.addOverrideOption = function(name, propertyName, values) {\n      var option = {};\n      option.text = name;\n      option.propertyName = propertyName;\n      option.index = $scope.overrideMenu.length;\n      option.values = values;\n\n      option.submenu = _.map(values, function(value) {\n        return { text: String(value), value: value };\n      });\n\n      $scope.overrideMenu.push(option);\n    };\n\n    $scope.setOverride = function(item, subItem) {\n      // handle color overrides\n      if (item.propertyName === 'color') {\n        $scope.openColorSelector($scope.override['color']);\n        return;\n      }\n\n      $scope.override[item.propertyName] = subItem.value;\n\n      // automatically disable lines for this series and the fill bellow to series\n      // can be removed by the user if they still want lines\n      if (item.propertyName === 'fillBelowTo') {\n        $scope.override['lines'] = false;\n        $scope.ctrl.addSeriesOverride({alias: subItem.value, lines: false });\n      }\n\n      $scope.updateCurrentOverrides();\n      $scope.ctrl.render();\n    };\n\n    $scope.colorSelected = function(color) {\n      $scope.override['color'] = color;\n      $scope.updateCurrentOverrides();\n      $scope.ctrl.render();\n    };\n\n    $scope.openColorSelector = function(color) {\n      var fakeSeries = {color: color};\n      popoverSrv.show({\n        element: $element.find(\".dropdown\")[0],\n        position: 'top center',\n        openOn: 'click',\n        template: '<series-color-picker series=\"series\" onColorChange=\"colorSelected\" />',\n        model: {\n          autoClose: true,\n          colorSelected: $scope.colorSelected,\n          series: fakeSeries\n        },\n        onClose: function() {\n          $scope.ctrl.render();\n        }\n      });\n    };\n\n    $scope.removeOverride = function(option) {\n      delete $scope.override[option.propertyName];\n      $scope.updateCurrentOverrides();\n      $scope.ctrl.refresh();\n    };\n\n    $scope.getSeriesNames = function() {\n      return _.map($scope.ctrl.seriesList, function(series) {\n        return series.alias;\n      });\n    };\n\n    $scope.updateCurrentOverrides = function() {\n      $scope.currentOverrides = [];\n      _.each($scope.overrideMenu, function(option) {\n        var value = $scope.override[option.propertyName];\n        if (_.isUndefined(value)) { return; }\n        $scope.currentOverrides.push({\n          name: option.text,\n          propertyName: option.propertyName,\n          value: String(value)\n        });\n      });\n    };\n\n    $scope.addOverrideOption('Bars', 'bars', [true, false]);\n    $scope.addOverrideOption('Lines', 'lines', [true, false]);\n    $scope.addOverrideOption('Line fill', 'fill', [0,1,2,3,4,5,6,7,8,9,10]);\n    $scope.addOverrideOption('Line width', 'linewidth', [0,1,2,3,4,5,6,7,8,9,10]);\n    $scope.addOverrideOption('Null point mode', 'nullPointMode', ['connected', 'null', 'null as zero']);\n    $scope.addOverrideOption('Fill below to', 'fillBelowTo', $scope.getSeriesNames());\n    $scope.addOverrideOption('Staircase line', 'steppedLine', [true, false]);\n    $scope.addOverrideOption('Dashes', 'dashes', [true, false]);\n    $scope.addOverrideOption('Dash Length', 'dashLength', [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]);\n    $scope.addOverrideOption('Dash Space', 'spaceLength', [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]);\n    $scope.addOverrideOption('Points', 'points', [true, false]);\n    $scope.addOverrideOption('Points Radius', 'pointradius', [1,2,3,4,5]);\n    $scope.addOverrideOption('Stack', 'stack', [true, false, 'A', 'B', 'C', 'D']);\n    $scope.addOverrideOption('Color', 'color', ['change']);\n    $scope.addOverrideOption('Y-axis', 'yaxis', [1, 2]);\n    $scope.addOverrideOption('Z-index', 'zindex', [-3,-2,-1,0,1,2,3]);\n    $scope.addOverrideOption('Transform', 'transform', ['negative-Y']);\n    $scope.addOverrideOption('Legend', 'legend', [true, false]);\n    $scope.updateCurrentOverrides();\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./series_overrides_ctrl.js","///<reference path=\"../../../headers/common.d.ts\" />\n\nimport coreModule from 'grafana/app/core/core_module';\n\nexport class ThresholdFormCtrl {\n  /** @ngInject */\n  constructor($scope) {\n    this.panelCtrl = $scope.panelCtrl;\n    this.panel = this.panelCtrl.panel;\n\n    if (this.panel.alert) {\n      this.disabled = true;\n    }\n\n    var unbindDestroy = $scope.$on(\"$destroy\", () => {\n      this.panelCtrl.editingThresholds = false;\n      this.panelCtrl.render();\n      unbindDestroy();\n    });\n\n    this.panelCtrl.editingThresholds = true;\n  }\n\n  addThreshold() {\n    this.panel.thresholds.push({value: undefined, colorMode: \"critical\", op: 'gt', fill: true, line: true});\n    this.panelCtrl.render();\n  }\n\n  removeThreshold(index) {\n    this.panel.thresholds.splice(index, 1);\n    this.panelCtrl.render();\n  }\n\n  render() {\n    this.panelCtrl.render();\n  }\n\n  onFillColorChange(index) {\n    return (newColor) => {\n      this.panel.thresholds[index].fillColor = newColor;\n      this.render();\n    };\n  }\n\n  onLineColorChange(index) {\n    return (newColor) => {\n      this.panel.thresholds[index].lineColor = newColor;\n      this.render();\n    };\n  }\n}\n\nvar template = `\n<div class=\"gf-form-group\">\n  <h5>Thresholds</h5>\n  <p class=\"muted\" ng-show=\"ctrl.disabled\">\n    Visual thresholds options <strong>disabled.</strong>\n    Visit the Alert tab update your thresholds. <br>\n    To re-enable thresholds, the alert rule must be deleted from this panel.\n  </p>\n  <div ng-class=\"{'thresholds-form-disabled': ctrl.disabled}\">\n    <div class=\"gf-form-inline\" ng-repeat=\"threshold in ctrl.panel.thresholds\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label\">T{{$index+1}}</label>\n      </div>\n\n      <div class=\"gf-form\">\n        <div class=\"gf-form-select-wrapper\">\n          <select class=\"gf-form-input\" ng-model=\"threshold.op\"\n                  ng-options=\"f for f in ['gt', 'lt']\" ng-change=\"ctrl.render()\" ng-disabled=\"ctrl.disabled\"></select>\n        </div>\n        <input type=\"number\" ng-model=\"threshold.value\" class=\"gf-form-input width-8\"\n               ng-change=\"ctrl.render()\" placeholder=\"value\" ng-disabled=\"ctrl.disabled\">\n      </div>\n\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label\">Color</label>\n        <div class=\"gf-form-select-wrapper\">\n          <select class=\"gf-form-input\" ng-model=\"threshold.colorMode\"\n                  ng-options=\"f for f in ['custom', 'critical', 'warning', 'ok']\" ng-change=\"ctrl.render()\" ng-disabled=\"ctrl.disabled\">\n          </select>\n        </div>\n      </div>\n\n      <gf-form-switch class=\"gf-form\" label=\"Fill\" checked=\"threshold.fill\"\n                      on-change=\"ctrl.render()\" ng-disabled=\"ctrl.disabled\"></gf-form-switch>\n\n      <div class=\"gf-form\" ng-if=\"threshold.fill && threshold.colorMode === 'custom'\">\n        <label class=\"gf-form-label\">Fill color</label>\n        <span class=\"gf-form-label\">\n          <color-picker color=\"threshold.fillColor\" onChange=\"ctrl.onFillColorChange($index)\"></color-picker>\n        </span>\n      </div>\n\n      <gf-form-switch class=\"gf-form\" label=\"Line\" checked=\"threshold.line\"\n                      on-change=\"ctrl.render()\" ng-disabled=\"ctrl.disabled\"></gf-form-switch>\n\n      <div class=\"gf-form\" ng-if=\"threshold.line && threshold.colorMode === 'custom'\">\n        <label class=\"gf-form-label\">Line color</label>\n        <span class=\"gf-form-label\">\n          <color-picker color=\"threshold.lineColor\" onChange=\"ctrl.onLineColorChange($index)\"></color-picker>\n        </span>\n      </div>\n\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label\">\n          <a class=\"pointer\" ng-click=\"ctrl.removeThreshold($index)\" ng-disabled=\"ctrl.disabled\">\n            <i class=\"fa fa-trash\"></i>\n          </a>\n        </label>\n      </div>\n    </div>\n\n    <div class=\"gf-form-button-row\">\n      <button class=\"btn btn-inverse\" ng-click=\"ctrl.addThreshold()\" ng-disabled=\"ctrl.disabled\">\n        <i class=\"fa fa-plus\"></i>&nbsp;Add Threshold\n      </button>\n    </div>\n  </div>\n</div>\n`;\n\ncoreModule.directive('lightstepGraphThresholdForm', function() {\n  return {\n    restrict: 'E',\n    template: template,\n    controller: ThresholdFormCtrl,\n    bindToController: true,\n    controllerAs: 'ctrl',\n    scope: {\n      panelCtrl: \"=\"\n    }\n  };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./thresholds_form.js","module.exports = __WEBPACK_EXTERNAL_MODULE_31__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"app/core/core_module\"\n// module id = 31\n// module chunks = 0","var template = `\n<div class=\"graph-wrapper\" ng-class=\"{'graph-legend-rightside': ctrl.panel.legend.rightSide}\">\n  <div class=\"graph-canvas-wrapper\">\n\n    <div class=\"datapoints-warning\" ng-if=\"ctrl.dataWarning\">\n      <span class=\"small\" bs-tooltip=\"ctrl.dataWarning.tip\">{{ctrl.dataWarning.title}}</span>\n    </div>\n\n    <div lightstep-graph class=\"histogram-chart\" ng-dblclick=\"ctrl.zoomOut()\">\n    </div>\n\n  </div>\n\n  <div class=\"graph-legend-wrapper\" lightstep-graph-legend></div>\n  </div>\n\n<div class=\"clearfix\"></div>\n`;\n\nexport default template;\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./template.js","module.exports = __WEBPACK_EXTERNAL_MODULE_33__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"app/core/config\"\n// module id = 33\n// module chunks = 0","import _ from 'lodash';\nimport TimeSeries from 'grafana/app/core/time_series2';\n\nlet colors = [\n  \"#7EB26D\",\"#EAB839\",\"#6ED0E0\",\"#EF843C\",\"#E24D42\",\"#1F78C1\",\"#BA43A9\",\"#705DA0\",\n  \"#508642\",\"#CCA300\",\"#447EBC\",\"#C15C17\",\"#890F02\",\"#0A437C\",\"#6D1F62\",\"#584477\",\n  \"#B7DBAB\",\"#F4D598\",\"#70DBED\",\"#F9BA8F\",\"#F29191\",\"#82B5D8\",\"#E5A8E2\",\"#AEA2E0\",\n  \"#629E51\",\"#E5AC0E\",\"#64B0C8\",\"#E0752D\",\"#BF1B00\",\"#0A50A1\",\"#962D82\",\"#614D93\",\n  \"#9AC48A\",\"#F2C96D\",\"#65C5DB\",\"#F9934E\",\"#EA6460\",\"#5195CE\",\"#D683CE\",\"#806EB7\",\n  \"#3F6833\",\"#967302\",\"#2F575E\",\"#99440A\",\"#58140C\",\"#052B51\",\"#511749\",\"#3F2B5B\",\n  \"#E0F9D7\",\"#FCEACA\",\"#CFFAFF\",\"#F9E2D2\",\"#FCE2DE\",\"#BADFF4\",\"#F9D9F9\",\"#DEDAF7\"\n];\n\nexport class DataProcessor {\n\n  constructor(panel) {\n    this.panel = panel;\n  }\n\n  getSeriesList(options) {\n    if (!options.dataList || options.dataList.length === 0) {\n      return [];\n    }\n\n    // auto detect xaxis mode\n    var firstItem;\n    if (options.dataList && options.dataList.length > 0) {\n      firstItem = options.dataList[0];\n      let autoDetectMode = this.getAutoDetectXAxisMode(firstItem);\n      if (this.panel.xaxis.mode !== autoDetectMode) {\n        this.panel.xaxis.mode = autoDetectMode;\n        this.setPanelDefaultsForNewXAxisMode();\n      }\n    }\n\n    switch (this.panel.xaxis.mode) {\n      case 'series':\n      case 'histogram':\n      case 'time': {\n        return options.dataList.map((item, index) => {\n          return this.timeSeriesHandler(item, index, options);\n        });\n      }\n      case 'field': {\n        return this.customHandler(firstItem);\n      }\n    }\n  }\n\n  getAutoDetectXAxisMode(firstItem) {\n    switch (firstItem.type) {\n      case 'docs': return 'field';\n      case 'table': return 'field';\n      default: {\n        if (this.panel.xaxis.mode === 'series') {\n          return 'series';\n        }\n        if (this.panel.xaxis.mode === 'histogram') {\n          return 'histogram';\n        }\n        return 'time';\n      }\n    }\n  }\n\n  setPanelDefaultsForNewXAxisMode() {\n    switch (this.panel.xaxis.mode) {\n      case 'time': {\n        this.panel.bars = false;\n        this.panel.lines = true;\n        this.panel.points = false;\n        this.panel.legend.show = true;\n        this.panel.tooltip.shared = true;\n        this.panel.xaxis.values = [];\n        break;\n      }\n      case 'series': {\n        this.panel.bars = true;\n        this.panel.lines = false;\n        this.panel.points = false;\n        this.panel.stack = false;\n        this.panel.legend.show = false;\n        this.panel.tooltip.shared = false;\n        this.panel.xaxis.values = ['total'];\n        break;\n      }\n      case 'histogram': {\n        this.panel.bars = true;\n        this.panel.lines = false;\n        this.panel.points = false;\n        this.panel.stack = false;\n        this.panel.legend.show = false;\n        this.panel.tooltip.shared = false;\n        break;\n      }\n    }\n  }\n\n  timeSeriesHandler(seriesData, index, options) {\n    var datapoints = seriesData.datapoints || [];\n    var alias = seriesData.target;\n\n    var colorIndex = index % colors.length;\n    var color = this.panel.aliasColors[alias] || colors[colorIndex];\n\n    var series = new TimeSeries({datapoints: datapoints, alias: alias, color: color, unit: seriesData.unit});\n\n    if (datapoints && datapoints.length > 0) {\n      var last = datapoints[datapoints.length - 1][1];\n      var from = options.range.from;\n      if (last - from < -10000) {\n        series.isOutsideRange = true;\n      }\n    }\n\n    return series;\n  }\n\n  customHandler(dataItem) {\n    let nameField = this.panel.xaxis.name;\n    if (!nameField) {\n      throw {message: 'No field name specified to use for x-axis, check your axes settings'};\n    }\n    return [];\n  }\n\n  validateXAxisSeriesValue() {\n    switch (this.panel.xaxis.mode) {\n      case 'series': {\n        if (this.panel.xaxis.values.length === 0) {\n          this.panel.xaxis.values = ['total'];\n          return;\n        }\n\n        var validOptions = this.getXAxisValueOptions({});\n        var found = _.find(validOptions, {value: this.panel.xaxis.values[0]});\n        if (!found) {\n          this.panel.xaxis.values = ['total'];\n        }\n        return;\n      }\n    }\n  }\n\n  getDataFieldNames(dataList, onlyNumbers) {\n    if (dataList.length === 0) {\n      return [];\n    }\n\n    let fields = [];\n    var firstItem = dataList[0];\n    let fieldParts = [];\n\n    function getPropertiesRecursive(obj) {\n      _.forEach(obj, (value, key) => {\n        if (_.isObject(value)) {\n          fieldParts.push(key);\n          getPropertiesRecursive(value);\n        } else {\n          if (!onlyNumbers || _.isNumber(value)) {\n            let field = fieldParts.concat(key).join('.');\n            fields.push(field);\n          }\n        }\n      });\n      fieldParts.pop();\n    }\n\n    if (firstItem.type === 'docs') {\n      if (firstItem.datapoints.length === 0) {\n        return [];\n      }\n      getPropertiesRecursive(firstItem.datapoints[0]);\n    }\n\n    return fields;\n  }\n\n  getXAxisValueOptions(options) {\n    switch (this.panel.xaxis.mode) {\n      case 'series': {\n        return [\n          {text: 'Avg', value: 'avg'},\n          {text: 'Min', value: 'min'},\n          {text: 'Max', value: 'max'},\n          {text: 'Total', value: 'total'},\n          {text: 'Count', value: 'count'},\n        ];\n      }\n    }\n\n    return [];\n  }\n\n  pluckDeep(obj, property) {\n    let propertyParts = property.split('.');\n    let value = obj;\n    for (let i = 0; i < propertyParts.length; ++i) {\n      if (value[propertyParts[i]]) {\n        value = value[propertyParts[i]];\n      } else {\n        return undefined;\n      }\n    }\n    return value;\n  }\n\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./data_processor.js","module.exports = __WEBPACK_EXTERNAL_MODULE_35__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"app/core/time_series2\"\n// module id = 35\n// module chunks = 0","import kbn from 'grafana/app/core/utils/kbn';\n\nexport class AxesEditorCtrl {\n  /** @ngInject **/\n  constructor($scope, $q) {\n    this.$scope = $scope;\n    this.$q = $q;\n    this.panelCtrl = $scope.ctrl;\n    this.panel = this.panelCtrl.panel;\n    this.$scope.ctrl = this;\n\n    this.unitFormats = kbn.getUnitFormats();\n\n    this.logScales = {\n      'linear': 1,\n      'log (base 2)': 2,\n      'log (base 10)': 10,\n      'log (base 32)': 32,\n      'log (base 1024)': 1024\n    };\n\n    this.xAxisModes = {\n      'Time': 'time',\n      'Series': 'series',\n      'Histogram': 'histogram'\n      // 'Data field': 'field',\n    };\n\n    this.xAxisStatOptions =  [\n      {text: 'Avg', value: 'avg'},\n      {text: 'Min', value: 'min'},\n      {text: 'Max', value: 'max'},\n      {text: 'Total', value: 'total'},\n      {text: 'Count', value: 'count'},\n      {text: 'Current', value: 'current'},\n    ];\n\n    if (this.panel.xaxis.mode === 'custom') {\n      if (!this.panel.xaxis.name) {\n        this.panel.xaxis.name = 'specify field';\n      }\n    }\n  }\n\n  setUnitFormat(axis, subItem) {\n    axis.format = subItem.value;\n    this.panelCtrl.render();\n  }\n\n  render() {\n    this.panelCtrl.render();\n  }\n\n  xAxisModeChanged()  {\n    this.panelCtrl.processor.setPanelDefaultsForNewXAxisMode();\n    this.panelCtrl.onDataReceived(this.panelCtrl.dataList);\n  }\n\n  xAxisValueChanged() {\n    this.panelCtrl.onDataReceived(this.panelCtrl.dataList);\n  }\n\n  getDataFieldNames(onlyNumbers) {\n    var props = this.panelCtrl.processor.getDataFieldNames(this.panelCtrl.dataList, onlyNumbers);\n    var items = props.map(prop => {\n      return {text: prop, value: prop};\n    });\n\n    return this.$q.when(items);\n  }\n\n}\n\n/** @ngInject **/\nexport function axesEditorComponent() {\n  'use strict';\n  return {\n    restrict: 'E',\n    scope: true,\n    templateUrl: 'public/plugins/grafana-lightstep-graph/axes_editor.html',\n    controller: AxesEditorCtrl,\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./axes_editor.js"],"sourceRoot":""}